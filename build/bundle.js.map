{"version":3,"file":"bundle.js","sources":["../../node_modules/svelte/internal/index.mjs","../../node_modules/d3-selection/src/namespaces.js","../../node_modules/d3-selection/src/namespace.js","../../node_modules/d3-selection/src/creator.js","../../node_modules/d3-selection/src/selector.js","../../node_modules/d3-selection/src/array.js","../../node_modules/d3-selection/src/selectorAll.js","../../node_modules/d3-selection/src/matcher.js","../../node_modules/d3-selection/src/selection/selectChild.js","../../node_modules/d3-selection/src/selection/selectChildren.js","../../node_modules/d3-selection/src/selection/sparse.js","../../node_modules/d3-selection/src/selection/enter.js","../../node_modules/d3-selection/src/constant.js","../../node_modules/d3-selection/src/selection/data.js","../../node_modules/d3-selection/src/selection/sort.js","../../node_modules/d3-selection/src/selection/attr.js","../../node_modules/d3-selection/src/window.js","../../node_modules/d3-selection/src/selection/style.js","../../node_modules/d3-selection/src/selection/property.js","../../node_modules/d3-selection/src/selection/classed.js","../../node_modules/d3-selection/src/selection/text.js","../../node_modules/d3-selection/src/selection/html.js","../../node_modules/d3-selection/src/selection/raise.js","../../node_modules/d3-selection/src/selection/lower.js","../../node_modules/d3-selection/src/selection/insert.js","../../node_modules/d3-selection/src/selection/remove.js","../../node_modules/d3-selection/src/selection/clone.js","../../node_modules/d3-selection/src/selection/on.js","../../node_modules/d3-selection/src/selection/dispatch.js","../../node_modules/d3-selection/src/selection/index.js","../../node_modules/d3-selection/src/select.js","../../node_modules/d3-selection/src/pointer.js","../../node_modules/d3-selection/src/sourceEvent.js","../../node_modules/d3-fetch/src/json.js","../../node_modules/d3-array/src/ascending.js","../../node_modules/d3-array/src/bisector.js","../../node_modules/d3-selection/src/selection/select.js","../../node_modules/d3-selection/src/selection/selectAll.js","../../node_modules/d3-selection/src/selection/filter.js","../../node_modules/d3-selection/src/selection/exit.js","../../node_modules/d3-selection/src/selection/join.js","../../node_modules/d3-selection/src/selection/merge.js","../../node_modules/d3-selection/src/selection/order.js","../../node_modules/d3-selection/src/selection/call.js","../../node_modules/d3-selection/src/selection/nodes.js","../../node_modules/d3-selection/src/selection/node.js","../../node_modules/d3-selection/src/selection/size.js","../../node_modules/d3-selection/src/selection/empty.js","../../node_modules/d3-selection/src/selection/each.js","../../node_modules/d3-selection/src/selection/append.js","../../node_modules/d3-selection/src/selection/datum.js","../../node_modules/d3-selection/src/selection/iterator.js","../../node_modules/d3-array/src/bisect.js","../../node_modules/d3-array/src/number.js","../../node_modules/d3-array/src/ticks.js","../../node_modules/d3-array/src/range.js","../../node_modules/d3-scale/src/init.js","../../node_modules/d3-scale/src/ordinal.js","../../node_modules/d3-scale/src/band.js","../../node_modules/d3-color/src/define.js","../../node_modules/d3-color/src/color.js","../../node_modules/d3-interpolate/src/constant.js","../../node_modules/d3-interpolate/src/color.js","../../node_modules/d3-interpolate/src/rgb.js","../../node_modules/d3-interpolate/src/numberArray.js","../../node_modules/d3-interpolate/src/array.js","../../node_modules/d3-interpolate/src/date.js","../../node_modules/d3-interpolate/src/number.js","../../node_modules/d3-interpolate/src/object.js","../../node_modules/d3-interpolate/src/string.js","../../node_modules/d3-interpolate/src/value.js","../../node_modules/d3-interpolate/src/round.js","../../node_modules/d3-interpolate/src/transform/decompose.js","../../node_modules/d3-interpolate/src/transform/parse.js","../../node_modules/d3-interpolate/src/transform/index.js","../../node_modules/d3-interpolate/src/zoom.js","../../node_modules/d3-scale/src/number.js","../../node_modules/d3-scale/src/continuous.js","../../node_modules/d3-scale/src/constant.js","../../node_modules/d3-format/src/formatDecimal.js","../../node_modules/d3-format/src/exponent.js","../../node_modules/d3-format/src/formatSpecifier.js","../../node_modules/d3-format/src/formatPrefixAuto.js","../../node_modules/d3-format/src/formatRounded.js","../../node_modules/d3-format/src/formatTypes.js","../../node_modules/d3-format/src/identity.js","../../node_modules/d3-format/src/locale.js","../../node_modules/d3-format/src/defaultLocale.js","../../node_modules/d3-format/src/formatGroup.js","../../node_modules/d3-format/src/formatNumerals.js","../../node_modules/d3-format/src/formatTrim.js","../../node_modules/d3-scale/src/tickFormat.js","../../node_modules/d3-format/src/precisionPrefix.js","../../node_modules/d3-format/src/precisionRound.js","../../node_modules/d3-format/src/precisionFixed.js","../../node_modules/d3-scale/src/linear.js","../../node_modules/d3-timer/src/timer.js","../../node_modules/d3-scale-chromatic/src/colors.js","../../node_modules/d3-scale-chromatic/src/categorical/Tableau10.js","../../node_modules/d3-timer/src/timeout.js","../../node_modules/d3-dispatch/src/dispatch.js","../../node_modules/d3-transition/src/transition/schedule.js","../../node_modules/d3-transition/src/interrupt.js","../../node_modules/d3-transition/src/transition/tween.js","../../node_modules/d3-transition/src/transition/interpolate.js","../../node_modules/d3-transition/src/transition/attr.js","../../node_modules/d3-transition/src/transition/attrTween.js","../../node_modules/d3-transition/src/transition/delay.js","../../node_modules/d3-transition/src/transition/duration.js","../../node_modules/d3-transition/src/transition/ease.js","../../node_modules/d3-transition/src/transition/on.js","../../node_modules/d3-transition/src/transition/selection.js","../../node_modules/d3-transition/src/transition/style.js","../../node_modules/d3-transition/src/transition/styleTween.js","../../node_modules/d3-transition/src/transition/textTween.js","../../node_modules/d3-transition/src/transition/index.js","../../node_modules/d3-transition/src/transition/select.js","../../node_modules/d3-transition/src/transition/selectAll.js","../../node_modules/d3-transition/src/transition/filter.js","../../node_modules/d3-transition/src/transition/merge.js","../../node_modules/d3-transition/src/transition/transition.js","../../node_modules/d3-transition/src/transition/text.js","../../node_modules/d3-transition/src/transition/remove.js","../../node_modules/d3-transition/src/transition/easeVarying.js","../../node_modules/d3-transition/src/transition/end.js","../../node_modules/d3-ease/src/cubic.js","../../node_modules/d3-ease/src/poly.js","../../node_modules/d3-ease/src/elastic.js","../../node_modules/d3-ease/src/math.js","../../node_modules/d3-transition/src/selection/transition.js","../../node_modules/d3-transition/src/selection/index.js","../../node_modules/d3-transition/src/selection/interrupt.js","../../node_modules/d3-axis/src/array.js","../../node_modules/d3-axis/src/identity.js","../../node_modules/d3-axis/src/axis.js","../../node_modules/d3-path/src/path.js","../../node_modules/d3-shape/src/constant.js","../../node_modules/d3-shape/src/curve/linear.js","../../node_modules/d3-shape/src/point.js","../../node_modules/d3-shape/src/curve/step.js","../../node_modules/d3-drag/src/noevent.js","../../node_modules/d3-drag/src/nodrag.js","../../node_modules/d3-drag/src/constant.js","../../node_modules/d3-drag/src/event.js","../../node_modules/d3-drag/src/drag.js","../../node_modules/d3-brush/src/constant.js","../../node_modules/d3-brush/src/event.js","../../node_modules/d3-brush/src/noevent.js","../../node_modules/d3-brush/src/brush.js","../../node_modules/d3-zoom/src/constant.js","../../node_modules/d3-zoom/src/event.js","../../node_modules/d3-zoom/src/transform.js","../../node_modules/d3-zoom/src/noevent.js","../../node_modules/d3-zoom/src/zoom.js","../../src/utils/d3-import.js","../../node_modules/d3-selection/src/selectAll.js","../../node_modules/d3-array/src/max.js","../../node_modules/d3-array/src/maxIndex.js","../../node_modules/d3-array/src/min.js","../../node_modules/d3-array/src/minIndex.js","../../node_modules/d3-array/src/extent.js","../../node_modules/d3-array/src/sum.js","../../node_modules/d3-ease/src/linear.js","../../node_modules/d3-ease/src/quad.js","../../node_modules/d3-shape/src/line.js","../../node_modules/d3-shape/src/array.js","../../src/isotonic-regression.js","../../src/utils/utils.js","../../src/config.js","../../src/global-explanation/draw.js","../../src/global-explanation/continuous/cont-class.js","../../src/global-explanation/continuous/cont-data.js","../../src/global-explanation/continuous/cont-bbox.js","../../src/global-explanation/continuous/cont-zoom.js","../../src/simple-linear-regression.js","../../src/global-explanation/continuous/cont-edit.js","../../src/global-explanation/continuous/cont-brush.js","../../src/utils/md5.js","../../src/global-explanation/continuous/cont-history.js","../../node_modules/svelte/store/index.mjs","../../src/store.js","../../src/utils/svg-icon-binding.js","../../src/components/ContextMenu.svelte","../../src/global-explanation/ContFeature.svelte","../../src/global-explanation/categorical/cat-class.js","../../src/global-explanation/categorical/cat-zoom.js","../../src/global-explanation/categorical/cat-edit.js","../../src/global-explanation/categorical/cat-ebm.js","../../src/global-explanation/categorical/cat-brush.js","../../src/global-explanation/categorical/cat-history.js","../../src/global-explanation/CatFeature.svelte","../../src/global-explanation/inter-cont-cat/cont-cat-zoom.js","../../src/components/ToggleSwitch.svelte","../../src/global-explanation/InterContCatFeature.svelte","../../src/global-explanation/inter-cont-cont/cont-cont-zoom.js","../../src/global-explanation/InterContContFeature.svelte","../../src/global-explanation/inter-cat-cat/cat-cat-zoom.js","../../src/global-explanation/InterCatCatFeature.svelte","../../src/sidebar/draw-metric.js","../../src/sidebar/ClassificationMetrics.svelte","../../src/components/Dropzone.svelte","../../node_modules/svelte/easing/index.mjs","../../node_modules/svelte/animate/index.mjs","../../src/sidebar/Feature.svelte","../../src/sidebar/draw-feature.js","../../node_modules/svelte/transition/index.mjs","../../src/sidebar/History.svelte","../../src/sidebar/Sidebar.svelte","../../src/ebm.js","../../src/dummyEbm.js","../../src/utils/ebm-edit.js","../../src/GAM.svelte","../../src/components/Tooltip.svelte","../../src/Youtube.svelte","../../src/Article.svelte","../../src/App.svelte","../../src/main.js"],"sourcesContent":["function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\nfunction is_promise(value) {\n    return value && typeof value === 'object' && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nlet src_url_equal_anchor;\nfunction src_url_equal(element_src, url) {\n    if (!src_url_equal_anchor) {\n        src_url_equal_anchor = document.createElement('a');\n    }\n    src_url_equal_anchor.href = url;\n    return element_src === src_url_equal_anchor.href;\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction is_empty(obj) {\n    return Object.keys(obj).length === 0;\n}\nfunction validate_store(store, name) {\n    if (store != null && typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, ...callbacks) {\n    if (store == null) {\n        return noop;\n    }\n    const unsub = store.subscribe(...callbacks);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, $$scope, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n    return definition[1] && fn\n        ? assign($$scope.ctx.slice(), definition[1](fn(ctx)))\n        : $$scope.ctx;\n}\nfunction get_slot_changes(definition, $$scope, dirty, fn) {\n    if (definition[2] && fn) {\n        const lets = definition[2](fn(dirty));\n        if ($$scope.dirty === undefined) {\n            return lets;\n        }\n        if (typeof lets === 'object') {\n            const merged = [];\n            const len = Math.max($$scope.dirty.length, lets.length);\n            for (let i = 0; i < len; i += 1) {\n                merged[i] = $$scope.dirty[i] | lets[i];\n            }\n            return merged;\n        }\n        return $$scope.dirty | lets;\n    }\n    return $$scope.dirty;\n}\nfunction update_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn) {\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction update_slot(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    update_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn);\n}\nfunction get_all_dirty_from_scope($$scope) {\n    if ($$scope.ctx.length > 32) {\n        const dirty = [];\n        const length = $$scope.ctx.length / 32;\n        for (let i = 0; i < length; i++) {\n            dirty[i] = -1;\n        }\n        return dirty;\n    }\n    return -1;\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction compute_rest_props(props, keys) {\n    const rest = {};\n    keys = new Set(keys);\n    for (const k in props)\n        if (!keys.has(k) && k[0] !== '$')\n            rest[k] = props[k];\n    return rest;\n}\nfunction compute_slots(slots) {\n    const result = {};\n    for (const key in slots) {\n        result[key] = true;\n    }\n    return result;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value) {\n    store.set(value);\n    return ret;\n}\nconst has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nfunction run_tasks(now) {\n    tasks.forEach(task => {\n        if (!task.c(now)) {\n            tasks.delete(task);\n            task.f();\n        }\n    });\n    if (tasks.size !== 0)\n        raf(run_tasks);\n}\n/**\n * For testing purposes only!\n */\nfunction clear_loops() {\n    tasks.clear();\n}\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n */\nfunction loop(callback) {\n    let task;\n    if (tasks.size === 0)\n        raf(run_tasks);\n    return {\n        promise: new Promise(fulfill => {\n            tasks.add(task = { c: callback, f: fulfill });\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\n// Track which nodes are claimed during hydration. Unclaimed nodes can then be removed from the DOM\n// at the end of hydration without touching the remaining nodes.\nlet is_hydrating = false;\nfunction start_hydrating() {\n    is_hydrating = true;\n}\nfunction end_hydrating() {\n    is_hydrating = false;\n}\nfunction upper_bound(low, high, key, value) {\n    // Return first index of value larger than input value in the range [low, high)\n    while (low < high) {\n        const mid = low + ((high - low) >> 1);\n        if (key(mid) <= value) {\n            low = mid + 1;\n        }\n        else {\n            high = mid;\n        }\n    }\n    return low;\n}\nfunction init_hydrate(target) {\n    if (target.hydrate_init)\n        return;\n    target.hydrate_init = true;\n    // We know that all children have claim_order values since the unclaimed have been detached if target is not <head>\n    let children = target.childNodes;\n    // If target is <head>, there may be children without claim_order\n    if (target.nodeName === 'HEAD') {\n        const myChildren = [];\n        for (let i = 0; i < children.length; i++) {\n            const node = children[i];\n            if (node.claim_order !== undefined) {\n                myChildren.push(node);\n            }\n        }\n        children = myChildren;\n    }\n    /*\n    * Reorder claimed children optimally.\n    * We can reorder claimed children optimally by finding the longest subsequence of\n    * nodes that are already claimed in order and only moving the rest. The longest\n    * subsequence subsequence of nodes that are claimed in order can be found by\n    * computing the longest increasing subsequence of .claim_order values.\n    *\n    * This algorithm is optimal in generating the least amount of reorder operations\n    * possible.\n    *\n    * Proof:\n    * We know that, given a set of reordering operations, the nodes that do not move\n    * always form an increasing subsequence, since they do not move among each other\n    * meaning that they must be already ordered among each other. Thus, the maximal\n    * set of nodes that do not move form a longest increasing subsequence.\n    */\n    // Compute longest increasing subsequence\n    // m: subsequence length j => index k of smallest value that ends an increasing subsequence of length j\n    const m = new Int32Array(children.length + 1);\n    // Predecessor indices + 1\n    const p = new Int32Array(children.length);\n    m[0] = -1;\n    let longest = 0;\n    for (let i = 0; i < children.length; i++) {\n        const current = children[i].claim_order;\n        // Find the largest subsequence length such that it ends in a value less than our current value\n        // upper_bound returns first greater value, so we subtract one\n        // with fast path for when we are on the current longest subsequence\n        const seqLen = ((longest > 0 && children[m[longest]].claim_order <= current) ? longest + 1 : upper_bound(1, longest, idx => children[m[idx]].claim_order, current)) - 1;\n        p[i] = m[seqLen] + 1;\n        const newLen = seqLen + 1;\n        // We can guarantee that current is the smallest value. Otherwise, we would have generated a longer sequence.\n        m[newLen] = i;\n        longest = Math.max(newLen, longest);\n    }\n    // The longest increasing subsequence of nodes (initially reversed)\n    const lis = [];\n    // The rest of the nodes, nodes that will be moved\n    const toMove = [];\n    let last = children.length - 1;\n    for (let cur = m[longest] + 1; cur != 0; cur = p[cur - 1]) {\n        lis.push(children[cur - 1]);\n        for (; last >= cur; last--) {\n            toMove.push(children[last]);\n        }\n        last--;\n    }\n    for (; last >= 0; last--) {\n        toMove.push(children[last]);\n    }\n    lis.reverse();\n    // We sort the nodes being moved to guarantee that their insertion order matches the claim order\n    toMove.sort((a, b) => a.claim_order - b.claim_order);\n    // Finally, we move the nodes\n    for (let i = 0, j = 0; i < toMove.length; i++) {\n        while (j < lis.length && toMove[i].claim_order >= lis[j].claim_order) {\n            j++;\n        }\n        const anchor = j < lis.length ? lis[j] : null;\n        target.insertBefore(toMove[i], anchor);\n    }\n}\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction append_styles(target, style_sheet_id, styles) {\n    const append_styles_to = get_root_for_style(target);\n    if (!append_styles_to.getElementById(style_sheet_id)) {\n        const style = element('style');\n        style.id = style_sheet_id;\n        style.textContent = styles;\n        append_stylesheet(append_styles_to, style);\n    }\n}\nfunction get_root_for_style(node) {\n    if (!node)\n        return document;\n    const root = node.getRootNode ? node.getRootNode() : node.ownerDocument;\n    if (root.host) {\n        return root;\n    }\n    return document;\n}\nfunction append_empty_stylesheet(node) {\n    const style_element = element('style');\n    append_stylesheet(get_root_for_style(node), style_element);\n    return style_element;\n}\nfunction append_stylesheet(node, style) {\n    append(node.head || node, style);\n}\nfunction append_hydration(target, node) {\n    if (is_hydrating) {\n        init_hydrate(target);\n        if ((target.actual_end_child === undefined) || ((target.actual_end_child !== null) && (target.actual_end_child.parentElement !== target))) {\n            target.actual_end_child = target.firstChild;\n        }\n        // Skip nodes of undefined ordering\n        while ((target.actual_end_child !== null) && (target.actual_end_child.claim_order === undefined)) {\n            target.actual_end_child = target.actual_end_child.nextSibling;\n        }\n        if (node !== target.actual_end_child) {\n            // We only insert if the ordering of this node should be modified or the parent node is not target\n            if (node.claim_order !== undefined || node.parentNode !== target) {\n                target.insertBefore(node, target.actual_end_child);\n            }\n        }\n        else {\n            target.actual_end_child = node.nextSibling;\n        }\n    }\n    else if (node.parentNode !== target || node.nextSibling !== null) {\n        target.appendChild(node);\n    }\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction insert_hydration(target, node, anchor) {\n    if (is_hydrating && !anchor) {\n        append_hydration(target, node);\n    }\n    else if (node.parentNode !== target || node.nextSibling != anchor) {\n        target.insertBefore(node, anchor || null);\n    }\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    const target = {};\n    for (const k in obj) {\n        if (has_prop(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction trusted(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.isTrusted)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\nfunction set_attributes(node, attributes) {\n    // @ts-ignore\n    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n    for (const key in attributes) {\n        if (attributes[key] == null) {\n            node.removeAttribute(key);\n        }\n        else if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (key === '__value') {\n            node.value = node[key] = attributes[key];\n        }\n        else if (descriptors[key] && descriptors[key].set) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = typeof node[prop] === 'boolean' && value === '' ? true : value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group, __value, checked) {\n    const value = new Set();\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.add(group[i].__value);\n    }\n    if (!checked) {\n        value.delete(__value);\n    }\n    return Array.from(value);\n}\nfunction to_number(value) {\n    return value === '' ? null : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction init_claim_info(nodes) {\n    if (nodes.claim_info === undefined) {\n        nodes.claim_info = { last_index: 0, total_claimed: 0 };\n    }\n}\nfunction claim_node(nodes, predicate, processNode, createNode, dontUpdateLastIndex = false) {\n    // Try to find nodes in an order such that we lengthen the longest increasing subsequence\n    init_claim_info(nodes);\n    const resultNode = (() => {\n        // We first try to find an element after the previous one\n        for (let i = nodes.claim_info.last_index; i < nodes.length; i++) {\n            const node = nodes[i];\n            if (predicate(node)) {\n                const replacement = processNode(node);\n                if (replacement === undefined) {\n                    nodes.splice(i, 1);\n                }\n                else {\n                    nodes[i] = replacement;\n                }\n                if (!dontUpdateLastIndex) {\n                    nodes.claim_info.last_index = i;\n                }\n                return node;\n            }\n        }\n        // Otherwise, we try to find one before\n        // We iterate in reverse so that we don't go too far back\n        for (let i = nodes.claim_info.last_index - 1; i >= 0; i--) {\n            const node = nodes[i];\n            if (predicate(node)) {\n                const replacement = processNode(node);\n                if (replacement === undefined) {\n                    nodes.splice(i, 1);\n                }\n                else {\n                    nodes[i] = replacement;\n                }\n                if (!dontUpdateLastIndex) {\n                    nodes.claim_info.last_index = i;\n                }\n                else if (replacement === undefined) {\n                    // Since we spliced before the last_index, we decrease it\n                    nodes.claim_info.last_index--;\n                }\n                return node;\n            }\n        }\n        // If we can't find any matching node, we create a new one\n        return createNode();\n    })();\n    resultNode.claim_order = nodes.claim_info.total_claimed;\n    nodes.claim_info.total_claimed += 1;\n    return resultNode;\n}\nfunction claim_element(nodes, name, attributes, svg) {\n    return claim_node(nodes, (node) => node.nodeName === name, (node) => {\n        const remove = [];\n        for (let j = 0; j < node.attributes.length; j++) {\n            const attribute = node.attributes[j];\n            if (!attributes[attribute.name]) {\n                remove.push(attribute.name);\n            }\n        }\n        remove.forEach(v => node.removeAttribute(v));\n        return undefined;\n    }, () => svg ? svg_element(name) : element(name));\n}\nfunction claim_text(nodes, data) {\n    return claim_node(nodes, (node) => node.nodeType === 3, (node) => {\n        const dataStr = '' + data;\n        if (node.data.startsWith(dataStr)) {\n            if (node.data.length !== dataStr.length) {\n                return node.splitText(dataStr.length);\n            }\n        }\n        else {\n            node.data = dataStr;\n        }\n    }, () => text(data), true // Text nodes should not update last index since it is likely not worth it to eliminate an increasing subsequence of actual elements\n    );\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction find_comment(nodes, text, start) {\n    for (let i = start; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 8 /* comment node */ && node.textContent.trim() === text) {\n            return i;\n        }\n    }\n    return nodes.length;\n}\nfunction claim_html_tag(nodes) {\n    // find html opening tag\n    const start_index = find_comment(nodes, 'HTML_TAG_START', 0);\n    const end_index = find_comment(nodes, 'HTML_TAG_END', start_index);\n    if (start_index === end_index) {\n        return new HtmlTagHydration();\n    }\n    init_claim_info(nodes);\n    const html_tag_nodes = nodes.splice(start_index, end_index + 1);\n    detach(html_tag_nodes[0]);\n    detach(html_tag_nodes[html_tag_nodes.length - 1]);\n    const claimed_nodes = html_tag_nodes.slice(1, html_tag_nodes.length - 1);\n    for (const n of claimed_nodes) {\n        n.claim_order = nodes.claim_info.total_claimed;\n        nodes.claim_info.total_claimed += 1;\n    }\n    return new HtmlTagHydration(claimed_nodes);\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.wholeText !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    input.value = value == null ? '' : value;\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    node.style.setProperty(key, value, important ? 'important' : '');\n}\nfunction select_option(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked') || select.options[0];\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\nlet crossorigin;\nfunction is_crossorigin() {\n    if (crossorigin === undefined) {\n        crossorigin = false;\n        try {\n            if (typeof window !== 'undefined' && window.parent) {\n                void window.parent.document;\n            }\n        }\n        catch (error) {\n            crossorigin = true;\n        }\n    }\n    return crossorigin;\n}\nfunction add_resize_listener(node, fn) {\n    const computed_style = getComputedStyle(node);\n    if (computed_style.position === 'static') {\n        node.style.position = 'relative';\n    }\n    const iframe = element('iframe');\n    iframe.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n        'overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;');\n    iframe.setAttribute('aria-hidden', 'true');\n    iframe.tabIndex = -1;\n    const crossorigin = is_crossorigin();\n    let unsubscribe;\n    if (crossorigin) {\n        iframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n        unsubscribe = listen(window, 'message', (event) => {\n            if (event.source === iframe.contentWindow)\n                fn();\n        });\n    }\n    else {\n        iframe.src = 'about:blank';\n        iframe.onload = () => {\n            unsubscribe = listen(iframe.contentWindow, 'resize', fn);\n        };\n    }\n    append(node, iframe);\n    return () => {\n        if (crossorigin) {\n            unsubscribe();\n        }\n        else if (unsubscribe && iframe.contentWindow) {\n            unsubscribe();\n        }\n        detach(iframe);\n    };\n}\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail, bubbles = false) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, bubbles, false, detail);\n    return e;\n}\nfunction query_selector_all(selector, parent = document.body) {\n    return Array.from(parent.querySelectorAll(selector));\n}\nclass HtmlTag {\n    constructor() {\n        this.e = this.n = null;\n    }\n    c(html) {\n        this.h(html);\n    }\n    m(html, target, anchor = null) {\n        if (!this.e) {\n            this.e = element(target.nodeName);\n            this.t = target;\n            this.c(html);\n        }\n        this.i(anchor);\n    }\n    h(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.childNodes);\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(this.t, this.n[i], anchor);\n        }\n    }\n    p(html) {\n        this.d();\n        this.h(html);\n        this.i(this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\nclass HtmlTagHydration extends HtmlTag {\n    constructor(claimed_nodes) {\n        super();\n        this.e = this.n = null;\n        this.l = claimed_nodes;\n    }\n    c(html) {\n        if (this.l) {\n            this.n = this.l;\n        }\n        else {\n            super.c(html);\n        }\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert_hydration(this.t, this.n[i], anchor);\n        }\n    }\n}\nfunction attribute_to_object(attributes) {\n    const result = {};\n    for (const attribute of attributes) {\n        result[attribute.name] = attribute.value;\n    }\n    return result;\n}\nfunction get_custom_elements_slots(element) {\n    const result = {};\n    element.childNodes.forEach((node) => {\n        result[node.slot || 'default'] = true;\n    });\n    return result;\n}\n\nconst active_docs = new Set();\nlet active = 0;\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    const doc = get_root_for_style(node);\n    active_docs.add(doc);\n    const stylesheet = doc.__svelte_stylesheet || (doc.__svelte_stylesheet = append_empty_stylesheet(node).sheet);\n    const current_rules = doc.__svelte_rules || (doc.__svelte_rules = {});\n    if (!current_rules[name]) {\n        current_rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ''}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    const previous = (node.style.animation || '').split(', ');\n    const next = previous.filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    );\n    const deleted = previous.length - next.length;\n    if (deleted) {\n        node.style.animation = next.join(', ');\n        active -= deleted;\n        if (!active)\n            clear_rules();\n    }\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        active_docs.forEach(doc => {\n            const stylesheet = doc.__svelte_stylesheet;\n            let i = stylesheet.cssRules.length;\n            while (i--)\n                stylesheet.deleteRule(i);\n            doc.__svelte_rules = {};\n        });\n        active_docs.clear();\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error('Function called outside component initialization');\n    return current_component;\n}\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\nfunction createEventDispatcher() {\n    const component = get_current_component();\n    return (type, detail) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail);\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n        }\n    };\n}\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n}\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\nfunction getAllContexts() {\n    return get_current_component().$$.context;\n}\nfunction hasContext(key) {\n    return get_current_component().$$.context.has(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        // @ts-ignore\n        callbacks.slice().forEach(fn => fn.call(this, event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\nlet flushing = false;\nconst seen_callbacks = new Set();\nfunction flush() {\n    if (flushing)\n        return;\n    flushing = true;\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        for (let i = 0; i < dirty_components.length; i += 1) {\n            const component = dirty_components[i];\n            set_current_component(component);\n            update(component.$$);\n        }\n        set_current_component(null);\n        dirty_components.length = 0;\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n                callback();\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n    flushing = false;\n    seen_callbacks.clear();\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            started = true;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config();\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config();\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    let config = fn(node, params);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = (program.b - t);\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program || pending_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro — we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro — needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config();\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = value;\n        let child_ctx = info.ctx;\n        if (key !== undefined) {\n            child_ctx = child_ctx.slice();\n            child_ctx[key] = value;\n        }\n        const block = type && (info.current = type)(child_ctx);\n        let needs_flush = false;\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            if (info.blocks[i] === block) {\n                                info.blocks[i] = null;\n                            }\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            needs_flush = true;\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n        if (needs_flush) {\n            flush();\n        }\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n            if (!info.hasCatch) {\n                throw error;\n            }\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = promise;\n    }\n}\nfunction update_await_block_branch(info, ctx, dirty) {\n    const child_ctx = ctx.slice();\n    const { resolved } = info;\n    if (info.current === info.then) {\n        child_ctx[info.value] = resolved;\n    }\n    if (info.current === info.catch) {\n        child_ctx[info.error] = resolved;\n    }\n    info.block.p(child_ctx, dirty);\n}\n\nconst globals = (typeof window !== 'undefined'\n    ? window\n    : typeof globalThis !== 'undefined'\n        ? globalThis\n        : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(child_ctx, dirty);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction validate_each_keys(ctx, list, get_context, get_key) {\n    const keys = new Set();\n    for (let i = 0; i < list.length; i++) {\n        const key = get_key(get_context(ctx, list, i));\n        if (keys.has(key)) {\n            throw new Error('Cannot have duplicate keys in a keyed each');\n        }\n        keys.add(key);\n    }\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\n// source: https://html.spec.whatwg.org/multipage/indices.html\nconst boolean_attributes = new Set([\n    'allowfullscreen',\n    'allowpaymentrequest',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'controls',\n    'default',\n    'defer',\n    'disabled',\n    'formnovalidate',\n    'hidden',\n    'ismap',\n    'loop',\n    'multiple',\n    'muted',\n    'nomodule',\n    'novalidate',\n    'open',\n    'playsinline',\n    'readonly',\n    'required',\n    'reversed',\n    'selected'\n]);\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args, classes_to_add) {\n    const attributes = Object.assign({}, ...args);\n    if (classes_to_add) {\n        if (attributes.class == null) {\n            attributes.class = classes_to_add;\n        }\n        else {\n            attributes.class += ' ' + classes_to_add;\n        }\n    }\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === true)\n            str += ' ' + name;\n        else if (boolean_attributes.has(name.toLowerCase())) {\n            if (value)\n                str += ' ' + name;\n        }\n        else if (value != null) {\n            str += ` ${name}=\"${value}\"`;\n        }\n    });\n    return str;\n}\nconst escaped = {\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;'\n};\nfunction escape(html) {\n    return String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\nfunction escape_attribute_value(value) {\n    return typeof value === 'string' ? escape(value) : value;\n}\nfunction escape_object(obj) {\n    const result = {};\n    for (const key in obj) {\n        result[key] = escape_attribute_value(obj[key]);\n    }\n    return result;\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots, context) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(parent_component ? parent_component.$$.context : context || []),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, { $$slots = {}, context = new Map() } = {}) => {\n            on_destroy = [];\n            const result = { title: '', head: '', css: new Set() };\n            const html = $$render(result, props, {}, $$slots, context);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.title + result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    return ` ${name}${value === true ? '' : `=${typeof value === 'string' ? JSON.stringify(escape(value)) : `\"${value}\"`}`}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : '';\n}\n\nfunction bind(component, name, callback) {\n    const index = component.$$.props[name];\n    if (index !== undefined) {\n        component.$$.bound[index] = callback;\n        callback(component.$$.ctx[index]);\n    }\n}\nfunction create_component(block) {\n    block && block.c();\n}\nfunction claim_component(block, parent_nodes) {\n    block && block.l(parent_nodes);\n}\nfunction mount_component(component, target, anchor, customElement) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    if (!customElement) {\n        // onMount happens before the initial afterUpdate\n        add_render_callback(() => {\n            const new_on_destroy = on_mount.map(run).filter(is_function);\n            if (on_destroy) {\n                on_destroy.push(...new_on_destroy);\n            }\n            else {\n                // Edge case - component was destroyed immediately,\n                // most likely as a result of a binding initialising\n                run_all(new_on_destroy);\n            }\n            component.$$.on_mount = [];\n        });\n    }\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, append_styles, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        on_disconnect: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(parent_component ? parent_component.$$.context : options.context || []),\n        // everything else\n        callbacks: blank_object(),\n        dirty,\n        skip_bound: false,\n        root: options.target || parent_component.$$.root\n    };\n    append_styles && append_styles($$.root);\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, options.props || {}, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if (!$$.skip_bound && $$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            start_hydrating();\n            const nodes = children(options.target);\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(nodes);\n            nodes.forEach(detach);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor, options.customElement);\n        end_hydrating();\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            const { on_mount } = this.$$;\n            this.$$.on_disconnect = on_mount.map(run).filter(is_function);\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        disconnectedCallback() {\n            run_all(this.$$.on_disconnect);\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set($$props) {\n            if (this.$$set && !is_empty($$props)) {\n                this.$$.skip_bound = true;\n                this.$$set($$props);\n                this.$$.skip_bound = false;\n            }\n        }\n    };\n}\n/**\n * Base class for Svelte components. Used when dev=false.\n */\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set($$props) {\n        if (this.$$set && !is_empty($$props)) {\n            this.$$.skip_bound = true;\n            this.$$set($$props);\n            this.$$.skip_bound = false;\n        }\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.42.1' }, detail), true));\n}\nfunction append_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append(target, node);\n}\nfunction append_hydration_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append_hydration(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction insert_hydration_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert_hydration(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev('SvelteDOMRemove', { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {\n    const modifiers = options === true ? ['capture'] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    dispatch_dev('SvelteDOMAddEventListener', { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev('SvelteDOMRemoveEventListener', { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev('SvelteDOMRemoveAttribute', { node, attribute });\n    else\n        dispatch_dev('SvelteDOMSetAttribute', { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev('SvelteDOMSetProperty', { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev('SvelteDOMSetDataset', { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.wholeText === data)\n        return;\n    dispatch_dev('SvelteDOMSetData', { node: text, data });\n    text.data = data;\n}\nfunction validate_each_argument(arg) {\n    if (typeof arg !== 'string' && !(arg && typeof arg === 'object' && 'length' in arg)) {\n        let msg = '{#each} only iterates over array-like objects.';\n        if (typeof Symbol === 'function' && arg && Symbol.iterator in arg) {\n            msg += ' You can use a spread to convert this iterable into an array.';\n        }\n        throw new Error(msg);\n    }\n}\nfunction validate_slots(name, slot, keys) {\n    for (const slot_key of Object.keys(slot)) {\n        if (!~keys.indexOf(slot_key)) {\n            console.warn(`<${name}> received an unexpected slot \"${slot_key}\".`);\n        }\n    }\n}\n/**\n * Base class for Svelte components with some minor dev-enhancements. Used when dev=true.\n */\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(\"'target' is a required option\");\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn('Component was already destroyed'); // eslint-disable-line no-console\n        };\n    }\n    $capture_state() { }\n    $inject_state() { }\n}\n/**\n * Base class to create strongly typed Svelte components.\n * This only exists for typing purposes and should be used in `.d.ts` files.\n *\n * ### Example:\n *\n * You have component library on npm called `component-library`, from which\n * you export a component called `MyComponent`. For Svelte+TypeScript users,\n * you want to provide typings. Therefore you create a `index.d.ts`:\n * ```ts\n * import { SvelteComponentTyped } from \"svelte\";\n * export class MyComponent extends SvelteComponentTyped<{foo: string}> {}\n * ```\n * Typing this makes it possible for IDEs like VS Code with the Svelte extension\n * to provide intellisense and to use the component like this in a Svelte file\n * with TypeScript:\n * ```svelte\n * <script lang=\"ts\">\n * \timport { MyComponent } from \"component-library\";\n * </script>\n * <MyComponent foo={'bar'} />\n * ```\n *\n * #### Why not make this part of `SvelteComponent(Dev)`?\n * Because\n * ```ts\n * class ASubclassOfSvelteComponent extends SvelteComponent<{foo: string}> {}\n * const component: typeof SvelteComponent = ASubclassOfSvelteComponent;\n * ```\n * will throw a type error, so we need to separate the more strictly typed class.\n */\nclass SvelteComponentTyped extends SvelteComponentDev {\n    constructor(options) {\n        super(options);\n    }\n}\nfunction loop_guard(timeout) {\n    const start = Date.now();\n    return () => {\n        if (Date.now() - start > timeout) {\n            throw new Error('Infinite loop detected');\n        }\n    };\n}\n\nexport { HtmlTag, HtmlTagHydration, SvelteComponent, SvelteComponentDev, SvelteComponentTyped, SvelteElement, action_destroyer, add_attribute, add_classes, add_flush_callback, add_location, add_render_callback, add_resize_listener, add_transform, afterUpdate, append, append_dev, append_empty_stylesheet, append_hydration, append_hydration_dev, append_styles, assign, attr, attr_dev, attribute_to_object, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_component, claim_element, claim_html_tag, claim_space, claim_text, clear_loops, component_subscribe, compute_rest_props, compute_slots, createEventDispatcher, create_animation, create_bidirectional_transition, create_component, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, end_hydrating, escape, escape_attribute_value, escape_object, escaped, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, getAllContexts, getContext, get_all_dirty_from_scope, get_binding_group_value, get_current_component, get_custom_elements_slots, get_root_for_style, get_slot_changes, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, hasContext, has_prop, identity, init, insert, insert_dev, insert_hydration, insert_hydration_dev, intros, invalid_attribute_name_character, is_client, is_crossorigin, is_empty, is_function, is_promise, listen, listen_dev, loop, loop_guard, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, query_selector_all, raf, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_data, set_data_dev, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, spread, src_url_equal, start_hydrating, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, trusted, update_await_block_branch, update_keyed_each, update_slot, update_slot_base, validate_component, validate_each_argument, validate_each_keys, validate_slots, validate_store, xlink_attr };\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces.js\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name; // eslint-disable-line no-prototype-builtins\n}\n","import namespace from \"./namespace.js\";\nimport {xhtml} from \"./namespaces.js\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","export default function(x) {\n  return typeof x === \"object\" && \"length\" in x\n    ? x // Array, TypedArray, NodeList, array-like\n    : Array.from(x); // Map, Set, iterable, string, or anything else\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n\nexport function childMatcher(selector) {\n  return function(node) {\n    return node.matches(selector);\n  };\n}\n\n","import {childMatcher} from \"../matcher.js\";\n\nvar find = Array.prototype.find;\n\nfunction childFind(match) {\n  return function() {\n    return find.call(this.children, match);\n  };\n}\n\nfunction childFirst() {\n  return this.firstElementChild;\n}\n\nexport default function(match) {\n  return this.select(match == null ? childFirst\n      : childFind(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {childMatcher} from \"../matcher.js\";\n\nvar filter = Array.prototype.filter;\n\nfunction children() {\n  return this.children;\n}\n\nfunction childrenFilter(match) {\n  return function() {\n    return filter.call(this.children, match);\n  };\n}\n\nexport default function(match) {\n  return this.selectAll(match == null ? children\n      : childrenFilter(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import {Selection} from \"./index.js\";\nimport {EnterNode} from \"./enter.js\";\nimport array from \"../array.js\";\nimport constant from \"../constant.js\";\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that don’t fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = new Map,\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + \"\";\n      if (nodeByKeyValue.has(keyValue)) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue.set(keyValue, node);\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = key.call(parent, data[i], i, data) + \"\";\n    if (node = nodeByKeyValue.get(keyValue)) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue.delete(keyValue);\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue.get(keyValues[i]) === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction datum(node) {\n  return node.__data__;\n}\n\nexport default function(value, key) {\n  if (!arguments.length) return Array.from(this, datum);\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = array(value.call(parent, parent && parent.__data__, j, parents)),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import namespace from \"../namespace.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window.js\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import creator from \"../creator.js\";\nimport selector from \"../selector.js\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","function contextListener(listener) {\n  return function(event) {\n    listener.call(this, event, this.__data__);\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, options) {\n  return function() {\n    var on = this.__on, o, listener = contextListener(value);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n        this.addEventListener(o.type, o.listener = listener, o.options = options);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, options);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, options: options};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, options) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, options));\n  return this;\n}\n","import defaultView from \"../window.js\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","import selection_select from \"./select.js\";\nimport selection_selectAll from \"./selectAll.js\";\nimport selection_selectChild from \"./selectChild.js\";\nimport selection_selectChildren from \"./selectChildren.js\";\nimport selection_filter from \"./filter.js\";\nimport selection_data from \"./data.js\";\nimport selection_enter from \"./enter.js\";\nimport selection_exit from \"./exit.js\";\nimport selection_join from \"./join.js\";\nimport selection_merge from \"./merge.js\";\nimport selection_order from \"./order.js\";\nimport selection_sort from \"./sort.js\";\nimport selection_call from \"./call.js\";\nimport selection_nodes from \"./nodes.js\";\nimport selection_node from \"./node.js\";\nimport selection_size from \"./size.js\";\nimport selection_empty from \"./empty.js\";\nimport selection_each from \"./each.js\";\nimport selection_attr from \"./attr.js\";\nimport selection_style from \"./style.js\";\nimport selection_property from \"./property.js\";\nimport selection_classed from \"./classed.js\";\nimport selection_text from \"./text.js\";\nimport selection_html from \"./html.js\";\nimport selection_raise from \"./raise.js\";\nimport selection_lower from \"./lower.js\";\nimport selection_append from \"./append.js\";\nimport selection_insert from \"./insert.js\";\nimport selection_remove from \"./remove.js\";\nimport selection_clone from \"./clone.js\";\nimport selection_datum from \"./datum.js\";\nimport selection_on from \"./on.js\";\nimport selection_dispatch from \"./dispatch.js\";\nimport selection_iterator from \"./iterator.js\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nfunction selection_selection() {\n  return this;\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  selectChild: selection_selectChild,\n  selectChildren: selection_selectChildren,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  selection: selection_selection,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch,\n  [Symbol.iterator]: selection_iterator\n};\n\nexport default selection;\n","import {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","import sourceEvent from \"./sourceEvent.js\";\n\nexport default function(event, node) {\n  event = sourceEvent(event);\n  if (node === undefined) node = event.currentTarget;\n  if (node) {\n    var svg = node.ownerSVGElement || node;\n    if (svg.createSVGPoint) {\n      var point = svg.createSVGPoint();\n      point.x = event.clientX, point.y = event.clientY;\n      point = point.matrixTransform(node.getScreenCTM().inverse());\n      return [point.x, point.y];\n    }\n    if (node.getBoundingClientRect) {\n      var rect = node.getBoundingClientRect();\n      return [event.clientX - rect.left - node.clientLeft, event.clientY - rect.top - node.clientTop];\n    }\n  }\n  return [event.pageX, event.pageY];\n}\n","export default function(event) {\n  let sourceEvent;\n  while (sourceEvent = event.sourceEvent) event = sourceEvent;\n  return event;\n}\n","function responseJson(response) {\n  if (!response.ok) throw new Error(response.status + \" \" + response.statusText);\n  if (response.status === 204 || response.status === 205) return;\n  return response.json();\n}\n\nexport default function(input, init) {\n  return fetch(input, init).then(responseJson);\n}\n","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import ascending from \"./ascending.js\";\n\nexport default function(f) {\n  let delta = f;\n  let compare = f;\n\n  if (f.length === 1) {\n    delta = (d, x) => f(d) - x;\n    compare = ascendingComparator(f);\n  }\n\n  function left(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    while (lo < hi) {\n      const mid = (lo + hi) >>> 1;\n      if (compare(a[mid], x) < 0) lo = mid + 1;\n      else hi = mid;\n    }\n    return lo;\n  }\n\n  function right(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    while (lo < hi) {\n      const mid = (lo + hi) >>> 1;\n      if (compare(a[mid], x) > 0) hi = mid;\n      else lo = mid + 1;\n    }\n    return lo;\n  }\n\n  function center(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    const i = left(a, x, lo, hi - 1);\n    return i > lo && delta(a[i - 1], x) > -delta(a[i], x) ? i - 1 : i;\n  }\n\n  return {left, center, right};\n}\n\nfunction ascendingComparator(f) {\n  return (d, x) => ascending(f(d), x);\n}\n","import {Selection} from \"./index.js\";\nimport selector from \"../selector.js\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import {Selection} from \"./index.js\";\nimport array from \"../array.js\";\nimport selectorAll from \"../selectorAll.js\";\n\nfunction arrayAll(select) {\n  return function() {\n    var group = select.apply(this, arguments);\n    return group == null ? [] : array(group);\n  };\n}\n\nexport default function(select) {\n  if (typeof select === \"function\") select = arrayAll(select);\n  else select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","import {Selection} from \"./index.js\";\nimport matcher from \"../matcher.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  enter = typeof onenter === \"function\" ? onenter(enter) : enter.append(onenter + \"\");\n  if (onupdate != null) update = onupdate(update);\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(selection) {\n  if (!(selection instanceof Selection)) throw new Error(\"invalid merge\");\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  return Array.from(this);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  let size = 0;\n  for (const node of this) ++size; // eslint-disable-line no-unused-vars\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import creator from \"../creator.js\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","export default function*() {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) yield node;\n    }\n  }\n}\n","import ascending from \"./ascending.js\";\nimport bisector from \"./bisector.js\";\nimport number from \"./number.js\";\n\nconst ascendingBisect = bisector(ascending);\nexport const bisectRight = ascendingBisect.right;\nexport const bisectLeft = ascendingBisect.left;\nexport const bisectCenter = bisector(number).center;\nexport default bisectRight;\n","export default function(x) {\n  return x === null ? NaN : +x;\n}\n\nexport function* numbers(values, valueof) {\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  }\n}\n","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function(start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    let r0 = Math.round(start / step), r1 = Math.round(stop / step);\n    if (r0 * step < start) ++r0;\n    if (r1 * step > stop) --r1;\n    ticks = new Array(n = r1 - r0 + 1);\n    while (++i < n) ticks[i] = (r0 + i) * step;\n  } else {\n    step = -step;\n    let r0 = Math.round(start * step), r1 = Math.round(stop * step);\n    if (r0 / step < start) ++r0;\n    if (r1 / step > stop) --r1;\n    ticks = new Array(n = r1 - r0 + 1);\n    while (++i < n) ticks[i] = (r0 + i) / step;\n  }\n\n  if (reverse) ticks.reverse();\n\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0\n      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n","export default function(start, stop, step) {\n  start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\n\n  var i = -1,\n      n = Math.max(0, Math.ceil((stop - start) / step)) | 0,\n      range = new Array(n);\n\n  while (++i < n) {\n    range[i] = start + i * step;\n  }\n\n  return range;\n}\n","export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: {\n      if (typeof domain === \"function\") this.interpolator(domain);\n      else this.range(domain);\n      break;\n    }\n    default: {\n      this.domain(domain);\n      if (typeof interpolator === \"function\") this.interpolator(interpolator);\n      else this.range(interpolator);\n      break;\n    }\n  }\n  return this;\n}\n","import {initRange} from \"./init.js\";\n\nexport const implicit = Symbol(\"implicit\");\n\nexport default function ordinal() {\n  var index = new Map(),\n      domain = [],\n      range = [],\n      unknown = implicit;\n\n  function scale(d) {\n    var key = d + \"\", i = index.get(key);\n    if (!i) {\n      if (unknown !== implicit) return unknown;\n      index.set(key, i = domain.push(d));\n    }\n    return range[(i - 1) % range.length];\n  }\n\n  scale.domain = function(_) {\n    if (!arguments.length) return domain.slice();\n    domain = [], index = new Map();\n    for (const value of _) {\n      const key = value + \"\";\n      if (index.has(key)) continue;\n      index.set(key, domain.push(value));\n    }\n    return scale;\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), scale) : range.slice();\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function() {\n    return ordinal(domain, range).unknown(unknown);\n  };\n\n  initRange.apply(scale, arguments);\n\n  return scale;\n}\n","import {range as sequence} from \"d3-array\";\nimport {initRange} from \"./init.js\";\nimport ordinal from \"./ordinal.js\";\n\nexport default function band() {\n  var scale = ordinal().unknown(undefined),\n      domain = scale.domain,\n      ordinalRange = scale.range,\n      r0 = 0,\n      r1 = 1,\n      step,\n      bandwidth,\n      round = false,\n      paddingInner = 0,\n      paddingOuter = 0,\n      align = 0.5;\n\n  delete scale.unknown;\n\n  function rescale() {\n    var n = domain().length,\n        reverse = r1 < r0,\n        start = reverse ? r1 : r0,\n        stop = reverse ? r0 : r1;\n    step = (stop - start) / Math.max(1, n - paddingInner + paddingOuter * 2);\n    if (round) step = Math.floor(step);\n    start += (stop - start - step * (n - paddingInner)) * align;\n    bandwidth = step * (1 - paddingInner);\n    if (round) start = Math.round(start), bandwidth = Math.round(bandwidth);\n    var values = sequence(n).map(function(i) { return start + step * i; });\n    return ordinalRange(reverse ? values.reverse() : values);\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain(_), rescale()) : domain();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? ([r0, r1] = _, r0 = +r0, r1 = +r1, rescale()) : [r0, r1];\n  };\n\n  scale.rangeRound = function(_) {\n    return [r0, r1] = _, r0 = +r0, r1 = +r1, round = true, rescale();\n  };\n\n  scale.bandwidth = function() {\n    return bandwidth;\n  };\n\n  scale.step = function() {\n    return step;\n  };\n\n  scale.round = function(_) {\n    return arguments.length ? (round = !!_, rescale()) : round;\n  };\n\n  scale.padding = function(_) {\n    return arguments.length ? (paddingInner = Math.min(1, paddingOuter = +_), rescale()) : paddingInner;\n  };\n\n  scale.paddingInner = function(_) {\n    return arguments.length ? (paddingInner = Math.min(1, _), rescale()) : paddingInner;\n  };\n\n  scale.paddingOuter = function(_) {\n    return arguments.length ? (paddingOuter = +_, rescale()) : paddingOuter;\n  };\n\n  scale.align = function(_) {\n    return arguments.length ? (align = Math.max(0, Math.min(1, _)), rescale()) : align;\n  };\n\n  scale.copy = function() {\n    return band(domain(), [r0, r1])\n        .round(round)\n        .paddingInner(paddingInner)\n        .paddingOuter(paddingOuter)\n        .align(align);\n  };\n\n  return initRange.apply(rescale(), arguments);\n}\n\nfunction pointish(scale) {\n  var copy = scale.copy;\n\n  scale.padding = scale.paddingOuter;\n  delete scale.paddingInner;\n  delete scale.paddingOuter;\n\n  scale.copy = function() {\n    return pointish(copy());\n  };\n\n  return scale;\n}\n\nexport function point() {\n  return pointish(band.apply(null, arguments).paddingInner(1));\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy: function(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\")\n      + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n      + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\")\n        + (this.h || 0) + \", \"\n        + (this.s || 0) * 100 + \"%, \"\n        + (this.l || 0) * 100 + \"%\"\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export default x => () => x;\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n","import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return Math.round(a * (1 - t) + b * t);\n  };\n}\n","var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n","import decompose, {identity} from \"./decompose.js\";\n\nvar svgNode;\n\n/* eslint-disable no-undef */\nexport function parseCss(value) {\n  const m = new (typeof DOMMatrix === \"function\" ? DOMMatrix : WebKitCSSMatrix)(value + \"\");\n  return m.isIdentity ? identity : decompose(m.a, m.b, m.c, m.d, m.e, m.f);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n","import number from \"../number.js\";\nimport {parseCss, parseSvg} from \"./parse.js\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n","var epsilon2 = 1e-12;\n\nfunction cosh(x) {\n  return ((x = Math.exp(x)) + 1 / x) / 2;\n}\n\nfunction sinh(x) {\n  return ((x = Math.exp(x)) - 1 / x) / 2;\n}\n\nfunction tanh(x) {\n  return ((x = Math.exp(2 * x)) - 1) / (x + 1);\n}\n\nexport default (function zoomRho(rho, rho2, rho4) {\n\n  // p0 = [ux0, uy0, w0]\n  // p1 = [ux1, uy1, w1]\n  function zoom(p0, p1) {\n    var ux0 = p0[0], uy0 = p0[1], w0 = p0[2],\n        ux1 = p1[0], uy1 = p1[1], w1 = p1[2],\n        dx = ux1 - ux0,\n        dy = uy1 - uy0,\n        d2 = dx * dx + dy * dy,\n        i,\n        S;\n\n    // Special case for u0 ≅ u1.\n    if (d2 < epsilon2) {\n      S = Math.log(w1 / w0) / rho;\n      i = function(t) {\n        return [\n          ux0 + t * dx,\n          uy0 + t * dy,\n          w0 * Math.exp(rho * t * S)\n        ];\n      }\n    }\n\n    // General case.\n    else {\n      var d1 = Math.sqrt(d2),\n          b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1),\n          b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1),\n          r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),\n          r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n      S = (r1 - r0) / rho;\n      i = function(t) {\n        var s = t * S,\n            coshr0 = cosh(r0),\n            u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));\n        return [\n          ux0 + u * dx,\n          uy0 + u * dy,\n          w0 * coshr0 / cosh(rho * s + r0)\n        ];\n      }\n    }\n\n    i.duration = S * 1000 * rho / Math.SQRT2;\n\n    return i;\n  }\n\n  zoom.rho = function(_) {\n    var _1 = Math.max(1e-3, +_), _2 = _1 * _1, _4 = _2 * _2;\n    return zoomRho(_1, _2, _4);\n  };\n\n  return zoom;\n})(Math.SQRT2, 2, 4);\n","export default function number(x) {\n  return +x;\n}\n","import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateNumber, interpolateRound} from \"d3-interpolate\";\nimport constant from \"./constant.js\";\nimport number from \"./number.js\";\n\nvar unit = [0, 1];\n\nexport function identity(x) {\n  return x;\n}\n\nfunction normalize(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(isNaN(b) ? NaN : 0.5);\n}\n\nfunction clamper(a, b) {\n  var t;\n  if (a > b) t = a, a = b, b = t;\n  return function(x) { return Math.max(a, Math.min(b, x)); };\n}\n\n// normalize(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// interpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding range value x in [a,b].\nfunction bimap(domain, range, interpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = normalize(d1, d0), r0 = interpolate(r1, r0);\n  else d0 = normalize(d0, d1), r0 = interpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, interpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = normalize(domain[i], domain[i + 1]);\n    r[i] = interpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport function transformer() {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      transform,\n      untransform,\n      unknown,\n      clamp = identity,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    var n = Math.min(domain.length, range.length);\n    if (clamp !== identity) clamp = clamper(domain[0], domain[n - 1]);\n    piecewise = n > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return x == null || isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform), range, interpolate)))(transform(clamp(x)));\n  }\n\n  scale.invert = function(y) {\n    return clamp(untransform((input || (input = piecewise(range, domain.map(transform), interpolateNumber)))(y)));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = Array.from(_, number), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = Array.from(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = _ ? true : identity, rescale()) : clamp !== identity;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t, u) {\n    transform = t, untransform = u;\n    return rescale();\n  };\n}\n\nexport default function continuous() {\n  return transformer()(identity, identity);\n}\n","export default function constants(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function(x) {\n  return Math.abs(x = Math.round(x)) >= 1e21\n      ? x.toLocaleString(\"en\").replace(/,/g, \"\")\n      : x.toString(10);\n}\n\n// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimalParts(1.23) returns [\"123\", 0].\nexport function formatDecimalParts(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, ±Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x) {\n  return x = formatDecimalParts(Math.abs(x)), x ? x[1] : NaN;\n}\n","// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  return new FormatSpecifier({\n    fill: match[1],\n    align: match[2],\n    sign: match[3],\n    symbol: match[4],\n    zero: match[5],\n    width: match[6],\n    comma: match[7],\n    precision: match[8] && match[8].slice(1),\n    trim: match[9],\n    type: match[10]\n  });\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nexport function FormatSpecifier(specifier) {\n  this.fill = specifier.fill === undefined ? \" \" : specifier.fill + \"\";\n  this.align = specifier.align === undefined ? \">\" : specifier.align + \"\";\n  this.sign = specifier.sign === undefined ? \"-\" : specifier.sign + \"\";\n  this.symbol = specifier.symbol === undefined ? \"\" : specifier.symbol + \"\";\n  this.zero = !!specifier.zero;\n  this.width = specifier.width === undefined ? undefined : +specifier.width;\n  this.comma = !!specifier.comma;\n  this.precision = specifier.precision === undefined ? undefined : +specifier.precision;\n  this.trim = !!specifier.trim;\n  this.type = specifier.type === undefined ? \"\" : specifier.type + \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width === undefined ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision === undefined ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimalParts(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatDecimal from \"./formatDecimal.js\";\nimport formatPrefixAuto from \"./formatPrefixAuto.js\";\nimport formatRounded from \"./formatRounded.js\";\n\nexport default {\n  \"%\": (x, p) => (x * 100).toFixed(p),\n  \"b\": (x) => Math.round(x).toString(2),\n  \"c\": (x) => x + \"\",\n  \"d\": formatDecimal,\n  \"e\": (x, p) => x.toExponential(p),\n  \"f\": (x, p) => x.toFixed(p),\n  \"g\": (x, p) => x.toPrecision(p),\n  \"o\": (x) => Math.round(x).toString(8),\n  \"p\": (x, p) => formatRounded(x * 100, p),\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": (x) => Math.round(x).toString(16).toUpperCase(),\n  \"x\": (x) => Math.round(x).toString(16)\n};\n","export default function(x) {\n  return x;\n}\n","import exponent from \"./exponent.js\";\nimport formatGroup from \"./formatGroup.js\";\nimport formatNumerals from \"./formatNumerals.js\";\nimport formatSpecifier from \"./formatSpecifier.js\";\nimport formatTrim from \"./formatTrim.js\";\nimport formatTypes from \"./formatTypes.js\";\nimport {prefixExponent} from \"./formatPrefixAuto.js\";\nimport identity from \"./identity.js\";\n\nvar map = Array.prototype.map,\n    prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"µ\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + \"\"),\n      currencyPrefix = locale.currency === undefined ? \"\" : locale.currency[0] + \"\",\n      currencySuffix = locale.currency === undefined ? \"\" : locale.currency[1] + \"\",\n      decimal = locale.decimal === undefined ? \".\" : locale.decimal + \"\",\n      numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),\n      percent = locale.percent === undefined ? \"%\" : locale.percent + \"\",\n      minus = locale.minus === undefined ? \"−\" : locale.minus + \"\",\n      nan = locale.nan === undefined ? \"NaN\" : locale.nan + \"\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision === undefined ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Determine the sign. -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = value < 0 || 1 / value < 0;\n\n        // Perform the initial formatting.\n        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero after formatting, and no explicit positive sign is requested, hide the sign.\n        if (valueNegative && +value === 0 && sign !== \"+\") valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : minus) : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer “value” part that can be\n        // grouped, and fractional or exponential “suffix” part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n","// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (!+s[i]) break out; if (i0 > 0) i0 = 0; break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n","import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function tickFormat(start, stop, count, specifier) {\n  var step = tickStep(start, stop, count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n","import {ticks, tickIncrement} from \"d3-array\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport tickFormat from \"./tickFormat.js\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    var d = domain();\n    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain();\n    var i0 = 0;\n    var i1 = d.length - 1;\n    var start = d[i0];\n    var stop = d[i1];\n    var prestep;\n    var step;\n    var maxIter = 10;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n    \n    while (maxIter-- > 0) {\n      step = tickIncrement(start, stop, count);\n      if (step === prestep) {\n        d[i0] = start\n        d[i1] = stop\n        return domain(d);\n      } else if (step > 0) {\n        start = Math.floor(start / step) * step;\n        stop = Math.ceil(stop / step) * step;\n      } else if (step < 0) {\n        start = Math.ceil(start * step) / step;\n        stop = Math.floor(stop * step) / step;\n      } else {\n        break;\n      }\n      prestep = step;\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous();\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return linearish(scale);\n}\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend we’ve set an alarm, if we haven’t already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(null, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","export default function(specifier) {\n  var n = specifier.length / 6 | 0, colors = new Array(n), i = 0;\n  while (i < n) colors[i] = \"#\" + specifier.slice(i * 6, ++i * 6);\n  return colors;\n}\n","import colors from \"../colors.js\";\n\nexport default colors(\"4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab\");\n","import {Timer} from \"./timer.js\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(elapsed => {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\n","var noop = {value: () => {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions.\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n","import {STARTING, ENDING, ENDED} from \"./transition/schedule.js\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and we’re done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and we’re done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n","import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n","import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\n","import {namespace} from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function(t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function(t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n","import {get, init} from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n","import {get, set, init} from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and we’re done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n","import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n","import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {style} from \"d3-selection\";\nimport {set} from \"./schedule.js\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = style(this, name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0, on1, listener0, key = \"style.\" + name, event = \"end.\" + key, remove;\n  return function() {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and we’re done!\n    // Otherwise, copy-on-write.\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n      .styleTween(name, styleNull(name, i))\n      .on(\"end.style.\" + name, styleRemove(name))\n    : typeof value === \"function\" ? this\n      .styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value)))\n      .each(styleMaybeRemove(this._id, name))\n    : this\n      .styleTween(name, styleConstant(name, i, value), priority)\n      .on(\"end.style.\" + name, null);\n}\n","function styleInterpolate(name, i, priority) {\n  return function(t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n","function textInterpolate(i) {\n  return function(t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, textTween(value));\n}\n","import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_easeVarying from \"./easeVarying.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  easeVarying: transition_easeVarying,\n  end: transition_end,\n  [Symbol.iterator]: selection_prototype[Symbol.iterator]\n};\n","import {selector} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n","import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n","import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n","import {Transition} from \"./index.js\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n","import {Transition, newId} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n","import {tweenValue} from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n","function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n","import {set} from \"./schedule.js\";\n\nfunction easeVarying(id, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (typeof v !== \"function\") throw new Error;\n    set(this, id).ease = v;\n  };\n}\n\nexport default function(value) {\n  if (typeof value !== \"function\") throw new Error;\n  return this.each(easeVarying(this._id, value));\n}\n","import {set} from \"./schedule.js\";\n\nexport default function() {\n  var on0, on1, that = this, id = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = {value: reject},\n        end = {value: function() { if (--size === 0) resolve(); }};\n\n    that.each(function() {\n      var schedule = set(this, id),\n          on = schedule.on;\n\n      // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and we’re done!\n      // Otherwise, copy-on-write.\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n\n    // The selection was empty, resolve end immediately\n    if (size === 0) resolve();\n  });\n}\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","var exponent = 3;\n\nexport var polyIn = (function custom(e) {\n  e = +e;\n\n  function polyIn(t) {\n    return Math.pow(t, e);\n  }\n\n  polyIn.exponent = custom;\n\n  return polyIn;\n})(exponent);\n\nexport var polyOut = (function custom(e) {\n  e = +e;\n\n  function polyOut(t) {\n    return 1 - Math.pow(1 - t, e);\n  }\n\n  polyOut.exponent = custom;\n\n  return polyOut;\n})(exponent);\n\nexport var polyInOut = (function custom(e) {\n  e = +e;\n\n  function polyInOut(t) {\n    return ((t *= 2) <= 1 ? Math.pow(t, e) : 2 - Math.pow(2 - t, e)) / 2;\n  }\n\n  polyInOut.exponent = custom;\n\n  return polyInOut;\n})(exponent);\n","import {tpmt} from \"./math.js\";\n\nvar tau = 2 * Math.PI,\n    amplitude = 1,\n    period = 0.3;\n\nexport var elasticIn = (function custom(a, p) {\n  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);\n\n  function elasticIn(t) {\n    return a * tpmt(-(--t)) * Math.sin((s - t) / p);\n  }\n\n  elasticIn.amplitude = function(a) { return custom(a, p * tau); };\n  elasticIn.period = function(p) { return custom(a, p); };\n\n  return elasticIn;\n})(amplitude, period);\n\nexport var elasticOut = (function custom(a, p) {\n  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);\n\n  function elasticOut(t) {\n    return 1 - a * tpmt(t = +t) * Math.sin((t + s) / p);\n  }\n\n  elasticOut.amplitude = function(a) { return custom(a, p * tau); };\n  elasticOut.period = function(p) { return custom(a, p); };\n\n  return elasticOut;\n})(amplitude, period);\n\nexport var elasticInOut = (function custom(a, p) {\n  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);\n\n  function elasticInOut(t) {\n    return ((t = t * 2 - 1) < 0\n        ? a * tpmt(-t) * Math.sin((s - t) / p)\n        : 2 - a * tpmt(t) * Math.sin((s + t) / p)) / 2;\n  }\n\n  elasticInOut.amplitude = function(a) { return custom(a, p * tau); };\n  elasticInOut.period = function(p) { return custom(a, p); };\n\n  return elasticInOut;\n})(amplitude, period);\n","// tpmt is two power minus ten times t scaled to [0,1]\nexport function tpmt(x) {\n  return (Math.pow(2, -10 * x) - 0.0009765625) * 1.0009775171065494;\n}\n","import {Transition, newId} from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      throw new Error(`transition ${id} not found`);\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n","import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n","import interrupt from \"../interrupt.js\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n","export var slice = Array.prototype.slice;\n","export default function(x) {\n  return x;\n}\n","import {slice} from \"./array.js\";\nimport identity from \"./identity.js\";\n\nvar top = 1,\n    right = 2,\n    bottom = 3,\n    left = 4,\n    epsilon = 1e-6;\n\nfunction translateX(x) {\n  return \"translate(\" + x + \",0)\";\n}\n\nfunction translateY(y) {\n  return \"translate(0,\" + y + \")\";\n}\n\nfunction number(scale) {\n  return d => +scale(d);\n}\n\nfunction center(scale, offset) {\n  offset = Math.max(0, scale.bandwidth() - offset * 2) / 2;\n  if (scale.round()) offset = Math.round(offset);\n  return d => +scale(d) + offset;\n}\n\nfunction entering() {\n  return !this.__axis;\n}\n\nfunction axis(orient, scale) {\n  var tickArguments = [],\n      tickValues = null,\n      tickFormat = null,\n      tickSizeInner = 6,\n      tickSizeOuter = 6,\n      tickPadding = 3,\n      offset = typeof window !== \"undefined\" && window.devicePixelRatio > 1 ? 0 : 0.5,\n      k = orient === top || orient === left ? -1 : 1,\n      x = orient === left || orient === right ? \"x\" : \"y\",\n      transform = orient === top || orient === bottom ? translateX : translateY;\n\n  function axis(context) {\n    var values = tickValues == null ? (scale.ticks ? scale.ticks.apply(scale, tickArguments) : scale.domain()) : tickValues,\n        format = tickFormat == null ? (scale.tickFormat ? scale.tickFormat.apply(scale, tickArguments) : identity) : tickFormat,\n        spacing = Math.max(tickSizeInner, 0) + tickPadding,\n        range = scale.range(),\n        range0 = +range[0] + offset,\n        range1 = +range[range.length - 1] + offset,\n        position = (scale.bandwidth ? center : number)(scale.copy(), offset),\n        selection = context.selection ? context.selection() : context,\n        path = selection.selectAll(\".domain\").data([null]),\n        tick = selection.selectAll(\".tick\").data(values, scale).order(),\n        tickExit = tick.exit(),\n        tickEnter = tick.enter().append(\"g\").attr(\"class\", \"tick\"),\n        line = tick.select(\"line\"),\n        text = tick.select(\"text\");\n\n    path = path.merge(path.enter().insert(\"path\", \".tick\")\n        .attr(\"class\", \"domain\")\n        .attr(\"stroke\", \"currentColor\"));\n\n    tick = tick.merge(tickEnter);\n\n    line = line.merge(tickEnter.append(\"line\")\n        .attr(\"stroke\", \"currentColor\")\n        .attr(x + \"2\", k * tickSizeInner));\n\n    text = text.merge(tickEnter.append(\"text\")\n        .attr(\"fill\", \"currentColor\")\n        .attr(x, k * spacing)\n        .attr(\"dy\", orient === top ? \"0em\" : orient === bottom ? \"0.71em\" : \"0.32em\"));\n\n    if (context !== selection) {\n      path = path.transition(context);\n      tick = tick.transition(context);\n      line = line.transition(context);\n      text = text.transition(context);\n\n      tickExit = tickExit.transition(context)\n          .attr(\"opacity\", epsilon)\n          .attr(\"transform\", function(d) { return isFinite(d = position(d)) ? transform(d + offset) : this.getAttribute(\"transform\"); });\n\n      tickEnter\n          .attr(\"opacity\", epsilon)\n          .attr(\"transform\", function(d) { var p = this.parentNode.__axis; return transform((p && isFinite(p = p(d)) ? p : position(d)) + offset); });\n    }\n\n    tickExit.remove();\n\n    path\n        .attr(\"d\", orient === left || orient === right\n            ? (tickSizeOuter ? \"M\" + k * tickSizeOuter + \",\" + range0 + \"H\" + offset + \"V\" + range1 + \"H\" + k * tickSizeOuter : \"M\" + offset + \",\" + range0 + \"V\" + range1)\n            : (tickSizeOuter ? \"M\" + range0 + \",\" + k * tickSizeOuter + \"V\" + offset + \"H\" + range1 + \"V\" + k * tickSizeOuter : \"M\" + range0 + \",\" + offset + \"H\" + range1));\n\n    tick\n        .attr(\"opacity\", 1)\n        .attr(\"transform\", function(d) { return transform(position(d) + offset); });\n\n    line\n        .attr(x + \"2\", k * tickSizeInner);\n\n    text\n        .attr(x, k * spacing)\n        .text(format);\n\n    selection.filter(entering)\n        .attr(\"fill\", \"none\")\n        .attr(\"font-size\", 10)\n        .attr(\"font-family\", \"sans-serif\")\n        .attr(\"text-anchor\", orient === right ? \"start\" : orient === left ? \"end\" : \"middle\");\n\n    selection\n        .each(function() { this.__axis = position; });\n  }\n\n  axis.scale = function(_) {\n    return arguments.length ? (scale = _, axis) : scale;\n  };\n\n  axis.ticks = function() {\n    return tickArguments = slice.call(arguments), axis;\n  };\n\n  axis.tickArguments = function(_) {\n    return arguments.length ? (tickArguments = _ == null ? [] : slice.call(_), axis) : tickArguments.slice();\n  };\n\n  axis.tickValues = function(_) {\n    return arguments.length ? (tickValues = _ == null ? null : slice.call(_), axis) : tickValues && tickValues.slice();\n  };\n\n  axis.tickFormat = function(_) {\n    return arguments.length ? (tickFormat = _, axis) : tickFormat;\n  };\n\n  axis.tickSize = function(_) {\n    return arguments.length ? (tickSizeInner = tickSizeOuter = +_, axis) : tickSizeInner;\n  };\n\n  axis.tickSizeInner = function(_) {\n    return arguments.length ? (tickSizeInner = +_, axis) : tickSizeInner;\n  };\n\n  axis.tickSizeOuter = function(_) {\n    return arguments.length ? (tickSizeOuter = +_, axis) : tickSizeOuter;\n  };\n\n  axis.tickPadding = function(_) {\n    return arguments.length ? (tickPadding = +_, axis) : tickPadding;\n  };\n\n  axis.offset = function(_) {\n    return arguments.length ? (offset = +_, axis) : offset;\n  };\n\n  return axis;\n}\n\nexport function axisTop(scale) {\n  return axis(top, scale);\n}\n\nexport function axisRight(scale) {\n  return axis(right, scale);\n}\n\nexport function axisBottom(scale) {\n  return axis(bottom, scale);\n}\n\nexport function axisLeft(scale) {\n  return axis(left, scale);\n}\n","const pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction Path() {\n  this._x0 = this._y0 = // start of current subpath\n  this._x1 = this._y1 = null; // end of current subpath\n  this._ = \"\";\n}\n\nfunction path() {\n  return new Path;\n}\n\nPath.prototype = path.prototype = {\n  constructor: Path,\n  moveTo: function(x, y) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y);\n  },\n  closePath: function() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._ += \"Z\";\n    }\n  },\n  lineTo: function(x, y) {\n    this._ += \"L\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  quadraticCurveTo: function(x1, y1, x, y) {\n    this._ += \"Q\" + (+x1) + \",\" + (+y1) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) {\n    this._ += \"C\" + (+x1) + \",\" + (+y1) + \",\" + (+x2) + \",\" + (+y2) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  arcTo: function(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n    var x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x1,y1).\n    if (this._x1 === null) {\n      this._ += \"M\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon));\n\n    // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n    // Equivalently, is (x1,y1) coincident with (x2,y2)?\n    // Or, is the radius zero? Line to (x1,y1).\n    else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n      this._ += \"L\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Otherwise, draw an arc!\n    else {\n      var x20 = x2 - x0,\n          y20 = y2 - y0,\n          l21_2 = x21 * x21 + y21 * y21,\n          l20_2 = x20 * x20 + y20 * y20,\n          l21 = Math.sqrt(l21_2),\n          l01 = Math.sqrt(l01_2),\n          l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n          t01 = l / l01,\n          t21 = l / l21;\n\n      // If the start tangent is not coincident with (x0,y0), line to.\n      if (Math.abs(t01 - 1) > epsilon) {\n        this._ += \"L\" + (x1 + t01 * x01) + \",\" + (y1 + t01 * y01);\n      }\n\n      this._ += \"A\" + r + \",\" + r + \",0,0,\" + (+(y01 * x20 > x01 * y20)) + \",\" + (this._x1 = x1 + t21 * x21) + \",\" + (this._y1 = y1 + t21 * y21);\n    }\n  },\n  arc: function(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r, ccw = !!ccw;\n    var dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x0,y0).\n    if (this._x1 === null) {\n      this._ += \"M\" + x0 + \",\" + y0;\n    }\n\n    // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n      this._ += \"L\" + x0 + \",\" + y0;\n    }\n\n    // Is this arc empty? We’re done.\n    if (!r) return;\n\n    // Does the angle go the wrong way? Flip the direction.\n    if (da < 0) da = da % tau + tau;\n\n    // Is this a complete circle? Draw two arcs to complete the circle.\n    if (da > tauEpsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (x - dx) + \",\" + (y - dy) + \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (this._x1 = x0) + \",\" + (this._y1 = y0);\n    }\n\n    // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,\" + (+(da >= pi)) + \",\" + cw + \",\" + (this._x1 = x + r * Math.cos(a1)) + \",\" + (this._y1 = y + r * Math.sin(a1));\n    }\n  },\n  rect: function(x, y, w, h) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y) + \"h\" + (+w) + \"v\" + (+h) + \"h\" + (-w) + \"Z\";\n  },\n  toString: function() {\n    return this._;\n  }\n};\n\nexport default path;\n","export default function(x) {\n  return function constant() {\n    return x;\n  };\n}\n","function Linear(context) {\n  this._context = context;\n}\n\nLinear.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // proceed\n      default: this._context.lineTo(x, y); break;\n    }\n  }\n};\n\nexport default function(context) {\n  return new Linear(context);\n}\n","export function x(p) {\n  return p[0];\n}\n\nexport function y(p) {\n  return p[1];\n}\n","function Step(context, t) {\n  this._context = context;\n  this._t = t;\n}\n\nStep.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x = this._y = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (0 < this._t && this._t < 1 && this._point === 2) this._context.lineTo(this._x, this._y);\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    if (this._line >= 0) this._t = 1 - this._t, this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // proceed\n      default: {\n        if (this._t <= 0) {\n          this._context.lineTo(this._x, y);\n          this._context.lineTo(x, y);\n        } else {\n          var x1 = this._x * (1 - this._t) + x * this._t;\n          this._context.lineTo(x1, this._y);\n          this._context.lineTo(x1, y);\n        }\n        break;\n      }\n    }\n    this._x = x, this._y = y;\n  }\n};\n\nexport default function(context) {\n  return new Step(context, 0.5);\n}\n\nexport function stepBefore(context) {\n  return new Step(context, 0);\n}\n\nexport function stepAfter(context) {\n  return new Step(context, 1);\n}\n","export function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {select} from \"d3-selection\";\nimport noevent from \"./noevent.js\";\n\nexport default function(view) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", noevent, true);\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", noevent, true);\n  } else {\n    root.__noselect = root.style.MozUserSelect;\n    root.style.MozUserSelect = \"none\";\n  }\n}\n\nexport function yesdrag(view, noclick) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", null);\n  if (noclick) {\n    selection.on(\"click.drag\", noevent, true);\n    setTimeout(function() { selection.on(\"click.drag\", null); }, 0);\n  }\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", null);\n  } else {\n    root.style.MozUserSelect = root.__noselect;\n    delete root.__noselect;\n  }\n}\n","export default x => () => x;\n","export default function DragEvent(type, {\n  sourceEvent,\n  subject,\n  target,\n  identifier,\n  active,\n  x, y, dx, dy,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    subject: {value: subject, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    identifier: {value: identifier, enumerable: true, configurable: true},\n    active: {value: active, enumerable: true, configurable: true},\n    x: {value: x, enumerable: true, configurable: true},\n    y: {value: y, enumerable: true, configurable: true},\n    dx: {value: dx, enumerable: true, configurable: true},\n    dy: {value: dy, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n\nDragEvent.prototype.on = function() {\n  var value = this._.on.apply(this._, arguments);\n  return value === this._ ? this : value;\n};\n","import {dispatch} from \"d3-dispatch\";\nimport {select, pointer} from \"d3-selection\";\nimport nodrag, {yesdrag} from \"./nodrag.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\nimport constant from \"./constant.js\";\nimport DragEvent from \"./event.js\";\n\n// Ignore right-click, since that should open the context menu.\nfunction defaultFilter(event) {\n  return !event.ctrlKey && !event.button;\n}\n\nfunction defaultContainer() {\n  return this.parentNode;\n}\n\nfunction defaultSubject(event, d) {\n  return d == null ? {x: event.x, y: event.y} : d;\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      container = defaultContainer,\n      subject = defaultSubject,\n      touchable = defaultTouchable,\n      gestures = {},\n      listeners = dispatch(\"start\", \"drag\", \"end\"),\n      active = 0,\n      mousedownx,\n      mousedowny,\n      mousemoving,\n      touchending,\n      clickDistance2 = 0;\n\n  function drag(selection) {\n    selection\n        .on(\"mousedown.drag\", mousedowned)\n      .filter(touchable)\n        .on(\"touchstart.drag\", touchstarted)\n        .on(\"touchmove.drag\", touchmoved)\n        .on(\"touchend.drag touchcancel.drag\", touchended)\n        .style(\"touch-action\", \"none\")\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  function mousedowned(event, d) {\n    if (touchending || !filter.call(this, event, d)) return;\n    var gesture = beforestart(this, container.call(this, event, d), event, d, \"mouse\");\n    if (!gesture) return;\n    select(event.view).on(\"mousemove.drag\", mousemoved, true).on(\"mouseup.drag\", mouseupped, true);\n    nodrag(event.view);\n    nopropagation(event);\n    mousemoving = false;\n    mousedownx = event.clientX;\n    mousedowny = event.clientY;\n    gesture(\"start\", event);\n  }\n\n  function mousemoved(event) {\n    noevent(event);\n    if (!mousemoving) {\n      var dx = event.clientX - mousedownx, dy = event.clientY - mousedowny;\n      mousemoving = dx * dx + dy * dy > clickDistance2;\n    }\n    gestures.mouse(\"drag\", event);\n  }\n\n  function mouseupped(event) {\n    select(event.view).on(\"mousemove.drag mouseup.drag\", null);\n    yesdrag(event.view, mousemoving);\n    noevent(event);\n    gestures.mouse(\"end\", event);\n  }\n\n  function touchstarted(event, d) {\n    if (!filter.call(this, event, d)) return;\n    var touches = event.changedTouches,\n        c = container.call(this, event, d),\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = beforestart(this, c, event, d, touches[i].identifier, touches[i])) {\n        nopropagation(event);\n        gesture(\"start\", event, touches[i]);\n      }\n    }\n  }\n\n  function touchmoved(event) {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        noevent(event);\n        gesture(\"drag\", event, touches[i]);\n      }\n    }\n  }\n\n  function touchended(event) {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        nopropagation(event);\n        gesture(\"end\", event, touches[i]);\n      }\n    }\n  }\n\n  function beforestart(that, container, event, d, identifier, touch) {\n    var dispatch = listeners.copy(),\n        p = pointer(touch || event, container), dx, dy,\n        s;\n\n    if ((s = subject.call(that, new DragEvent(\"beforestart\", {\n        sourceEvent: event,\n        target: drag,\n        identifier,\n        active,\n        x: p[0],\n        y: p[1],\n        dx: 0,\n        dy: 0,\n        dispatch\n      }), d)) == null) return;\n\n    dx = s.x - p[0] || 0;\n    dy = s.y - p[1] || 0;\n\n    return function gesture(type, event, touch) {\n      var p0 = p, n;\n      switch (type) {\n        case \"start\": gestures[identifier] = gesture, n = active++; break;\n        case \"end\": delete gestures[identifier], --active; // nobreak\n        case \"drag\": p = pointer(touch || event, container), n = active; break;\n      }\n      dispatch.call(\n        type,\n        that,\n        new DragEvent(type, {\n          sourceEvent: event,\n          subject: s,\n          target: drag,\n          identifier,\n          active: n,\n          x: p[0] + dx,\n          y: p[1] + dy,\n          dx: p[0] - p0[0],\n          dy: p[1] - p0[1],\n          dispatch\n        }),\n        d\n      );\n    };\n  }\n\n  drag.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), drag) : filter;\n  };\n\n  drag.container = function(_) {\n    return arguments.length ? (container = typeof _ === \"function\" ? _ : constant(_), drag) : container;\n  };\n\n  drag.subject = function(_) {\n    return arguments.length ? (subject = typeof _ === \"function\" ? _ : constant(_), drag) : subject;\n  };\n\n  drag.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), drag) : touchable;\n  };\n\n  drag.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? drag : value;\n  };\n\n  drag.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, drag) : Math.sqrt(clickDistance2);\n  };\n\n  return drag;\n}\n","export default x => () => x;\n","export default function BrushEvent(type, {\n  sourceEvent,\n  target,\n  selection,\n  mode,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    selection: {value: selection, enumerable: true, configurable: true},\n    mode: {value: mode, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n","export function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {dragDisable, dragEnable} from \"d3-drag\";\nimport {interpolate} from \"d3-interpolate\";\nimport {pointer, select} from \"d3-selection\";\nimport {interrupt} from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport BrushEvent from \"./event.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\n\nvar MODE_DRAG = {name: \"drag\"},\n    MODE_SPACE = {name: \"space\"},\n    MODE_HANDLE = {name: \"handle\"},\n    MODE_CENTER = {name: \"center\"};\n\nconst {abs, max, min} = Math;\n\nfunction number1(e) {\n  return [+e[0], +e[1]];\n}\n\nfunction number2(e) {\n  return [number1(e[0]), number1(e[1])];\n}\n\nvar X = {\n  name: \"x\",\n  handles: [\"w\", \"e\"].map(type),\n  input: function(x, e) { return x == null ? null : [[+x[0], e[0][1]], [+x[1], e[1][1]]]; },\n  output: function(xy) { return xy && [xy[0][0], xy[1][0]]; }\n};\n\nvar Y = {\n  name: \"y\",\n  handles: [\"n\", \"s\"].map(type),\n  input: function(y, e) { return y == null ? null : [[e[0][0], +y[0]], [e[1][0], +y[1]]]; },\n  output: function(xy) { return xy && [xy[0][1], xy[1][1]]; }\n};\n\nvar XY = {\n  name: \"xy\",\n  handles: [\"n\", \"w\", \"e\", \"s\", \"nw\", \"ne\", \"sw\", \"se\"].map(type),\n  input: function(xy) { return xy == null ? null : number2(xy); },\n  output: function(xy) { return xy; }\n};\n\nvar cursors = {\n  overlay: \"crosshair\",\n  selection: \"move\",\n  n: \"ns-resize\",\n  e: \"ew-resize\",\n  s: \"ns-resize\",\n  w: \"ew-resize\",\n  nw: \"nwse-resize\",\n  ne: \"nesw-resize\",\n  se: \"nwse-resize\",\n  sw: \"nesw-resize\"\n};\n\nvar flipX = {\n  e: \"w\",\n  w: \"e\",\n  nw: \"ne\",\n  ne: \"nw\",\n  se: \"sw\",\n  sw: \"se\"\n};\n\nvar flipY = {\n  n: \"s\",\n  s: \"n\",\n  nw: \"sw\",\n  ne: \"se\",\n  se: \"ne\",\n  sw: \"nw\"\n};\n\nvar signsX = {\n  overlay: +1,\n  selection: +1,\n  n: null,\n  e: +1,\n  s: null,\n  w: -1,\n  nw: -1,\n  ne: +1,\n  se: +1,\n  sw: -1\n};\n\nvar signsY = {\n  overlay: +1,\n  selection: +1,\n  n: -1,\n  e: null,\n  s: +1,\n  w: null,\n  nw: -1,\n  ne: -1,\n  se: +1,\n  sw: +1\n};\n\nfunction type(t) {\n  return {type: t};\n}\n\n// Ignore right-click, since that should open the context menu.\nfunction defaultFilter(event) {\n  return !event.ctrlKey && !event.button;\n}\n\nfunction defaultExtent() {\n  var svg = this.ownerSVGElement || this;\n  if (svg.hasAttribute(\"viewBox\")) {\n    svg = svg.viewBox.baseVal;\n    return [[svg.x, svg.y], [svg.x + svg.width, svg.y + svg.height]];\n  }\n  return [[0, 0], [svg.width.baseVal.value, svg.height.baseVal.value]];\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\n// Like d3.local, but with the name “__brush” rather than auto-generated.\nfunction local(node) {\n  while (!node.__brush) if (!(node = node.parentNode)) return;\n  return node.__brush;\n}\n\nfunction empty(extent) {\n  return extent[0][0] === extent[1][0]\n      || extent[0][1] === extent[1][1];\n}\n\nexport function brushSelection(node) {\n  var state = node.__brush;\n  return state ? state.dim.output(state.selection) : null;\n}\n\nexport function brushX() {\n  return brush(X);\n}\n\nexport function brushY() {\n  return brush(Y);\n}\n\nexport default function() {\n  return brush(XY);\n}\n\nfunction brush(dim) {\n  var extent = defaultExtent,\n      filter = defaultFilter,\n      touchable = defaultTouchable,\n      keys = true,\n      listeners = dispatch(\"start\", \"brush\", \"end\"),\n      handleSize = 6,\n      touchending;\n\n  function brush(group) {\n    var overlay = group\n        .property(\"__brush\", initialize)\n      .selectAll(\".overlay\")\n      .data([type(\"overlay\")]);\n\n    overlay.enter().append(\"rect\")\n        .attr(\"class\", \"overlay\")\n        .attr(\"pointer-events\", \"all\")\n        .attr(\"cursor\", cursors.overlay)\n      .merge(overlay)\n        .each(function() {\n          var extent = local(this).extent;\n          select(this)\n              .attr(\"x\", extent[0][0])\n              .attr(\"y\", extent[0][1])\n              .attr(\"width\", extent[1][0] - extent[0][0])\n              .attr(\"height\", extent[1][1] - extent[0][1]);\n        });\n\n    group.selectAll(\".selection\")\n      .data([type(\"selection\")])\n      .enter().append(\"rect\")\n        .attr(\"class\", \"selection\")\n        .attr(\"cursor\", cursors.selection)\n        .attr(\"fill\", \"#777\")\n        .attr(\"fill-opacity\", 0.3)\n        .attr(\"stroke\", \"#fff\")\n        .attr(\"shape-rendering\", \"crispEdges\");\n\n    var handle = group.selectAll(\".handle\")\n      .data(dim.handles, function(d) { return d.type; });\n\n    handle.exit().remove();\n\n    handle.enter().append(\"rect\")\n        .attr(\"class\", function(d) { return \"handle handle--\" + d.type; })\n        .attr(\"cursor\", function(d) { return cursors[d.type]; });\n\n    group\n        .each(redraw)\n        .attr(\"fill\", \"none\")\n        .attr(\"pointer-events\", \"all\")\n        .on(\"mousedown.brush\", started)\n      .filter(touchable)\n        .on(\"touchstart.brush\", started)\n        .on(\"touchmove.brush\", touchmoved)\n        .on(\"touchend.brush touchcancel.brush\", touchended)\n        .style(\"touch-action\", \"none\")\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  brush.move = function(group, selection) {\n    if (group.tween) {\n      group\n          .on(\"start.brush\", function(event) { emitter(this, arguments).beforestart().start(event); })\n          .on(\"interrupt.brush end.brush\", function(event) { emitter(this, arguments).end(event); })\n          .tween(\"brush\", function() {\n            var that = this,\n                state = that.__brush,\n                emit = emitter(that, arguments),\n                selection0 = state.selection,\n                selection1 = dim.input(typeof selection === \"function\" ? selection.apply(this, arguments) : selection, state.extent),\n                i = interpolate(selection0, selection1);\n\n            function tween(t) {\n              state.selection = t === 1 && selection1 === null ? null : i(t);\n              redraw.call(that);\n              emit.brush();\n            }\n\n            return selection0 !== null && selection1 !== null ? tween : tween(1);\n          });\n    } else {\n      group\n          .each(function() {\n            var that = this,\n                args = arguments,\n                state = that.__brush,\n                selection1 = dim.input(typeof selection === \"function\" ? selection.apply(that, args) : selection, state.extent),\n                emit = emitter(that, args).beforestart();\n\n            interrupt(that);\n            state.selection = selection1 === null ? null : selection1;\n            redraw.call(that);\n            emit.start().brush().end();\n          });\n    }\n  };\n\n  brush.clear = function(group) {\n    brush.move(group, null);\n  };\n\n  function redraw() {\n    var group = select(this),\n        selection = local(this).selection;\n\n    if (selection) {\n      group.selectAll(\".selection\")\n          .style(\"display\", null)\n          .attr(\"x\", selection[0][0])\n          .attr(\"y\", selection[0][1])\n          .attr(\"width\", selection[1][0] - selection[0][0])\n          .attr(\"height\", selection[1][1] - selection[0][1]);\n\n      group.selectAll(\".handle\")\n          .style(\"display\", null)\n          .attr(\"x\", function(d) { return d.type[d.type.length - 1] === \"e\" ? selection[1][0] - handleSize / 2 : selection[0][0] - handleSize / 2; })\n          .attr(\"y\", function(d) { return d.type[0] === \"s\" ? selection[1][1] - handleSize / 2 : selection[0][1] - handleSize / 2; })\n          .attr(\"width\", function(d) { return d.type === \"n\" || d.type === \"s\" ? selection[1][0] - selection[0][0] + handleSize : handleSize; })\n          .attr(\"height\", function(d) { return d.type === \"e\" || d.type === \"w\" ? selection[1][1] - selection[0][1] + handleSize : handleSize; });\n    }\n\n    else {\n      group.selectAll(\".selection,.handle\")\n          .style(\"display\", \"none\")\n          .attr(\"x\", null)\n          .attr(\"y\", null)\n          .attr(\"width\", null)\n          .attr(\"height\", null);\n    }\n  }\n\n  function emitter(that, args, clean) {\n    var emit = that.__brush.emitter;\n    return emit && (!clean || !emit.clean) ? emit : new Emitter(that, args, clean);\n  }\n\n  function Emitter(that, args, clean) {\n    this.that = that;\n    this.args = args;\n    this.state = that.__brush;\n    this.active = 0;\n    this.clean = clean;\n  }\n\n  Emitter.prototype = {\n    beforestart: function() {\n      if (++this.active === 1) this.state.emitter = this, this.starting = true;\n      return this;\n    },\n    start: function(event, mode) {\n      if (this.starting) this.starting = false, this.emit(\"start\", event, mode);\n      else this.emit(\"brush\", event);\n      return this;\n    },\n    brush: function(event, mode) {\n      this.emit(\"brush\", event, mode);\n      return this;\n    },\n    end: function(event, mode) {\n      if (--this.active === 0) delete this.state.emitter, this.emit(\"end\", event, mode);\n      return this;\n    },\n    emit: function(type, event, mode) {\n      var d = select(this.that).datum();\n      listeners.call(\n        type,\n        this.that,\n        new BrushEvent(type, {\n          sourceEvent: event,\n          target: brush,\n          selection: dim.output(this.state.selection),\n          mode,\n          dispatch: listeners\n        }),\n        d\n      );\n    }\n  };\n\n  function started(event) {\n    if (touchending && !event.touches) return;\n    if (!filter.apply(this, arguments)) return;\n\n    var that = this,\n        type = event.target.__data__.type,\n        mode = (keys && event.metaKey ? type = \"overlay\" : type) === \"selection\" ? MODE_DRAG : (keys && event.altKey ? MODE_CENTER : MODE_HANDLE),\n        signX = dim === Y ? null : signsX[type],\n        signY = dim === X ? null : signsY[type],\n        state = local(that),\n        extent = state.extent,\n        selection = state.selection,\n        W = extent[0][0], w0, w1,\n        N = extent[0][1], n0, n1,\n        E = extent[1][0], e0, e1,\n        S = extent[1][1], s0, s1,\n        dx = 0,\n        dy = 0,\n        moving,\n        shifting = signX && signY && keys && event.shiftKey,\n        lockX,\n        lockY,\n        points = Array.from(event.touches || [event], t => {\n          const i = t.identifier;\n          t = pointer(t, that);\n          t.point0 = t.slice();\n          t.identifier = i;\n          return t;\n        });\n\n    if (type === \"overlay\") {\n      if (selection) moving = true;\n      const pts = [points[0], points[1] || points[0]];\n      state.selection = selection = [[\n          w0 = dim === Y ? W : min(pts[0][0], pts[1][0]),\n          n0 = dim === X ? N : min(pts[0][1], pts[1][1])\n        ], [\n          e0 = dim === Y ? E : max(pts[0][0], pts[1][0]),\n          s0 = dim === X ? S : max(pts[0][1], pts[1][1])\n        ]];\n      if (points.length > 1) move();\n    } else {\n      w0 = selection[0][0];\n      n0 = selection[0][1];\n      e0 = selection[1][0];\n      s0 = selection[1][1];\n    }\n\n    w1 = w0;\n    n1 = n0;\n    e1 = e0;\n    s1 = s0;\n\n    var group = select(that)\n        .attr(\"pointer-events\", \"none\");\n\n    var overlay = group.selectAll(\".overlay\")\n        .attr(\"cursor\", cursors[type]);\n\n    interrupt(that);\n    var emit = emitter(that, arguments, true).beforestart();\n\n    if (event.touches) {\n      emit.moved = moved;\n      emit.ended = ended;\n    } else {\n      var view = select(event.view)\n          .on(\"mousemove.brush\", moved, true)\n          .on(\"mouseup.brush\", ended, true);\n      if (keys) view\n          .on(\"keydown.brush\", keydowned, true)\n          .on(\"keyup.brush\", keyupped, true)\n\n      dragDisable(event.view);\n    }\n\n    redraw.call(that);\n    emit.start(event, mode.name);\n\n    function moved(event) {\n      for (const p of event.changedTouches || [event]) {\n        for (const d of points)\n          if (d.identifier === p.identifier) d.cur = pointer(p, that);\n      }\n      if (shifting && !lockX && !lockY && points.length === 1) {\n        const point = points[0];\n        if (abs(point.cur[0] - point[0]) > abs(point.cur[1] - point[1]))\n          lockY = true;\n        else\n          lockX = true;\n      }\n      for (const point of points)\n        if (point.cur) point[0] = point.cur[0], point[1] = point.cur[1];\n      moving = true;\n      noevent(event);\n      move(event);\n    }\n\n    function move(event) {\n      const point = points[0], point0 = point.point0;\n      var t;\n\n      dx = point[0] - point0[0];\n      dy = point[1] - point0[1];\n\n      switch (mode) {\n        case MODE_SPACE:\n        case MODE_DRAG: {\n          if (signX) dx = max(W - w0, min(E - e0, dx)), w1 = w0 + dx, e1 = e0 + dx;\n          if (signY) dy = max(N - n0, min(S - s0, dy)), n1 = n0 + dy, s1 = s0 + dy;\n          break;\n        }\n        case MODE_HANDLE: {\n          if (points[1]) {\n            if (signX) w1 = max(W, min(E, points[0][0])), e1 = max(W, min(E, points[1][0])), signX = 1;\n            if (signY) n1 = max(N, min(S, points[0][1])), s1 = max(N, min(S, points[1][1])), signY = 1;\n          } else {\n            if (signX < 0) dx = max(W - w0, min(E - w0, dx)), w1 = w0 + dx, e1 = e0;\n            else if (signX > 0) dx = max(W - e0, min(E - e0, dx)), w1 = w0, e1 = e0 + dx;\n            if (signY < 0) dy = max(N - n0, min(S - n0, dy)), n1 = n0 + dy, s1 = s0;\n            else if (signY > 0) dy = max(N - s0, min(S - s0, dy)), n1 = n0, s1 = s0 + dy;\n          }\n          break;\n        }\n        case MODE_CENTER: {\n          if (signX) w1 = max(W, min(E, w0 - dx * signX)), e1 = max(W, min(E, e0 + dx * signX));\n          if (signY) n1 = max(N, min(S, n0 - dy * signY)), s1 = max(N, min(S, s0 + dy * signY));\n          break;\n        }\n      }\n\n      if (e1 < w1) {\n        signX *= -1;\n        t = w0, w0 = e0, e0 = t;\n        t = w1, w1 = e1, e1 = t;\n        if (type in flipX) overlay.attr(\"cursor\", cursors[type = flipX[type]]);\n      }\n\n      if (s1 < n1) {\n        signY *= -1;\n        t = n0, n0 = s0, s0 = t;\n        t = n1, n1 = s1, s1 = t;\n        if (type in flipY) overlay.attr(\"cursor\", cursors[type = flipY[type]]);\n      }\n\n      if (state.selection) selection = state.selection; // May be set by brush.move!\n      if (lockX) w1 = selection[0][0], e1 = selection[1][0];\n      if (lockY) n1 = selection[0][1], s1 = selection[1][1];\n\n      if (selection[0][0] !== w1\n          || selection[0][1] !== n1\n          || selection[1][0] !== e1\n          || selection[1][1] !== s1) {\n        state.selection = [[w1, n1], [e1, s1]];\n        redraw.call(that);\n        emit.brush(event, mode.name);\n      }\n    }\n\n    function ended(event) {\n      nopropagation(event);\n      if (event.touches) {\n        if (event.touches.length) return;\n        if (touchending) clearTimeout(touchending);\n        touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!\n      } else {\n        dragEnable(event.view, moving);\n        view.on(\"keydown.brush keyup.brush mousemove.brush mouseup.brush\", null);\n      }\n      group.attr(\"pointer-events\", \"all\");\n      overlay.attr(\"cursor\", cursors.overlay);\n      if (state.selection) selection = state.selection; // May be set by brush.move (on start)!\n      if (empty(selection)) state.selection = null, redraw.call(that);\n      emit.end(event, mode.name);\n    }\n\n    function keydowned(event) {\n      switch (event.keyCode) {\n        case 16: { // SHIFT\n          shifting = signX && signY;\n          break;\n        }\n        case 18: { // ALT\n          if (mode === MODE_HANDLE) {\n            if (signX) e0 = e1 - dx * signX, w0 = w1 + dx * signX;\n            if (signY) s0 = s1 - dy * signY, n0 = n1 + dy * signY;\n            mode = MODE_CENTER;\n            move();\n          }\n          break;\n        }\n        case 32: { // SPACE; takes priority over ALT\n          if (mode === MODE_HANDLE || mode === MODE_CENTER) {\n            if (signX < 0) e0 = e1 - dx; else if (signX > 0) w0 = w1 - dx;\n            if (signY < 0) s0 = s1 - dy; else if (signY > 0) n0 = n1 - dy;\n            mode = MODE_SPACE;\n            overlay.attr(\"cursor\", cursors.selection);\n            move();\n          }\n          break;\n        }\n        default: return;\n      }\n      noevent(event);\n    }\n\n    function keyupped(event) {\n      switch (event.keyCode) {\n        case 16: { // SHIFT\n          if (shifting) {\n            lockX = lockY = shifting = false;\n            move();\n          }\n          break;\n        }\n        case 18: { // ALT\n          if (mode === MODE_CENTER) {\n            if (signX < 0) e0 = e1; else if (signX > 0) w0 = w1;\n            if (signY < 0) s0 = s1; else if (signY > 0) n0 = n1;\n            mode = MODE_HANDLE;\n            move();\n          }\n          break;\n        }\n        case 32: { // SPACE\n          if (mode === MODE_SPACE) {\n            if (event.altKey) {\n              if (signX) e0 = e1 - dx * signX, w0 = w1 + dx * signX;\n              if (signY) s0 = s1 - dy * signY, n0 = n1 + dy * signY;\n              mode = MODE_CENTER;\n            } else {\n              if (signX < 0) e0 = e1; else if (signX > 0) w0 = w1;\n              if (signY < 0) s0 = s1; else if (signY > 0) n0 = n1;\n              mode = MODE_HANDLE;\n            }\n            overlay.attr(\"cursor\", cursors[type]);\n            move();\n          }\n          break;\n        }\n        default: return;\n      }\n      noevent(event);\n    }\n  }\n\n  function touchmoved(event) {\n    emitter(this, arguments).moved(event);\n  }\n\n  function touchended(event) {\n    emitter(this, arguments).ended(event);\n  }\n\n  function initialize() {\n    var state = this.__brush || {selection: null};\n    state.extent = number2(extent.apply(this, arguments));\n    state.dim = dim;\n    return state;\n  }\n\n  brush.extent = function(_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant(number2(_)), brush) : extent;\n  };\n\n  brush.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), brush) : filter;\n  };\n\n  brush.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), brush) : touchable;\n  };\n\n  brush.handleSize = function(_) {\n    return arguments.length ? (handleSize = +_, brush) : handleSize;\n  };\n\n  brush.keyModifiers = function(_) {\n    return arguments.length ? (keys = !!_, brush) : keys;\n  };\n\n  brush.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? brush : value;\n  };\n\n  return brush;\n}\n","export default x => () => x;\n","export default function ZoomEvent(type, {\n  sourceEvent,\n  target,\n  transform,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    transform: {value: transform, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n","export function Transform(k, x, y) {\n  this.k = k;\n  this.x = x;\n  this.y = y;\n}\n\nTransform.prototype = {\n  constructor: Transform,\n  scale: function(k) {\n    return k === 1 ? this : new Transform(this.k * k, this.x, this.y);\n  },\n  translate: function(x, y) {\n    return x === 0 & y === 0 ? this : new Transform(this.k, this.x + this.k * x, this.y + this.k * y);\n  },\n  apply: function(point) {\n    return [point[0] * this.k + this.x, point[1] * this.k + this.y];\n  },\n  applyX: function(x) {\n    return x * this.k + this.x;\n  },\n  applyY: function(y) {\n    return y * this.k + this.y;\n  },\n  invert: function(location) {\n    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];\n  },\n  invertX: function(x) {\n    return (x - this.x) / this.k;\n  },\n  invertY: function(y) {\n    return (y - this.y) / this.k;\n  },\n  rescaleX: function(x) {\n    return x.copy().domain(x.range().map(this.invertX, this).map(x.invert, x));\n  },\n  rescaleY: function(y) {\n    return y.copy().domain(y.range().map(this.invertY, this).map(y.invert, y));\n  },\n  toString: function() {\n    return \"translate(\" + this.x + \",\" + this.y + \") scale(\" + this.k + \")\";\n  }\n};\n\nexport var identity = new Transform(1, 0, 0);\n\ntransform.prototype = Transform.prototype;\n\nexport default function transform(node) {\n  while (!node.__zoom) if (!(node = node.parentNode)) return identity;\n  return node.__zoom;\n}\n","export function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {dragDisable, dragEnable} from \"d3-drag\";\nimport {interpolateZoom} from \"d3-interpolate\";\nimport {select, pointer} from \"d3-selection\";\nimport {interrupt} from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport ZoomEvent from \"./event.js\";\nimport {Transform, identity} from \"./transform.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\n\n// Ignore right-click, since that should open the context menu.\n// except for pinch-to-zoom, which is sent as a wheel+ctrlKey event\nfunction defaultFilter(event) {\n  return (!event.ctrlKey || event.type === 'wheel') && !event.button;\n}\n\nfunction defaultExtent() {\n  var e = this;\n  if (e instanceof SVGElement) {\n    e = e.ownerSVGElement || e;\n    if (e.hasAttribute(\"viewBox\")) {\n      e = e.viewBox.baseVal;\n      return [[e.x, e.y], [e.x + e.width, e.y + e.height]];\n    }\n    return [[0, 0], [e.width.baseVal.value, e.height.baseVal.value]];\n  }\n  return [[0, 0], [e.clientWidth, e.clientHeight]];\n}\n\nfunction defaultTransform() {\n  return this.__zoom || identity;\n}\n\nfunction defaultWheelDelta(event) {\n  return -event.deltaY * (event.deltaMode === 1 ? 0.05 : event.deltaMode ? 1 : 0.002) * (event.ctrlKey ? 10 : 1);\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nfunction defaultConstrain(transform, extent, translateExtent) {\n  var dx0 = transform.invertX(extent[0][0]) - translateExtent[0][0],\n      dx1 = transform.invertX(extent[1][0]) - translateExtent[1][0],\n      dy0 = transform.invertY(extent[0][1]) - translateExtent[0][1],\n      dy1 = transform.invertY(extent[1][1]) - translateExtent[1][1];\n  return transform.translate(\n    dx1 > dx0 ? (dx0 + dx1) / 2 : Math.min(0, dx0) || Math.max(0, dx1),\n    dy1 > dy0 ? (dy0 + dy1) / 2 : Math.min(0, dy0) || Math.max(0, dy1)\n  );\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      extent = defaultExtent,\n      constrain = defaultConstrain,\n      wheelDelta = defaultWheelDelta,\n      touchable = defaultTouchable,\n      scaleExtent = [0, Infinity],\n      translateExtent = [[-Infinity, -Infinity], [Infinity, Infinity]],\n      duration = 250,\n      interpolate = interpolateZoom,\n      listeners = dispatch(\"start\", \"zoom\", \"end\"),\n      touchstarting,\n      touchfirst,\n      touchending,\n      touchDelay = 500,\n      wheelDelay = 150,\n      clickDistance2 = 0,\n      tapDistance = 10;\n\n  function zoom(selection) {\n    selection\n        .property(\"__zoom\", defaultTransform)\n        .on(\"wheel.zoom\", wheeled)\n        .on(\"mousedown.zoom\", mousedowned)\n        .on(\"dblclick.zoom\", dblclicked)\n      .filter(touchable)\n        .on(\"touchstart.zoom\", touchstarted)\n        .on(\"touchmove.zoom\", touchmoved)\n        .on(\"touchend.zoom touchcancel.zoom\", touchended)\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  zoom.transform = function(collection, transform, point, event) {\n    var selection = collection.selection ? collection.selection() : collection;\n    selection.property(\"__zoom\", defaultTransform);\n    if (collection !== selection) {\n      schedule(collection, transform, point, event);\n    } else {\n      selection.interrupt().each(function() {\n        gesture(this, arguments)\n          .event(event)\n          .start()\n          .zoom(null, typeof transform === \"function\" ? transform.apply(this, arguments) : transform)\n          .end();\n      });\n    }\n  };\n\n  zoom.scaleBy = function(selection, k, p, event) {\n    zoom.scaleTo(selection, function() {\n      var k0 = this.__zoom.k,\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return k0 * k1;\n    }, p, event);\n  };\n\n  zoom.scaleTo = function(selection, k, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t0 = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p,\n          p1 = t0.invert(p0),\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return constrain(translate(scale(t0, k1), p0, p1), e, translateExtent);\n    }, p, event);\n  };\n\n  zoom.translateBy = function(selection, x, y, event) {\n    zoom.transform(selection, function() {\n      return constrain(this.__zoom.translate(\n        typeof x === \"function\" ? x.apply(this, arguments) : x,\n        typeof y === \"function\" ? y.apply(this, arguments) : y\n      ), extent.apply(this, arguments), translateExtent);\n    }, null, event);\n  };\n\n  zoom.translateTo = function(selection, x, y, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p;\n      return constrain(identity.translate(p0[0], p0[1]).scale(t.k).translate(\n        typeof x === \"function\" ? -x.apply(this, arguments) : -x,\n        typeof y === \"function\" ? -y.apply(this, arguments) : -y\n      ), e, translateExtent);\n    }, p, event);\n  };\n\n  function scale(transform, k) {\n    k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], k));\n    return k === transform.k ? transform : new Transform(k, transform.x, transform.y);\n  }\n\n  function translate(transform, p0, p1) {\n    var x = p0[0] - p1[0] * transform.k, y = p0[1] - p1[1] * transform.k;\n    return x === transform.x && y === transform.y ? transform : new Transform(transform.k, x, y);\n  }\n\n  function centroid(extent) {\n    return [(+extent[0][0] + +extent[1][0]) / 2, (+extent[0][1] + +extent[1][1]) / 2];\n  }\n\n  function schedule(transition, transform, point, event) {\n    transition\n        .on(\"start.zoom\", function() { gesture(this, arguments).event(event).start(); })\n        .on(\"interrupt.zoom end.zoom\", function() { gesture(this, arguments).event(event).end(); })\n        .tween(\"zoom\", function() {\n          var that = this,\n              args = arguments,\n              g = gesture(that, args).event(event),\n              e = extent.apply(that, args),\n              p = point == null ? centroid(e) : typeof point === \"function\" ? point.apply(that, args) : point,\n              w = Math.max(e[1][0] - e[0][0], e[1][1] - e[0][1]),\n              a = that.__zoom,\n              b = typeof transform === \"function\" ? transform.apply(that, args) : transform,\n              i = interpolate(a.invert(p).concat(w / a.k), b.invert(p).concat(w / b.k));\n          return function(t) {\n            if (t === 1) t = b; // Avoid rounding error on end.\n            else { var l = i(t), k = w / l[2]; t = new Transform(k, p[0] - l[0] * k, p[1] - l[1] * k); }\n            g.zoom(null, t);\n          };\n        });\n  }\n\n  function gesture(that, args, clean) {\n    return (!clean && that.__zooming) || new Gesture(that, args);\n  }\n\n  function Gesture(that, args) {\n    this.that = that;\n    this.args = args;\n    this.active = 0;\n    this.sourceEvent = null;\n    this.extent = extent.apply(that, args);\n    this.taps = 0;\n  }\n\n  Gesture.prototype = {\n    event: function(event) {\n      if (event) this.sourceEvent = event;\n      return this;\n    },\n    start: function() {\n      if (++this.active === 1) {\n        this.that.__zooming = this;\n        this.emit(\"start\");\n      }\n      return this;\n    },\n    zoom: function(key, transform) {\n      if (this.mouse && key !== \"mouse\") this.mouse[1] = transform.invert(this.mouse[0]);\n      if (this.touch0 && key !== \"touch\") this.touch0[1] = transform.invert(this.touch0[0]);\n      if (this.touch1 && key !== \"touch\") this.touch1[1] = transform.invert(this.touch1[0]);\n      this.that.__zoom = transform;\n      this.emit(\"zoom\");\n      return this;\n    },\n    end: function() {\n      if (--this.active === 0) {\n        delete this.that.__zooming;\n        this.emit(\"end\");\n      }\n      return this;\n    },\n    emit: function(type) {\n      var d = select(this.that).datum();\n      listeners.call(\n        type,\n        this.that,\n        new ZoomEvent(type, {\n          sourceEvent: this.sourceEvent,\n          target: zoom,\n          type,\n          transform: this.that.__zoom,\n          dispatch: listeners\n        }),\n        d\n      );\n    }\n  };\n\n  function wheeled(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var g = gesture(this, args).event(event),\n        t = this.__zoom,\n        k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], t.k * Math.pow(2, wheelDelta.apply(this, arguments)))),\n        p = pointer(event);\n\n    // If the mouse is in the same location as before, reuse it.\n    // If there were recent wheel events, reset the wheel idle timeout.\n    if (g.wheel) {\n      if (g.mouse[0][0] !== p[0] || g.mouse[0][1] !== p[1]) {\n        g.mouse[1] = t.invert(g.mouse[0] = p);\n      }\n      clearTimeout(g.wheel);\n    }\n\n    // If this wheel event won’t trigger a transform change, ignore it.\n    else if (t.k === k) return;\n\n    // Otherwise, capture the mouse point and location at the start.\n    else {\n      g.mouse = [p, t.invert(p)];\n      interrupt(this);\n      g.start();\n    }\n\n    noevent(event);\n    g.wheel = setTimeout(wheelidled, wheelDelay);\n    g.zoom(\"mouse\", constrain(translate(scale(t, k), g.mouse[0], g.mouse[1]), g.extent, translateExtent));\n\n    function wheelidled() {\n      g.wheel = null;\n      g.end();\n    }\n  }\n\n  function mousedowned(event, ...args) {\n    if (touchending || !filter.apply(this, arguments)) return;\n    var g = gesture(this, args, true).event(event),\n        v = select(event.view).on(\"mousemove.zoom\", mousemoved, true).on(\"mouseup.zoom\", mouseupped, true),\n        p = pointer(event, currentTarget),\n        currentTarget = event.currentTarget,\n        x0 = event.clientX,\n        y0 = event.clientY;\n\n    dragDisable(event.view);\n    nopropagation(event);\n    g.mouse = [p, this.__zoom.invert(p)];\n    interrupt(this);\n    g.start();\n\n    function mousemoved(event) {\n      noevent(event);\n      if (!g.moved) {\n        var dx = event.clientX - x0, dy = event.clientY - y0;\n        g.moved = dx * dx + dy * dy > clickDistance2;\n      }\n      g.event(event)\n       .zoom(\"mouse\", constrain(translate(g.that.__zoom, g.mouse[0] = pointer(event, currentTarget), g.mouse[1]), g.extent, translateExtent));\n    }\n\n    function mouseupped(event) {\n      v.on(\"mousemove.zoom mouseup.zoom\", null);\n      dragEnable(event.view, g.moved);\n      noevent(event);\n      g.event(event).end();\n    }\n  }\n\n  function dblclicked(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var t0 = this.__zoom,\n        p0 = pointer(event.changedTouches ? event.changedTouches[0] : event, this),\n        p1 = t0.invert(p0),\n        k1 = t0.k * (event.shiftKey ? 0.5 : 2),\n        t1 = constrain(translate(scale(t0, k1), p0, p1), extent.apply(this, args), translateExtent);\n\n    noevent(event);\n    if (duration > 0) select(this).transition().duration(duration).call(schedule, t1, p0, event);\n    else select(this).call(zoom.transform, t1, p0, event);\n  }\n\n  function touchstarted(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var touches = event.touches,\n        n = touches.length,\n        g = gesture(this, args, event.changedTouches.length === n).event(event),\n        started, i, t, p;\n\n    nopropagation(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      p = [p, this.__zoom.invert(p), t.identifier];\n      if (!g.touch0) g.touch0 = p, started = true, g.taps = 1 + !!touchstarting;\n      else if (!g.touch1 && g.touch0[2] !== p[2]) g.touch1 = p, g.taps = 0;\n    }\n\n    if (touchstarting) touchstarting = clearTimeout(touchstarting);\n\n    if (started) {\n      if (g.taps < 2) touchfirst = p[0], touchstarting = setTimeout(function() { touchstarting = null; }, touchDelay);\n      interrupt(this);\n      g.start();\n    }\n  }\n\n  function touchmoved(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t, p, l;\n\n    noevent(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      if (g.touch0 && g.touch0[2] === t.identifier) g.touch0[0] = p;\n      else if (g.touch1 && g.touch1[2] === t.identifier) g.touch1[0] = p;\n    }\n    t = g.that.__zoom;\n    if (g.touch1) {\n      var p0 = g.touch0[0], l0 = g.touch0[1],\n          p1 = g.touch1[0], l1 = g.touch1[1],\n          dp = (dp = p1[0] - p0[0]) * dp + (dp = p1[1] - p0[1]) * dp,\n          dl = (dl = l1[0] - l0[0]) * dl + (dl = l1[1] - l0[1]) * dl;\n      t = scale(t, Math.sqrt(dp / dl));\n      p = [(p0[0] + p1[0]) / 2, (p0[1] + p1[1]) / 2];\n      l = [(l0[0] + l1[0]) / 2, (l0[1] + l1[1]) / 2];\n    }\n    else if (g.touch0) p = g.touch0[0], l = g.touch0[1];\n    else return;\n\n    g.zoom(\"touch\", constrain(translate(t, p, l), g.extent, translateExtent));\n  }\n\n  function touchended(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t;\n\n    nopropagation(event);\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, touchDelay);\n    for (i = 0; i < n; ++i) {\n      t = touches[i];\n      if (g.touch0 && g.touch0[2] === t.identifier) delete g.touch0;\n      else if (g.touch1 && g.touch1[2] === t.identifier) delete g.touch1;\n    }\n    if (g.touch1 && !g.touch0) g.touch0 = g.touch1, delete g.touch1;\n    if (g.touch0) g.touch0[1] = this.__zoom.invert(g.touch0[0]);\n    else {\n      g.end();\n      // If this was a dbltap, reroute to the (optional) dblclick.zoom handler.\n      if (g.taps === 2) {\n        t = pointer(t, this);\n        if (Math.hypot(touchfirst[0] - t[0], touchfirst[1] - t[1]) < tapDistance) {\n          var p = select(this).on(\"dblclick.zoom\");\n          if (p) p.apply(this, arguments);\n        }\n      }\n    }\n  }\n\n  zoom.wheelDelta = function(_) {\n    return arguments.length ? (wheelDelta = typeof _ === \"function\" ? _ : constant(+_), zoom) : wheelDelta;\n  };\n\n  zoom.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), zoom) : filter;\n  };\n\n  zoom.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), zoom) : touchable;\n  };\n\n  zoom.extent = function(_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant([[+_[0][0], +_[0][1]], [+_[1][0], +_[1][1]]]), zoom) : extent;\n  };\n\n  zoom.scaleExtent = function(_) {\n    return arguments.length ? (scaleExtent[0] = +_[0], scaleExtent[1] = +_[1], zoom) : [scaleExtent[0], scaleExtent[1]];\n  };\n\n  zoom.translateExtent = function(_) {\n    return arguments.length ? (translateExtent[0][0] = +_[0][0], translateExtent[1][0] = +_[1][0], translateExtent[0][1] = +_[0][1], translateExtent[1][1] = +_[1][1], zoom) : [[translateExtent[0][0], translateExtent[0][1]], [translateExtent[1][0], translateExtent[1][1]]];\n  };\n\n  zoom.constrain = function(_) {\n    return arguments.length ? (constrain = _, zoom) : constrain;\n  };\n\n  zoom.duration = function(_) {\n    return arguments.length ? (duration = +_, zoom) : duration;\n  };\n\n  zoom.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, zoom) : interpolate;\n  };\n\n  zoom.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? zoom : value;\n  };\n\n  zoom.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, zoom) : Math.sqrt(clickDistance2);\n  };\n\n  zoom.tapDistance = function(_) {\n    return arguments.length ? (tapDistance = +_, zoom) : tapDistance;\n  };\n\n  return zoom;\n}\n","import {\n  select,\n  selectAll\n} from 'd3-selection';\n\nimport {\n  json\n} from 'd3-fetch';\n\nimport {\n  scaleLinear,\n  scalePoint,\n  scaleBand\n} from 'd3-scale';\n\nimport {\n  schemeTableau10\n} from 'd3-scale-chromatic';\n\nimport {\n  max,\n  maxIndex,\n  min,\n  minIndex,\n  extent,\n  sum\n} from 'd3-array';\n\nimport {\n  timeout\n} from 'd3-timer';\n\nimport {\n  transition\n} from 'd3-transition';\n\nimport {\n  easeLinear,\n  easePolyInOut,\n  easeQuadInOut,\n  easeCubicInOut,\n  easeElasticOut\n} from 'd3-ease';\n\nimport { \n  axisLeft,\n  axisBottom\n} from 'd3-axis';\n\nimport {\n  line,\n  curveStepAfter\n} from 'd3-shape';\n\nimport {\n  brush\n} from 'd3-brush';\n\nimport {\n  zoom,\n  zoomIdentity\n} from 'd3-zoom';\n\nimport {\n  drag\n} from 'd3-drag';\n\nimport {\n  format\n} from 'd3-format';\n\nexport default {\n  select,\n  selectAll,\n  json,\n  scaleLinear,\n  scalePoint,\n  scaleBand,\n  schemeTableau10,\n  max,\n  maxIndex,\n  min,\n  minIndex,\n  extent,\n  sum,\n  timeout,\n  transition,\n  easeLinear,\n  easePolyInOut,\n  easeQuadInOut,\n  easeCubicInOut,\n  easeElasticOut,\n  axisLeft,\n  axisBottom,\n  line,\n  curveStepAfter,\n  brush,\n  zoom,\n  zoomIdentity,\n  drag,\n  format\n};","import array from \"./array.js\";\nimport {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([document.querySelectorAll(selector)], [document.documentElement])\n      : new Selection([selector == null ? [] : array(selector)], root);\n}\n","export default function max(values, valueof) {\n  let max;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  }\n  return max;\n}\n","export default function maxIndex(values, valueof) {\n  let max;\n  let maxIndex = -1;\n  let index = -1;\n  if (valueof === undefined) {\n    for (const value of values) {\n      ++index;\n      if (value != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value, maxIndex = index;\n      }\n    }\n  } else {\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value, maxIndex = index;\n      }\n    }\n  }\n  return maxIndex;\n}\n","export default function min(values, valueof) {\n  let min;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  }\n  return min;\n}\n","export default function minIndex(values, valueof) {\n  let min;\n  let minIndex = -1;\n  let index = -1;\n  if (valueof === undefined) {\n    for (const value of values) {\n      ++index;\n      if (value != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value, minIndex = index;\n      }\n    }\n  } else {\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value, minIndex = index;\n      }\n    }\n  }\n  return minIndex;\n}\n","export default function(values, valueof) {\n  let min;\n  let max;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null) {\n        if (min === undefined) {\n          if (value >= value) min = max = value;\n        } else {\n          if (min > value) min = value;\n          if (max < value) max = value;\n        }\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null) {\n        if (min === undefined) {\n          if (value >= value) min = max = value;\n        } else {\n          if (min > value) min = value;\n          if (max < value) max = value;\n        }\n      }\n    }\n  }\n  return [min, max];\n}\n","export default function sum(values, valueof) {\n  let sum = 0;\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value = +value) {\n        sum += value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if (value = +valueof(value, ++index, values)) {\n        sum += value;\n      }\n    }\n  }\n  return sum;\n}\n","export const linear = t => +t;\n","export function quadIn(t) {\n  return t * t;\n}\n\nexport function quadOut(t) {\n  return t * (2 - t);\n}\n\nexport function quadInOut(t) {\n  return ((t *= 2) <= 1 ? t * t : --t * (2 - t) + 1) / 2;\n}\n","import {path} from \"d3-path\";\nimport array from \"./array.js\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nexport default function(x, y) {\n  var defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null;\n\n  x = typeof x === \"function\" ? x : (x === undefined) ? pointX : constant(x);\n  y = typeof y === \"function\" ? y : (y === undefined) ? pointY : constant(y);\n\n  function line(data) {\n    var i,\n        n = (data = array(data)).length,\n        d,\n        defined0 = false,\n        buffer;\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) output.lineStart();\n        else output.lineEnd();\n      }\n      if (defined0) output.point(+x(d, i, data), +y(d, i, data));\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  line.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), line) : x;\n  };\n\n  line.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), line) : y;\n  };\n\n  line.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), line) : defined;\n  };\n\n  line.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), line) : curve;\n  };\n\n  line.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), line) : context;\n  };\n\n  return line;\n}\n","export var slice = Array.prototype.slice;\n\nexport default function(x) {\n  return typeof x === \"object\" && \"length\" in x\n    ? x // Array, TypedArray, NodeList, array-like\n    : Array.from(x); // Map, Set, iterable, string, or anything else\n}\n","// Runtime header offsets\nconst ID_OFFSET = -8;\nconst SIZE_OFFSET = -4;\n\n// Runtime ids\nconst ARRAYBUFFER_ID = 0;\nconst STRING_ID = 1;\n// const ARRAYBUFFERVIEW_ID = 2;\n\n// Runtime type information\nconst ARRAYBUFFERVIEW = 1 << 0;\nconst ARRAY = 1 << 1;\nconst STATICARRAY = 1 << 2;\n// const SET = 1 << 3;\n// const MAP = 1 << 4;\nconst VAL_ALIGN_OFFSET = 6;\n// const VAL_ALIGN = 1 << VAL_ALIGN_OFFSET;\nconst VAL_SIGNED = 1 << 11;\nconst VAL_FLOAT = 1 << 12;\n// const VAL_NULLABLE = 1 << 13;\nconst VAL_MANAGED = 1 << 14;\n// const KEY_ALIGN_OFFSET = 15;\n// const KEY_ALIGN = 1 << KEY_ALIGN_OFFSET;\n// const KEY_SIGNED = 1 << 20;\n// const KEY_FLOAT = 1 << 21;\n// const KEY_NULLABLE = 1 << 22;\n// const KEY_MANAGED = 1 << 23;\n\n// Array(BufferView) layout\nconst ARRAYBUFFERVIEW_BUFFER_OFFSET = 0;\nconst ARRAYBUFFERVIEW_DATASTART_OFFSET = 4;\nconst ARRAYBUFFERVIEW_DATALENGTH_OFFSET = 8;\nconst ARRAYBUFFERVIEW_SIZE = 12;\nconst ARRAY_LENGTH_OFFSET = 12;\nconst ARRAY_SIZE = 16;\n\nconst BIGINT = typeof BigUint64Array !== \"undefined\";\nconst THIS = Symbol();\n\nconst STRING_DECODE_THRESHOLD = 32;\nconst decoder = new TextDecoder(\"utf-16le\");\n\n/** Gets a string from an U32 and an U16 view on a memory. */\nfunction getStringImpl(buffer, ptr) {\n  const len = new Uint32Array(buffer)[ptr + SIZE_OFFSET >>> 2] >>> 1;\n  const arr = new Uint16Array(buffer, ptr, len);\n  if (len <= STRING_DECODE_THRESHOLD) {\n    return String.fromCharCode.apply(String, arr);\n  }\n  return decoder.decode(arr);\n}\n\n/** Prepares the base module prior to instantiation. */\nfunction preInstantiate(imports) {\n  const extendedExports = {};\n\n  function getString(memory, ptr) {\n    if (!memory) return \"<yet unknown>\";\n    return getStringImpl(memory.buffer, ptr);\n  }\n\n  // add common imports used by stdlib for convenience\n  const env = (imports.env = imports.env || {});\n  env.abort = env.abort || function abort(msg, file, line, colm) {\n    const memory = extendedExports.memory || env.memory; // prefer exported, otherwise try imported\n    throw Error(`abort: ${getString(memory, msg)} at ${getString(memory, file)}:${line}:${colm}`);\n  };\n  env.trace = env.trace || function trace(msg, n, ...args) {\n    const memory = extendedExports.memory || env.memory;\n    console.log(`trace: ${getString(memory, msg)}${n ? \" \" : \"\"}${args.slice(0, n).join(\", \")}`);\n  };\n  env.seed = env.seed || Date.now;\n  imports.Math = imports.Math || Math;\n  imports.Date = imports.Date || Date;\n\n  return extendedExports;\n}\n\nconst E_NOEXPORTRUNTIME = \"Operation requires compiling with --exportRuntime\";\nconst F_NOEXPORTRUNTIME = function () { throw Error(E_NOEXPORTRUNTIME); };\n\n/** Prepares the final module once instantiation is complete. */\nfunction postInstantiate(extendedExports, instance) {\n  const exports = instance.exports;\n  const memory = exports.memory;\n  const table = exports.table;\n  const __new = exports.__new || F_NOEXPORTRUNTIME;\n  const __pin = exports.__pin || F_NOEXPORTRUNTIME;\n  const __unpin = exports.__unpin || F_NOEXPORTRUNTIME;\n  const __collect = exports.__collect || F_NOEXPORTRUNTIME;\n  const __rtti_base = exports.__rtti_base;\n  const getRttiCount = __rtti_base\n    ? function (arr) { return arr[__rtti_base >>> 2]; }\n    : F_NOEXPORTRUNTIME;\n\n  extendedExports.__new = __new;\n  extendedExports.__pin = __pin;\n  extendedExports.__unpin = __unpin;\n  extendedExports.__collect = __collect;\n\n  /** Gets the runtime type info for the given id. */\n  function getInfo(id) {\n    const U32 = new Uint32Array(memory.buffer);\n    const count = getRttiCount(U32);\n    if ((id >>>= 0) >= count) throw Error(`invalid id: ${id}`);\n    return U32[(__rtti_base + 4 >>> 2) + id * 2];\n  }\n\n  /** Gets and validate runtime type info for the given id for array like objects */\n  function getArrayInfo(id) {\n    const info = getInfo(id);\n    if (!(info & (ARRAYBUFFERVIEW | ARRAY | STATICARRAY))) throw Error(`not an array: ${id}, flags=${info}`);\n    return info;\n  }\n\n  /** Gets the runtime base id for the given id. */\n  function getBase(id) {\n    const U32 = new Uint32Array(memory.buffer);\n    const count = getRttiCount(U32);\n    if ((id >>>= 0) >= count) throw Error(`invalid id: ${id}`);\n    return U32[(__rtti_base + 4 >>> 2) + id * 2 + 1];\n  }\n\n  /** Gets the runtime alignment of a collection's values. */\n  function getValueAlign(info) {\n    return 31 - Math.clz32((info >>> VAL_ALIGN_OFFSET) & 31); // -1 if none\n  }\n\n  /** Gets the runtime alignment of a collection's keys. */\n  // function getKeyAlign(info) {\n  //   return 31 - Math.clz32((info >>> KEY_ALIGN_OFFSET) & 31); // -1 if none\n  // }\n\n  /** Allocates a new string in the module's memory and returns its pointer. */\n  function __newString(str) {\n    if (str == null) return 0;\n    const length = str.length;\n    const ptr = __new(length << 1, STRING_ID);\n    const U16 = new Uint16Array(memory.buffer);\n    for (var i = 0, p = ptr >>> 1; i < length; ++i) U16[p + i] = str.charCodeAt(i);\n    return ptr;\n  }\n\n  extendedExports.__newString = __newString;\n\n  /** Reads a string from the module's memory by its pointer. */\n  function __getString(ptr) {\n    if (!ptr) return null;\n    const buffer = memory.buffer;\n    const id = new Uint32Array(buffer)[ptr + ID_OFFSET >>> 2];\n    if (id !== STRING_ID) throw Error(`not a string: ${ptr}`);\n    return getStringImpl(buffer, ptr);\n  }\n\n  extendedExports.__getString = __getString;\n\n  /** Gets the view matching the specified alignment, signedness and floatness. */\n  function getView(alignLog2, signed, float) {\n    const buffer = memory.buffer;\n    if (float) {\n      switch (alignLog2) {\n        case 2: return new Float32Array(buffer);\n        case 3: return new Float64Array(buffer);\n      }\n    } else {\n      switch (alignLog2) {\n        case 0: return new (signed ? Int8Array : Uint8Array)(buffer);\n        case 1: return new (signed ? Int16Array : Uint16Array)(buffer);\n        case 2: return new (signed ? Int32Array : Uint32Array)(buffer);\n        case 3: return new (signed ? BigInt64Array : BigUint64Array)(buffer);\n      }\n    }\n    throw Error(`unsupported align: ${alignLog2}`);\n  }\n\n  /** Allocates a new array in the module's memory and returns its pointer. */\n  function __newArray(id, values) {\n    const info = getArrayInfo(id);\n    const align = getValueAlign(info);\n    const length = values.length;\n    const buf = __new(length << align, info & STATICARRAY ? id : ARRAYBUFFER_ID);\n    let result;\n    if (info & STATICARRAY) {\n      result = buf;\n    } else {\n      __pin(buf);\n      const arr = __new(info & ARRAY ? ARRAY_SIZE : ARRAYBUFFERVIEW_SIZE, id);\n      __unpin(buf);\n      const U32 = new Uint32Array(memory.buffer);\n      U32[arr + ARRAYBUFFERVIEW_BUFFER_OFFSET >>> 2] = buf;\n      U32[arr + ARRAYBUFFERVIEW_DATASTART_OFFSET >>> 2] = buf;\n      U32[arr + ARRAYBUFFERVIEW_DATALENGTH_OFFSET >>> 2] = length << align;\n      if (info & ARRAY) U32[arr + ARRAY_LENGTH_OFFSET >>> 2] = length;\n      result = arr;\n    }\n    const view = getView(align, info & VAL_SIGNED, info & VAL_FLOAT);\n    if (info & VAL_MANAGED) {\n      for (let i = 0; i < length; ++i) {\n        const value = values[i];\n        view[(buf >>> align) + i] = value;\n      }\n    } else {\n      view.set(values, buf >>> align);\n    }\n    return result;\n  }\n\n  extendedExports.__newArray = __newArray;\n\n  /** Gets a live view on an array's values in the module's memory. Infers the array type from RTTI. */\n  function __getArrayView(arr) {\n    const U32 = new Uint32Array(memory.buffer);\n    const id = U32[arr + ID_OFFSET >>> 2];\n    const info = getArrayInfo(id);\n    const align = getValueAlign(info);\n    let buf = info & STATICARRAY\n      ? arr\n      : U32[arr + ARRAYBUFFERVIEW_DATASTART_OFFSET >>> 2];\n    const length = info & ARRAY\n      ? U32[arr + ARRAY_LENGTH_OFFSET >>> 2]\n      : U32[buf + SIZE_OFFSET >>> 2] >>> align;\n    return getView(align, info & VAL_SIGNED, info & VAL_FLOAT).subarray(buf >>>= align, buf + length);\n  }\n\n  extendedExports.__getArrayView = __getArrayView;\n\n  /** Copies an array's values from the module's memory. Infers the array type from RTTI. */\n  function __getArray(arr) {\n    const input = __getArrayView(arr);\n    const len = input.length;\n    const out = new Array(len);\n    for (let i = 0; i < len; i++) out[i] = input[i];\n    return out;\n  }\n\n  extendedExports.__getArray = __getArray;\n\n  /** Copies an ArrayBuffer's value from the module's memory. */\n  function __getArrayBuffer(ptr) {\n    const buffer = memory.buffer;\n    const length = new Uint32Array(buffer)[ptr + SIZE_OFFSET >>> 2];\n    return buffer.slice(ptr, ptr + length);\n  }\n\n  extendedExports.__getArrayBuffer = __getArrayBuffer;\n\n  /** Copies a typed array's values from the module's memory. */\n  function getTypedArray(Type, alignLog2, ptr) {\n    return new Type(getTypedArrayView(Type, alignLog2, ptr));\n  }\n\n  /** Gets a live view on a typed array's values in the module's memory. */\n  function getTypedArrayView(Type, alignLog2, ptr) {\n    const buffer = memory.buffer;\n    const U32 = new Uint32Array(buffer);\n    const bufPtr = U32[ptr + ARRAYBUFFERVIEW_DATASTART_OFFSET >>> 2];\n    return new Type(buffer, bufPtr, U32[bufPtr + SIZE_OFFSET >>> 2] >>> alignLog2);\n  }\n\n  /** Attach a set of get TypedArray and View functions to the exports. */\n  function attachTypedArrayFunctions(ctor, name, align) {\n    extendedExports[`__get${name}`] = getTypedArray.bind(null, ctor, align);\n    extendedExports[`__get${name}View`] = getTypedArrayView.bind(null, ctor, align);\n  }\n\n  [\n    Int8Array,\n    Uint8Array,\n    Uint8ClampedArray,\n    Int16Array,\n    Uint16Array,\n    Int32Array,\n    Uint32Array,\n    Float32Array,\n    Float64Array\n  ].forEach(ctor => {\n    attachTypedArrayFunctions(ctor, ctor.name, 31 - Math.clz32(ctor.BYTES_PER_ELEMENT));\n  });\n\n  if (BIGINT) {\n    [BigUint64Array, BigInt64Array].forEach(ctor => {\n      attachTypedArrayFunctions(ctor, ctor.name.slice(3), 3);\n    });\n  }\n\n  /** Tests whether an object is an instance of the class represented by the specified base id. */\n  function __instanceof(ptr, baseId) {\n    const U32 = new Uint32Array(memory.buffer);\n    let id = U32[ptr + ID_OFFSET >>> 2];\n    if (id <= getRttiCount(U32)) {\n      do {\n        if (id == baseId) return true;\n        id = getBase(id);\n      } while (id);\n    }\n    return false;\n  }\n\n  extendedExports.__instanceof = __instanceof;\n\n  // Pull basic exports to extendedExports so code in preInstantiate can use them\n  extendedExports.memory = extendedExports.memory || memory;\n  extendedExports.table = extendedExports.table || table;\n\n  // Demangle exports and provide the usual utility on the prototype\n  return demangle(exports, extendedExports);\n}\n\nfunction isResponse(src) {\n  return typeof Response !== \"undefined\" && src instanceof Response;\n}\n\nfunction isModule(src) {\n  return src instanceof WebAssembly.Module;\n}\n\n/** Asynchronously instantiates an AssemblyScript module from anything that can be instantiated. */\nasync function instantiate(source, imports = {}) {\n  if (isResponse(source = await source)) return instantiateStreaming(source, imports);\n  const module = isModule(source) ? source : await WebAssembly.compile(source);\n  const extended = preInstantiate(imports);\n  const instance = await WebAssembly.instantiate(module, imports);\n  const exports = postInstantiate(extended, instance);\n  return { module, instance, exports };\n}\n\n/** Synchronously instantiates an AssemblyScript module from a WebAssembly.Module or binary buffer. */\nfunction instantiateSync(source, imports = {}) {\n  const module = isModule(source) ? source : new WebAssembly.Module(source);\n  const extended = preInstantiate(imports);\n  const instance = new WebAssembly.Instance(module, imports);\n  const exports = postInstantiate(extended, instance);\n  return { module, instance, exports };\n}\n\n/** Asynchronously instantiates an AssemblyScript module from a response, i.e. as obtained by `fetch`. */\nasync function instantiateStreaming(source, imports = {}) {\n  if (!WebAssembly.instantiateStreaming) {\n    return instantiate(\n      isResponse(source = await source)\n        ? source.arrayBuffer()\n        : source,\n      imports\n    );\n  }\n  const extended = preInstantiate(imports);\n  const result = await WebAssembly.instantiateStreaming(source, imports);\n  const exports = postInstantiate(extended, result.instance);\n  return { ...result, exports };\n}\n\n/** Demangles an AssemblyScript module's exports to a friendly object structure. */\nfunction demangle(exports, extendedExports = {}) {\n  const setArgumentsLength = exports[\"__argumentsLength\"]\n    ? length => { exports[\"__argumentsLength\"].value = length; }\n    : exports[\"__setArgumentsLength\"] || exports[\"__setargc\"] || (() => { /* nop */ });\n  for (let internalName in exports) {\n    if (!Object.prototype.hasOwnProperty.call(exports, internalName)) continue;\n    const elem = exports[internalName];\n    let parts = internalName.split(\".\");\n    let curr = extendedExports;\n    while (parts.length > 1) {\n      let part = parts.shift();\n      if (!Object.prototype.hasOwnProperty.call(curr, part)) curr[part] = {};\n      curr = curr[part];\n    }\n    let name = parts[0];\n    let hash = name.indexOf(\"#\");\n    if (hash >= 0) {\n      const className = name.substring(0, hash);\n      const classElem = curr[className];\n      if (typeof classElem === \"undefined\" || !classElem.prototype) {\n        const ctor = function (...args) {\n          return ctor.wrap(ctor.prototype.constructor(0, ...args));\n        };\n        ctor.prototype = {\n          valueOf() { return this[THIS]; }\n        };\n        ctor.wrap = function (thisValue) {\n          return Object.create(ctor.prototype, { [THIS]: { value: thisValue, writable: false } });\n        };\n        if (classElem) Object.getOwnPropertyNames(classElem).forEach(name =>\n          Object.defineProperty(ctor, name, Object.getOwnPropertyDescriptor(classElem, name))\n        );\n        curr[className] = ctor;\n      }\n      name = name.substring(hash + 1);\n      curr = curr[className].prototype;\n      if (/^(get|set):/.test(name)) {\n        if (!Object.prototype.hasOwnProperty.call(curr, name = name.substring(4))) {\n          let getter = exports[internalName.replace(\"set:\", \"get:\")];\n          let setter = exports[internalName.replace(\"get:\", \"set:\")];\n          Object.defineProperty(curr, name, {\n            get() { return getter(this[THIS]); },\n            set(value) { setter(this[THIS], value); },\n            enumerable: true\n          });\n        }\n      } else {\n        if (name === 'constructor') {\n          (curr[name] = (...args) => {\n            setArgumentsLength(args.length);\n            return elem(...args);\n          }).original = elem;\n        } else { // instance method\n          (curr[name] = function (...args) { // !\n            setArgumentsLength(args.length);\n            return elem(this[THIS], ...args);\n          }).original = elem;\n        }\n      }\n    } else {\n      if (/^(get|set):/.test(name)) {\n        if (!Object.prototype.hasOwnProperty.call(curr, name = name.substring(4))) {\n          Object.defineProperty(curr, name, {\n            get: exports[internalName.replace(\"set:\", \"get:\")],\n            set: exports[internalName.replace(\"get:\", \"set:\")],\n            enumerable: true\n          });\n        }\n      } else if (typeof elem === \"function\" && elem !== setArgumentsLength) {\n        (curr[name] = (...args) => {\n          setArgumentsLength(args.length);\n          return elem(...args);\n        }).original = elem;\n      } else {\n        curr[name] = elem;\n      }\n    }\n  }\n  return extendedExports;\n}\n\nvar loader = {\n  instantiate,\n  instantiateSync,\n  instantiateStreaming,\n  demangle\n};\n\nvar wasmB64 = \"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AUECdGooAgQiAkUEQEEAQdALQdcCQRIQAAALIAAgAmggAUEEdGpBAnRqKAJgBUEACwsL6QIBA38gAUH8////A0sEQEGACUHQC0HKA0EdEAAACyAAQQwgAUETakFwcUEEayABQQxNGyICEA4iAUUEQEEEPwAiAUEQdEEEayAAKAKgDEd0IAJBAUEbIAJna3RBAWtqIAIgAkH+////AUkbakH//wNqQYCAfHFBEHYhAyABIAMgASADShtAAEEASARAIANAAEEASARAAAsLIAAgAUEQdD8AQRB0EAsgACACEA4iAUUEQEEAQdALQfADQRAQAAALCyACIAEoAgBBfHFLBEBBAEHQC0HyA0EOEAAACyAAIAEQCSABKAIAIQMgAkEEakEPcQRAQQBB0AtB5QJBDhAAAAsgA0F8cSACayIEQRBPBEAgASACIANBAnFyNgIAIAIgAUEEamoiAiAEQQRrQQFyNgIAIAAgAhAKBSABIANBfnE2AgAgAUEEaiIAIAEoAgBBfHFqIAAgASgCAEF8cWooAgBBfXE2AgALIAEL1gIBAX8CQCABRQ0AIABBADoAACAAIAFqIgJBAWtBADoAACABQQJNDQAgAEEAOgABIABBADoAAiACQQJrQQA6AAAgAkEDa0EAOgAAIAFBBk0NACAAQQA6AAMgAkEEa0EAOgAAIAFBCE0NACAAQQAgAGtBA3EiAmoiAEEANgIAIAAgASACa0F8cSICaiIBQQRrQQA2AgAgAkEITQ0AIABBADYCBCAAQQA2AgggAUEMa0EANgIAIAFBCGtBADYCACACQRhNDQAgAEEANgIMIABBADYCECAAQQA2AhQgAEEANgIYIAFBHGtBADYCACABQRhrQQA2AgAgAUEUa0EANgIAIAFBEGtBADYCACAAIABBBHFBGGoiAWohACACIAFrIQEDQCABQSBPBEAgAEIANwMAIABCADcDCCAAQgA3AxAgAEIANwMYIAFBIGshASAAQSBqIQAMAQsLCwuyAQEBfyAAQez///8DTwRAQYAJQcAJQYQCQR8QAAALIwQjBU8EQAJAQYAQIQIDQCACEA1rIQIjBkUEQCMErULIAX5C5ACAp0GACGokBQwCCyACQQBKDQALIwQjBCMFa0GACElBCnRqJAULCyAAQRBqIQIjDUUEQBAMCyMNIAIQDyICIAE2AgwgAiAANgIQ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aiACNgIAC3UBA38gACgCDEEBayEDA0AgAyAEa0EBSgRAIAAgBLcgAyAEa0ECbbecoKoiAhAUIAFjBEAgAiEEBSAAIAIQFCABZEUEQCACDwsgAiEDCwwBCwsgACADEBQgAWMEQCADQQFqDwsgACAEEBQgAWQEQCAEDwsgAwsRACAAIAE2AiQgACABQQAQEgsRACAAIAE2AiggACABQQAQEgsRACAAIAE2AiwgACABQQAQEgsEACAACxEAIAAgATYCMCAAIAFBABASC1oCAn8BfCAAKAIMIgIEQCAAKAIEIQEgACgCBCACQQFrQQN0aiEAA0AgACABSwRAIAErAwAhAyABIAArAwA5AwAgACADOQMAIAFBCGohASAAQQhrIQAMAQsLCwstAQJ/IAAgACgCDCICQQFqIgNBAxAXIAAoAgQgAkEDdGogATkDACAAIAM2AgwL7gMBAn8jEUEYayQREDQjEUIANwMAIxFCADcDCCMRQgA3AxAgASACIANBARA1IxEgASACIAMQPSIDNgIAIxEgA0EAEDoiAjYCBCMRIANBARA6IgE2AggjESADQQIQOiIDNgIMIAAtACBFBEAgARAqIAMQKgsgASADEDYDQCAEIAEoAgxIBEAgASAEEBQgACsDAGMEQCABIAQgACsDABAcCyABIAQQFCAAKwMIZARAIAEgBCAAKwMIEBwLIARBAWohBAwBCwsgAC0AIEUEQCABECoLQQAhBANAIAQgAigCDEgEQCACIAQQFCAAKwMYZARAIAAgAiAEEBQ5AxgLIAIgBBAUIAArAxBjBEAgACACIAQQFDkDEAsgBEEBaiEEDAELCyMRQQAQPCIENgIQIxFBABA8IgU2AhQgBCACQQAQFBArIAUgAUEAEBQQK0EBIQMDQCADIAEoAgxBAWtIBEAgASADEBQgASADQQFrEBShmUSN7bWg98awPmQEf0EBBSABIAMQFCABIANBAWoQFKGZRI3ttaD3xrA+ZAsEQCAEIAIgAxAUECsgBSABIAMQFBArCyADQQFqIQMMAQsLIAQgAiACKAIMQQFrEBQQKyAFIAEgASgCDEEBaxAUECsgACAEECUgACAFECYjEUEYaiQRCy8AIAEgACgCCEEDdk8EQEHACkHwD0HpCkHAABAAAAsgACgCBCABQQN0aiACOQMACzgBAX8gAARAIABBFGsiASgC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ACMRQQRrJBEQNCMRIAA2AgAgACABECQhACMRQQRqJBEgAAskAQF8IxFBBGskERA0IxEgADYCACAAKwMAIQEjEUEEaiQRIAELIAAjEUEEayQREDQjESAANgIAIAAgATkDACMRQQRqJBELJAEBfCMRQQRrJBEQNCMRIAA2AgAgACsDCCEBIxFBBGokESABCyAAIxFBBGskERA0IxEgADYCACAAIAE5AwgjEUEEaiQRCyQBAXwjEUEEayQREDQjESAANgIAIAArAxAhASMRQQRqJBEgAQsgACMRQQRrJBEQNCMRIAA2AgAgACABOQMQIxFBBGokEQskAQF8IxFBBGskERA0IxEgADYCACAAKwMYIQEjEUEEaiQRIAELIAAjEUEEayQREDQjESAANgIAIAAgATkDGCMRQQRqJBELIgAjEUEEayQREDQjESAANgIAIAAtACAhACMRQQRqJBEgAAsgACMRQQRrJBEQNCMRIAA2AgAgACABOgAgIxFBBGokEQsiACMRQQRrJBEQNCMRIAA2AgAgAC0AISEAIxFBBGokESAACyAAIxFBBGskERA0IxEgADYCACAAIAE6ACEjEUEEaiQRCyIAIxFBBGskERA0IxEgADYCACAAKAIkIQAjEUEEaiQRIAALJgAjEUEIayQREDQjESAANgIAIxEgATYCBCAAIAEQJSMRQQhqJBELIgAjEUEEayQREDQjESAANgIAIAAoAighACMRQQRqJBEgAAsmACMRQQhrJBEQNCMRIAA2AgAjESABNgIEIAAgARAmIxFBCGokEQsiACMRQQRrJBEQNCMRIAA2AgAgACgCLCEAIxFBBGokESAACyYAIxFBCGskERA0IxEgADYCACMRIAE2AgQgACABECcjEUEIaiQRCyIAIxFBBGskERA0IxEgADYCACAAKAIwIQAjEUEEaiQRIAALJgAjEUEIayQREDQjESAANgIAIxEgATYCBCAAIAEQKSMRQQhqJBELKQAjEUEEayQREDQjESAANgIAIAAgASACIAMgBBA+IQAjEUEEaiQRIAALOAAjEUEQayQREDQjESAANgIAIxEgATYCBCMRIAI2AggjESADNgIMIAAgASACIAMQLCMRQRBqJBELKgAjEUEIayQREDQjESAANgIAIxEgATYCBCAAIAEQNyEAIxFBCGokESAAC2kAIxFBBGskERA0IxEgADYCACAAQQBBA0EDQbAQEDgQJSAAQQBBA0EDQdAQEDgQJiAAQQBBA0EDQfAQEDgQJyAAQZARECkgAEQAAAAAAADwfzkDECAARAAAAAAAAPD/OQMYIxFBBGokEQsL0QcuAEGMCAsBLABBmAgLIwEAAAAcAAAASQBuAHYAYQBsAGkAZAAgAGwAZQBuAGcAdABoAEG8CAsBLABByAgLIQEAAAAaAAAAfgBsAGkAYgAvAGEAcgByAGEAeQAuAHQAcwBB7AgLATwAQfgICy8BAAAAKAAAAEEAbABsAG8AYwBhAHQAaQBvAG4AIAB0AG8AbwAgAGwAYQByAGcAZQBBrAkLATwAQbgJCycBAAAAIAAAAH4AbABpAGIALwByAHQALwBpAHQAYwBtAHMALgB0AHMAQawKCwE8AEG4CgsrAQAAACQAAABJAG4AZABlAHgAIABvAHUAdAAgAG8AZgAgAHIAYQBuAGcAZQBB7AoLASwAQfgKCxsBAAAAFAAAAH4AbABpAGIALwByAHQALgB0AHMAQbwLCwE8AEHICwslAQAAAB4AAAB+AGwAaQBiAC8AcgB0AC8AdABsAHMAZgAuAHQAcwBB/AsLARwAQYgMCwkGAAAACAAAAAEAQZwMCwEcAEGoDAsJBgAAAAgAAAACAEG8DAsBfABByAwLZQEAAABeAAAARQBsAGUAbQBlAG4AdAAgAHQAeQBwAGUAIABtAHUAcwB0ACAAYgBlACAAbgB1AGwAbABhAGIAbABlACAAaQBmACAAYQByAHIAYQB5ACAAaQBzACAAaABvAGwAZQB5AEG8DQsBPABByA0LLQEAAAAmAAAAfgBsAGkAYgAvAGEAcgByAGEAeQBiAHUAZgBmAGUAcgAuAHQAcwBB/A0LATwAQYgOCy8BAAAAKAAAAGEAcwBzAGUAbQBiAGwAeQAvAGkAcwBvAHQAbwBuAGkAYwAuAHQAcwBBvA4LARwAQcgOCwkIAAAACAAAAAMAQdwOCwEcAEH8DgsBHABBnA8LARwAQbwPCwEcAEHIDwsJCgAAAAgAAAAEAEHcDwsBPABB6A8LKwEAAAAkAAAAfgBsAGkAYgAvAHQAeQBwAGUAZABhAHIAcgBhAHkALgB0AHMAQZwQCwEcAEG8EAsBHABB3BALARwAQfwQCwEcAEGIEQsJCgAAAAgAAAAFAEGcEQsBPABBqBELMQEAAAAqAAAATwBiAGoAZQBjAHQAIABhAGwAcgBlAGEAZAB5ACAAcABpAG4AbgBlAGQAQdwRCwE8AEHoEQsvAQAAACgAAABPAGIAagBlAGMAdAAgAGkAcwAgAG4AbwB0ACAAcABpAG4AbgBlAGQAQaASCw0MAAAAIAAAAAAAAAAgAEG8EgsSAhoAAAAAAAACQQAAAAAAAAIJAEHcEgsCCBoAQfwSCwUBGgAAAg==\";\n\nconst initIsotonicRegression = (increasing) => {\n  const wasmB64URL = 'data:application/octet-binary;base64,' + wasmB64;\n\n  return loader.instantiate(\n    fetch(wasmB64URL).then((result) => result.arrayBuffer()),\n    {}\n  ).then(({ exports }) => {\n    const wasm = exports;\n    const __pin = wasm.__pin;\n    const __unpin = wasm.__unpin;\n    const __newArray = wasm.__newArray;\n    const __getArray = wasm.__getArray;\n\n    class IsotonicRegression {\n      // Store an instance of WASM IsotonicRegression\n      iso;\n\n      /**\n       * Constructor for the class IsotonicRegression\n       * @param {object} param0 Model configuration. It can have 4 fields:\n       * 1. yMin {number} minimum value of y, default = -Infinity\n       * 2. yMax {number} maximum value of y, default = Infinity\n       * 3. increasing {bool} if true, fit an increasing isotonic regression, default = true\n       * 4. clipOutOfBound {bool} if true, clip the out of bound x; otherwise predict null, default = true\n       */\n      constructor({ yMin = -Infinity, yMax = Infinity, increasing = true, clipOutOfBound = true } = {}) {\n        this.iso = new wasm.__IsotonicRegression(yMin, yMax, increasing, clipOutOfBound);\n\n        // Important to pin any WASM object created in JS\n        // Since the runtime on the Wasm end does not know that a JS object keeps\n        // the Wasm object alive\n        __pin(this.iso);\n      }\n\n      /**\n       * Fit an isotonic regression on the given x, y, w data.\n       * @param {[number]} x x array\n       * @param {[number]} y y array\n       * @param {[number]} w weight array\n       */\n      fit(x, y, w = undefined) {\n        // If sample weight is not given, replace them with [1, 1 ... 1]\n        let sampleWeight = w;\n        if (w === undefined) {\n          sampleWeight = new Array(x.length).fill(1.0);\n        }\n\n        // Check the parameters\n        this.__checkFitParam(x, y, sampleWeight);\n\n        // Create arrays in WASM memory\n        let xPtr = __pin(__newArray(wasm.xArrayID, x));\n        let yPtr = __pin(__newArray(wasm.yArrayID, y));\n        let wPtr = __pin(__newArray(wasm.wArrayID, sampleWeight));\n\n        // Fit the Isotonic regression using WASM\n        this.iso.fit(xPtr, yPtr, wPtr);\n\n        // Unpin the pointers so they can get collected\n        __unpin(xPtr);\n        __unpin(yPtr);\n        __unpin(wPtr);\n      }\n\n\n      /**\n       * Use the trained isotonic regression model to predict on the new data\n       * @param {[number]} newX new data array\n       * @returns predictions, same size as `newX`\n       */\n      predict(newX) {\n        // Pass newX to WASM to predict\n        let newXPtr = __pin(__newArray(wasm.newXArrayID, newX));\n        let predictedXPtr = this.iso.predict(newXPtr);\n        let predictedXArray = __getArray(predictedXPtr);\n\n        __unpin(newXPtr);\n        return predictedXArray;\n      }\n\n      /**\n       * Reset the learned weights of this isotonic regression model.\n       */\n      reset() {\n        this.iso.reset();\n      }\n\n      /**\n       * Run this function when the model is no longer needed. It is necessary because\n       * WASM won't garbage collect the model until we manually __unpin() it from JS\n       * (memory leak)\n       */\n      destroy() {\n        __unpin(this.iso);\n      }\n\n      get xThresholds() {\n        return __getArray(this.iso.xThresholds);\n      }\n\n      get yThresholds() {\n        return __getArray(this.iso.yThresholds);\n      }\n\n      get xMin() {\n        return this.iso.xMin;\n      }\n\n      get xMax() {\n        return this.iso.xMax;\n      }\n\n      __checkFitParam(x, y, w) {\n        if (x.length <= 1 || y.length <= 1 || w.length <= 1) {\n          throw new Error('The length of input arrays should be greater than 1.');\n        }\n\n        if (x.length !== y.length) {\n          throw new Error('The x array and y array should have the same length.');\n        }\n      }\n    }\n\n    let model = new IsotonicRegression({ increasing: increasing });\n    return model;\n\n  });\n};\n\nexport { initIsotonicRegression };\n","\n/**\n * Round a number to a given decimal.\n * @param {number} num Number to round\n * @param {number} decimal Decimal place\n * @returns number\n */\nexport const round = (num, decimal) => {\n  return Math.round((num + Number.EPSILON) * (10 ** decimal)) / (10 ** decimal);\n};\n\n\n/**\n * Transpose the given 2D array.\n * @param array\n */\nexport const transpose2dArray = (array) => {\n  let newArray = new Array(array[0].length);\n  for (let j = 0; j < array[0].length; j++) {\n    newArray[j] = new Array(array.length).fill(0);\n  }\n\n  for (let i = 0; i < array.length; i++) {\n    for (let j = 0; j < array[i].length; j++) {\n      newArray[j][i] = array[i][j];\n    }\n  }\n  return newArray;\n};\n\n/**\n * Shuffle the given array in place\n * @param {[any]} array \n * @returns shuffled array\n */\nexport const shuffle = (array) => {\n\n  let currentIndex = array.length;\n  let randomIndex;\n\n  while (currentIndex !== 0) {\n\n    randomIndex = Math.floor(Math.random() * currentIndex);\n    currentIndex--;\n\n    // Swap random and cur index\n    [array[currentIndex], array[randomIndex]] = [\n      array[randomIndex], array[currentIndex]];\n  }\n\n  return array;\n};\n\nexport const l1Distance = (array1, array2) => {\n  let distance = 0;\n\n  for (let i = 0; i < array1.length; i++) {\n    distance += Math.abs(array1[i] - array2[i]);\n  }\n\n  return distance;\n};\n\nexport const l2Distance = (array1, array2) => {\n  let distance = 0;\n\n  for (let i = 0; i < array1.length; i++) {\n    distance += (array1[i] - array2[i]) ** 2;\n  }\n\n  return Math.sqrt(distance);\n};\n\n/**\n * Hash function from https://stackoverflow.com/a/52171480/5379444\n * @param {string} str String to hash\n * @param {number} seed Random seed\n * @returns \n */\nexport const hashString = function (str, seed = 0) {\n  let h1 = 0xdeadbeef ^ seed, h2 = 0x41c6ce57 ^ seed;\n  for (let i = 0, ch; i < str.length; i++) {\n    ch = str.charCodeAt(i);\n    h1 = Math.imul(h1 ^ ch, 2654435761);\n    h2 = Math.imul(h2 ^ ch, 1597334677);\n  }\n  h1 = Math.imul(h1 ^ (h1 >>> 16), 2246822507) ^ Math.imul(h2 ^ (h2 >>> 13), 3266489909);\n  h2 = Math.imul(h2 ^ (h2 >>> 16), 2246822507) ^ Math.imul(h1 ^ (h1 >>> 13), 3266489909);\n  return 4294967296 * (2097151 & h2) + (h1 >>> 0);\n};\n\nexport const downloadJSON = (object, anchorSelect, fileName='download.json') => {\n  let dataStr = 'data:text/json;charset=utf-8,' + encodeURIComponent(JSON.stringify(object));\n  var dlAnchorElem = anchorSelect.node();\n  dlAnchorElem.setAttribute('href', dataStr);\n  dlAnchorElem.setAttribute('download', `${fileName}`);\n  dlAnchorElem.click();\n};\n\n/**\n * Get the file name and file extension from a File object\n * @param {File} file File object\n * @returns [file name, file extension]\n */\nexport const splitFileName = (file) => {\n  let name = file.name;\n  let lastDot = name.lastIndexOf('.');\n  let value = name.slice(0, lastDot);\n  let extension = name.slice(lastDot + 1);\n  return [value, extension];\n};","export const config = {\n  svgPadding: {\n    top: 30,\n    right: 15,\n    bottom: 10,\n    left: 5\n  },\n  defaultFont: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen-Sans, Ubuntu, Cantarell, \"Helvetica Neue\", sans-serif;',\n  scalePointPadding: 0.7,\n  catDotRadius: 8,\n  colors: {\n    line: 'hsl(222, 80%, 30%)',\n    lineConfidence: 'hsl(222, 60%, 50%)',\n    bar: 'hsl(223, 55%, 54%)',\n    dot: 'hsla(222, 80%, 30%, 100%)',\n    dotConfidence: 'hsl(222, 100%, 79%)',\n    hist: 'hsl(222, 10%, 93%)',\n    histAxis: 'hsl(222, 10%, 70%)',\n    line0: 'hsla(222, 0%, 0%, 5%)',\n    background: 'hsl(20, 16%, 99%)'\n  },\n};","import d3 from '../utils/d3-import';\nimport { config } from '../config';\n\n/**\n * Create a horizontal color legend.\n * @param legendGroup\n * @param legendConfig\n * @param largestAbs\n */\nexport const drawHorizontalColorLegend = (legendGroup, legendConfig, largestAbs) => {\n  // Define the gradient\n  let legendGradientDef = legendGroup.append('defs')\n    .append('linearGradient')\n    .attr('x1', 0)\n    .attr('y1', 0)\n    .attr('x2', 1)\n    .attr('y2', 0)\n    // TODO: use state to track the number of legend-gradient and make each of\n    // them unique\n    .attr('id', 'legend-gradient');\n\n  legendGradientDef.append('stop')\n    .attr('stop-color', legendConfig.startColor)\n    .attr('offset', 0);\n\n  legendGradientDef.append('stop')\n    .attr('stop-color', '#ffffff')\n    .attr('offset', 0.5);\n\n  legendGradientDef.append('stop')\n    .attr('stop-color', legendConfig.endColor)\n    .attr('offset', 1);\n\n  legendGroup.append('rect')\n    .attr('x', 0)\n    .attr('y', 0)\n    .attr('width', legendConfig.width)\n    .attr('height', legendConfig.height)\n    .style('fill', 'url(#legend-gradient)')\n    .style('stroke', 'hsla(0, 0%, 0%, 0.5)')\n    .style('stroke-width', 0.3);\n\n  // Draw the legend axis\n  let legendScale = d3.scaleLinear()\n    .domain([-largestAbs, largestAbs])\n    .range([0, legendConfig.width]);\n\n  let axisGroup = legendGroup.append('g')\n    .attr('transform', `translate(${0}, ${legendConfig.height})`)\n    .call(d3.axisBottom(legendScale).ticks(5).tickFormat(d => Math.abs(d) >= 1000 ? d / 1000 + 'K' : d));\n  \n  axisGroup.attr('font-family', config.defaultFont)\n    .style('stroke-width', 0.5);\n\n  legendGroup.append('text')\n    .attr('class', 'legend-title')\n    .attr('x', -10)\n    .attr('y', 0)\n    .style('dominant-baseline', 'hanging')\n    .style('text-anchor', 'end')\n    .style('font-weight', 300)\n    .text('Score');\n};\n\nexport const fadeRemove = (g, time = 500, ease = d3.easeCubicInOut) => {\n  g.transition()\n    .duration(time)\n    .ease(ease)\n    .style('opacity', 0)\n    .on('end', (d, i, g) => {\n      d3.select(g[i]).remove();\n    });\n};\n\nexport const startLoading = (loadingBar) => {\n  d3.select(loadingBar).classed('animated', true);\n};\n\nexport const endLoading = (loadingBar) => {\n  d3.select(loadingBar).classed('animated', false);\n};\n\n/**\n * Draw a legend for the line colors\n * @param {object} svgSelect svgSelect for the whole SVG\n * @param {number} width SVG width (inside viewbox)\n * @param {object} svgPadding SVG paddings\n */\nexport const drawLineLegend = (svgSelect, width, svgPadding) => {\n  let legendGroup = svgSelect.append('g')\n    .attr('class', 'legend-group')\n    .attr('transform', `translate(${width - svgPadding.right - 266}, 6)`);\n\n  const legendRectWidth = 22;\n  const legendRectHeight = 4;\n\n  const legendData = [\n    {\n      name: 'original',\n      class: 'original',\n      title: 'Original bins',\n      x: 0,\n      rectColor: '#D1D1D1',\n    },\n    {\n      name: 'last',\n      class: 'last',\n      title: 'Bins from last edit',\n      x: 76,\n      rectColor: '#FFDFB3',\n    },\n    {\n      name: 'current',\n      class: 'current',\n      title: 'Current bins',\n      x: 130,\n      rectColor: '#263B73',\n    },\n    {\n      name: 'editing',\n      class: 'editing',\n      title: 'Currently editing bins',\n      x: 204,\n      rectColor: '#D67D00',\n    },\n  ];\n\n  let items = legendGroup.selectAll('g.legend-item')\n    .data(legendData)\n    .join('g')\n    .style('cursor', 'default')\n    .attr('transform', d => `translate(${d.x}, 0)`);\n\n  items.append('title')\n    .text(d => d.title);\n\n  items.append('rect')\n    .attr('y', 6)\n    .attr('width', legendRectWidth)\n    .attr('height', legendRectHeight)\n    .attr('rx', 1)\n    .attr('class', d => d.class)\n    .style('fill', d => d.rectColor);\n\n  items.append('text')\n    .attr('class', 'line-legend-title')\n    .attr('y', 2)\n    .attr('x', legendRectWidth + 4)\n    .text(d => d.name);\n};\n\n/**\n * Draw a legend for the bar colors\n * @param {object} svgSelect svgSelect for the whole SVG\n * @param {number} width SVG width (inside viewbox)\n * @param {object} svgPadding SVG paddings\n */\nexport const drawBarLegend = (svgSelect, width, svgPadding) => {\n  let legendGroup = svgSelect.append('g')\n    .attr('class', 'legend-group')\n    .attr('transform', `translate(${width - svgPadding.right - 225}, 6)`);\n\n  const legendRectWidth = 12;\n  const legendRectHeight = 12;\n\n  const legendData = [\n    {\n      name: 'original',\n      class: 'original',\n      title: 'Original bins',\n      x: 0,\n      rectColor: '#D1D1D1',\n    },\n    {\n      name: 'last',\n      class: 'last',\n      title: 'Bins from last edit',\n      x: 65,\n      rectColor: '#FFDFB3',\n    },\n    {\n      name: 'current',\n      class: 'current',\n      title: 'Current bins',\n      x: 110,\n      rectColor: config.colors.bar,\n    },\n    {\n      name: 'editing',\n      class: 'editing',\n      title: 'Currently editing bins',\n      x: 175,\n      rectColor: '#FFAA33',\n    },\n  ];\n\n  let items = legendGroup.selectAll('g.legend-item')\n    .data(legendData)\n    .join('g')\n    .style('cursor', 'default')\n    .attr('transform', d => `translate(${d.x}, 0)`);\n\n  items.append('title')\n    .text(d => d.title);\n\n  items.append('rect')\n    .attr('y', 1)\n    .attr('width', legendRectWidth)\n    .attr('height', legendRectHeight)\n    .attr('rx', 1)\n    .attr('class', d => d.class)\n    .style('fill', d => d.rectColor);\n\n  items.append('text')\n    .attr('class', 'line-legend-title')\n    .attr('y', 2)\n    .attr('x', legendRectWidth + 4)\n    .text(d => d.name);\n};\n\nexport const approximateYAxisWidth = (svg, yScale, defaultFont, abbreviation=false) => {\n  const svgSelect = d3.select(svg);\n\n  let tempGroup = svgSelect.append('g')\n    .attr('transform', 'translate(200, 50)')\n    .attr('class', 'temp-group')\n    .style('visibility', 'hidden');\n\n  tempGroup.call(d3.axisLeft(yScale).tickFormat(d => Math.abs(d) >= 1000 && abbreviation ? d / 1000 + 'K' : d));\n\n  tempGroup.attr('font-family', defaultFont);\n\n  const axisWidth = tempGroup.node().getBoundingClientRect().width;\n  // tempGroup.remove();\n\n  return axisWidth;\n};\n","import d3 from '../../utils/d3-import';\n\nexport class SelectedInfo {\n  constructor() {\n    this.hasSelected = false;\n    this.nodeData = [];\n    this.boundingBox = [];\n    this.nodeDataBuffer = null;\n  }\n\n  computeBBox(pointData) {\n    if (this.nodeData.length > 0) {\n      // Get the right x value\n      let rightPoint = pointData[this.nodeData.reduce((a, b) => a.x > b.x ? a : b).id];\n      // If the right point is the last point, then the right value should be the\n      // largest x value from the training set (registered as maxX in the last point)\n      // We add 2 as a dirty way to work around the counter-scaling of bbox in zoom\n      // and make the bbox's right edge on the right of the whole graph\n      // The correct way is to conditionally draw the bbox\n      let rightX = rightPoint.rightPointID === null ? rightPoint.maxX : pointData[rightPoint.rightPointID].x;\n\n      this.boundingBox = [{\n        x1: d3.min(this.nodeData.map(d => d.x)),\n        y1: d3.max(this.nodeData.map(d => d.y)),\n        x2: rightX,\n        y2: d3.min(this.nodeData.map(d => d.y))\n      }];\n    } else {\n      this.boundingBox = [];\n    }\n  }\n\n  computeBBoxBuffer() {\n    if (this.nodeDataBuffer.length > 0) {\n      this.boundingBox = [{\n        x1: d3.min(this.nodeDataBuffer.map(d => d.x)),\n        y1: d3.max(this.nodeDataBuffer.map(d => d.y)),\n        x2: d3.max(this.nodeDataBuffer.map(d => d.x)),\n        y2: d3.min(this.nodeDataBuffer.map(d => d.y))\n      }];\n    } else {\n      this.boundingBox = [];\n    }\n  }\n\n  updateNodeData(pointData) {\n    for (let i = 0; i < this.nodeData.length; i++) {\n      this.nodeData[i].x = pointData[this.nodeData[i].id].x;\n      this.nodeData[i].y = pointData[this.nodeData[i].id].y;\n    }\n  }\n}","\n/**\n * Create rectangles in SVG path format tracing the standard deviations at each\n * point in the model.\n * @param featureData\n */\nexport const createConfidenceData = (featureData) => {\n\n  let confidenceData = [];\n\n  for (let i = 0; i < featureData.additive.length; i++) {\n    let curValue = featureData.additive[i];\n    let curError = featureData.error[i];\n\n    confidenceData.push({\n      x1: featureData.binEdge[i],\n      y1: curValue + curError,\n      x2: featureData.binEdge[i + 1],\n      y2: curValue - curError\n    });\n  }\n\n  // Right bound\n  let rightValue = featureData.additive[featureData.additive.length - 1];\n  let rightError = featureData.error[featureData.additive.length - 1];\n\n  confidenceData.push({\n    x1: featureData.binEdge[featureData.additive.length - 1],\n    y1: rightValue + rightError,\n    x2: featureData.binEdge[featureData.additive.length - 1],\n    y2: rightValue - rightError\n  });\n\n  return confidenceData;\n};\n\n/**\n * Create line segments (path) to trace the additive term at each bin in the\n * model.\n * @param featureData\n */\nexport const createAdditiveData = (featureData) => {\n  let additiveData = [];\n\n  for (let i = 0; i < featureData.additive.length - 1; i++) {\n\n    // Compute the source point and the target point\n    let sx = featureData.binEdge[i];\n    let sy = featureData.additive[i];\n    let tx = featureData.binEdge[i + 1];\n    let ty = featureData.additive[i + 1];\n\n    // Add line segments (need two segments to connect two points)\n    // We separate these two lines so it is easier to drag\n    additiveData.push({\n      x1: sx,\n      y1: sy,\n      x2: tx,\n      y2: sy,\n      id: `path-${i}-${i+1}-r`,\n      pos: 'r',\n      sx: sx,\n      sy: sy,\n      tx: tx,\n      ty: ty\n    });\n\n    additiveData.push({\n      x1: tx,\n      y1: sy,\n      x2: tx,\n      y2: ty,\n      id: `path-${i}-${i + 1}-l`,\n      pos: 'l',\n      sx: sx,\n      sy: sy,\n      tx: tx,\n      ty: ty\n    });\n  }\n\n  // Connect the last two points (because max point has no additive value, it\n  // does not have a left edge)\n  additiveData.push({\n    x1: featureData.binEdge[featureData.additive.length - 1],\n    y1: featureData.additive[featureData.additive.length - 1],\n    x2: featureData.binEdge[featureData.additive.length],\n    y2: featureData.additive[featureData.additive.length - 1],\n    id: `path-${featureData.additive.length - 1}-${featureData.additive.length - 1}-r`,\n    pos: 'r',\n    sx: featureData.binEdge[featureData.additive.length - 1],\n    sy: featureData.additive[featureData.additive.length - 1],\n    tx: featureData.binEdge[featureData.additive.length],\n    ty: featureData.additive[featureData.additive.length - 1]\n  });\n\n  return additiveData;\n};\n\n/**\n * Create nodes where each step function begins\n * @param featureData\n */\nexport const createPointData = (featureData) => {\n  let pointData = {};\n\n  for (let i = 0; i < featureData.additive.length; i++) {\n    pointData[i] = {\n      x: featureData.binEdge[i],\n      y: featureData.additive[i],\n      count: featureData.count[i],\n      id: i,\n      ebmID: i,\n      leftPointID: i == 0 ? null : i - 1,\n      rightPointID: i == featureData.additive.length - 1 ? null : i + 1,\n      leftLineIndex: null,\n      rightLineIndex: null\n    };\n  }\n\n  // Since the last point has no additive value, it is not included in the\n  // point data array, we need to separately record its x value\n  // We register it to the last point\n  pointData[featureData.additive.length - 1].maxX = featureData.binEdge[featureData.additive.length];\n\n  return pointData;\n};\n\nexport const linkPointToAdditive = (pointData, additiveData) => {\n  additiveData.forEach( (d, i) => {\n    if (d.pos === 'r') {\n      let curID = d.id.replace(/path-(\\d+)-(\\d+)-[lr]/, '$1');\n      pointData[curID].rightLineIndex = i;\n    } else {\n      let curID = d.id.replace(/path-(\\d+)-(\\d+)-[lr]/, '$2');\n      pointData[curID].leftLineIndex = i;\n    }\n  });\n};\n\n/**\n * Create a new additiveDataBuffer array from the current pointDataBuffer object\n * This function modifies the state in-place\n * This function also update the leftLineIndex/rightLineIndex in the pointDataBuffer\n */\nexport const updateAdditiveDataBufferFromPointDataBuffer = (state) => {\n  let newAdditiveData = [];\n\n  // Find the start point of all graph\n  let curPoint = state.pointDataBuffer[Object.keys(state.pointDataBuffer)[0]];\n  while (curPoint.leftPointID !== null) {\n    curPoint = state.pointDataBuffer[curPoint.leftPointID];\n  }\n\n  // Iterate through all the points from the starting point\n  let curLineIndex = 0;\n  let nextPoint = state.pointDataBuffer[curPoint.rightPointID];\n  while (curPoint.rightPointID !== null) {\n\n    newAdditiveData.push({\n      x1: curPoint.x,\n      y1: curPoint.y,\n      x2: nextPoint.x,\n      y2: curPoint.y,\n      id: `path-${curPoint.id}-${nextPoint.id}-r`,\n      pos: 'r',\n      sx: curPoint.x,\n      sy: curPoint.y,\n      tx: nextPoint.x,\n      ty: nextPoint.y\n    });\n\n    curPoint.rightLineIndex = curLineIndex;\n    curLineIndex++;\n\n    newAdditiveData.push({\n      x1: nextPoint.x,\n      y1: curPoint.y,\n      x2: nextPoint.x,\n      y2: nextPoint.y,\n      id: `path-${curPoint.id}-${nextPoint.id}-l`,\n      pos: 'l',\n      sx: curPoint.x,\n      sy: curPoint.y,\n      tx: nextPoint.x,\n      ty: nextPoint.y\n    });\n\n    nextPoint.leftLineIndex = curLineIndex;\n    curLineIndex++;\n\n    curPoint = nextPoint;\n    nextPoint = state.pointDataBuffer[curPoint.rightPointID];\n  }\n\n  // Connect the last two points (because max point has no additive value, it\n  // does not have a left edge)\n  newAdditiveData.push({\n    x1: curPoint.x,\n    y1: curPoint.y,\n    x2: state.oriXScale.domain()[1],\n    y2: curPoint.y,\n    id: `path-${curPoint.id}-${curPoint.id}-r`,\n    pos: 'r',\n    sx: curPoint.x,\n    sy: curPoint.y,\n    tx: state.oriXScale.domain()[1],\n    ty: curPoint.y\n  });\n\n  curPoint.rightLineIndex = curLineIndex;\n\n  state.additiveDataBuffer = newAdditiveData;\n};","import d3 from '../../utils/d3-import';\n\n/**\n * Use the selection bbox to compute where to put the context menu bar\n*/\nexport const moveMenubar = (menubar, svg, component) => {\n  const bbox = d3.select(svg)\n    .select('g.select-bbox-group rect.select-bbox');\n\n  if (bbox.node() === null) return;\n\n  const bboxPosition = bbox.node().getBoundingClientRect();\n  const panelBboxPosition = component.getBoundingClientRect();\n\n  const menuBarBbox = menubar.node().getBoundingClientRect();\n  const menuWidth = +menubar.select('.menu-wrapper').attr('data-max-width');\n  const menuHeight = menuBarBbox.height;\n\n  let left = bboxPosition.x - panelBboxPosition.x + bboxPosition.width / 2 - menuWidth / 2;\n  let top = bboxPosition.y - panelBboxPosition.y - menuHeight - 40;\n\n  // Do not move the bar out of its parent\n  left = Math.max(0, left);\n  left = Math.min(panelBboxPosition.width - menuWidth, left);\n  top = Math.max(0, top);\n\n  menubar.style('left', `${left}px`)\n    .style('top', `${top}px`);\n  \n};","import d3 from '../../utils/d3-import';\nimport { moveMenubar } from './cont-bbox';\n\nexport const rExtent = [2, 16];\nexport const zoomScaleExtent = [0.95, 30];\n\nexport const zoomStart = (state, multiMenu) => {\n  if (state.selectedInfo.hasSelected) {\n    d3.select(multiMenu)\n      .classed('hidden', true);\n  }\n};\n\nexport const zoomEnd = (state, multiMenu) => {\n  if (state.selectedInfo.hasSelected) {\n    d3.select(multiMenu)\n      .classed('hidden', false);\n  }\n};\n\n/**\n * Update the view with zoom transformation\n * @param event Zoom event\n * @param xScale Scale for the x-axis\n * @param yScale Scale for the y-axis\n */\nexport const zoomed = (event, state, xScale, yScale, svg,\n  linePathWidth, nodeStrokeWidth, yAxisWidth, lineChartWidth, lineChartHeight,\n  multiMenu, component\n) => {\n\n  let svgSelect = d3.select(svg);\n  let transform = event.transform;\n\n  // Transform the axises\n  let zXScale = transform.rescaleX(xScale);\n  let zYScale = transform.rescaleY(yScale);\n\n  state.curXScale = zXScale;\n  state.curYScale = zYScale;\n  state.curTransform = transform;\n\n  svgSelect.select('g.x-axis')\n    .call(d3.axisBottom(zXScale));\n\n  svgSelect.select('g.y-axis')\n    .call(d3.axisLeft(zYScale).tickFormat(d => Math.abs(d) >= 1000 ? d / 1000 + 'K' : d));\n\n  // Transform the lines\n  let lineGroup = svgSelect.selectAll('g.line-chart-line-group')\n    .attr('transform', transform);\n\n  // Rescale the stroke width a little bit\n  lineGroup.style('stroke-width', linePathWidth / transform.k);\n\n  // Transform the confidence rectangles\n  svgSelect.select('g.line-chart-confidence-group')\n    .attr('transform', transform);\n\n  // Transform the nodes\n  let nodeGroup = svgSelect.select('g.line-chart-node-group');\n\n  if (transform.k <= 1 && nodeGroup.style('visibility') === 'visible') {\n    nodeGroup.transition()\n      .duration(300)\n      .style('opacity', 0)\n      .on('end', (d, i, g) => {\n        d3.select(g[i])\n          .style('visibility', 'hidden');\n      });\n  }\n\n  if (transform.k > 1 && nodeGroup.style('visibility') === 'hidden') {\n    nodeGroup.style('opacity', 0);\n    nodeGroup.style('visibility', 'visible')\n      .transition()\n      .duration(500)\n      .style('opacity', 1);\n  }\n\n  svgSelect.select('g.line-chart-node-group')\n    .attr('transform', transform)\n    .selectAll('circle.node')\n    .attr('r', rScale(transform.k))\n    .style('stroke-width', nodeStrokeWidth / transform.k);\n\n  // Transform the density rectangles\n  // Here we want to translate and scale the x axis, and keep y axis consistent\n  svgSelect.select('g.hist-chart-content-group')\n    .attr('transform', `translate(${yAxisWidth + transform.x},\n        ${lineChartHeight})scale(${transform.k}, 1)`);\n\n  // Transform the selection bbox if applicable\n  if (state.selectedInfo.hasSelected) {\n    // Here we don't use transform, because we want to keep the gap between\n    // the nodes and bounding box border constant across all scales\n\n    // We want to compute the world coordinate here\n    // Need to transfer back the scale factor from the node radius\n    let curPadding = rScale(state.curTransform.k) + state.bboxPadding * state.curTransform.k;\n\n    svgSelect.select('g.line-chart-content-group')\n      .selectAll('rect.select-bbox')\n      .attr('x', d => state.curXScale(d.x1) - curPadding)\n      .attr('y', d => state.curYScale(d.y1) - curPadding)\n      .attr('width', d => {\n        if (state.selectedInfo.nodeData.length === 1) {\n          return state.curXScale(d.x2) - state.curXScale(d.x1) + 2 * curPadding;\n        } else {\n          return state.curXScale(d.x2) - state.curXScale(d.x1) + curPadding;\n        }\n      })\n      .attr('height', d => state.curYScale(d.y2) - state.curYScale(d.y1) + 2 * curPadding);\n\n    // Also transform the menu bar\n    d3.select(multiMenu)\n      .call(moveMenubar, svg, component);\n  }\n\n  // Draw/update the grid\n  svgSelect.select('g.line-chart-grid-group')\n    .call(drawGrid, zXScale, zYScale, lineChartWidth, lineChartHeight);\n\n};\n\n/**\n * Use linear interpolation to scale the node radius during zooming\n * It is actually kind of tricky, there should be better functions\n * (1) In overview, we want the radius to be small to avoid overdrawing;\n * (2) When zooming in, we want the radius to increase (slowly)\n * (3) Need to counter the zoom's scaling effect\n * @param k Scale factor\n */\nexport const rScale = (k) => {\n  let alpha = (k - zoomScaleExtent[0]) / (zoomScaleExtent[1] - zoomScaleExtent[0]);\n  alpha = d3.easeLinear(alpha);\n  let target = alpha * (rExtent[1] - rExtent[0]) + rExtent[0];\n  return target / k;\n};\n\nconst drawGrid = (g, xScale, yScale, lineChartWidth, lineChartHeight) => {\n  g.style('stroke', 'black')\n    .style('stroke-opacity', 0.08);\n\n  // Add vertical lines based on the xScale ticks\n  g.call(g => g.selectAll('line.grid-line-x')\n    .data(xScale.ticks(), d => d)\n    .join(\n      enter => enter.append('line')\n        .attr('class', 'grid-line-x')\n        .attr('y2', lineChartHeight),\n      update => update,\n      exit => exit.remove()\n    )\n    .attr('x1', d => 0.5 + xScale(d))\n    .attr('x2', d => 0.5 + xScale(d))\n  );\n\n  // Add horizontal lines based on the yScale ticks\n  return g.call(g => g.selectAll('line.grid-line-y')\n    .data(yScale.ticks(), d => d)\n    .join(\n      enter => enter.append('line')\n        .attr('class', 'grid-line-y')\n        .classed('grid-line-y-0', d => d === 0)\n        .attr('x2', lineChartWidth),\n      update => update,\n      exit => exit.remove()\n    )\n    .attr('y1', d => yScale(d))\n    .attr('y2', d => yScale(d))\n  );\n};","export class SimpleLinearRegression {\n  constructor() {\n    this.b0 = 0;\n    this.b1 = 0;\n    this.trained = false;\n  }\n\n  /**\n   * Fit a simple linear regression model\n   * @param {[number]} x Array of x values\n   * @param {[number]} y Array of y values\n   * @param {[number]} w Array of sample weights, default to [1, 1, ..., 1]\n   */\n  fit(x, y, w=undefined) {\n    if (w === undefined) {\n      w = new Array(x.length).fill(1);\n    }\n    // Compute weighted averages\n    let xSum = 0;\n    let ySum = 0;\n    let wSum = 0;\n    for (let i = 0; i < x.length; i++) {\n      xSum += w[i] * x[i];\n      ySum += w[i] * y[i];\n      wSum += w[i];\n    }\n\n    let xAverage = xSum / wSum;\n    let yAverage = ySum / wSum;\n\n    // Compute b1\n    let numerator = 0;\n    let denominator = 0;\n\n    for (let i = 0; i < x.length; i++) {\n      numerator += w[i] * (x[i] - xAverage) * (y[i] - yAverage);\n      denominator += w[i] * ((x[i] - xAverage) ** 2);\n    }\n\n    this.b1 = numerator / denominator;\n\n    // Compute b0\n    this.b0 = yAverage - this.b1 * xAverage;\n\n    this.trained = true;\n  }\n\n  /**\n   * Use the trained simple linear regression to predict on the given x value\n   * @param {[number]} x Array of x values\n   */\n  predict(x) {\n    if (!this.trained) {\n      console.error('This model is not trained yet.');\n      return;\n    }\n    return x.map(d => this.b0 + this.b1 * d);\n  }\n\n  /**\n   * Reset the weights in this model.\n   */\n  reset() {\n    this.b0 = 0;\n    this.b1 = 0;\n    this.trained = false;\n  }\n}","import d3 from '../../utils/d3-import';\nimport { round } from '../../utils/utils';\nimport { rScale, rExtent } from './cont-zoom';\nimport { updateAdditiveDataBufferFromPointDataBuffer } from './cont-data';\nimport { SimpleLinearRegression } from '../../simple-linear-regression';\n\n// TODO: Uniform this variable across all files (use config file)\nconst nodeStrokeWidth = 1;\nlet dragTimeout = null;\n\nexport const dragged = (e, state, svg, useTimeout, footerStore, updateEBM) => {\n\n  const dataYChange = state.curYScale.invert(e.y) - state.curYScale.invert(e.y - e.dy);\n\n  // Change the data based on the y-value changes, then redraw nodes (preferred method)\n  state.selectedInfo.nodeData.forEach(d => {\n    const id = d.id;\n    const curPoint = state.pointDataBuffer[id];\n\n    // Step 1.1: update point data\n    state.pointDataBuffer[id].y += dataYChange;\n\n    // Step 1.2: update path data\n\n    // i's Left line\n    const leftLineIndex = curPoint.leftLineIndex;\n    if (leftLineIndex !== null) {\n      state.additiveDataBuffer[leftLineIndex].y2 += dataYChange;\n    }\n\n    // i's Right line\n    const rightLineIndex = curPoint.rightLineIndex;\n    state.additiveDataBuffer[rightLineIndex].y1 += dataYChange;\n    state.additiveDataBuffer[rightLineIndex].y2 += dataYChange;\n    state.additiveDataBuffer[rightLineIndex].sy += dataYChange;\n\n    // (i + 1)'s Left line\n    if (curPoint.rightPointID !== null) {\n      const nextLeftLineIndex = state.pointDataBuffer[curPoint.rightPointID].leftLineIndex;\n      state.additiveDataBuffer[nextLeftLineIndex].y1 += dataYChange;\n      state.additiveDataBuffer[nextLeftLineIndex].sy += dataYChange;\n    }\n\n  });\n\n  // Step 1.3: update the bbox info\n  state.selectedInfo.updateNodeData(state.pointDataBuffer);\n  state.selectedInfo.computeBBox(state.pointDataBuffer);\n\n  // Update the visualization with new data\n  // Step 2: redraw the nodes that are changed\n  drawBufferGraph(state, svg, false);\n\n  // Update the sidebar info\n  if (dragTimeout !== null) {\n    clearTimeout(dragTimeout);\n  }\n  dragTimeout = setTimeout(() => {\n    updateEBM('current');\n  }, useTimeout ? 300 : 0);\n  \n\n  // Update the footer message\n  footerStore.update(value => {\n    value.baseline += dataYChange;\n    value.state = `Scores <b>${value.baseline >= 0 ? 'increased' : 'decreased'}</b> by <b>${round(Math.abs(value.baseline), 2)}</b>`;\n    return value;\n  });\n};\n\nexport const redrawOriginal = (state, svg, bounce=true, animationEndFunc=undefined) => {\n  const svgSelect = d3.select(svg);\n\n  let trans = d3.transition('restore')\n    .duration(500)\n    .ease(d3.easeElasticOut\n      .period(0.35)\n    );\n  \n  let transNoBounce = d3.transition('restoreNo')\n    .duration(500)\n    .ease(d3.easeLinear);\n\n  if (!bounce) {\n    trans = transNoBounce;\n  }\n\n  if (animationEndFunc !== undefined) {\n    trans.on('end', animationEndFunc);\n  }\n\n  // Step 1: update the bbox info\n  state.selectedInfo.updateNodeData(state.pointData);\n  state.selectedInfo.computeBBox(state.pointData);\n\n  // if (state.lastSelectedInfo !== null) {\n  //   state.lastSelectedInfo.updateNodeData(state.pointData);\n  //   state.lastSelectedInfo.computeBBox(state.pointData);\n  // }\n\n  // Step 2: redraw the nodes with original data\n  let nodes = svgSelect.select('g.line-chart-node-group')\n    .selectAll('circle.node');\n\n  nodes.data(Object.values(state.pointData), d => d.id)\n    .join(\n      enter => enter.append('circle')\n        .attr('class', 'node')\n        .classed('selected', state.selectedInfo.hasSelected)\n        .attr('id', d => `node-${d.id}`)\n        .attr('cx', d => state.oriXScale(d.x))\n        .attr('cy', d => state.oriYScale(d.y))\n        .attr('r', rScale(state.curTransform.k))\n        .style('opacity', 0)\n        .style('stroke-width', nodeStrokeWidth / state.curTransform.k)\n        .call(\n          enter => enter.transition(transNoBounce)\n            .style('opacity', 1)\n        ),\n      update => update.call(\n        update => update.transition(trans)\n          .attr('cx', d => state.oriXScale(d.x))\n          .attr('cy', d => state.oriYScale(d.y))\n      ),\n      exit => exit.remove()\n    );\n\n  // Step 3: redraw the paths with original data\n  let paths = svgSelect.select('g.line-chart-line-group.real')\n    .selectAll('path.additive-line-segment');\n\n  paths.data(state.additiveData, d => `${d.id}-${d.pos}`)\n    .join(\n      enter => enter.append('path')\n        .attr('class', 'additive-line-segment')\n        .classed('selected', state.selectedInfo.hasSelected)\n        .attr('id', d => d.id)\n        .attr('d', d => `M ${state.oriXScale(d.x1)}, ${state.oriYScale(d.y1)}\n          L ${state.oriXScale(d.x2)} ${state.oriYScale(d.y2)}`)\n        .style('opacity', 0.2)\n        .call(\n          enter => enter.transition(transNoBounce)\n            .delay(300)\n            .style('opacity', 1)\n        ),\n      update => update.call(\n        update => update.transition(trans)\n          .attr('d', d => `M ${state.oriXScale(d.x1)}, ${state.oriYScale(d.y1)}\n              L ${state.oriXScale(d.x2)} ${state.oriYScale(d.y2)}`)\n      ),\n      exit => exit.call(\n        exit => exit.style('opacity', 1)\n          .transition('pre')\n          .duration(300)\n          .style('opacity', 0)\n          .remove()\n      )\n    );\n\n  // Step 4: move the selected bbox to their original place\n  let curPadding = rScale(state.curTransform.k) + state.bboxPadding * state.curTransform.k;\n\n  svgSelect.select('g.line-chart-content-group g.select-bbox-group')\n    .selectAll('rect.select-bbox')\n    .datum(state.selectedInfo.boundingBox[0])\n    .transition(trans)\n    .attr('y', d => state.curYScale(d.y1) - curPadding)\n    .attr('height', d => state.curYScale(d.y2) - state.curYScale(d.y1) + 2 * curPadding);\n};\n\nexport const redrawMonotone = (state, svg, isoYs, callBack) => {\n\n  // Change the data based on the y-value changes, then redraw nodes (preferred method)\n  state.selectedInfo.nodeData.forEach((d, j) => {\n    const id = d.id;\n    const curPoint = state.pointDataBuffer[id];\n\n    // Step 1.1: update point data\n    state.pointDataBuffer[id].y = isoYs[j];\n\n    // Step 1.2: update path data\n\n    // i's Left line\n    const leftLineIndex = curPoint.leftLineIndex;\n    if (leftLineIndex !== null) {\n      state.additiveDataBuffer[leftLineIndex].y2 = isoYs[j];\n    }\n\n    // i's Right line\n    const rightLineIndex = curPoint.rightLineIndex;\n    state.additiveDataBuffer[rightLineIndex].y1 = isoYs[j];\n    state.additiveDataBuffer[rightLineIndex].y2 = isoYs[j];\n    state.additiveDataBuffer[rightLineIndex].sy = isoYs[j];\n\n    // (i + 1)'s Left line\n    if (curPoint.rightPointID !== null) {\n      const nextLeftLineIndex = state.pointDataBuffer[curPoint.rightPointID].leftLineIndex;\n      state.additiveDataBuffer[nextLeftLineIndex].y1 = isoYs[j];\n      state.additiveDataBuffer[nextLeftLineIndex].sy = isoYs[j];\n    }\n  });\n\n  // Step 1.3: update the bbox info\n  state.selectedInfo.updateNodeData(state.pointDataBuffer);\n  state.selectedInfo.computeBBox(state.pointDataBuffer);\n\n  // Step 2 Update the visualization with new data\n  drawBufferGraph(state, svg, true, 400, callBack);\n};\n\nexport const regressionInterpolate = (state, svg, callBack) => {\n  // Regression interpolation\n  // Create x and y arrays\n  let xs = [];\n  let ys = [];\n  let ws = [];\n\n  // We use the points in between as interpolation steps\n  let leftPoint = { x: Infinity, y: null, id: null };\n  let rightPoint = { x: -Infinity, y: null, id: null };\n\n  state.selectedInfo.nodeDataBuffer.forEach(d => {\n    let curPoint = state.pointDataBuffer[d.id];\n    if (d.x < leftPoint.x) {\n      leftPoint = curPoint;\n    }\n    if (d.x > rightPoint.x) {\n      rightPoint = curPoint;\n    }\n    xs.push(curPoint.x);\n    ys.push(curPoint.y);\n    ws.push(curPoint.count);\n  });\n\n  // Fit a linear regression and transform xs\n  let model = new SimpleLinearRegression();\n  model.fit(xs, ys, ws);\n  let newYs = model.predict(xs);\n\n  // Step 1: Update the point data\n  state.selectedInfo.nodeDataBuffer.forEach((d, i) => {\n    state.pointDataBuffer[d.id].y = newYs[i];\n  });\n\n  // Step 2: Recreate the path data using the updated point data  \n  updateAdditiveDataBufferFromPointDataBuffer(state);\n\n  // Step 3: update the bbox info\n  state.selectedInfo.updateNodeData(state.pointDataBuffer);\n  state.selectedInfo.computeBBox(state.pointDataBuffer);\n\n  // Step 4: Update the graph using new data\n  drawBufferGraph(state, svg, true, 800, callBack);\n};\n\nexport const inplaceInterpolate = (state, svg, callBack) => {\n  // Regional interpolation\n  // We use the points in between as interpolation steps\n  let leftPoint = { x: Infinity, y: null, id: null };\n  let rightPoint = { x: -Infinity, y: null, id: null };\n\n  state.selectedInfo.nodeDataBuffer.forEach(d => {\n    if (d.x < leftPoint.x) {\n      leftPoint = state.pointDataBuffer[d.id];\n    }\n    if (d.x > rightPoint.x) {\n      rightPoint = state.pointDataBuffer[d.id];\n    }\n  });\n\n  const xRange = rightPoint.x - leftPoint.x;\n  const yRange = rightPoint.y - leftPoint.y;\n\n  // Iterate the point from left to right using their pointers and modify\n  // both the node data and path data\n\n  // Step 1: Update the point data\n  let curPoint = state.pointDataBuffer[leftPoint.rightPointID];\n\n  while (curPoint.id !== rightPoint.id) {\n    let alpha = (curPoint.x - leftPoint.x) / xRange;\n    let newY = leftPoint.y + yRange * alpha;\n    curPoint.y = newY;\n\n    curPoint = state.pointDataBuffer[curPoint.rightPointID];\n  }\n\n  // Step 2: Recreate the path data using the updated point data  \n  updateAdditiveDataBufferFromPointDataBuffer(state);\n\n  // Step 3: update the bbox info\n  state.selectedInfo.updateNodeData(state.pointDataBuffer);\n  state.selectedInfo.computeBBox(state.pointDataBuffer);\n\n  // Step 4: Update the graph using new data\n  drawBufferGraph(state, svg, true, 800, callBack);\n};\n\nexport const stepInterpolate = (state, svg, steps, callBack) => {\n  // Step 1: Find the left and right point in the selected region\n  let leftPoint = { x: Infinity, y: null, id: null };\n  let rightPoint = { x: -Infinity, y: null, id: null };\n  let totalCount = 0;\n\n  state.selectedInfo.nodeDataBuffer.forEach(d => {\n    if (d.x < leftPoint.x) {\n      leftPoint = state.pointDataBuffer[d.id];\n    }\n    if (d.x > rightPoint.x) {\n      rightPoint = state.pointDataBuffer[d.id];\n    }\n  });\n\n  const xRange = rightPoint.x - leftPoint.x;\n  const yRange = rightPoint.y - leftPoint.y;\n\n  // Step 2: Remove all the points (if any) in between\n  let curPoint = state.pointDataBuffer[leftPoint.rightPointID];\n\n  while(curPoint.id !== rightPoint.id) {\n    totalCount += curPoint.count;\n    const nextID = curPoint.rightPointID;\n    delete state.pointDataBuffer[curPoint.id];\n    curPoint = state.pointDataBuffer[nextID];\n  }\n\n  // Step 3: Create interpolated middle points and add them to the buffer\n\n  for (let s = 1; s < steps + 1; s++) {\n    // Step 3.1: Compute interpolated values\n    const alpha = s / (steps + 1);\n    const curX = leftPoint.x + alpha * xRange;\n    const curY = leftPoint.y + alpha * yRange;\n    const curPoint = {\n      x: curX,\n      y: curY,\n      count: totalCount / steps,\n      id: `q${leftPoint.id}pxq${rightPoint.id}p-${s}`,\n      ebmID: leftPoint.id + s,\n      leftPointID: s == 1 ? leftPoint.id : `q${leftPoint.id}pxq${rightPoint.id}p-${s - 1}`,\n      rightPointID: s == steps ? rightPoint.id : `q${leftPoint.id}pxq${rightPoint.id}p-${s + 1}`,\n      leftLineIndex: null,\n      rightLineIndex: null\n    };\n\n    // Step 3.2: Add it to the buffer array\n    state.pointDataBuffer[`q${leftPoint.id}pxq${rightPoint.id}p-${s}`] = curPoint;\n  }\n\n  // Step 3.3: Link the left point and right point to these new points\n  leftPoint.rightPointID = `q${leftPoint.id}pxq${rightPoint.id}p-${1}`;\n  rightPoint.leftPointID = `q${leftPoint.id}pxq${rightPoint.id}p-${steps}`;\n\n  // Step 3.4: Update the ebmID of all points in the buffer\n  // The first point will always have ID 0\n  let curBufferPoint = state.pointDataBuffer[0];\n  let curEbmID = 0;\n  while(curBufferPoint.rightPointID !== null) {\n    state.pointDataBuffer[curBufferPoint.id].ebmID = curEbmID++;\n    curBufferPoint = state.pointDataBuffer[curBufferPoint.rightPointID];\n  }\n  state.pointDataBuffer[curBufferPoint.id].ebmID = curEbmID++;\n\n  // Step 4: Recreate the path data using the updated point data  \n  updateAdditiveDataBufferFromPointDataBuffer(state);\n\n  // Step 5: Update the selectedInfo to reflect new middle nodes\n  curPoint = leftPoint;\n  state.selectedInfo.nodeDataBuffer = [];\n\n  while (curPoint.id !== rightPoint.id) {\n    const nextID = curPoint.rightPointID;\n    state.selectedInfo.nodeDataBuffer.push({\n      x: curPoint.x,\n      y: curPoint.y,\n      id: curPoint.id,\n      ebmID: curPoint.ebmID\n    });\n    curPoint = state.pointDataBuffer[nextID];\n  }\n  \n  // Add the right point too\n  state.selectedInfo.nodeDataBuffer.push({\n    x: curPoint.x,\n    y: curPoint.y,\n    id: curPoint.id,\n    ebmID: curPoint.ebmID\n  });\n\n  state.selectedInfo.computeBBoxBuffer(state.pointDataBuffer);\n\n  // Step 6: Update the graph using new data\n  drawBufferGraph(state, svg, true, 800, callBack);\n\n};\n\nexport const merge = (state, svg, value, callBack) => {\n  // Step 1: Find the left and right point in the selected region\n  let leftPoint = { x: Infinity, y: null, id: null };\n  let rightPoint = { x: -Infinity, y: null, id: null };\n\n  let sum = 0;\n  let count = 0;\n\n  state.selectedInfo.nodeData.forEach(d => {\n    if (d.x < leftPoint.x) {\n      leftPoint = state.pointDataBuffer[d.id];\n    }\n    if (d.x > rightPoint.x) {\n      rightPoint = state.pointDataBuffer[d.id];\n    }\n    sum += state.pointDataBuffer[d.id].y * state.pointDataBuffer[d.id].count;\n    count += state.pointDataBuffer[d.id].count;\n  });\n\n  const average = sum / count;\n\n  // Step 2: Iterate through all nodes in the region and assign left node value\n  // or the given value to them\n  let curPoint = state.pointDataBuffer[leftPoint.id];\n\n  let target = 0;\n\n  if (value === 'left') {\n    target = leftPoint.y;\n  } else if (value === 'right') {\n    target = rightPoint.y;\n  } else if (value === 'average') {\n    target = average;\n  } else {\n    target = value;\n  }\n\n  while (curPoint.id !== rightPoint.rightPointID) {\n    const nextID = curPoint.rightPointID;\n    state.pointDataBuffer[curPoint.id].y = target;\n\n    if (nextID === null) {\n      break;\n    }\n    curPoint = state.pointDataBuffer[nextID];\n  }\n\n  // Step 3: Recreate the path data using the updated point data  \n  updateAdditiveDataBufferFromPointDataBuffer(state);\n\n  // Step 4: update the bbox info\n  state.selectedInfo.updateNodeData(state.pointDataBuffer);\n  state.selectedInfo.computeBBox(state.pointDataBuffer);\n\n  // Step 5: Update the graph using new data\n  drawBufferGraph(state, svg, true, 500, callBack);\n\n  return target;\n};\n\nexport const drawBufferGraph = (state, svg, animated, duration,\n  callBack=() => {}) => {\n\n  const svgSelect = d3.select(svg);\n\n  let trans = d3.transition('buffer')\n    .duration(duration)\n    .ease(d3.easeCubicInOut)\n    .on('end', () => {\n      callBack();\n    });\n\n  // Change the node data and node position based on the y-value changes\n  let nodes = svgSelect.select('g.line-chart-node-group')\n    .selectAll('circle.node');\n\n  if (animated) {\n    nodes.data(Object.values(state.pointDataBuffer), d => d.id)\n      .join(\n        enter => enter.append('circle')\n          .attr('class', 'node selected')\n          .attr('id', d => `node-${d.id}`)\n          .attr('cx', d => state.oriXScale(d.x))\n          .attr('cy', d => state.oriYScale(d.y))\n          .attr('r', rScale(state.curTransform.k))\n          .style('opacity', 0)\n          .style('stroke-width', nodeStrokeWidth / state.curTransform.k)\n          .call(\n            enter => enter.transition(trans)\n              .style('opacity', 1)\n          ),\n        update => update.call(\n          update => update.transition(trans)\n            .attr('cx', d => state.oriXScale(d.x))\n            .attr('cy', d => state.oriYScale(d.y))\n        ),\n        exit => exit.remove()\n      );\n  } else {\n    nodes.data(Object.values(state.pointDataBuffer), d => d.id)\n      .join(\n        enter => enter.append('circle')\n          .attr('class', 'node selected')\n          .attr('id', d => `node-${d.id}`)\n          .attr('cx', d => state.oriXScale(d.x))\n          .attr('cy', d => state.oriYScale(d.y))\n          .attr('r', rScale(state.curTransform.k))\n          .style('stroke-width', nodeStrokeWidth / state.curTransform.k),\n        update => update.attr('cx', d => state.oriXScale(d.x))\n          .attr('cy', d => state.oriYScale(d.y)),\n        exit => exit.remove()\n      );\n  }\n\n  // Step 2.2: redraw the paths that are changed\n  let paths = svgSelect.select('g.line-chart-line-group.real')\n    .selectAll('path.additive-line-segment');\n\n  if (animated) {\n    paths.data(state.additiveDataBuffer, d => `${d.id}-${d.pos}`)\n      .join(\n        enter => enter.append('path')\n          .attr('class', 'additive-line-segment selected')\n          .attr('id', d => d.id)\n          .attr('d', d => {\n            // Helpful animation, let's figure out the projection of the end point\n            // on the linear interpolation line, and use it as the animation\n            // starting point\n            let project = projectTriangleSide(d);\n            let pathD = '';\n            if (d.pos == 'r') {\n              pathD = `M ${state.oriXScale(d.x1)}, ${state.oriYScale(d.y1)}\n                L ${state.oriXScale(project.x)} ${state.oriYScale(project.y)}`;\n            } else {\n              pathD = `M ${state.oriXScale(project.x)}, ${state.oriYScale(project.y)}\n                L ${state.oriXScale(d.x2)} ${state.oriYScale(d.y2)}`;\n            }\n            return pathD;\n          })\n          .style('opacity', 0)\n          .call(enter => enter.transition('pre')\n            .duration(duration / 2)\n            .style('opacity', 1)\n          )\n          .call(\n            enter => enter.transition(trans)\n              .attr('d', d => `M ${state.oriXScale(d.x1)}, ${state.oriYScale(d.y1)}\n                L ${state.oriXScale(d.x2)} ${state.oriYScale(d.y2)}`)\n          ),\n        update => update.call(\n          update => update.transition(trans)\n            .attr('d', d => `M ${state.oriXScale(d.x1)}, ${state.oriYScale(d.y1)}\n              L ${state.oriXScale(d.x2)} ${state.oriYScale(d.y2)}`)\n        ),\n        exit => exit.call(\n          exit => exit.style('opacity', 1)\n            .transition('pre')\n            .duration(duration / 2)\n            .style('opacity', 0)\n            .remove()\n        )\n      );\n  } else {\n    paths.data(state.additiveDataBuffer, d => `${d.id}-${d.pos}`)\n      .join(\n        enter => enter.append('path')\n          .attr('class', 'additive-line-segment selected')\n          .attr('id', d => d.id)\n          .attr('d', d => `M ${state.oriXScale(d.x1)}, ${state.oriYScale(d.y1)}\n                  L ${state.oriXScale(d.x2)} ${state.oriYScale(d.y2)}`),\n        update => update.attr('d', d => `M ${state.oriXScale(d.x1)}, ${state.oriYScale(d.y1)}\n          L ${state.oriXScale(d.x2)} ${state.oriYScale(d.y2)}`),\n        exit => exit.remove()\n      );\n  }\n\n  // Step 2.3: move the selected bbox\n  let curPadding = rScale(state.curTransform.k) + state.bboxPadding * state.curTransform.k;\n\n  if (animated) {\n    svgSelect.select('g.line-chart-content-group g.select-bbox-group')\n      .selectAll('rect.select-bbox')\n      .datum(state.selectedInfo.boundingBox[0])\n      .transition(trans)\n      .attr('y', d => state.curYScale(d.y1) - curPadding)\n      .attr('height', d => state.curYScale(d.y2) - state.curYScale(d.y1) + 2 * curPadding);\n  } else {\n    svgSelect.select('g.line-chart-content-group g.select-bbox-group')\n      .selectAll('rect.select-bbox')\n      .datum(state.selectedInfo.boundingBox[0])\n      .attr('y', d => state.curYScale(d.y1) - curPadding)\n      .attr('height', d => state.curYScale(d.y2) - state.curYScale(d.y1) + 2 * curPadding);\n  }\n\n};\n\nexport const drawLastEdit = (state, svg) => {\n\n  if (state.additiveDataLastEdit === undefined) {\n    return;\n  }\n\n  const svgSelect = d3.select(svg);\n\n  let trans = d3.transition('lastEdit')\n    .duration(400)\n    .ease(d3.easeCubicInOut);\n\n  // Step 2.2: redraw the paths that are changed\n  let paths = svgSelect.select('g.line-chart-line-group.last-edit')\n    .selectAll('path.additive-line-segment');\n\n  paths.data(state.additiveDataLastEdit, d => `${d.id}-${d.pos}`)\n    .join(\n      enter => enter.append('path')\n        .attr('class', 'additive-line-segment')\n        .attr('id', d => d.id)\n        .attr('d',  d => `M ${state.oriXScale(d.x1)}, ${state.oriYScale(d.y1)}\n                L ${state.oriXScale(d.x2)} ${state.oriYScale(d.y2)}`),\n      update => update.call(\n        update => update.transition(trans)\n          .attr('d', d => `M ${state.oriXScale(d.x1)}, ${state.oriYScale(d.y1)}\n              L ${state.oriXScale(d.x2)} ${state.oriYScale(d.y2)}`)\n      ),\n      exit => exit.remove()\n    );\n};\n\n/**\n * Project (d.tx, d.sy) onto line [(d.sx, d.sy), (d.tx, d.ty)]\n * @param {Object} d AdditiveData object\n * @returns object of the projection point coordinate\n */\nconst projectTriangleSide = (d) => {\n  const theta = Math.atan2(d.ty, d.tx);\n  const pLen = (d.tx - d.sx) * Math.cos(theta);\n  const len = Math.sqrt((d.ty - d.sy) ** 2 + (d.tx - d.sx) ** 2);\n  let pRatio = pLen / len;\n  // let xRange = Math.abs(d.tx - d.sx);\n  // let yRange = Math.abs(d.ty - d.sy);\n  // pRatio = xRange / (xRange + yRange);\n  const pX = d.sx + pRatio * (d.tx - d.sx);\n  const pY = d.sy + pRatio * (d.ty - d.sy);\n  return {x: pX, y: pY};\n};\n\n","import d3 from '../../utils/d3-import';\nimport { SelectedInfo } from './cont-class';\nimport { moveMenubar } from './cont-bbox';\nimport { rScale } from './cont-zoom';\nimport { redrawOriginal, drawLastEdit } from './cont-edit';\nimport { config } from '../../config';\n\n// Need a timer to avoid the brush event call after brush.move()\nlet idleTimeout = null;\nconst idleDelay = 300;\n\n// Brush zooming\nconst zoomTransitionTime = 700;\n\n/**\n * Reset the idleTimeout timer\n */\nconst idled = () => {\n  idleTimeout = null;\n};\n\nexport const brushDuring = (event, state, svg, multiMenu, ebm, footerStore) => {\n  // Get the selection boundary\n  let selection = event.selection;\n  let svgSelect = d3.select(svg);\n\n  if (selection === null) {\n    if (idleTimeout === null) {\n      return idleTimeout = setTimeout(idled, idleDelay);\n    }\n  } else {\n    // Compute the selected data region\n    let xRange = [state.curXScale.invert(selection[0][0]), state.curXScale.invert(selection[1][0])];\n    let yRange = [state.curYScale.invert(selection[1][1]), state.curYScale.invert(selection[0][1])];\n\n    // Save the selectedInfo, we might need to recover EBM with it\n    // state.lastSelectedInfo = JSON.parse(JSON.stringify(state.selectedInfo));\n    state.lastSelectedInfo = Object.assign(Object.create(\n      Object.getPrototypeOf(state.selectedInfo)), state.selectedInfo);\n\n    // Clean up the previous flowing lines\n    state.selectedInfo = new SelectedInfo();\n\n    // Remove the selection bbox\n    svgSelect.selectAll('g.line-chart-content-group g.select-bbox-group').remove();\n\n    d3.select(multiMenu)\n      .classed('hidden', true);\n\n    // Highlight the selected dots\n    let selectedBinIndexes = [];\n    let selectedBinIDs = [];\n\n    svgSelect.select('g.line-chart-node-group')\n      .selectAll('circle.node')\n      .classed('selected', d => {\n        if (d.x >= xRange[0] && d.x <= xRange[1] && d.y >= yRange[0] && d.y <= yRange[1]) {\n          selectedBinIndexes.push(d.ebmID);\n          selectedBinIDs.push([d.id, d.x]);\n          return true;\n        } else if (d.rightPointID !== null){\n          let rd = state.pointData[d.rightPointID];\n          if (d.y >= yRange[0] && d.y <= yRange[1] && rd.x >= xRange[0] &&\n              rd.x <= xRange[1] && rd.y >= yRange[0] && rd.y <= yRange[1]) {\n            selectedBinIndexes.push(d.ebmID);\n            selectedBinIDs.push([d.id, d.x]);\n            return true;\n          }\n        } else {\n          return false;\n        }\n      });\n\n    selectedBinIDs.sort((a, b) => a[1] - b[1]);\n\n    svgSelect.select('g.line-chart-line-group.real')\n      .selectAll('path.additive-line-segment')\n      .classed('selected', false);\n\n    selectedBinIDs.forEach((pair, i) => {\n      let id = pair[0];\n      svgSelect.select('g.line-chart-line-group.real')\n        .select(`#path-${id}-${state.pointData[id].rightPointID}-r`)\n        .classed('selected', true);\n\n      if (i !== selectedBinIDs.length - 1) {\n        svgSelect.select('g.line-chart-line-group.real')\n          .select(`#path-${id}-${state.pointData[id].rightPointID}-l`)\n          .classed('selected', true);\n      } else {\n        // Last path is named as something like path-99-99-r\n        svgSelect.select('g.line-chart-line-group.real')\n          .select(`#path-${id}-${id}-r`)\n          .classed('selected', true);\n      }\n    });\n\n    // Update the footer message\n    footerStore.update(value => {\n      let sampleNum = ebm.getSelectedSampleNum(selectedBinIndexes);\n      value.sample = `<b>${sampleNum}/${value.totalSampleNum}</b> validation samples selected`;\n      return value;\n    });\n  }\n};\n\n/**\n * Discard the current marquee selection. This function does not handle any graph\n * drawing/redrawing.\n * @param {object} svg The svg object\n * @param {object} multiMenu The multimenu object\n * @param {func} resetContextMenu Function to reset the context menu\n * @param {func} resetFeatureSidebar Function to reset the feature sidebar\n */\nexport const quitSelection = (svg, state, multiMenu, resetContextMenu, resetFeatureSidebar) => {\n  let svgSelect = d3.select(svg);\n\n  state.selectedInfo = new SelectedInfo();\n\n  // De-highlight the paths associated with the selected dots\n  svgSelect.select('g.line-chart-node-group')\n    .selectAll('circle.node')\n    .classed('selected', false);\n\n  svgSelect.select('g.line-chart-line-group.real')\n    .selectAll('path.additive-line-segment')\n    .classed('selected', false);\n\n  svgSelect.select('g.line-chart-content-group g.brush rect.overlay')\n    .attr('cursor', null);\n\n  d3.select(multiMenu)\n    .classed('hidden', true);\n\n  // End move mode\n  resetContextMenu();\n\n  // Remove the selection bbox\n  svgSelect.selectAll('g.line-chart-content-group g.select-bbox-group').remove();\n\n  // Reset the feature sidebar\n  resetFeatureSidebar();\n};\n\nexport const brushEndSelect = (event, state, svg, multiMenu, myContextMenu,\n  bboxStrokeWidth, brush, component, resetContextMenu, sidebarStore, setEBM,\n  updateEBM, updateFeatureSidebar, resetFeatureSidebar, nullifyMetrics,\n  computeSelectedEffects, cancelTooltip\n) => {\n  // Get the selection boundary\n  let selection = event.selection;\n  let svgSelect = d3.select(svg);\n\n  if (selection === null) {\n    if (idleTimeout === null) {\n\n      svgSelect.select('g.line-chart-content-group g.brush rect.overlay')\n        .attr('cursor', null);\n\n      d3.select(multiMenu)\n        .classed('hidden', true);\n\n      myContextMenu.mouseleaveHandler();\n\n      // End move mode\n      let modeInfo = resetContextMenu();\n\n      let callBack = () => {};\n\n      // If the current edit is interpolation, we need to recover the bin definition\n      // in the EBM model\n      if (modeInfo.subItemMode === 'interpolation') {\n        callBack = () => {\n          setEBM('current', state.pointData);\n        };\n\n      } else if (modeInfo.moveMode || modeInfo.subItemMode !== null) {\n\n        callBack = () => {\n          // We are using lastSelectedInfo here because selectedInfo is purged\n          // in brushDuring\n          updateEBM('recoverEBM', state.lastSelectedInfo.nodeData);\n          state.lastSelectedInfo = null;\n        };\n      }\n\n      // Redraw the last edit if possible\n      if (modeInfo.moveMode || modeInfo.subItemMode !== null) {\n        // Do not save the user's change (same as clicking the cancel button)\n        // Redraw the graph with original data\n        redrawOriginal(state, svg, true, callBack);\n\n        if (state.additiveDataLastLastEdit !== undefined) {\n          state.additiveDataLastEdit = JSON.parse(JSON.stringify(state.additiveDataLastLastEdit));\n          drawLastEdit(state, svg);\n          // Prepare for next redrawing after recovering the last last edit graph\n          state.additiveDataLastEdit = JSON.parse(JSON.stringify(state.additiveData));\n        }\n      }\n\n      // Recover the metrics if user is quitting context menu without committing\n      sidebarStore.update(value => {\n        // Svelte would trigger an update when update() is called\n        // So if we want to avoid call 'recover' twice, we need to set another\n        // message\n        if (modeInfo.moveMode || modeInfo.subItemMode !== null) {\n          value.curGroup = 'recover';\n        } else {\n          value.curGroup = 'no action';\n        }\n        value.hasUpdatedLastMetrics = false;\n        return value;\n      });\n\n      // Remove the selection bbox\n      svgSelect.selectAll('g.line-chart-content-group g.select-bbox-group').remove();\n\n      // Reset the feature sidebar\n      resetFeatureSidebar();\n\n      // Nullify the metrics if in selected tab\n      nullifyMetrics();\n\n      return idleTimeout = setTimeout(idled, idleDelay);\n    }\n  } else {\n\n    // Compute the selected data region\n    let xRange = [state.curXScale.invert(selection[0][0]), state.curXScale.invert(selection[1][0])];\n    let yRange = [state.curYScale.invert(selection[1][1]), state.curYScale.invert(selection[0][1])];\n\n    let selectedBinIndexes = [];\n    let selectedBinIDs = [];\n\n    // Highlight the selected dots\n    svgSelect.select('g.line-chart-node-group')\n      .selectAll('circle.node')\n      .classed('selected', d => {\n        if (d.x >= xRange[0] && d.x <= xRange[1] && d.y >= yRange[0] && d.y <= yRange[1]) {\n          selectedBinIndexes.push(d.ebmID);\n          selectedBinIDs.push([d.id, d.x]);\n          return true;\n        } else if (d.rightPointID !== null) {\n          let rd = state.pointData[d.rightPointID];\n          if (d.y >= yRange[0] && d.y <= yRange[1] && rd.x >= xRange[0] &&\n            rd.x <= xRange[1] && rd.y >= yRange[0] && rd.y <= yRange[1]) {\n            selectedBinIndexes.push(d.ebmID);\n            selectedBinIDs.push([d.id, d.x]);\n            return true;\n          }\n        } else {\n          return false;\n        }\n      });\n\n    // Force to select the missed middle nodes\n    const selectedXRange = d3.extent(selectedBinIDs.map(d => state.pointData[d[0]].x));\n\n    // Reset the IDs here because we will select all again with the new condition\n    selectedBinIndexes = [];\n    selectedBinIDs = [];\n\n    svgSelect.select('g.line-chart-node-group')\n      .selectAll('circle.node')\n      .classed('selected', d => {\n        if (d.x >= selectedXRange[0] && d.x <= selectedXRange[1]) {\n          selectedBinIndexes.push(d.ebmID);\n          selectedBinIDs.push([d.id, d.x]);\n          state.selectedInfo.nodeData.push({ x: d.x, y: d.y, id: d.id, ebmID: d.ebmID });\n          return true;\n        } else {\n          return false;\n        }\n      });\n\n    selectedBinIDs.sort((a, b) => a[1] - b[1]);\n\n    svgSelect.select('g.line-chart-line-group.real')\n      .selectAll('path.additive-line-segment')\n      .classed('selected', false);\n\n    selectedBinIDs.forEach((pair, i) => {\n      let id = pair[0];\n      svgSelect.select('g.line-chart-line-group.real')\n        .select(`#path-${id}-${state.pointData[id].rightPointID}-r`)\n        .classed('selected', true);\n\n      if (i !== selectedBinIDs.length - 1) {\n        svgSelect.select('g.line-chart-line-group.real')\n          .select(`#path-${id}-${state.pointData[id].rightPointID}-l`)\n          .classed('selected', true);\n      } else {\n        // Last path is named as something like path-99-99-r\n        svgSelect.select('g.line-chart-line-group.real')\n          .select(`#path-${id}-${id}-r`)\n          .classed('selected', true);\n      }\n    });\n\n    // Compute the bounding box\n    state.selectedInfo.computeBBox(state.pointData);\n\n    let curPadding = rScale(state.curTransform.k) + state.bboxPadding * state.curTransform.k;\n\n    let bbox = svgSelect.select('g.line-chart-content-group')\n      .append('g')\n      .attr('class', 'select-bbox-group')\n      .selectAll('rect.select-bbox')\n      .data(state.selectedInfo.boundingBox)\n      .join('rect')\n      .attr('class', 'select-bbox original-bbox')\n      .attr('x', d => state.curXScale(d.x1) - curPadding)\n      .attr('y', d => state.curYScale(d.y1) - curPadding)\n      .attr('width', d => {\n        if (state.selectedInfo.nodeData.length === 1) {\n          return state.curXScale(d.x2) - state.curXScale(d.x1) + 2 * curPadding;\n        } else {\n          return state.curXScale(d.x2) - state.curXScale(d.x1) + curPadding;\n        }\n      })\n      .attr('height', d => state.curYScale(d.y2) - state.curYScale(d.y1) + 2 * curPadding)\n      .style('stroke-width', bboxStrokeWidth)\n      .style('stroke', 'hsl(230, 100%, 10%)')\n      .style('stroke-dasharray', '5 3');\n\n    bbox.clone(true)\n      .classed('original-bbox', false)\n      .style('stroke', config.colors.background)\n      .style('stroke-dasharray', null)\n      .style('stroke-width', bboxStrokeWidth * 3)\n      .lower();\n\n    state.selectedInfo.hasSelected = svgSelect.selectAll('g.line-chart-node-group circle.node.selected').size() > 0;\n\n    if (state.selectedInfo.hasSelected) {\n      // Show the context menu near the selected region\n      d3.select(multiMenu)\n        .call(moveMenubar, svg, component)\n        .classed('hidden', false);\n\n      // Trigger a counting of the feature distribution of the selected samples\n      updateFeatureSidebar(selectedBinIndexes);\n    }\n\n    // Nullify the metrics if in selected tab and no selection\n    nullifyMetrics();\n\n    // Recompute the selected effects if in selected tab and we do have selection\n    computeSelectedEffects();\n\n    // Remove the brush box\n    svgSelect.select('g.line-chart-content-group g.brush')\n      .call(brush.move, null)\n      .select('rect.overlay')\n      .attr('cursor', null);\n  }\n};\n\nexport const selectAllBins = (svg, state, bboxStrokeWidth, multiMenu, component,\n  updateFeatureSidebar, nullifyMetrics, computeSelectedEffects, brush, footerStore, ebm) => {\n  let xRange = [-Infinity, Infinity];\n  let yRange = [-Infinity, Infinity];\n\n  let selectedBinIndexes = [];\n  let svgSelect = d3.select(svg);\n\n  // Highlight the selected dots\n  svgSelect.select('g.line-chart-node-group')\n    .selectAll('circle.node')\n    .classed('selected', d => {\n      if (d.x >= xRange[0] && d.x <= xRange[1] && d.y >= yRange[0] && d.y <= yRange[1]) {\n        selectedBinIndexes.push(d.ebmID);\n        state.selectedInfo.nodeData.push({ x: d.x, y: d.y, id: d.id, ebmID: d.ebmID });\n        return true;\n      } else if (d.rightPointID !== null) {\n        let rd = state.pointData[d.rightPointID];\n        if (d.y >= yRange[0] && d.y <= yRange[1] && rd.x >= xRange[0] &&\n          rd.x <= xRange[1] && rd.y >= yRange[0] && rd.y <= yRange[1]) {\n          selectedBinIndexes.push(d.ebmID);\n          state.selectedInfo.nodeData.push({ x: d.x, y: d.y, id: d.id, ebmID: d.ebmID });\n          return true;\n        }\n      } else {\n        return false;\n      }\n    });\n\n  svgSelect.select('g.line-chart-line-group.real')\n    .selectAll('path')\n    .classed('selected', true);\n\n  svgSelect.select('g.line-chart-node-group')\n    .selectAll('circle.node')\n    .classed('selected', true);\n\n  // Update the footer message\n  footerStore.update(value => {\n    let sampleNum = ebm.getSelectedSampleNum(selectedBinIndexes);\n    value.sample = `<b>${sampleNum}/${value.totalSampleNum}</b> validation samples selected`;\n    return value;\n  });\n\n  // Compute the bounding box\n  state.selectedInfo.computeBBox(state.pointData);\n\n  let curPadding = rScale(state.curTransform.k) + state.bboxPadding * state.curTransform.k;\n\n  let bbox = svgSelect.select('g.line-chart-content-group')\n    .append('g')\n    .attr('class', 'select-bbox-group')\n    .selectAll('rect.select-bbox')\n    .data(state.selectedInfo.boundingBox)\n    .join('rect')\n    .attr('class', 'select-bbox original-bbox')\n    .attr('x', d => state.curXScale(d.x1) - curPadding)\n    .attr('y', d => state.curYScale(d.y1) - curPadding)\n    .attr('width', d => state.curXScale(d.x2) - state.curXScale(d.x1) + curPadding)\n    .attr('height', d => state.curYScale(d.y2) - state.curYScale(d.y1) + 2 * curPadding)\n    .style('stroke-width', bboxStrokeWidth)\n    .style('stroke', 'hsl(230, 100%, 10%)')\n    .style('stroke-dasharray', '5 3');\n\n  bbox.clone(true)\n    .classed('original-bbox', false)\n    .style('stroke', config.colors.background)\n    .style('stroke-dasharray', null)\n    .style('stroke-width', bboxStrokeWidth * 3)\n    .lower();\n\n  state.selectedInfo.hasSelected = svgSelect.selectAll('g.line-chart-node-group circle.node.selected').size() > 0;\n\n  if (state.selectedInfo.hasSelected) {\n    // Show the context menu near the selected region\n    d3.select(multiMenu)\n      .call(moveMenubar, svg, component)\n      .classed('hidden', false);\n\n    // Trigger a counting of the feature distribution of the selected samples\n    updateFeatureSidebar(selectedBinIndexes);\n  }\n\n  // Nullify the metrics if in selected tab and no selection\n  nullifyMetrics();\n\n  // Recompute the selected effects if in selected tab and we do have selection\n  computeSelectedEffects();\n\n  // Remove the brush box\n  svgSelect.select('g.line-chart-content-group g.brush')\n    .call(brush.move, null)\n    .select('rect.overlay')\n    .attr('cursor', null);\n};\n\nexport const brushEndZoom = (event, xScale, yScale, initXDomain, initYDomain, svg, brush) => {\n  // Get the selection boundary\n  let selection = event.selection;\n\n  // If there is no selection, return to the initial stage\n  // Double click returns to the initial stage\n  if (selection === null) {\n    if (idleTimeout === null) {\n      return idleTimeout = setTimeout(idled, idleDelay);\n    }\n\n    xScale.domain(initXDomain);\n    yScale.domain(initYDomain);\n  } else {\n    // Rescale the x and y axises\n    xScale.domain([xScale.invert(selection[0][0]), xScale.invert(selection[1][0])]);\n    yScale.domain([yScale.invert(selection[1][1]), yScale.invert(selection[0][1])]);\n\n    // Remove the brush box\n    d3.select(svg)\n      .select('g.line-chart-content-group g.brush')\n      .call(brush.move, null);\n  }\n\n  // Zoom in to the new selection\n  brushZoom(xScale, yScale);\n};\n\nconst brushZoom = (xScale, yScale, svg) => {\n\n  // Create a common transition\n  let svgSelect = d3.select(svg);\n  let trans = svgSelect.transition('zoom')\n    .duration(zoomTransitionTime);\n\n  // Update the axises\n  svgSelect.select('g.x-axis')\n    .transition(trans)\n    .call(d3.axisBottom(xScale));\n\n  svgSelect.select('g.y-axis')\n    .transition(trans)\n    .call(d3.axisLeft(yScale));\n\n  // Redraw the lines using the new scale\n  svgSelect.select('g.line-chart-line-group')\n    .selectAll('path.additive-line-segment')\n    .transition(trans)\n    .attr('d', d => {\n      return `M ${xScale(d.x1)}, ${yScale(d.y1)} L ${xScale(d.x2)} ${yScale(d.y2)}`;\n    });\n\n};","/*\n *  md5.jvs 1.0b 27/06/96\n *\n * Javascript implementation of the RSA Data Security, Inc. MD5\n * Message-Digest Algorithm.\n *\n * Copyright (c) 1996 Henri Torgemane. All Rights Reserved.\n *\n * Permission to use, copy, modify, and distribute this software\n * and its documentation for any purposes and without\n * fee is hereby granted provided that this copyright notice\n * appears in all copies. \n *\n * Of course, this soft is provided \"as is\" without express or implied\n * warranty of any kind.\n */\n\n\n\nfunction array(n) {\n  for (let i = 0; i < n; i++) this[i] = 0;\n  this.length = n;\n}\n\n/* Some basic logical functions had to be rewritten because of a bug in\n * Javascript.. Just try to compute 0xffffffff >> 4 with it..\n * Of course, these functions are slower than the original would be, but\n * at least, they work!\n */\n\nfunction integer(n) { return n % (0xffffffff + 1); }\n\nfunction shr(a, b) {\n  a = integer(a);\n  b = integer(b);\n  if (a - 0x80000000 >= 0) {\n    a = a % 0x80000000;\n    a >>= b;\n    a += 0x40000000 >> (b - 1);\n  } else\n    a >>= b;\n  return a;\n}\n\nfunction shl1(a) {\n  a = a % 0x80000000;\n  if (a & 0x40000000 == 0x40000000) {\n    a -= 0x40000000;\n    a *= 2;\n    a += 0x80000000;\n  } else\n    a *= 2;\n  return a;\n}\n\nfunction shl(a, b) {\n  a = integer(a);\n  b = integer(b);\n  for (var i = 0; i < b; i++) a = shl1(a);\n  return a;\n}\n\nfunction and(a, b) {\n  a = integer(a);\n  b = integer(b);\n  var t1 = (a - 0x80000000);\n  var t2 = (b - 0x80000000);\n  if (t1 >= 0)\n    if (t2 >= 0)\n      return ((t1 & t2) + 0x80000000);\n    else\n      return (t1 & b);\n  else\n    if (t2 >= 0)\n      return (a & t2);\n    else\n      return (a & b);\n}\n\nfunction or(a, b) {\n  a = integer(a);\n  b = integer(b);\n  var t1 = (a - 0x80000000);\n  var t2 = (b - 0x80000000);\n  if (t1 >= 0)\n    if (t2 >= 0)\n      return ((t1 | t2) + 0x80000000);\n    else\n      return ((t1 | b) + 0x80000000);\n  else\n    if (t2 >= 0)\n      return ((a | t2) + 0x80000000);\n    else\n      return (a | b);\n}\n\nfunction xor(a, b) {\n  a = integer(a);\n  b = integer(b);\n  var t1 = (a - 0x80000000);\n  var t2 = (b - 0x80000000);\n  if (t1 >= 0)\n    if (t2 >= 0)\n      return (t1 ^ t2);\n    else\n      return ((t1 ^ b) + 0x80000000);\n  else\n    if (t2 >= 0)\n      return ((a ^ t2) + 0x80000000);\n    else\n      return (a ^ b);\n}\n\nfunction not(a) {\n  a = integer(a);\n  return (0xffffffff - a);\n}\n\n/* Here begin the real algorithm */\n\nvar state = new array(4);\nvar count = new array(2);\ncount[0] = 0;\ncount[1] = 0;\nvar buffer = new array(64);\nvar transformBuffer = new array(16);\nvar digestBits = new array(16);\n\nvar S11 = 7;\nvar S12 = 12;\nvar S13 = 17;\nvar S14 = 22;\nvar S21 = 5;\nvar S22 = 9;\nvar S23 = 14;\nvar S24 = 20;\nvar S31 = 4;\nvar S32 = 11;\nvar S33 = 16;\nvar S34 = 23;\nvar S41 = 6;\nvar S42 = 10;\nvar S43 = 15;\nvar S44 = 21;\n\nfunction F(x, y, z) {\n  return or(and(x, y), and(not(x), z));\n}\n\nfunction G(x, y, z) {\n  return or(and(x, z), and(y, not(z)));\n}\n\nfunction H(x, y, z) {\n  return xor(xor(x, y), z);\n}\n\nfunction I(x, y, z) {\n  return xor(y, or(x, not(z)));\n}\n\nfunction rotateLeft(a, n) {\n  return or(shl(a, n), (shr(a, (32 - n))));\n}\n\nfunction FF(a, b, c, d, x, s, ac) {\n  a = a + F(b, c, d) + x + ac;\n  a = rotateLeft(a, s);\n  a = a + b;\n  return a;\n}\n\nfunction GG(a, b, c, d, x, s, ac) {\n  a = a + G(b, c, d) + x + ac;\n  a = rotateLeft(a, s);\n  a = a + b;\n  return a;\n}\n\nfunction HH(a, b, c, d, x, s, ac) {\n  a = a + H(b, c, d) + x + ac;\n  a = rotateLeft(a, s);\n  a = a + b;\n  return a;\n}\n\nfunction II(a, b, c, d, x, s, ac) {\n  a = a + I(b, c, d) + x + ac;\n  a = rotateLeft(a, s);\n  a = a + b;\n  return a;\n}\n\nfunction transform(buf, offset) {\n  var a = 0, b = 0, c = 0, d = 0;\n  var x = transformBuffer;\n\n  a = state[0];\n  b = state[1];\n  c = state[2];\n  d = state[3];\n\n  for (let i = 0; i < 16; i++) {\n    x[i] = and(buf[i * 4 + offset], 0xff);\n    for (let j = 1; j < 4; j++) {\n      x[i] += shl(and(buf[i * 4 + j + offset], 0xff), j * 8);\n    }\n  }\n\n  /* Round 1 */\n  a = FF(a, b, c, d, x[0], S11, 0xd76aa478); /* 1 */\n  d = FF(d, a, b, c, x[1], S12, 0xe8c7b756); /* 2 */\n  c = FF(c, d, a, b, x[2], S13, 0x242070db); /* 3 */\n  b = FF(b, c, d, a, x[3], S14, 0xc1bdceee); /* 4 */\n  a = FF(a, b, c, d, x[4], S11, 0xf57c0faf); /* 5 */\n  d = FF(d, a, b, c, x[5], S12, 0x4787c62a); /* 6 */\n  c = FF(c, d, a, b, x[6], S13, 0xa8304613); /* 7 */\n  b = FF(b, c, d, a, x[7], S14, 0xfd469501); /* 8 */\n  a = FF(a, b, c, d, x[8], S11, 0x698098d8); /* 9 */\n  d = FF(d, a, b, c, x[9], S12, 0x8b44f7af); /* 10 */\n  c = FF(c, d, a, b, x[10], S13, 0xffff5bb1); /* 11 */\n  b = FF(b, c, d, a, x[11], S14, 0x895cd7be); /* 12 */\n  a = FF(a, b, c, d, x[12], S11, 0x6b901122); /* 13 */\n  d = FF(d, a, b, c, x[13], S12, 0xfd987193); /* 14 */\n  c = FF(c, d, a, b, x[14], S13, 0xa679438e); /* 15 */\n  b = FF(b, c, d, a, x[15], S14, 0x49b40821); /* 16 */\n\n  /* Round 2 */\n  a = GG(a, b, c, d, x[1], S21, 0xf61e2562); /* 17 */\n  d = GG(d, a, b, c, x[6], S22, 0xc040b340); /* 18 */\n  c = GG(c, d, a, b, x[11], S23, 0x265e5a51); /* 19 */\n  b = GG(b, c, d, a, x[0], S24, 0xe9b6c7aa); /* 20 */\n  a = GG(a, b, c, d, x[5], S21, 0xd62f105d); /* 21 */\n  d = GG(d, a, b, c, x[10], S22, 0x2441453); /* 22 */\n  c = GG(c, d, a, b, x[15], S23, 0xd8a1e681); /* 23 */\n  b = GG(b, c, d, a, x[4], S24, 0xe7d3fbc8); /* 24 */\n  a = GG(a, b, c, d, x[9], S21, 0x21e1cde6); /* 25 */\n  d = GG(d, a, b, c, x[14], S22, 0xc33707d6); /* 26 */\n  c = GG(c, d, a, b, x[3], S23, 0xf4d50d87); /* 27 */\n  b = GG(b, c, d, a, x[8], S24, 0x455a14ed); /* 28 */\n  a = GG(a, b, c, d, x[13], S21, 0xa9e3e905); /* 29 */\n  d = GG(d, a, b, c, x[2], S22, 0xfcefa3f8); /* 30 */\n  c = GG(c, d, a, b, x[7], S23, 0x676f02d9); /* 31 */\n  b = GG(b, c, d, a, x[12], S24, 0x8d2a4c8a); /* 32 */\n\n  /* Round 3 */\n  a = HH(a, b, c, d, x[5], S31, 0xfffa3942); /* 33 */\n  d = HH(d, a, b, c, x[8], S32, 0x8771f681); /* 34 */\n  c = HH(c, d, a, b, x[11], S33, 0x6d9d6122); /* 35 */\n  b = HH(b, c, d, a, x[14], S34, 0xfde5380c); /* 36 */\n  a = HH(a, b, c, d, x[1], S31, 0xa4beea44); /* 37 */\n  d = HH(d, a, b, c, x[4], S32, 0x4bdecfa9); /* 38 */\n  c = HH(c, d, a, b, x[7], S33, 0xf6bb4b60); /* 39 */\n  b = HH(b, c, d, a, x[10], S34, 0xbebfbc70); /* 40 */\n  a = HH(a, b, c, d, x[13], S31, 0x289b7ec6); /* 41 */\n  d = HH(d, a, b, c, x[0], S32, 0xeaa127fa); /* 42 */\n  c = HH(c, d, a, b, x[3], S33, 0xd4ef3085); /* 43 */\n  b = HH(b, c, d, a, x[6], S34, 0x4881d05); /* 44 */\n  a = HH(a, b, c, d, x[9], S31, 0xd9d4d039); /* 45 */\n  d = HH(d, a, b, c, x[12], S32, 0xe6db99e5); /* 46 */\n  c = HH(c, d, a, b, x[15], S33, 0x1fa27cf8); /* 47 */\n  b = HH(b, c, d, a, x[2], S34, 0xc4ac5665); /* 48 */\n\n  /* Round 4 */\n  a = II(a, b, c, d, x[0], S41, 0xf4292244); /* 49 */\n  d = II(d, a, b, c, x[7], S42, 0x432aff97); /* 50 */\n  c = II(c, d, a, b, x[14], S43, 0xab9423a7); /* 51 */\n  b = II(b, c, d, a, x[5], S44, 0xfc93a039); /* 52 */\n  a = II(a, b, c, d, x[12], S41, 0x655b59c3); /* 53 */\n  d = II(d, a, b, c, x[3], S42, 0x8f0ccc92); /* 54 */\n  c = II(c, d, a, b, x[10], S43, 0xffeff47d); /* 55 */\n  b = II(b, c, d, a, x[1], S44, 0x85845dd1); /* 56 */\n  a = II(a, b, c, d, x[8], S41, 0x6fa87e4f); /* 57 */\n  d = II(d, a, b, c, x[15], S42, 0xfe2ce6e0); /* 58 */\n  c = II(c, d, a, b, x[6], S43, 0xa3014314); /* 59 */\n  b = II(b, c, d, a, x[13], S44, 0x4e0811a1); /* 60 */\n  a = II(a, b, c, d, x[4], S41, 0xf7537e82); /* 61 */\n  d = II(d, a, b, c, x[11], S42, 0xbd3af235); /* 62 */\n  c = II(c, d, a, b, x[2], S43, 0x2ad7d2bb); /* 63 */\n  b = II(b, c, d, a, x[9], S44, 0xeb86d391); /* 64 */\n\n  state[0] += a;\n  state[1] += b;\n  state[2] += c;\n  state[3] += d;\n\n}\n\nfunction init() {\n  count[0] = count[1] = 0;\n  state[0] = 0x67452301;\n  state[1] = 0xefcdab89;\n  state[2] = 0x98badcfe;\n  state[3] = 0x10325476;\n  for (let i = 0; i < digestBits.length; i++)\n    digestBits[i] = 0;\n}\n\nfunction update(b) {\n  var index, i;\n\n  index = and(shr(count[0], 3), 0x3f);\n  if (count[0] < 0xffffffff - 7)\n    count[0] += 8;\n  else {\n    count[1]++;\n    count[0] -= 0xffffffff + 1;\n    count[0] += 8;\n  }\n  buffer[index] = and(b, 0xff);\n  if (index >= 63) {\n    transform(buffer, 0);\n  }\n}\n\nfunction finish() {\n  var bits = new array(8);\n  var padding;\n  var i = 0, index = 0, padLen = 0;\n\n  for (i = 0; i < 4; i++) {\n    bits[i] = and(shr(count[0], (i * 8)), 0xff);\n  }\n  for (i = 0; i < 4; i++) {\n    bits[i + 4] = and(shr(count[1], (i * 8)), 0xff);\n  }\n  index = and(shr(count[0], 3), 0x3f);\n  padLen = (index < 56) ? (56 - index) : (120 - index);\n  padding = new array(64);\n  padding[0] = 0x80;\n  for (i = 0; i < padLen; i++)\n    update(padding[i]);\n  for (i = 0; i < 8; i++)\n    update(bits[i]);\n\n  for (i = 0; i < 4; i++) {\n    for (let j = 0; j < 4; j++) {\n      digestBits[i * 4 + j] = and(shr(state[i], (j * 8)), 0xff);\n    }\n  }\n}\n\n/* End of the MD5 algorithm */\n\nfunction hexa(n) {\n  var hexa_h = \"0123456789abcdef\";\n  var hexa_c = \"\";\n  var hexa_m = n;\n  for (let hexa_i = 0; hexa_i < 8; hexa_i++) {\n    hexa_c = hexa_h.charAt(Math.abs(hexa_m) % 16) + hexa_c;\n    hexa_m = Math.floor(hexa_m / 16);\n  }\n  return hexa_c;\n}\n\n\nvar ascii = \"01234567890123456789012345678901\" +\n  \" !\\\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ\" +\n  \"[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\";\n\nexport function MD5(entree) {\n  var l, s, k, ka, kb, kc, kd;\n\n  init();\n  for (k = 0; k < entree.length; k++) {\n    l = entree.charAt(k);\n    update(ascii.lastIndexOf(l));\n  }\n  finish();\n  ka = kb = kc = kd = 0;\n  for (let i = 0; i < 4; i++) ka += shl(digestBits[15 - i], (i * 8));\n  for (let i = 4; i < 8; i++) kb += shl(digestBits[15 - i], ((i - 4) * 8));\n  for (let i = 8; i < 12; i++) kc += shl(digestBits[15 - i], ((i - 8) * 8));\n  for (let i = 12; i < 16; i++) kd += shl(digestBits[15 - i], ((i - 12) * 8));\n  s = hexa(kd) + hexa(kc) + hexa(kb) + hexa(ka);\n  return s;\n}\n\n/* This implement the MD5 test suite */\nvar testOk = false;\nfunction teste() {\n  if (testOk) return;\n  document.test.o1.value = MD5(document.test.i1.value);\n  document.test.o2.value = MD5(document.test.i2.value);\n  document.test.o3.value = MD5(document.test.i3.value);\n  document.test.o4.value = MD5(document.test.i4.value);\n  document.test.o5.value = MD5(document.test.i5.value);\n  document.test.o6.value = MD5(document.test.i6.value);\n  document.test.o7.value = MD5(document.test.i7.value);\n  testOk = true;\n}\n\nfunction formSubmit() {\n  var pass;\n  passObj = document.getElementById('edit-pass');\n  chalObj = document.getElementById('edit-challenge');\n  pass = MD5(MD5(passObj.value) + chalObj.value);\n  passObj.value = pass;\n  chalObj.value = \"\";\n}\n","import { quitSelection } from './cont-brush';\nimport { drawLastEdit, redrawOriginal } from './cont-edit';\nimport { MD5 } from '../../utils/md5';\n\n/**\n * Undo the last commit\n * @param {object} state Global state\n * @param {element} svg SVG element\n * @param {element} multiMenu multiMenu element\n * @param {func} resetContextMenu function to reset context menu bar\n * @param {func} resetFeatureSidebar function to reset the feature side bar\n * @param {object} historyStore History store\n * @param {list} redoStack List of commits to redo\n * @param {func} setEBM function to set EBM bin definitions\n * @param {object} sidebarStore sidebar store object\n */\nexport const undoHandler = async (state, svg, multiMenu, resetContextMenu, resetFeatureSidebar,\n  historyStore, redoStack, setEBM, sidebarStore) => {\n  \n  // If the current edit is original, we do not undo\n  let curHistoryStoreValue;\n  historyStore.update(value => {\n    curHistoryStoreValue = value;\n    return value;\n  });\n\n  if (curHistoryStoreValue[curHistoryStoreValue.length - 1].type === 'original' ||\n    state.featureName !== curHistoryStoreValue[curHistoryStoreValue.length - 1].featureName\n  ) {\n    return;\n  }\n\n  let curCommit;\n  let lastCommit;\n  let lastCommitIndex;\n\n  // Step 1: If the user has selected some nodes, discard the selections\n  quitSelection(svg, state, multiMenu, resetContextMenu, resetFeatureSidebar);\n\n  // Search for the lastEdit\n  for (let i = curHistoryStoreValue.length - 2; i >= 0; i--) {\n    if (curHistoryStoreValue[i].featureName === state.featureName) {\n      lastCommit = curHistoryStoreValue[i];\n      lastCommitIndex = i;\n      break;\n    }\n  }\n\n  // Step 1.5: Update the HEAD\n  // This step must be done before updating the historyStore!\n  sidebarStore.update(value => {\n    value.historyHead = lastCommitIndex;\n    if (value.historyHead !== curHistoryStoreValue.length - 2) {\n      value.previewHistory = true;\n    }\n    return value;\n  });\n\n  // Step 2: Remove the current commit from history\n  historyStore.update(value => {\n    curCommit = value.pop();\n    return value;\n  });\n\n  // Step 3: Save the current commit into the redo stack\n  redoStack.push(curCommit);\n\n  // Step 4: Replace the current state with lastCommit\n  state.additiveData = lastCommit.state.additiveData;\n  state.pointData = lastCommit.state.pointData;\n\n  state.additiveDataBuffer = null;\n  state.pointDataBuffer = null;\n\n  // Step 5: Update the last edit state, redraw the last edit graphs\n\n  // Note that the last last edit is possible not the one right next to lastCommit\n  // because users can edit multiple features\n  // Need to search it backward\n  let lastLastCommit = null;\n  for (let i = lastCommitIndex - 1; i >= 0; i--) {\n    if (curHistoryStoreValue[i].featureName === state.featureName) {\n      lastLastCommit = curHistoryStoreValue[i];\n      break;\n    }\n  }\n\n  if (lastLastCommit !== null) {\n    state.additiveDataLastEdit = lastLastCommit.state.additiveData;\n    drawLastEdit(state, svg);\n  } else {\n    // If there is no last edit, then it is the origin\n    state.additiveDataLastEdit = undefined;\n  }\n\n  // Step 6: Update the last last edit state\n  // Note lastLastEdit is *only* used to restore lastEdit after user enters editing mode then cancel\n  // So when we restore it, it is the same as lastEdit\n  if (lastLastCommit !== null) {\n    state.additiveDataLastLastEdit = lastLastCommit.state.additiveData;\n  } else {\n    // If there is no last last edit, then it is the origin or the first edit\n    state.additiveDataLastLastEdit = undefined;\n  }\n\n  // After drawing the lastEdit curve, change lastEdit to curEdit (so when user\n  // clicks any editing, the orange line moves to current location)\n  state.additiveDataLastEdit = JSON.parse(JSON.stringify(state.additiveData));\n\n  // Step 7: Overwrite the EBM definition and score using the historical state\n  // One can update EBM partially to optimize the performance (e.g., this commit\n  // only moves the bins a bit), but it requires to save the selected bins and\n  // scores in the history stack\n  await setEBM('current', state.pointData);\n\n  /**\n   * Step 8: Update the metrics, last metrics\n   * It depends on the current effect mode:\n   * 1. Global: load the metrics from history stack => update the tab\n   * 2. Selected: load the metrics from history stack (no draw);\n   *  then the selection is canceled => show NA everywhere\n   * 3. Slice: load the metrics from history stack (no draw);\n   *  then reset EBM to compute the metrics\n   */\n  let sidebarInfo;\n\n  // No matter what scope it is, we need to reload the global metrics from the\n  // history stack\n  sidebarStore.update(value => {\n    value.curGroup = 'no action';\n    value.barData = JSON.parse(JSON.stringify(lastCommit.metrics.barData));\n    value.confusionMatrixData = JSON.parse(JSON.stringify(lastCommit.metrics.confusionMatrixData));\n    sidebarInfo = value;\n    return value;\n  });\n\n  switch (sidebarInfo.effectScope) {\n  case 'global':\n    sidebarStore.update(value => {\n      value.curGroup = 'overwrite';\n      return value;\n    });\n    break;\n  case 'selected':\n    sidebarStore.update(value => {\n      value.curGroup = 'nullify';\n      return value;\n    });\n    break;\n  case 'slice': {\n    let historyInfo;\n    historyStore.update(value => {\n      historyInfo = value;\n      return value;\n    });\n    await setEBM('original-only', historyInfo[0].state.pointData);\n\n    // Step 2.2: Last edit\n    if (historyInfo.length > 1) {\n      await setEBM('last-only', historyInfo[historyInfo.length - 2].state.pointData);\n    }\n\n    // Step 2.3: Current edit\n    let curPointData = state.pointDataBuffer === null ?\n      historyInfo[historyInfo.length - 1].state.pointData :\n      state.pointDataBuffer;\n\n    await setEBM('current-only', curPointData);\n\n    // Step 2.2.5: If we didn't restore the last edit, use the current edit as last\n    if (historyInfo.length === 1) {\n      sidebarInfo.curGroup = 'last';\n      sidebarStore.set(sidebarInfo);\n    }\n    break;\n  }\n  default:\n    break;\n  }\n\n  // Redraw the graph\n  redrawOriginal(state, svg);\n};\n\n/**\n * Redo the last undo.\n * @param {object} state Global state\n * @param {element} svg SVG element\n * @param {element} multiMenu multiMenu element\n * @param {func} resetContextMenu function to reset context menu bar\n * @param {func} resetFeatureSidebar function to reset the feature side bar\n * @param {object} historyStore History store\n * @param {list} redoStack List of commits to redo\n * @param {func} setEBM function to set EBM bin definitions\n * @param {object} sidebarStore sidebar store object\n */\nexport const redoHandler = async (state, svg, multiMenu, resetContextMenu, resetFeatureSidebar,\n  historyStore, redoStack, setEBM, sidebarStore) => {\n  // Step 1: If the user has selected some nodes, discard the selections\n  quitSelection(svg, state, multiMenu, resetContextMenu, resetFeatureSidebar);\n\n  let curHistoryStoreValue;\n\n  historyStore.update(value => {\n    curHistoryStoreValue = value;\n    return value;\n  });\n\n  // Step 1.5: Update the HEAD\n  // This step must be done before updating the historyStore!\n  sidebarStore.update(value => {\n    value.historyHead = curHistoryStoreValue.length;\n    return value;\n  });\n\n  // Step 2: Pop the redo stack and add it to the history stack\n  let newCommit = redoStack.pop();\n\n  historyStore.update(value => {\n    value.push(newCommit);\n    curHistoryStoreValue = value;\n    return value;\n  });\n\n  // Replace the current state with the new commit\n  state.additiveData = newCommit.state.additiveData;\n  state.pointData = newCommit.state.pointData;\n\n  state.additiveDataBuffer = null;\n  state.pointDataBuffer = null;\n\n  // Update the last edit state, redraw the last edit graphs\n  if (curHistoryStoreValue.length > 1) {\n    state.additiveDataLastEdit = curHistoryStoreValue[curHistoryStoreValue.length - 2].state.additiveData;\n    drawLastEdit(state, svg);\n  } else {\n    // If there is no last edit, then it is the origin\n    state.additiveDataLastEdit = undefined;\n  }\n\n  // Update the last last edit state\n  // Note lastLastEdit is *only* used to restore lastEdit after user enters editing mode then cancel\n  // So when we restore it, it is the same as lastEdit\n  if (curHistoryStoreValue.length > 1) {\n    state.additiveDataLastLastEdit = curHistoryStoreValue[curHistoryStoreValue.length - 2].state.additiveData;\n  } else {\n    // If there is no last last edit, then it is the origin or the first edit\n    state.additiveDataLastLastEdit = undefined;\n  }\n\n  // After drawing the lastEdit curve, change lastEdit to curEdit (so when user\n  // clicks any editing, the orange line moves to current location)\n  state.additiveDataLastEdit = JSON.parse(JSON.stringify(state.additiveData));\n\n  // Overwrite the EBM definition and score using the undo state\n  // One can update EBM partially to optimize the performance (e.g., this commit\n  // only moves the bins a bit), but it requires to save the selected bins and\n  // scores in the history stack\n  await setEBM('current', state.pointData);\n\n  /**\n   * Update the metrics, last metrics\n   * It depends on the current effect mode:\n   * 1. Global: load the metrics from redo stack => update the tab\n   * 2. Selected: load the metrics from redo stack (no draw);\n   *  then the selection is canceled => show NA everywhere\n   * 3. Slice: load the metrics from history stack (no draw);\n   *  then reset EBM to compute the metrics\n   */\n  let sidebarInfo;\n\n  // No matter what scope it is, we need to reload the global metrics from the\n  // history stack\n  sidebarStore.update(value => {\n    value.curGroup = 'no action';\n    value.barData = JSON.parse(JSON.stringify(newCommit.metrics.barData));\n    value.confusionMatrixData = JSON.parse(JSON.stringify(newCommit.metrics.confusionMatrixData));\n    sidebarInfo = value;\n    return value;\n  });\n\n  switch (sidebarInfo.effectScope) {\n  case 'global':\n    sidebarStore.update(value => {\n      value.curGroup = 'overwrite';\n      return value;\n    });\n    break;\n  case 'selected':\n    sidebarStore.update(value => {\n      value.curGroup = 'nullify';\n      return value;\n    });\n    break;\n  case 'slice': {\n    let historyInfo;\n    historyStore.update(value => {\n      historyInfo = value;\n      return value;\n    });\n\n    await setEBM('original-only', historyInfo[0].state.pointData);\n\n    // Step 2.2: Last edit\n    if (historyInfo.length > 1) {\n      await setEBM('last-only', historyInfo[historyInfo.length - 2].state.pointData);\n    }\n\n    // Step 2.3: Current edit\n    let curPointData = state.pointDataBuffer === null ?\n      historyInfo[historyInfo.length - 1].state.pointData :\n      state.pointDataBuffer;\n\n    await setEBM('current-only', curPointData);\n\n    // Step 2.2.5: If we didn't restore the last edit, use the current edit as last\n    if (historyInfo.length === 1) {\n      sidebarInfo.curGroup = 'last';\n      sidebarStore.set(sidebarInfo);\n    }\n    break;\n  }\n  default:\n    break;\n  }\n\n  // Redraw the graph\n  redrawOriginal(state, svg);\n};\n\n/**\n * Add a new commit to the history stack\n * @param {object} state Global state\n * @param {str} type Commit type\n * @param {str} description Commit description\n * @param {object} historyStore Store object of the history stack\n * @param {object} sidebarStore sidebar store object\n */\nexport const pushCurStateToHistoryStack = (state, type, description, historyStore, sidebarStore) => {\n  // Push the new commit to the history stack\n  let historyLength = 0;\n  let sidebarInfo;\n\n  sidebarStore.update(value => {\n    sidebarInfo = value;\n    return value;\n  });\n\n  historyStore.update(value => {\n    const time = Date.now();\n\n    value.push({\n      state: {\n        pointData: state.pointData,\n        additiveData: state.additiveData\n      },\n      metrics: {\n        barData: JSON.parse(JSON.stringify(sidebarInfo.barData)),\n        confusionMatrixData: JSON.parse(JSON.stringify(sidebarInfo.confusionMatrixData))\n      },\n      featureName: state.featureName,\n      type: type,\n      description: description,\n      time: time,\n      hash: MD5(`${type}${description}${time}`),\n      reviewed: type === 'original'\n    });\n\n    historyLength = value.length;\n    return value;\n  });\n\n  // Change the HEAD pointer to new commit\n  sidebarStore.update(value => {\n    value.historyHead = historyLength - 1;\n    value.previewHistory = false;\n    return value;\n  });\n};\n\n/**\n * Try to restore the graph to last edit (if possible)\n * @param {object} state Global state\n * @param {element} svg SVG element\n * @param {object} historyStore History store\n * @param {func} setEBM function to set EBM bin definitions\n * @returns last edit's hash if found a last edit, false otherwise\n */\nexport const tryRestoreLastEdit = async (state, svg, historyStore, setEBM) => {\n\n  let lastCommit = null;\n  let lastCommitID = -1;\n  let lastLastCommit = null;\n  let curHistoryStoreValue;\n\n  historyStore.update(value => {\n    curHistoryStoreValue = value;\n    return value;\n  });\n\n  // Try to find the last edit\n  for (let i = curHistoryStoreValue.length - 1; i >= 0; i--) {\n    if (curHistoryStoreValue[i].featureName === state.featureName) {\n      lastCommit = curHistoryStoreValue[i];\n      lastCommitID = i;\n      break;\n    }\n  }\n\n  if (lastCommit === null) {\n    return false;\n  }\n\n  // If we have found an edit, try to find the edit before it (to restore last\n  // edit info)\n  for (let i = lastCommitID - 1; i >= 0; i--) {\n    if (curHistoryStoreValue[i].featureName === state.featureName) {\n      lastLastCommit = curHistoryStoreValue[i];\n      break;\n    }\n  }\n\n  // Replace the current state with last edit\n  state.additiveData = lastCommit.state.additiveData;\n  state.pointData = lastCommit.state.pointData;\n\n  state.additiveDataBuffer = null;\n  state.pointDataBuffer = null;\n\n  // Update the last edit state, redraw the last edit graphs\n  if (lastLastCommit !== null) {\n    state.additiveDataLastEdit = lastLastCommit.state.additiveData;\n    drawLastEdit(state, svg);\n  } else {\n    // If there is no last edit, then it is the origin\n    state.additiveDataLastEdit = undefined;\n  }\n\n  // Update the last last edit state\n  // Note lastLastEdit is *only* used to restore lastEdit after user enters editing mode then cancel\n  // So when we restore it, it is the same as lastEdit\n  if (lastLastCommit !== null) {\n    state.additiveDataLastLastEdit = lastLastCommit.state.additiveData;\n  } else {\n    // If there is no last last edit, then it is the origin or the first edit\n    state.additiveDataLastLastEdit = undefined;\n  }\n\n  // After drawing the lastEdit curve, change lastEdit to curEdit (so when user\n  // clicks any editing, the orange line moves to current location)\n  state.additiveDataLastEdit = JSON.parse(JSON.stringify(state.additiveData));\n\n  // Restore the bin definition\n  await setEBM('current', state.pointData);\n\n  // Redraw the graph\n  redrawOriginal(state, svg);\n\n  return lastCommit.hash;\n};\n\n/**\n * Checkout the current HEAD commit\n * @param {object} state Global state\n * @param {element} svg SVG element\n * @param {element} multiMenu multiMenu element\n * @param {func} resetContextMenu function to reset context menu bar\n * @param {func} resetFeatureSidebar function to reset the feature side bar\n * @param {object} historyStore History store\n * @param {func} setEBM function to set EBM bin definitions\n * @param {func} setEBMEditingFeature function to set the currently editing feature in ebm\n * @param {object} sidebarStore sidebar store object\n */\nexport const checkoutCommitHead = async (state, svg, multiMenu, resetContextMenu, resetFeatureSidebar,\n  historyStore, setEBM, setEBMEditingFeature, sidebarStore) => {\n\n  let curHistoryStoreValue;\n  historyStore.update(value => {\n    curHistoryStoreValue = value;\n    return value;\n  });\n\n  let sidebarInfo;\n  sidebarStore.update(value => {\n    sidebarInfo = value;\n    return value;\n  });\n\n  let targetCommit = curHistoryStoreValue[sidebarInfo.historyHead];\n  let targetCommitIndex = sidebarInfo.historyHead;\n\n  // Step 1: If the user has selected some nodes, discard the selections\n  quitSelection(svg, state, multiMenu, resetContextMenu, resetFeatureSidebar);\n\n  // Step 2: Replace the current state with targetCommit\n  state.additiveData = targetCommit.state.additiveData;\n  state.pointData = targetCommit.state.pointData;\n\n  state.additiveDataBuffer = null;\n  state.pointDataBuffer = null;\n\n  // Step 3: Update the last edit state, redraw the last edit graphs\n\n  // Note that the last last edit is possible not the one right next to lastCommit\n  // because users can edit multiple features\n  // Need to search it backward\n  let lastCommit = null;\n  for (let i = targetCommitIndex - 1; i >= 0; i--) {\n    if (curHistoryStoreValue[i].featureName === state.featureName) {\n      lastCommit = curHistoryStoreValue[i];\n      break;\n    }\n  }\n\n  if (lastCommit !== null) {\n    state.additiveDataLastEdit = lastCommit.state.additiveData;\n    drawLastEdit(state, svg);\n  } else {\n    // If there is no last edit, then it is the origin\n    state.additiveDataLastEdit = undefined;\n  }\n\n  // Step 4: Update the last last edit state\n  // Note lastLastEdit is *only* used to restore lastEdit after user enters editing mode then cancel\n  // So when we restore it, it is the same as lastEdit\n  if (lastCommit !== null) {\n    state.additiveDataLastLastEdit = lastCommit.state.additiveData;\n  } else {\n    // If there is no last last edit, then it is the origin or the first edit\n    state.additiveDataLastLastEdit = undefined;\n  }\n\n  // Step 4.5: If the user tries to check out the original graph, the lastEdit would\n  // be the same as the original graph\n  if (targetCommit.type === 'original') {\n    state.additiveDataLastEdit = targetCommit.state.additiveData;\n    state.additiveDataLastLastEdit = targetCommit.state.additiveData;\n    drawLastEdit(state, svg);\n  }\n\n  // After drawing the lastEdit curve, change lastEdit to curEdit (so when user\n  // clicks any editing, the orange line moves to current location)\n  state.additiveDataLastEdit = JSON.parse(JSON.stringify(state.additiveData));\n\n  /**\n   * Step 5: Reset EBM bin definition\n   * This step is tricky when we have edited multiple features between the checkouts\n   * A0 -> A1 -> A2 -> B0 -> C0 -> C1 -> A3\n   * Backward (A3 -> A2), iterate backward, setEBM when we pass original graph\n   * Forward (A2 -> A3), iterate forward, if the next step changes featureName, setEBM\n   * at the cur step.\n   * \n   * Another approach is to not restore the historical metrics when jump in history\n   * stack => the current is always the latest' edit metric, last would be NA\n   */\n\n  await setEBM('current', state.pointData);\n\n  // Change the currently editing feature to the target\n  setEBMEditingFeature(targetCommit.featureName);\n\n  // Update the metrics, we has forced it to be global scope\n  sidebarStore.update(value => {\n    value.curGroup = 'nullify-last';\n    return value;\n  });\n\n  // Redraw the graph\n  redrawOriginal(state, svg);\n};","import { noop, safe_not_equal, subscribe, run_all, is_function } from '../internal/index.mjs';\nexport { get_store_value as get } from '../internal/index.mjs';\n\nconst subscriber_queue = [];\n/**\n * Creates a `Readable` store that allows reading by subscription.\n * @param value initial value\n * @param {StartStopNotifier}start start and stop notifications for subscriptions\n */\nfunction readable(value, start) {\n    return {\n        subscribe: writable(value, start).subscribe\n    };\n}\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n * @param {*=}value initial value\n * @param {StartStopNotifier=}start start and stop notifications for subscriptions\n */\nfunction writable(value, start = noop) {\n    let stop;\n    const subscribers = new Set();\n    function set(new_value) {\n        if (safe_not_equal(value, new_value)) {\n            value = new_value;\n            if (stop) { // store is ready\n                const run_queue = !subscriber_queue.length;\n                for (const subscriber of subscribers) {\n                    subscriber[1]();\n                    subscriber_queue.push(subscriber, value);\n                }\n                if (run_queue) {\n                    for (let i = 0; i < subscriber_queue.length; i += 2) {\n                        subscriber_queue[i][0](subscriber_queue[i + 1]);\n                    }\n                    subscriber_queue.length = 0;\n                }\n            }\n        }\n    }\n    function update(fn) {\n        set(fn(value));\n    }\n    function subscribe(run, invalidate = noop) {\n        const subscriber = [run, invalidate];\n        subscribers.add(subscriber);\n        if (subscribers.size === 1) {\n            stop = start(set) || noop;\n        }\n        run(value);\n        return () => {\n            subscribers.delete(subscriber);\n            if (subscribers.size === 0) {\n                stop();\n                stop = null;\n            }\n        };\n    }\n    return { set, update, subscribe };\n}\nfunction derived(stores, fn, initial_value) {\n    const single = !Array.isArray(stores);\n    const stores_array = single\n        ? [stores]\n        : stores;\n    const auto = fn.length < 2;\n    return readable(initial_value, (set) => {\n        let inited = false;\n        const values = [];\n        let pending = 0;\n        let cleanup = noop;\n        const sync = () => {\n            if (pending) {\n                return;\n            }\n            cleanup();\n            const result = fn(single ? values[0] : values, set);\n            if (auto) {\n                set(result);\n            }\n            else {\n                cleanup = is_function(result) ? result : noop;\n            }\n        };\n        const unsubscribers = stores_array.map((store, i) => subscribe(store, (value) => {\n            values[i] = value;\n            pending &= ~(1 << i);\n            if (inited) {\n                sync();\n            }\n        }, () => {\n            pending |= (1 << i);\n        }));\n        inited = true;\n        sync();\n        return function stop() {\n            run_all(unsubscribers);\n            cleanup();\n        };\n    });\n}\n\nexport { derived, readable, writable };\n","import { writable } from 'svelte/store';\n\nexport const tooltipConfigStore = writable({});\n","import d3 from '../utils/d3-import';\n\nimport mergeIconSVG from '../img/merge-icon.svg';\nimport mergeRightIconSVG from '../img/merge-right-icon.svg';\nimport mergeAverageIconSVG from '../img/merge-average-icon.svg';\nimport increasingIconSVG from '../img/increasing-icon.svg';\nimport decreasingIconSVG from '../img/decreasing-icon.svg';\nimport upDownIconSVG from '../img/updown-icon.svg';\nimport trashIconSVG from '../img/trash-icon.svg';\nimport trashCommitIconSVG from '../img/trash-commit-icon.svg';\nimport rightArrowIconSVG from '../img/right-arrow-icon.svg';\nimport locationIconSVG from '../img/location-icon.svg';\nimport upIconSVG from '../img/up-icon.svg';\nimport downIconSVG from '../img/down-icon.svg';\nimport interpolateIconSVG from '../img/interpolate-icon.svg';\nimport inplaceIconSVG from '../img/inplace-icon.svg';\nimport interpolationIconSVG from '../img/interpolation-icon.svg';\nimport regressionIconSVG from '../img/regression-icon.svg';\nimport thumbupIconSVG from '../img/thumbup-icon.svg';\nimport thumbupEmptyIconSVG from '../img/thumbup-empty-icon.svg';\nimport penIconSVG from '../img/pen-icon.svg';\nimport checkIconSVG from '../img/check-icon.svg';\nimport refreshIconSVG from '../img/refresh-icon.svg';\nimport minusIconSVG from '../img/minus-icon.svg';\nimport plusIconSVG from '../img/plus-icon.svg';\nimport originalSVG from '../img/original-icon.svg';\n\nconst preProcessSVG = (svgString) => {\n  return svgString.replaceAll('black', 'currentcolor')\n    .replaceAll('fill:none', 'fill:currentcolor')\n    .replaceAll('stroke:none', 'fill:currentcolor');\n};\n\n/**\n * Dynamically bind SVG files as inline SVG strings in this component\n */\nexport const bindInlineSVG = (component) => {\n  d3.select(component)\n    .selectAll('.svg-icon.icon-merge')\n    .html(preProcessSVG(mergeIconSVG));\n\n  d3.select(component)\n    .selectAll('.svg-icon.icon-merge-average')\n    .html(mergeAverageIconSVG.replaceAll('black', 'currentcolor'));\n\n  d3.select(component)\n    .selectAll('.svg-icon.icon-merge-right')\n    .html(mergeRightIconSVG.replaceAll('black', 'currentcolor'));\n\n  d3.select(component)\n    .selectAll('.svg-icon.icon-increasing')\n    .html(increasingIconSVG.replaceAll('black', 'currentcolor'));\n\n  d3.select(component)\n    .selectAll('.svg-icon.icon-decreasing')\n    .html(decreasingIconSVG.replaceAll('black', 'currentcolor'));\n\n  d3.select(component)\n    .selectAll('.svg-icon.icon-updown')\n    .html(preProcessSVG(upDownIconSVG));\n\n  d3.select(component)\n    .selectAll('.svg-icon.icon-input-up')\n    .html(preProcessSVG(upIconSVG));\n\n  d3.select(component)\n    .selectAll('.svg-icon.icon-input-down')\n    .html(preProcessSVG(downIconSVG));\n\n  d3.select(component)\n    .selectAll('.svg-icon.icon-delete')\n    .html(trashIconSVG.replaceAll('black', 'currentcolor'));\n\n  d3.select(component)\n    .selectAll('.svg-icon.icon-commit-delete')\n    .html(preProcessSVG(trashCommitIconSVG));\n\n  d3.select(component)\n    .selectAll('.svg-icon.icon-right-arrow')\n    .html(preProcessSVG(rightArrowIconSVG));\n\n  d3.select(component)\n    .selectAll('.svg-icon.icon-location')\n    .html(preProcessSVG(locationIconSVG));\n\n  d3.select(component)\n    .selectAll('.svg-icon.icon-interpolate')\n    .html(interpolateIconSVG.replaceAll('black', 'currentcolor'));\n\n  d3.select(component)\n    .selectAll('.svg-icon.icon-inplace')\n    .html(inplaceIconSVG.replaceAll('black', 'currentcolor'));\n\n  d3.select(component)\n    .selectAll('.svg-icon.icon-interpolation')\n    .html(interpolationIconSVG.replaceAll('black', 'currentcolor'));\n\n  d3.select(component)\n    .selectAll('.svg-icon.icon-regression')\n    .html(regressionIconSVG.replaceAll('black', 'currentcolor'));\n\n  d3.select(component)\n    .selectAll('.svg-icon.icon-thumbup')\n    .html(preProcessSVG(thumbupIconSVG));\n\n  d3.select(component)\n    .selectAll('.svg-icon.icon-box')\n    .html(preProcessSVG(thumbupEmptyIconSVG));\n\n  d3.select(component)\n    .selectAll('.svg-icon.icon-pen')\n    .html(preProcessSVG(penIconSVG));\n\n  d3.select(component)\n    .selectAll('.svg-icon.icon-check')\n    .html(checkIconSVG.replaceAll('black', 'currentcolor'));\n\n  d3.select(component)\n    .selectAll('.svg-icon.icon-refresh')\n    .html(refreshIconSVG.replaceAll('black', 'currentcolor'));\n\n  d3.select(component)\n    .selectAll('.svg-icon.icon-minus')\n    .html(minusIconSVG.replaceAll('black', 'currentcolor'));\n\n  d3.select(component)\n    .selectAll('.svg-icon.icon-plus')\n    .html(plusIconSVG.replaceAll('black', 'currentcolor'));\n\n  d3.select(component)\n    .selectAll('.svg-icon.icon-original')\n    .html(originalSVG.replaceAll('black', 'currentcolor'));\n\n};","<script>\n  import d3 from '../utils/d3-import';\n  import { onMount, createEventDispatcher } from 'svelte';\n  import { round } from '../utils/utils';\n\n  // Stores\n  import { tooltipConfigStore } from '../store';\n\n  // SVGs\n  import { bindInlineSVG } from '../utils/svg-icon-binding';\n\n  export let controlInfo = undefined;\n  /**\n   * Different versions of the context menu bar\n   * 'cont': show move, increasing, decreasing, interpolation, merge, delete\n   * 'cat': show move, merge, delete\n   */\n  export let type = 'cont';\n\n  $: controlInfo, (() => {\n    if (controlInfo.toSwitchMoveMode) {\n      switchMoveMode();\n      controlInfo.toSwitchMoveMode = false;\n    }\n  })();\n\n  // Component variables\n  let component = null;\n  let tooltipConfig = {};\n  let mouseoverTimeout = null;\n\n  // Initialized when mounted\n  let width = null;\n  let height = null;\n\n  tooltipConfigStore.subscribe(value => {tooltipConfig = value;});\n\n  const dispatch = createEventDispatcher();\n\n  const prepareSubMenu = (newMode) => {\n    if (controlInfo.subItemMode !== null && controlInfo.subItemMode !== newMode) {\n    // Hide the confirmation panel\n      hideConfirmation(controlInfo.subItemMode);\n\n      // Exit the sub-item mode\n      controlInfo.subItemMode = null;\n    }\n\n    controlInfo.subItemMode = newMode;\n\n    hideToolTipDuringSubMenu();\n  };\n\n  const inputChanged = (e) => {\n    prepareSubMenu('change');\n\n    e.preventDefault();\n    let value = parseFloat(e.target.value);\n\n    if (isNaN(value)) value = 0;\n    controlInfo.setValue = value;\n\n    dispatch('inputChanged');\n  };\n\n  const inputAdd = () => {\n    prepareSubMenu('change');\n\n    if (controlInfo.setValue === null) {\n      controlInfo.setValue = 0;\n    } else {\n      controlInfo.setValue += controlInfo.changeUnit;\n      controlInfo.setValue = round(controlInfo.setValue, 3);\n    }\n\n    dispatch('inputChanged');\n  };\n\n  const inputMinus = () => {\n    prepareSubMenu('change');\n\n    if (controlInfo.setValue === null) {\n      controlInfo.setValue = 0;\n    } else {\n      controlInfo.setValue -= controlInfo.changeUnit;\n      controlInfo.setValue = round(controlInfo.setValue, 3);\n    }\n\n    dispatch('inputChanged');\n  };\n\n  const switchMoveMode = () => {\n    if (controlInfo.moveMode) {\n      // Shrink the menu bar to make space for action\n      d3.select(component)\n        .transition()\n        .duration(300)\n        .ease(d3.easeCubicInOut)\n        .style('width', '120px')\n        .on('end', () => {\n          d3.select(component)\n            .selectAll('div.collapse-item')\n            .style('display', 'flex');\n        });\n\n    } else {\n      // restore the menu bar width\n      d3.select(component)\n        .selectAll('div.collapse-item')\n        .style('display', 'none');\n\n      d3.select(component)\n        .transition()\n        .duration(300)\n        .ease(d3.easeCubicInOut)\n        .style('width', `${width}px`);\n    }\n  };\n\n  const moveButtonClicked = () => {\n    prepareSubMenu(null);\n\n    controlInfo.moveMode = !controlInfo.moveMode;\n\n    switchMoveMode();\n\n    dispatch('moveButtonClicked');\n  };\n\n  const moveCheckClicked = () => {\n\n    controlInfo.moveMode = !controlInfo.moveMode;\n    switchMoveMode();\n    hideToolTipDuringSubMenu();\n\n    dispatch('moveCheckClicked');\n  };\n\n  const moveCancelClicked = () => {\n    controlInfo.moveMode = !controlInfo.moveMode;\n    switchMoveMode();\n    hideToolTipDuringSubMenu();\n\n    dispatch('moveCancelClicked');\n  };\n\n  const increasingClicked = () => {\n    prepareSubMenu('increasing');\n\n    dispatch('increasingClicked');\n  };\n\n  const decreasingClicked = () => {\n    // Need to handle the case where people change mode without checking/crossing\n    // We don't need to recover the original graph then enter new mode preview\n    // We can directly enter the new mode with animation\n    prepareSubMenu('decreasing');\n\n    dispatch('decreasingClicked');\n  };\n\n  const interpolationClicked = () => {\n    prepareSubMenu('interpolation');\n\n    dispatch('interpolationClicked');\n  };\n\n  const interpolateMinusClicked = (e) => {\n    e.stopPropagation();\n    if (controlInfo.step - 1 !== 0) {\n      controlInfo.step --;\n      controlInfo.interpolationMode = 'equal';\n      dispatch('interpolateUpdated');\n    }\n  };\n\n  const interpolatePlusClicked = (e) => {\n    e.stopPropagation();\n    if (controlInfo.step + 1 !== 21) {\n      controlInfo.step ++;\n      controlInfo.interpolationMode = 'equal';\n      dispatch('interpolateUpdated');\n    }\n  };\n\n  const interpolateInplaceClicked = (e) => {\n    e.stopPropagation();\n    controlInfo.interpolationMode = 'inplace';\n    dispatch('interpolateUpdated');\n  };\n\n  const interpolateEqualClicked = (e) => {\n    e.stopPropagation();\n    controlInfo.interpolationMode = 'equal';\n    dispatch('interpolateUpdated');\n  };\n\n  const interpolateRegressionClicked = (e) => {\n    e.stopPropagation();\n    controlInfo.interpolationMode = 'regression';\n    dispatch('interpolateUpdated');\n  };\n\n  const interpolateTextClicked = (e) => {\n    e.stopPropagation();\n    controlInfo.interpolationMode = 'equal';\n    dispatch('interpolateUpdated');\n  };\n\n  const mergeClicked = () => {\n    prepareSubMenu('merge');\n    controlInfo.mergeMode = 'left';\n    dispatch('mergeClicked');\n  };\n\n  const mergeToLeftClicked = (e) => {\n    e.stopPropagation();\n    controlInfo.mergeMode = 'left';\n    dispatch('mergeUpdated');\n  };\n\n  const mergeToAverageClicked = (e) => {\n    e.stopPropagation();\n    controlInfo.mergeMode = 'average';\n    dispatch('mergeUpdated');\n  };\n\n  const mergeToRightClicked = (e) => {\n    e.stopPropagation();\n    controlInfo.mergeMode = 'right';\n    dispatch('mergeUpdated');\n  };\n\n  const deleteClicked = () => {\n    prepareSubMenu('delete');\n\n    dispatch('deleteClicked');\n  };\n\n  export const hideToolTipDuringSubMenu = () => {\n    // hide the tooltip\n    clearTimeout(mouseoverTimeout);\n    mouseoverTimeout = null;\n    tooltipConfig.show = false;\n    tooltipConfig.hideAnimated = false;\n    tooltipConfigStore.set(tooltipConfig);\n  };\n\n  const subItemCheckClicked = (e) => {\n    e.stopPropagation();\n    hideToolTipDuringSubMenu();\n    dispatch('subItemCheckClicked');\n  };\n\n  const subItemCancelClicked = (e) => {\n    e.stopPropagation();\n    hideToolTipDuringSubMenu();\n    dispatch('subItemCancelClicked');\n  };\n\n  export const showConfirmation = (option, delay=500) => {\n    d3.timeout(() => {\n      let componentSelect = d3.select(component);\n\n      componentSelect.select('.items')\n        .style('overflow', 'visible');\n      \n      componentSelect.select(`.sub-item-${option}`)\n        .classed('hidden', false);\n    }, delay);\n  };\n\n  export const hideConfirmation = (option, delay=0) => {\n    const _hideConfirmation = (option) => {\n      let componentSelect = d3.select(component);\n\n      componentSelect.select('.items')\n        .style('overflow', 'hidden');\n      \n      componentSelect.select(`.sub-item-${option}`)\n        .classed('hidden', true);\n    };\n\n    if (delay > 0) {\n      d3.timeout(() => _hideConfirmation(option), delay);\n    } else {\n      _hideConfirmation(option);\n    }\n  };\n\n  const mouseoverHandler = (e, message, width, yOffset) => {\n    e.stopPropagation();\n    let node = e.currentTarget;\n\n    // Do not show tooltip in sub-menu mode if hovering over the sub-menu items\n    if (controlInfo.subItemMode !== null) {\n      const target = d3.select(e.explicitOriginalTarget);\n      if (target.size() > 0) {\n        if (!target.classed('show-tooltip')) {\n          if (target.classed('sub-item-child') || target.classed('sub-item')) {\n            return;\n          }\n        }\n      }\n    }\n\n    mouseoverTimeout = setTimeout(() => {\n      let position = node.getBoundingClientRect();\n      let curWidth = position.width;\n\n      let tooltipCenterX = position.x + curWidth / 2;\n      let tooltipCenterY = position.y - yOffset;\n      tooltipConfig.html = `\n        <div class='tooltip-content' style='display: flex; flex-direction: column;\n          justify-content: center;'>\n          ${message}\n        </div>\n      `;\n      tooltipConfig.width = width;\n      tooltipConfig.maxWidth = width;\n      tooltipConfig.left = tooltipCenterX - tooltipConfig.width / 2;\n      tooltipConfig.top = tooltipCenterY;\n      tooltipConfig.fontSize = '14px';\n      tooltipConfig.show = true;\n      tooltipConfig.orientation = 's';\n      tooltipConfigStore.set(tooltipConfig);\n    }, 400);\n  };\n\n  export const mouseleaveHandler = () => {\n    clearTimeout(mouseoverTimeout);\n    mouseoverTimeout = null;\n    tooltipConfig.show = false;\n    tooltipConfigStore.set(tooltipConfig);\n  };\n\n  onMount(() => {\n    bindInlineSVG(component);\n    // Get the width of this bar\n    let bbox = component.getBoundingClientRect();\n    width = bbox.width;\n    height = bbox.height;\n\n    // Register the width as html data, so we can access it later (the computed\n    // width can shrink during move mode)\n    component.setAttribute('data-max-width', width);\n  });\n\n</script>\n\n<style type='text/scss'>\n  @import '../define';\n\n  $secondary-color: hsl(0, 0%, 40%);\n  $border-radius: 13px;\n  $dot-background: $blue-dark;\n  $hover-color: $blue-dark;\n  $check-hover-color: $blue-600;\n\n  @mixin item-input-arrow {\n    position: absolute;\n    display: flex;\n    align-content: center;\n    justify-content: center;\n    color: $indigo-dark;\n    width: 12px;\n    height: 25px;\n    right: 0;\n\n    &:hover {\n      color: $hover-color;\n    }\n  }\n\n  .menu-wrapper {\n    height: 50px;\n    border-radius: 4px;\n    width: 100%;\n    background: white;\n    box-shadow: 0px 4px 16px hsla(245, 100%, 11%, 0.12);\n  }\n\n  .items {\n    display: flex;\n    align-items: center;\n    padding: 0 5px;\n    overflow: hidden;\n    width: 100%;\n    height: 100%;\n  }\n\n  .item {\n    width: 40px;\n    height: 50px;\n    display: flex;\n    cursor: pointer;\n    justify-content: center;\n    align-items: center;\n    position: relative;\n    flex-shrink: 0;\n\n    color: $indigo-dark;\n\n    &.has-input {\n      width: 80px;\n      justify-content: flex-start;\n    }\n\n    &.selected {\n      color: $blue-reg;\n\n      &:hover {\n        color: $blue-reg;\n      }\n    }\n\n    &.disabled {\n      cursor: no-drop;\n      pointer-events: none;\n    }\n\n    &:hover {\n      color: $hover-color;\n    }\n  }\n\n  .item-input {\n    text-align: center;\n    font-size: 1em;\n    line-height: 35px;\n    height: 35px;\n    max-width: 65px;\n    color: $indigo-dark;\n    opacity: 0.8;\n    border-radius: 2px;\n    border: 1px solid $gray-300;\n    outline: none;\n\n    &:focus {\n      border-radius: 2px;\n      border: 1px solid hsla(0, 0%, 0%, 0.2);\n    }\n  }\n\n  .collapse-item {\n    display: none;\n    flex-shrink: 0;\n\n    .item {\n      width: 30px;\n\n      .svg-icon {\n        color: $indigo-dark;\n\n        :global(svg) {\n          width: 1em;\n          height: 1em;\n        }\n      }\n\n      .svg-icon.icon-check {\n        color: $indigo-dark;\n      }\n\n      &:hover {\n        color: $blue-600;\n\n        .svg-icon {\n          color: currentcolor;\n        }\n\n        .svg-icon.icon-check {\n          color: $check-hover-color;\n        }\n      }\n    }\n  }\n\n  .sub-item {\n    position: absolute;\n    left: 50%;\n    top: 50px;\n    height: 30px;\n    padding: 0 5px;\n    z-index: 1;\n    transform: translate(-50%);\n    background: white;\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    box-shadow: 0 2px 6px 2px hsla(205, 5%, 25%, 0.15);\n    border-radius: 4px;\n\n    .item {\n      width: 30px;\n      height: 30px;\n\n      .svg-icon {\n        color: $indigo-dark;\n\n        :global(svg) {\n          width: 1em;\n          height: 1em;\n        }\n      }\n\n      &:hover {\n        color: $blue-600;\n\n        .svg-icon {\n          color: currentcolor;\n        }\n\n        .icon-check.svg-icon {\n          color: $check-hover-color;\n        }\n      }\n    }\n\n    &.hidden {\n      visibility: hidden;\n      pointer-events: none;\n    }\n  }\n\n  .hidden {\n    .item {\n      visibility: hidden;\n      pointer-events: none;\n    }\n  }\n\n  .sub-item-child.selected {\n    .svg-icon {\n      color: $blue-reg;\n    }\n  }\n\n  .svg-icon.item-input-up {\n    @include item-input-arrow;\n\n    align-items: flex-end;\n    padding-bottom: 5px;\n\n    top: 0;\n  }\n\n  .interpolate-step {\n    display: flex;\n    align-items: center;\n    border: 2px solid $gray-200;\n    border-radius: 4px;\n    height: 24px;\n    margin: 0 5px;\n\n    &.selected {\n      border: 2px solid change-color($blue-reg, $lightness: 70%);\n      \n      .sub-item-child .svg-icon {\n        color: $blue-reg;\n\n        &:hover {\n          color: $blue-reg;\n        }\n      }\n    }\n  }\n\n  .sub-item-child {\n\n    .icon-check.svg-icon {\n      color: $indigo-dark;\n    }\n\n  }\n\n  .item-step-text {\n    border-right: 2px solid $gray-200;\n    border-left: 2px solid $gray-200;\n    height: 24px;\n    width: 30px;\n    color: $indigo-dark;\n    text-align: center;\n\n    &:hover {\n      color: $blue-600;\n    }\n\n    &.selected {\n      color: $blue-reg;\n      border-right: 2px solid change-color($blue-reg, $lightness: 70%);\n      border-left: 2px solid change-color($blue-reg, $lightness: 70%);\n    }\n  }\n\n  .svg-icon.item-input-down {\n    @include item-input-arrow;\n\n    align-items: flex-start;\n    padding-top: 5px;\n\n    bottom: 0;\n  }\n\n  .separator {\n    margin: 0 5px;\n    width: 1px;\n    background-color: hsl(0, 0%, 90%);\n    height: 100%;\n    flex-shrink: 0;\n  }\n\n  :global(.menu-wrapper .svg-icon) {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    :global(svg) {\n      width: 1.2em;\n      height: 1.2em;\n      fill: currentcolor;\n      stroke: currentcolor;\n    }\n  }\n\n  :global(.menu-wrapper .has-input .svg-icon svg) {\n    width: 10px;\n    height: 5px;\n  }\n\n  .hidden {\n    visibility: hidden;\n    pointer-events: none;\n  }\n\n</style>\n\n<div class='menu-wrapper' bind:this={component}>\n\n  <div class='items'>\n\n    <!-- Move button -->\n    <div class='item' on:click={moveButtonClicked}\n      class:selected={controlInfo.moveMode}\n      class:disabled={controlInfo.moveMode}\n      on:mouseenter={(e) => mouseoverHandler(e, 'move', 55, 30)}\n      on:mouseleave={mouseleaveHandler}\n    >\n      <div class='svg-icon icon-updown'></div>\n    </div>\n\n    <div class='separator'></div>\n\n    <div class='collapse-item'>\n      <!-- Check button -->\n      <div class='item' on:click={moveCheckClicked}\n        on:mouseenter={(e) => mouseoverHandler(e, 'commit', 65, 30)}\n        on:mouseleave={mouseleaveHandler}\n      >\n        <div class='svg-icon icon-check'></div>\n      </div>\n\n      <!-- Cancel button -->\n      <div class='item' on:click={moveCancelClicked}\n        on:mouseenter={(e) => mouseoverHandler(e, 'cancel', 65, 30)}\n        on:mouseleave={mouseleaveHandler}\n      >\n        <div class='svg-icon icon-refresh'></div>\n      </div>\n\n    </div>\n\n    {#if type === 'cont'}\n\n    <!-- Increasing -->\n    <div class='item'\n      class:selected={controlInfo.subItemMode==='increasing'}\n      on:click={increasingClicked}\n      on:mouseenter={(e) => mouseoverHandler(e, 'monotonically increasing', 120, 52)}\n      on:mouseleave={mouseleaveHandler}\n    >\n      <div class='svg-icon icon-increasing'></div>\n      \n      <div class='sub-item sub-item-increasing hidden'>\n        <!-- Check button -->\n        <div class='item sub-item-child show-tooltip' on:click={subItemCheckClicked}\n          on:mouseenter={(e) => mouseoverHandler(e, 'commit', 65, 30)}\n          on:mouseleave={mouseleaveHandler}\n        >\n          <div class='svg-icon icon-check'></div>\n        </div>\n\n        <!-- Cancel button -->\n        <div class='item sub-item-child show-tooltip' on:click={subItemCancelClicked}\n          on:mouseenter={(e) => mouseoverHandler(e, 'cancel', 65, 30)}\n          on:mouseleave={mouseleaveHandler}\n        >\n          <div class='svg-icon icon-refresh'></div>\n        </div>\n\n      </div>\n    </div>\n\n    <!-- Decreasing -->\n    <div class='item'\n      class:selected={controlInfo.subItemMode==='decreasing'}\n      on:click={decreasingClicked}\n      on:mouseenter={(e) => mouseoverHandler(e, 'monotonically decreasing', 120, 52)}\n      on:mouseleave={mouseleaveHandler}\n    >\n      <div class='svg-icon icon-decreasing'></div>\n\n      <div class='sub-item sub-item-decreasing hidden'>\n        <!-- Check button -->\n        <div class='item sub-item-child show-tooltip' on:click={subItemCheckClicked}\n          on:mouseenter={(e) => mouseoverHandler(e, 'commit', 65, 30)}\n          on:mouseleave={mouseleaveHandler}\n        >\n          <div class='svg-icon icon-check'></div>\n        </div>\n\n        <!-- Cancel button -->\n        <div class='item sub-item-child show-tooltip' on:click={subItemCancelClicked}\n          on:mouseenter={(e) => mouseoverHandler(e, 'cancel', 65, 30)}\n          on:mouseleave={mouseleaveHandler}\n        >\n          <div class='svg-icon icon-refresh'></div>\n        </div>\n\n      </div>\n    </div>\n\n    <div class='separator'></div>\n\n    <!-- Interpolation -->\n    <div class='item'\n      class:selected={controlInfo.subItemMode==='interpolation'}\n      on:click={interpolationClicked}\n      on:mouseenter={(e) => mouseoverHandler(e, 'interpolate', 85, 30)}\n      on:mouseleave={mouseleaveHandler}\n    >\n      <div class='svg-icon icon-interpolate'></div>\n\n      <div class='sub-item sub-item-interpolation hidden'>\n\n        <!-- Inplace interpolation button -->\n        <div class='item sub-item-child show-tooltip'\n          class:selected={controlInfo.subItemMode==='interpolation' && controlInfo.interpolationMode === 'inplace'}\n          on:mouseenter={(e) => mouseoverHandler(e, 'inplace interpolation', 95, 52)}\n          on:mouseleave={mouseleaveHandler}\n          on:click={interpolateInplaceClicked}\n        >\n          <div class='svg-icon icon-inplace'></div>\n        </div>\n\n        <div class='item sub-item-child show-tooltip'\n          class:selected={controlInfo.subItemMode==='interpolation' && controlInfo.interpolationMode === 'regression'}\n          on:mouseenter={(e) => mouseoverHandler(e, 'inplace regression', 95, 52)}\n          on:mouseleave={mouseleaveHandler}\n          on:click={interpolateRegressionClicked}\n        >\n          <div class='svg-icon icon-regression'></div>\n        </div>\n\n        <div class='separator'></div>\n\n        <div class='item sub-item-child show-tooltip'\n          class:selected={controlInfo.subItemMode==='interpolation' && controlInfo.interpolationMode === 'equal'}\n          on:mouseenter={(e) => mouseoverHandler(e, 'equalize bin size', 95, 52)}\n          on:mouseleave={mouseleaveHandler}\n          on:click={interpolateEqualClicked}\n        >\n          <div class='svg-icon icon-interpolation'></div>\n        </div>\n\n        <div class='interpolate-step'\n          class:selected={controlInfo.subItemMode==='interpolation' && controlInfo.interpolationMode === 'equal'}\n          on:mouseenter={(e) => mouseoverHandler(e, 'number of bins', 90, 52)}\n          on:mouseleave={mouseleaveHandler}\n        >\n          <!-- Minus button -->\n          <div class='item sub-item-child show-tooltip' on:click={interpolateMinusClicked}>\n            <div class='svg-icon icon-minus'></div>\n          </div>\n\n          <!-- Interpolation step input -->\n          <div class='item-step-text'\n            on:click={interpolateTextClicked}\n            class:selected={controlInfo.subItemMode==='interpolation' && controlInfo.interpolationMode === 'equal'}\n            >\n          {controlInfo.step}</div>\n\n          <!-- Plus button -->\n          <div class='item sub-item-child' on:click={interpolatePlusClicked}>\n            <div class='svg-icon icon-plus'></div>\n          </div>\n        </div>\n\n        <div class='separator'></div>\n\n        <!-- Check button -->\n        <div class='item sub-item-child show-tooltip' on:click={subItemCheckClicked}\n          on:mouseenter={(e) => mouseoverHandler(e, 'commit', 65, 30)}\n          on:mouseleave={mouseleaveHandler}\n        >\n          <div class='svg-icon icon-check'></div>\n        </div>\n\n        <!-- Cancel button -->\n        <div class='item sub-item-child show-tooltip' on:click={subItemCancelClicked}\n          on:mouseenter={(e) => mouseoverHandler(e, 'cancel', 65, 30)}\n          on:mouseleave={mouseleaveHandler}\n        >\n          <div class='svg-icon icon-refresh'></div>\n        </div>\n      </div>\n\n    </div>\n\n    <div class='separator'></div>\n\n    {/if}\n\n    <!-- Merge -->\n    <div class='item'\n      class:selected={controlInfo.subItemMode==='merge'}\n      on:click={mergeClicked}\n      on:mouseenter={(e) => mouseoverHandler(e, 'align', 60, 30)}\n      on:mouseleave={mouseleaveHandler}\n    >\n      <div class='svg-icon icon-merge'></div>\n\n      <div class='sub-item sub-item-merge hidden'>\n\n        <div class='item sub-item-child show-tooltip'\n          class:selected={controlInfo.subItemMode==='merge' && controlInfo.mergeMode === 'left'}\n          on:mouseenter={(e) => mouseoverHandler(e, 'to left', 60, 30)}\n          on:mouseleave={mouseleaveHandler}\n          on:click={mergeToLeftClicked}\n        >\n          <div class='svg-icon icon-merge'></div>\n        </div>\n\n        <div class='item sub-item-child show-tooltip'\n          class:selected={controlInfo.subItemMode==='merge' && controlInfo.mergeMode === 'average'}\n          on:mouseenter={(e) => mouseoverHandler(e, 'to weighted average', 150, 30)}\n          on:mouseleave={mouseleaveHandler}\n          on:click={mergeToAverageClicked}\n        >\n          <div class='svg-icon icon-merge-average'></div>\n        </div>\n\n        <div class='item sub-item-child show-tooltip'\n          class:selected={controlInfo.subItemMode==='merge' && controlInfo.mergeMode === 'right'}\n          on:mouseenter={(e) => mouseoverHandler(e, 'to right', 70, 30)}\n          on:mouseleave={mouseleaveHandler}\n          on:click={mergeToRightClicked}\n        >\n          <div class='svg-icon icon-merge-right'></div>\n        </div>\n\n        <div class='separator'></div>\n\n        <!-- Check button -->\n        <div class='item sub-item-child show-tooltip' on:click={subItemCheckClicked}\n          on:mouseenter={(e) => mouseoverHandler(e, 'commit', 65, 30)}\n          on:mouseleave={mouseleaveHandler}\n        >\n          <div class='svg-icon icon-check'></div>\n        </div>\n\n        <!-- Cancel button -->\n        <div class='item sub-item-child show-tooltip' on:click={subItemCancelClicked}\n          on:mouseenter={(e) => mouseoverHandler(e, 'cancel', 65, 30)}\n          on:mouseleave={mouseleaveHandler}\n        >\n          <div class='svg-icon icon-refresh'></div>\n        </div>\n\n      </div>\n    </div>\n\n    <!-- <div class='separator'></div> -->\n\n    <!-- Input field -->\n    <div class='item has-input'\n      on:mouseenter={(e) => mouseoverHandler(e, 'set scores', 90, 30)}\n      on:mouseleave={mouseleaveHandler}\n    >\n      <input class='item-input'\n        placeholder={'score'} bind:value={controlInfo.setValue}\n        on:change={inputChanged}\n      >\n\n      <div class='svg-icon item-input-up icon-input-up'\n        on:click={inputAdd}\n      ></div>\n\n      <div class='svg-icon item-input-down icon-input-down'\n        on:click={inputMinus}\n      ></div>\n\n      <div class='sub-item sub-item-change hidden'>\n        <!-- Check button -->\n        <div class='item sub-item-child show-tooltip' on:click={subItemCheckClicked}\n          on:mouseenter={(e) => mouseoverHandler(e, 'commit', 65, 30)}\n          on:mouseleave={mouseleaveHandler}\n        >\n          <div class='svg-icon icon-check'></div>\n        </div>\n\n        <!-- Cancel button -->\n        <div class='item sub-item-child show-tooltip' on:click={subItemCancelClicked}\n          on:mouseenter={(e) => mouseoverHandler(e, 'cancel', 65, 30)}\n          on:mouseleave={mouseleaveHandler}\n        >\n          <div class='svg-icon icon-refresh'></div>\n        </div>\n\n      </div>\n\n    </div>\n\n    <div class='separator'></div>\n\n    <!-- Deletion -->\n    <div class='item'\n      class:selected={controlInfo.subItemMode==='delete'}\n      on:click={deleteClicked}\n      on:mouseenter={(e) => mouseoverHandler(e, 'delete', 60, 30)}\n      on:mouseleave={mouseleaveHandler}\n    >\n      <div class='svg-icon icon-delete'></div>\n\n      <div class='sub-item sub-item-delete hidden'>\n        <!-- Check button -->\n        <div class='item sub-item-child show-tooltip' on:click={subItemCheckClicked}\n          on:mouseenter={(e) => mouseoverHandler(e, 'commit', 65, 30)}\n          on:mouseleave={mouseleaveHandler}\n        >\n          <div class='svg-icon icon-check'></div>\n        </div>\n\n        <!-- Cancel button -->\n        <div class='item sub-item-child show-tooltip' on:click={subItemCancelClicked}\n          on:mouseenter={(e) => mouseoverHandler(e, 'cancel', 65, 30)}\n          on:mouseleave={mouseleaveHandler}\n        >\n          <div class='svg-icon icon-refresh'></div>\n        </div>\n\n      </div>\n    </div>\n\n  </div>\n\n</div>\n","<script>\n  import d3 from '../utils/d3-import';\n  import { onMount, onDestroy } from 'svelte';\n\n  import { initIsotonicRegression } from '../isotonic-regression';\n\n  import { round } from '../utils/utils';\n  import { config } from '../config';\n  import { drawLineLegend, approximateYAxisWidth } from './draw';\n\n  import { SelectedInfo } from './continuous/cont-class';\n  import { createConfidenceData, createAdditiveData, createPointData, linkPointToAdditive } from './continuous/cont-data';\n  import { brushDuring, brushEndSelect, selectAllBins, quitSelection } from './continuous/cont-brush';\n  import { zoomStart, zoomEnd, zoomed, zoomScaleExtent, rExtent } from './continuous/cont-zoom';\n  import { dragged, redrawOriginal, redrawMonotone, inplaceInterpolate,\n    stepInterpolate, merge, drawLastEdit, regressionInterpolate } from './continuous/cont-edit';\n  import { moveMenubar } from './continuous/cont-bbox';\n  import { undoHandler, redoHandler, tryRestoreLastEdit,\n    pushCurStateToHistoryStack, checkoutCommitHead } from './continuous/cont-history';\n\n  import ContextMenu from '../components/ContextMenu.svelte';\n\n  export let featureData = null;\n  export let scoreRange = null;\n  export let svgHeight = 400;\n  export let svgWidth = null;\n  export let ebm = null;\n  export let sidebarStore = null;\n  export let footerStore = null;\n  export let footerActionStore = null;\n  export let historyStore = null;\n\n  let svg = null;\n  let component = null;\n  let multiMenu = null;\n  let myContextMenu = null;\n  let redoStack = [];\n\n  let mounted = false;\n  let initialized = false;\n\n  // Visualization constants\n  const svgPadding = config.svgPadding;\n  const densityHeight = 90;\n  // const densityHeight = 60;\n\n  // Viewbox width and height\n  let width = 600;\n  let height = 400;\n\n  // If both svg width and height are given, we re-compute the Viewbox dimension\n  if (svgWidth !== null & svgHeight !== null) {\n    height = width / svgWidth * svgHeight;\n  }\n\n  // Some constant lengths of different elements\n  let yAxisWidth;\n  let lineChartWidth;\n  let lineChartHeight;\n\n  // Some styles\n  const colors = config.colors;\n  const defaultFont = config.defaultFont;\n  const linePathWidth = 2.5;\n  const bboxStrokeWidth = 1;\n  const nodeStrokeWidth = 1;\n\n  // --- Interactions ---\n  // Brush interactions\n  let brush = null;\n  let initXDomain = null;\n  let initYDomain = null;\n\n  // Panning and zooming\n  let zoom = null;\n\n  // Select mode\n  let state = {\n    curXScale: null,\n    curYScale: null,\n    curTransform: null,\n    selectedInfo: null,\n    lastSelectedInfo: null,\n    pointData: null,\n    additiveData: null,\n    pointDataBuffer: null,\n    additiveDataBuffer: null,\n    oriXScale: null,\n    oriYScale: null,\n    bboxPadding: 1,\n  };\n  let selectMode = false;\n  state.selectedInfo = new SelectedInfo();\n\n  // Editing mode\n\n  // Context menu info\n  let multiMenuControlInfo = {\n    moveMode: false,\n    toSwitchMoveMode: false,\n    subItemMode: null,\n    setValue: null,\n    step: 3,\n    interpolationMode: 'inplace',\n  };\n\n  // Isotonic regression\n  let increasingISO = null;\n  let decreasingISO = null;\n\n  // Subscribe the history store\n  let historyList = null;\n  let historyStoreUnsubscribe = historyStore.subscribe(value => {historyList = value;});\n\n  // Communicate with the sidebar\n  let sidebarInfo = {};\n  let sidebarStoreUnsubscribe = sidebarStore.subscribe(async value => {\n    sidebarInfo = value;\n\n    // Listen to events ['globalClicked', 'selectedClicked', 'sliceClicked']\n    // from the sidebar\n    switch(value.curGroup) {\n    case 'globalClicked':\n      console.log('globalClicked');\n\n      footerStore.update(value => {\n        if (value.sample.includes(',')) {\n          value.sample = value.sample.slice(0, -1);\n        }\n        value.slice = '';\n        return value;\n      });\n\n      // We keep track of the global metrics in history in any current scope\n      // To restore the global tab, we just need to query the history stack\n      sidebarInfo.curGroup = 'overwrite';\n      sidebarStore.set(sidebarInfo);\n      break;\n\n    case 'selectedClicked':\n      console.log('selectedClicked');\n\n      footerStore.update(value => {\n        if (value.sample.includes(',')) {\n          value.sample = value.sample.slice(0, -1);\n        }\n        value.slice = '';\n        return value;\n      });\n\n      // Step 1: If there is no selected nodes, then the metrics are all NAs\n      if (!state.selectedInfo.hasSelected) {\n        sidebarInfo.curGroup = 'nullify';\n        sidebarStore.set(sidebarInfo);\n      } else {\n        // Step 2: Reset/Update EBM 3 times and compute three metrics on the selected nodes\n\n        // Step 2.1: Original\n        // Here we reset the EBM model completely, because\n        // the intermediate historical events might update() different portions\n        // of the EBM\n        // Be careful! The first commit might be on a different feature!\n        // It is way too complicated to load the initial edit then come back (need to revert\n        // every edit on every feature!)\n        // Here we just use ignore it [better than confusing the users with some other \"original\"]\n        // await setEBM('original-only', historyList[0].state.pointData);\n\n        // Nullify the original\n        sidebarInfo.curGroup = 'nullify';\n        sidebarStore.set(sidebarInfo);\n        while (sidebarInfo.curGroup !== 'nullifyCompleted') {\n          await new Promise(r => setTimeout(r, 300));\n        }\n\n        // Step 2.2: Last edit\n        if (sidebarInfo.historyHead - 1 >= 0 &&\n          historyList[sidebarInfo.historyHead - 1].type !== 'original' &&\n          historyList[sidebarInfo.historyHead - 1].featureName === state.featureName) {\n          await setEBM('last-only', historyList[sidebarInfo.historyHead - 1].state.pointData);\n        }\n\n        // Step 2.3: Current edit\n        let curPointData = state.pointDataBuffer === null ?\n          historyList[sidebarInfo.historyHead].state.pointData :\n          state.pointDataBuffer;\n\n        await setEBM('current-only', curPointData);\n      }\n\n      break;\n\n    case 'sliceClicked': {\n      console.log('sliceClicked');\n\n      // Step 1: set the slice feature ID and level ID to EBM\n      let sliceSize = ebm.setSliceData(sidebarInfo.sliceInfo.featureID, sidebarInfo.sliceInfo.level);\n\n      footerStore.update(value => {\n        if (!value.sample.includes(',')) value.sample += ',';\n        value.slice = `<b>${sliceSize}</b> sliced`;\n        return value;\n      });\n\n      // Step 2: Reset/Update EBM 3 times and compute three metrics on the selected nodes\n\n      // Step 2.1: Original\n      // Here we reset the EBM model completely, because\n      // the intermediate historical events might update() different portions\n      // of the EBM\n      // await setEBM('original-only', historyList[0].state.pointData);\n\n      // Nullify the original\n      sidebarInfo.curGroup = 'nullify';\n      sidebarStore.set(sidebarInfo);\n      while (sidebarInfo.curGroup !== 'nullifyCompleted') {\n        await new Promise(r => setTimeout(r, 300));\n      }\n\n      // Step 2.2: Last edit\n      if (sidebarInfo.historyHead - 1 >= 0 &&\n        historyList[sidebarInfo.historyHead - 1].type !== 'original' &&\n        historyList[sidebarInfo.historyHead - 1].featureName === state.featureName) {\n        await setEBM('last-only', historyList[sidebarInfo.historyHead - 1].state.pointData);\n      }\n\n      // Step 2.3: Current edit\n      let curPointData = state.pointDataBuffer === null ?\n        historyList[sidebarInfo.historyHead].state.pointData :\n        state.pointDataBuffer;\n\n      await setEBM('current-only', curPointData);\n\n      break;\n    }\n\n    // User clicks to preview a previous edit\n    case 'headChanged': {\n      const headFeatureName = historyList[value.historyHead].featureName;\n      // Only checkout the commit if it is still on the same feature\n      // Otherwise, this component should wait for its parent to kill it\n      if (headFeatureName === state.featureName) {\n        checkoutCommitHead(state, svg, multiMenu, resetContextMenu, resetFeatureSidebar,\n          historyStore, setEBM, setEBMEditingFeature, sidebarStore);\n      }\n      break;\n    }\n\n    default:\n      break;\n    }\n  });\n\n  let footerValue = null;\n  let footerValueUnsubscribe = footerStore.subscribe(value => {\n    footerValue = value;\n  });\n\n  // Listen to footer buttons\n  let footerActionUnsubscribe = footerActionStore.subscribe(message => {\n    switch(message){\n    case 'undo': {\n      console.log('undo clicked');\n\n      if (historyList.length > 1) {\n        undoHandler(state, svg, multiMenu, resetContextMenu, resetFeatureSidebar,\n          historyStore, redoStack, setEBM, sidebarStore);\n      }\n      break;\n    }\n\n    case 'redo': {\n      console.log('redo clicked');\n\n      if (redoStack.length > 0) {\n        redoHandler(state, svg, multiMenu, resetContextMenu, resetFeatureSidebar,\n          historyStore, redoStack, setEBM, sidebarStore);\n      }\n      break;\n    }\n\n    case 'save':\n      console.log('save clicked');\n      break;\n\n    case 'selectAll':\n      console.log('selectAll clicked');\n\n      // Select all bins if in select mode and nothing has been selected yet\n      if (selectMode) {\n        // Discard any existing selection\n        quitSelection(svg, state, multiMenu, resetContextMenu, resetFeatureSidebar);\n\n        // Cheeky way to select all nodes by fake a brush event\n        selectAllBins(svg, state, bboxStrokeWidth, multiMenu, component,\n          updateFeatureSidebar, nullifyMetrics, computeSelectedEffects, brush,\n          footerStore, ebm);\n      }\n      break;\n\n    default:\n      break;\n    }\n\n    footerActionStore.set('');\n  });\n\n  onMount(() => {\n    mounted = true;\n  });\n\n  // Need to unsubscribe stores when the component is destroyed\n  onDestroy(() => {\n    sidebarStoreUnsubscribe();\n    footerActionUnsubscribe();\n    footerValueUnsubscribe();\n    historyStoreUnsubscribe();\n  });\n\n  /**\n   * Draw the plot in the SVG component\n   * @param featureData\n   */\n  const drawFeature = async (featureData) => {\n    initialized = true;\n    console.log(featureData);\n\n    // Track the feature name\n    state.featureName = featureData.name;\n\n    let svgSelect = d3.select(svg);\n\n    // Set svg viewBox (3:2 WH ratio)\n    // width = 750;\n    // height = 400;\n    svgWidth = svgHeight * (width / height);\n\n    svgSelect.attr('viewBox', `0 0 ${width} ${height}`)\n      .attr('preserveAspectRatio', 'xMinYMin meet')\n      .attr('width', svgWidth)\n      .attr('height', svgHeight)\n      // WebKit bug workaround (see https://bugs.webkit.org/show_bug.cgi?id=226683)\n      .on('wheel', (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n      });\n\n    // Disable the default context menu when right click\n    svgSelect.on('contextmenu', (event) => {\n      event.preventDefault();\n    });\n\n    lineChartHeight = height - svgPadding.top - svgPadding.bottom - densityHeight;\n\n    // Approximate the longest width of score (y-axis)\n    // Normalize the Y axis by the global score range\n    let yScale = d3.scaleLinear()\n      .domain(scoreRange)\n      .range([lineChartHeight, 0]);\n\n    let tempWidth = Math.max(40, approximateYAxisWidth(svg, yScale, defaultFont, true));\n    yAxisWidth = 18 + tempWidth / svgWidth * width;\n\n    lineChartWidth = width - svgPadding.left - svgPadding.right - yAxisWidth;\n\n    // Initialize the isotonic regression model\n    initIsoModel(featureData);\n\n    // Draw a legend for the line color\n    drawLineLegend(svgSelect, width, svgPadding);\n\n    let content = svgSelect.append('g')\n      .attr('class', 'content')\n      .attr('transform', `translate(${svgPadding.left}, ${svgPadding.top})`);\n\n    // The bins have unequal length, and they are inner edges\n    // Here we use the min and max values from the training set as our left and\n    // right bounds on the x-axis (left most and right most edges)\n    let xMin = featureData.binEdge[0];\n    let xMax = featureData.binEdge[featureData.binEdge.length - 1];\n\n    // For the y scale, it seems InterpretML presets the center at 0 (offset\n    // doesn't really matter in EBM because we can modify intercept)\n    // TODO: Provide interaction for users to change the center point\n    // let yExtent = d3.extent(featureData.additive);\n\n    let xScale = d3.scaleLinear()\n      .domain([xMin, xMax])\n      .range([0, lineChartWidth]);\n\n    state.oriXScale = xScale;\n    state.oriYScale = yScale;\n    state.curXScale = xScale;\n    state.curYScale = yScale;\n\n    // Use the # of ticks and y score range to set the default change unit for\n    // the up and down in the context menu bar\n    multiMenuControlInfo.changeUnit = round((scoreRange[1] - scoreRange[0]) / yScale.ticks().length, 4);\n\n    // Store the initial domain for zooming\n    initXDomain = [xMin, xMax];\n    initYDomain = scoreRange;\n\n    // Create a data array by combining the bin edge and additive terms\n    state.additiveData = createAdditiveData(featureData);\n\n    // Create the confidence interval region\n    let confidenceData = createConfidenceData(featureData);\n\n    // Create a data array to draw nodes\n    state.pointData = createPointData(featureData);\n\n    // Link the point data and additive data (only need to call this function\n    // we we initialize them from the data, no need to call it when we add new\n    // bins in run time)\n    linkPointToAdditive(state.pointData, state.additiveData);\n\n    // Create histogram chart group\n    let histChart = content.append('g')\n      .attr('class', 'hist-chart-group');\n\n    // Draw the line chart\n    let lineChart = content.append('g')\n      .attr('class', 'line-chart-group');\n\n    let axisGroup = lineChart.append('g')\n      .attr('class', 'axis-group');\n\n    // Add a clip path to bound the lines (for zooming)\n    lineChart.append('clipPath')\n      .attr('id', `${featureData.name.replace(/\\s/g, '')}-line-chart-clip`)\n      .append('rect')\n      .attr('width', lineChartWidth)\n      .attr('height', lineChartHeight - 1);\n\n    // For the histogram clip-path, need to carefully play around with the\n    // transformation, the path should be in a static group; the group having\n    // clip-path attr should be static. Therefore we apply the transformation to\n    // histChart's child later.\n    histChart.append('clipPath')\n      .attr('id', `${featureData.name.replace(/\\s/g, '')}-hist-chart-clip`)\n      .append('rect')\n      .attr('x', yAxisWidth)\n      .attr('y', lineChartHeight)\n      .attr('width', lineChartWidth)\n      .attr('height', densityHeight);\n\n    histChart.attr('clip-path', `url(#${featureData.name.replace(/\\s/g, '')}-hist-chart-clip)`);\n\n    let lineChartContent = lineChart.append('g')\n      .attr('class', 'line-chart-content-group')\n      .attr('clip-path', `url(#${featureData.name.replace(/\\s/g, '')}-line-chart-clip)`)\n      .attr('transform', `translate(${yAxisWidth}, 0)`);\n\n    lineChartContent.append('rect')\n      .attr('width', lineChartWidth)\n      .attr('height', lineChartHeight)\n      .style('opacity', 0);\n\n    // Create a group to draw grids\n    let gridGroup = lineChartContent.append('g')\n      .attr('class', 'line-chart-grid-group');\n\n    let confidenceGroup = lineChartContent.append('g')\n      .attr('class', 'line-chart-confidence-group');\n\n    let lineGroup = lineChartContent.append('g')\n      .attr('class', 'line-chart-line-group real')\n      .style('stroke', colors.line)\n      .style('stroke-width', linePathWidth)\n      .style('fill', 'none');\n\n    // We draw the shape function with many line segments (path)\n    lineGroup.selectAll('path')\n      .data(state.additiveData, d => `${d.id}-${d.pos}`)\n      .join('path')\n      .attr('class', 'additive-line-segment')\n      .attr('id', d => d.id)\n      .attr('d', d => {\n        return `M ${xScale(d.x1)}, ${yScale(d.y1)} L ${xScale(d.x2)} ${yScale(d.y2)}`;\n      });\n\n    lineChartContent.append('g')\n      .attr('class', 'line-chart-line-group last-edit')\n      .style('stroke', 'hsl(35, 100%, 85%)')\n      .style('stroke-width', linePathWidth)\n      .style('fill', 'none')\n      .lower();\n\n    lineGroup.clone(true)\n      .classed('real', false)\n      .style('stroke', 'hsl(0, 0%, 82%)')\n      // .style('stroke', 'hsl(0, 0%, 70%)')\n      .lower();\n\n    confidenceGroup.lower();\n    gridGroup.lower();\n\n    // Draw nodes for editing\n    let nodeGroup = lineChartContent.append('g')\n      .attr('class', 'line-chart-node-group')\n      .style('visibility', 'hidden');\n\n    nodeGroup.selectAll('circle')\n      .data(Object.values(state.pointData), d => d.id)\n      .join('circle')\n      .attr('class', 'node')\n      .attr('id', d => `node-${d.id}`)\n      .attr('cx', d => xScale(d.x))\n      .attr('cy', d => yScale(d.y))\n      .attr('r', rExtent[0])\n      .style('stroke-width', nodeStrokeWidth);\n\n    // Draw the underlying confidence interval\n    confidenceGroup.selectAll('rect')\n      .data(confidenceData)\n      .join('rect')\n      .attr('class', 'confidence-rect')\n      .attr('x', d => xScale(d.x1))\n      .attr('y', d => yScale(d.y1))\n      .attr('width', d => xScale(d.x2) - xScale(d.x1))\n      .attr('height', d => yScale(d.y2) - yScale(d.y1))\n      .style('fill', colors.lineConfidence)\n      .style('opacity', 0.13);\n\n    // Draw the line chart X axis\n    let xAxisGroup = axisGroup.append('g')\n      .attr('class', 'x-axis')\n      .attr('transform', `translate(${yAxisWidth}, ${lineChartHeight})`)\n      .call(d3.axisBottom(xScale));\n\n    xAxisGroup.attr('font-family', defaultFont);\n\n    // Add x axis label\n    // Dynamically determine the height of x-axis first\n    const xAxisGroupHeight = xAxisGroup.node().getBoundingClientRect().height / svgHeight * height;\n\n    xAxisGroup.append('g')\n      .attr('transform', `translate(${lineChartWidth / 2}, ${xAxisGroupHeight + 5})`)\n      .append('text')\n      .attr('class', 'x-axis-text')\n      .text(featureData.name)\n      .style('fill', 'black');\n\n    // Draw the line chart Y axis\n    let yAxisGroup = axisGroup.append('g')\n      .attr('class', 'y-axis')\n      .attr('transform', `translate(${yAxisWidth}, 0)`);\n\n    yAxisGroup.call(\n      d3.axisLeft(yScale).tickFormat(d => Math.abs(d) >= 1000 ? d / 1000 + 'K' : d)\n    );\n    yAxisGroup.attr('font-family', defaultFont);\n\n    yAxisGroup.append('g')\n      .attr('class', 'y-axis-text')\n      .attr('transform', `translate(${-yAxisWidth + 15}, ${lineChartHeight / 2}) rotate(-90)`)\n      .append('text')\n      .text('Score')\n      .style('dominant-baseline', 'text-bottom')\n      .style('fill', 'black');\n\n    // Draw the histograms at the bottom\n    let histData = [];\n\n    // Transform the count to frequency (percentage)\n    let histCountSum = d3.sum(featureData.histCount);\n    let histFrequency = featureData.histCount.map(d => d / histCountSum);\n\n    for (let i = 0; i < histFrequency.length; i++) {\n      histData.push({\n        x1: featureData.histEdge[i],\n        x2: featureData.histEdge[i + 1],\n        height: histFrequency[i]\n      });\n    }\n\n    let histYScale = d3.scaleLinear()\n      .domain(d3.extent(histFrequency))\n      .range([0, densityHeight]);\n\n    // Draw the density histogram\n    let histChartContent = histChart.append('g')\n      .attr('class', 'hist-chart-content-group')\n      .attr('transform', `translate(${yAxisWidth}, ${lineChartHeight})`);\n\n    histChartContent.selectAll('rect')\n      .data(histData)\n      .join('rect')\n      .attr('class', 'hist-rect')\n      .attr('x', d => xScale(d.x1))\n      .attr('y', 0)\n      .attr('width', d => xScale(d.x2) - xScale(d.x1))\n      .attr('height', d => histYScale(d.height))\n      .style('fill', colors.hist);\n\n    // Draw a Y axis for the histogram chart\n    let yAxisHistGroup = lineChart.append('g')\n      .attr('class', 'y-axis')\n      .attr('transform', `translate(${yAxisWidth}, ${lineChartHeight})`);\n\n    yAxisHistGroup.call(\n      d3.axisLeft(histYScale)\n        .ticks(2)\n    );\n\n    yAxisHistGroup.attr('font-family', defaultFont);\n\n    // Change 0.0 to 0\n    yAxisHistGroup.selectAll('text')\n      .style('fill', colors.histAxis)\n      .filter((d, i, g) => d3.select(g[i]).text() === '0.0')\n      .text('0');\n\n    yAxisHistGroup.selectAll('path,line')\n      .style('stroke', colors.histAxis);\n\n    yAxisHistGroup.append('g')\n      .attr('transform', `translate(${-yAxisWidth + 15}, ${densityHeight / 2}) rotate(-90)`)\n      .append('text')\n      .attr('class', 'y-axis-text')\n      .text('Density')\n      .style('dominant-baseline', 'text-bottom')\n      .style('fill', colors.histAxis);\n\n    // Add brush\n    brush = d3.brush()\n      .on('end', e => brushEndSelect(\n        e, state, svg, multiMenu, myContextMenu, bboxStrokeWidth, brush, component,\n        resetContextMenu, sidebarStore, setEBM, updateEBM, updateFeatureSidebar,\n        resetFeatureSidebar, nullifyMetrics, computeSelectedEffects\n      ))\n      .on('start brush', e => brushDuring(e, state, svg, multiMenu, ebm, footerStore))\n      .extent([[0, 0], [lineChartWidth, lineChartHeight]])\n      .filter((e) => {\n        if (selectMode) {\n          return e.button === 0;\n        } else {\n          return e.button === 2;\n        }\n      });\n\n    let brushGroup = lineChartContent.append('g')\n      .attr('class', 'brush')\n      .call(brush);\n\n    // Change the style of the select box\n    brushGroup.select('rect.overlay')\n      .attr('cursor', null);\n\n    // Add panning and zooming\n    zoom = d3.zoom()\n      .scaleExtent(zoomScaleExtent)\n      .on('zoom', e => zoomed(e, state, xScale, yScale, svg, linePathWidth,\n        nodeStrokeWidth, yAxisWidth, lineChartWidth, lineChartHeight,\n        multiMenu, component))\n      .on('start', () => zoomStart(state, multiMenu))\n      .on('end', () => zoomEnd(state, multiMenu))\n      .filter(e => {\n        if (selectMode) {\n          return (e.type === 'wheel' || e.button === 2);\n        } else {\n          return (e.button === 0 || e.type === 'wheel');\n        }\n      });\n\n    lineChartContent.call(zoom)\n      .call(zoom.transform, d3.zoomIdentity);\n\n    lineChartContent.on('dblclick.zoom', null);\n\n    // Listen to double click to reset zoom\n    lineChartContent.on('dblclick', () => {\n      lineChartContent.transition('reset')\n        .duration(750)\n        .ease(d3.easeCubicInOut)\n        .call(zoom.transform, d3.zoomIdentity);\n    });\n\n    // Update the footer for more instruction\n    footerStore.update(value => {\n      value.help = '<b>Drag</b> to pan view, <b>Scroll</b> to zoom';\n      return value;\n    });\n\n    // Try to restore the last edit if possible\n    let hasBeenCreated = await tryRestoreLastEdit(state, svg, historyStore, setEBM);\n\n    if (!hasBeenCreated) {\n      // Push the initial state into the history stack\n      pushCurStateToHistoryStack(state, 'original', 'Original graph', historyStore, sidebarStore);\n    } else {\n      pushCurStateToHistoryStack(state, 'original',\n        `Reloaded commit ${hasBeenCreated.substring(0, 7)}`,\n        historyStore, sidebarStore);\n    }\n\n    sidebarInfo.historyHead = historyList.length - 1;\n    sidebarInfo.previewHistory = false;\n    sidebarStore.set(sidebarInfo);\n\n    // Use animation as a signifier for zoom affordance\n    setTimeout(() => {\n      lineChartContent.transition()\n        .duration(400)\n        .call(zoom.scaleTo, 0.95);\n    }, 400);\n  };\n\n  const getEBMMetrics = async (scope='global') => {\n    // Depending on the selected scope, we have different modes of getMetrics()\n    let metrics;\n\n    switch(scope) {\n    case 'global':\n      metrics = ebm.getMetrics();\n      break;\n    case 'selected': {\n      let selectedBinIndexes = state.selectedInfo.nodeData.map(d => d.ebmID);\n      metrics = ebm.getMetricsOnSelectedBins(selectedBinIndexes);\n      break;\n    }\n    case 'slice':\n      metrics = ebm.getMetricsOnSelectedSlice();\n      break;\n    default:\n      break;\n    }\n    return metrics;\n  };\n\n  /**\n   * Pass the metrics info to sidebar handler (classification or egression metrics tab)\n   * @param metrics Metrics info from the EBM\n   * @param curGroup Name of the message\n   */\n  const transferMetricToSidebar = (metrics, curGroup) => {\n    if (ebm.isClassification) {\n      sidebarInfo.accuracy = metrics.accuracy;\n      sidebarInfo.rocAuc = metrics.rocAuc;\n      sidebarInfo.balancedAccuracy = metrics.balancedAccuracy;\n      sidebarInfo.confusionMatrix = metrics.confusionMatrix;\n    } else {\n      sidebarInfo.rmse = metrics.rmse;\n      sidebarInfo.mae = metrics.mae;\n      sidebarInfo.mape = metrics.mape;\n    }\n\n    sidebarInfo.curGroup = curGroup;\n\n    sidebarStore.set(sidebarInfo);\n  };\n\n  const updateEBM = async (curGroup, nodeData=undefined) => {\n    let changedBinIndexes = [];\n    let changedScores = [];\n\n    if (nodeData === undefined) {\n      nodeData = state.selectedInfo.nodeData;\n    }\n\n    nodeData.forEach(d => {\n      changedBinIndexes.push(d.ebmID);\n      changedScores.push(d.y);\n    });\n\n    await ebm.updateModel(changedBinIndexes, changedScores);\n\n    /**\n     * Depending on the current scope, we have different metrics updating methods\n     */\n    switch(sidebarInfo.effectScope) {\n    case 'global': {\n      let metrics = await getEBMMetrics('global');\n\n      // Pass the metrics to sidebar\n      transferMetricToSidebar(metrics, curGroup);\n      break;\n    }\n    case 'selected': {\n      let metrics = await getEBMMetrics('selected');\n\n      // Pass the metrics to sidebar\n      transferMetricToSidebar(metrics, curGroup);\n      break;\n    }\n    case 'slice': {\n      let metrics = await getEBMMetrics('slice');\n\n      // Pass the metrics to sidebar\n      transferMetricToSidebar(metrics, curGroup);\n      break;\n    }\n    case 'recoverEBM': {\n      // No need to transfer the new metrics\n      break;\n    }\n    default:\n      break;\n    }\n  };\n\n  /**\n   * Overwrite the edge definition in the EBM WASM model.\n   * @param {string} curGroup Message to the metrics sidebar\n   * @param {object} curNodeData Node data in `state`\n   * @param {featureName} featureName The name of feature to be edited\n   * @param {bool} transfer If the new metrics need to be transferred to the sidebar\n   */\n  const setEBM = async (curGroup, curNodeData, featureName=undefined, transfer=true) => {\n\n    // Update the complete bin edge definition in the EBM model\n    let newBinEdges = [];\n    let newScores = [];\n\n    // The left point will always have index 0\n    let curPoint = curNodeData[0];\n    let curEBMID = 0;\n\n    while (curPoint.rightPointID !== null) {\n      // Collect x and y\n      newBinEdges.push(curPoint.x);\n      newScores.push(curPoint.y);\n\n      // Update the new ID so we can map them to bin indexes later (needed for\n      // selection to check sample number)\n      curPoint.ebmID = curEBMID;\n      curEBMID++;\n\n      curPoint = curNodeData[curPoint.rightPointID];\n    }\n\n    // Add the right node\n    newBinEdges.push(curPoint.x);\n    newScores.push(curPoint.y);\n    curPoint.ebmID = curEBMID;\n\n    await ebm.setModel(newBinEdges, newScores, featureName);\n\n    if (transfer) {\n      switch(sidebarInfo.effectScope) {\n      case 'global': {\n        let metrics = await getEBMMetrics('global');\n        transferMetricToSidebar(metrics, curGroup);\n        break;\n      }\n      case 'selected': {\n        let metrics = await getEBMMetrics('selected');\n        transferMetricToSidebar(metrics, curGroup);\n        break;\n      }\n      case 'slice': {\n        let metrics = await getEBMMetrics('slice');\n        transferMetricToSidebar(metrics, curGroup);\n        break;\n      }\n      default:\n        break;\n      }\n    }\n  };\n\n  /**\n   * Change the currently editing feature in ebm wasm\n  */\n  const setEBMEditingFeature = (featureName) => {\n    ebm.setEditingFeature(featureName);\n  };\n\n  /**\n   * Set all metrics to null if there is no selection and the scope is 'selected'.\n  */\n  const nullifyMetrics = () => {\n    if (!state.selectedInfo.hasSelected && sidebarInfo.effectScope === 'selected') {\n      sidebarInfo.curGroup = 'nullify';\n      sidebarStore.set(sidebarInfo);\n    }\n  };\n\n  const computeSelectedEffects = async () => {\n    if (sidebarInfo.effectScope === 'selected' && state.selectedInfo.hasSelected) {\n      // Step 1: compute the original metrics\n      // Be careful! The first commit might be on a different feature!\n      // It is way too complicated to load the initial edit then come back (need to revert\n      // every edit on every feature!)\n      // Here we just use ignore it [better than confusing the users with some other \"original\"]\n      // if (historyList[0].featureName !== state.featureName) {\n      //   ebm.setEditingFeature(historyList[0].featureName);\n      // }\n      // await setEBM('original-only', historyList[0].state.pointData);\n      // ebm.setEditingFeature(state.featureName);\n\n      // Nullify the original\n      sidebarInfo.curGroup = 'nullify';\n      sidebarStore.set(sidebarInfo);\n      while (sidebarInfo.curGroup !== 'nullifyCompleted') {\n        await new Promise(r => setTimeout(r, 300));\n      }\n\n      // Step 2: Last edit\n      if (sidebarInfo.historyHead - 1 >= 0 &&\n        historyList[sidebarInfo.historyHead - 1].type !== 'original' &&\n        historyList[sidebarInfo.historyHead - 1].featureName === state.featureName) {\n        await setEBM('last-only', historyList[sidebarInfo.historyHead - 1].state.pointData);\n      }\n\n      // Step 3: Current edit\n      await setEBM('current-only', historyList[sidebarInfo.historyHead].state.pointData);\n    }\n  };\n\n  /**\n   * Count the feature distribution for the selected test samples\n   * @param {[number]} binIndexes Selected bin indexes\n   */\n  const updateFeatureSidebar = async (binIndexes) => {\n    if (ebm.isDummy !== undefined) return;\n\n    // Get the selected counts\n    let selectedHistCounts = ebm.getSelectedSampleDist(binIndexes);\n\n    // Update the counts in the store\n    for (let i = 0; i < sidebarInfo.featurePlotData.cont.length; i++) {\n      let curID = sidebarInfo.featurePlotData.cont[i].id;\n      sidebarInfo.featurePlotData.cont[i].histSelectedCount = selectedHistCounts[curID];\n    }\n\n    for (let i = 0; i < sidebarInfo.featurePlotData.cat.length; i++) {\n      let curID = sidebarInfo.featurePlotData.cat[i].id;\n      sidebarInfo.featurePlotData.cat[i].histSelectedCount = selectedHistCounts[curID];\n    }\n\n    sidebarInfo.curGroup = 'updateFeature';\n    sidebarStore.set(sidebarInfo);\n  };\n\n  /**\n   * Reset the feature count of selected samples to 0\n   */\n  const resetFeatureSidebar = async () => {\n    if (ebm.isDummy !== undefined) return;\n\n    for (let i = 0; i < sidebarInfo.featurePlotData.cont.length; i++) {\n      sidebarInfo.featurePlotData.cont[i].histSelectedCount = new Array(\n        sidebarInfo.featurePlotData.cont[i].histSelectedCount.length).fill(0);\n    }\n\n    for (let i = 0; i < sidebarInfo.featurePlotData.cat.length; i++) {\n      sidebarInfo.featurePlotData.cat[i].histSelectedCount = new Array(\n        sidebarInfo.featurePlotData.cat[i].histSelectedCount.length).fill(0);\n    }\n\n    sidebarInfo.curGroup = 'updateFeature';\n    sidebarStore.set(sidebarInfo);\n  };\n\n  // ---- Interaction Functions ----\n\n  /**\n   * Quit the sub-menu mode (move, sub-item in the context menu) when user clicks\n   * the empty space during editing\n   * This function is implemented as a callback for brushSelected() because it\n   * needs access to variable `multiMenuControlInfo`\n   */\n  const resetContextMenu = () => {\n    let moveMode = multiMenuControlInfo.moveMode;\n    let subItemMode = multiMenuControlInfo.subItemMode;\n\n    if (multiMenuControlInfo.moveMode) {\n      multiMenuControlInfo.moveMode = false;\n      multiMenuControlInfo.toSwitchMoveMode = true;\n\n      // DO not update the data\n      state.pointDataBuffer = null;\n      state.additiveDataBuffer = null;\n    }\n\n    // End sub-menu mode\n    if (multiMenuControlInfo.subItemMode !== null) {\n      // Hide the confirmation panel\n      myContextMenu.hideConfirmation(multiMenuControlInfo.subItemMode);\n      multiMenuControlInfo.subItemMode = null;\n\n      // Discard changes\n      state.pointDataBuffer = null;\n      state.additiveDataBuffer = null;\n    }\n\n    multiMenuControlInfo.setValue = null;\n\n    // Update the footer message\n    footerStore.update(value => {\n      // Reset the baseline\n      value.baseline = 0;\n      value.baselineInit = false;\n      value.state = '';\n      value.help = '<b>Drag</b> to marquee select, <b>Scroll</b> to zoom';\n      return value;\n    });\n\n    return {moveMode: moveMode, subItemMode: subItemMode};\n  };\n\n  /**\n   * Event handler for the select button in the header\n   */\n  export const selectModeSwitched = () => {\n    selectMode = !selectMode;\n\n    let lineChartContent = d3.select(svg)\n      .select('g.line-chart-content-group')\n      .classed('select-mode', selectMode);\n\n    lineChartContent.select('g.brush rect.overlay')\n      .attr('cursor', null);\n\n    // Update the footer message\n    if (selectMode) {\n      footerStore.update(value => {\n        value.help = '<b>Drag</b> to marquee select, <b>Scroll</b> to zoom';\n        return value;\n      });\n    } else {\n      footerStore.update(value => {\n        value.help = '<b>Drag</b> to pan view, <b>Scroll</b> to zoom';\n        return value;\n      });\n    }\n  };\n\n  const initIsoModel = async () => {\n    increasingISO = await initIsotonicRegression(true);\n    decreasingISO = await initIsotonicRegression(false);\n  };\n\n  const multiMenuMoveClicked = async () => {\n    // Enter the move mode\n\n    // If users have done some other edits without committing, discard the changes\n    multiMenuSubItemCancelClicked(null, true);\n\n    // Step 1. create data clone buffers for user to change\n    // We only do this when buffer has not been created --- it is possible that\n    // user switch to move from other editing mode\n    if (state.pointDataBuffer === null) {\n      state.pointDataBuffer = JSON.parse(JSON.stringify(state.pointData));\n      state.additiveDataBuffer = JSON.parse(JSON.stringify(state.additiveData));\n    }\n\n    let bboxGroup = d3.select(svg)\n      .select('g.line-chart-content-group g.select-bbox-group')\n      .style('cursor', 'row-resize')\n      .call(d3.drag()\n        .on('start', () => {\n          footerStore.update(value => {\n            if (!value.baselineInit) {\n              value.baseline = 0;\n              value.baselineInit = true;\n            }\n            return value;\n          });\n        })\n        .on('drag', (e) => dragged(e, state, svg, sidebarInfo.totalSampleNum > 2000,\n          footerStore, updateEBM))\n      );\n\n    bboxGroup.select('rect.original-bbox')\n      .classed('animated', true);\n\n    // Show the last edit\n    if (state.additiveDataLastEdit !== undefined) {\n      drawLastEdit(state, svg);\n    }\n\n    // Copy current metrics as last metrics\n    if (!sidebarInfo.hasUpdatedLastMetrics) {\n      sidebarInfo.curGroup = 'last';\n      sidebarInfo.hasUpdatedLastMetrics = true;\n      sidebarStore.set(sidebarInfo);\n    }\n\n    // Update the footer message\n    footerStore.update(value => {\n      value.help = '<b>Drag</b> the <b>selected region</b> to change score';\n      return value;\n    });\n  };\n\n  /**\n   * Call this handler when users click the check button\n   */\n  const multiMenuMoveCheckClicked = async () => {\n    // Check if user is in previous commit\n    if (sidebarInfo.previewHistory) {\n      let proceed = confirm('Current graph is not on the latest edit, committing' +\n        ' this edit would overwrite all later edits on this feature. Is it OK?'\n      );\n      if (!proceed) {\n        multiMenuMoveCancelClicked();\n        return;\n      }\n    }\n\n    // Save the changes\n    state.pointData = JSON.parse(JSON.stringify(state.pointDataBuffer));\n    state.additiveData = JSON.parse(JSON.stringify(state.additiveDataBuffer));\n\n    // Remove the drag\n    let bboxGroup = d3.select(svg)\n      .select('g.line-chart-content-group g.select-bbox-group')\n      .style('cursor', null)\n      .on('.drag', null);\n\n    // stop the animation\n    bboxGroup.select('rect.original-bbox')\n      .classed('animated', false);\n\n    // Move the menu bar\n    d3.select(multiMenu)\n      .call(moveMenubar, svg, component);\n\n    // Save this change to lastEdit, update lastEdit graph\n    if (state.additiveDataLastEdit !== undefined) {\n      state.additiveDataLastLastEdit = JSON.parse(JSON.stringify(state.additiveDataLastEdit));\n    }\n    state.additiveDataLastEdit = JSON.parse(JSON.stringify(state.additiveData));\n\n    // Update metrics\n    sidebarInfo.curGroup = 'commit';\n    sidebarInfo.hasUpdatedLastMetrics = false;\n    sidebarStore.set(sidebarInfo);\n\n    // Query the global metrics and save it in the history if the scope is not in global\n    if (sidebarInfo.effectScope !== 'global') {\n      let metrics = await getEBMMetrics('global');\n      transferMetricToSidebar(metrics, 'commit-not-global');\n    }\n\n    // Wait until the the effect sidebar is updated\n    if (ebm.isDummy === undefined) {\n      while (sidebarInfo.curGroup !== 'commitCompleted') {\n        await new Promise(r => setTimeout(r, 500));\n      }\n    }\n\n    // Update the footer message\n    let curEditBaseline = 0;\n    footerStore.update(value => {\n      // Reset the baseline\n      curEditBaseline = value.baseline;\n      value.baseline = 0;\n      value.baselineInit = false;\n      value.type = '';\n      value.state = '';\n      value.help = '<b>Drag</b> to marquee select, <b>Scroll</b> to zoom';\n      return value;\n    });\n\n    // Save into the history\n    // Generate the description message\n    const binNum = state.selectedInfo.nodeData.length;\n    const binLeft = state.selectedInfo.nodeData[0];\n    const binRight = state.pointData[state.pointData[state.selectedInfo.nodeData[binNum - 1].id].rightPointID];\n    const binRange = binRight === undefined ? `${round(binLeft.x, 2)} <= x` : `${round(binLeft.x, 2)} <= x < ${round(binRight.x, 2)}`;\n    const message = `${curEditBaseline >= 0 ? 'Increased' : 'Decreased'} scores of ${binNum} ` +\n      `bins (${binRange}) by ${round(Math.abs(curEditBaseline), 2)}.`;\n\n    pushCurStateToHistoryStack(state, 'move', message, historyStore, sidebarStore);\n\n    // Any new commit purges the redo stack\n    redoStack = [];\n  };\n\n  /**\n   * Call this handler when users click the cancel button\n   */\n  const multiMenuMoveCancelClicked = () => {\n    // Discard the changes\n    state.pointDataBuffer = null;\n    state.additiveDataBuffer = null;\n\n    // Recover the original graph\n    redrawOriginal(state, svg, true, () => {\n      // Move the menu bar after animation\n      d3.select(multiMenu)\n        .call(moveMenubar, svg, component);\n\n      // Recover the EBM\n      updateEBM('recoverEBM');\n    });\n\n    // Update the metrics\n    sidebarInfo.curGroup = 'recover';\n    sidebarInfo.hasUpdatedLastMetrics = false;\n    sidebarStore.set(sidebarInfo);\n\n    // Remove the drag\n    let bboxGroup = d3.select(svg)\n      .select('g.line-chart-content-group g.select-bbox-group')\n      .style('cursor', null)\n      .on('.drag', null);\n\n    // stop the animation\n    bboxGroup.select('rect.original-bbox')\n      .classed('animated', false);\n\n    // Redraw the last edit if possible\n    if (state.additiveDataLastLastEdit !== undefined){\n      state.additiveDataLastEdit = JSON.parse(JSON.stringify(state.additiveDataLastLastEdit));\n      drawLastEdit(state, svg);\n      // Prepare for next redrawing after recovering the last last edit graph\n      state.additiveDataLastEdit = JSON.parse(JSON.stringify(state.additiveData));\n    }\n\n    // Update the footer message\n    footerStore.update(value => {\n      // Reset the baseline\n      value.baseline = 0;\n      value.baselineInit = false;\n      value.state = '';\n      value.type = '';\n      value.help = '<b>Drag</b> to marquee select, <b>Scroll</b> to zoom';\n      return value;\n    });\n  };\n\n  /**\n   * Event handler when user clicks the increasing button\n  */\n  const multiMenuIncreasingClicked = async () => {\n    console.log('increasing clicked');\n\n    // Animate the bbox\n    d3.select(svg)\n      .select('g.line-chart-content-group g.select-bbox-group')\n      .select('rect.original-bbox')\n      .classed('animated', true);\n\n    // Check if the selected nodes are in a continuous range\n\n    // Fit an isotonic regression model\n    let xs = [];\n    let ys = [];\n    let ws = [];\n\n    state.selectedInfo.nodeData.forEach((d) => {\n      xs.push(state.pointData[d.id].x);\n      ys.push(state.pointData[d.id].y);\n      ws.push(state.pointData[d.id].count);\n    });\n\n    // WASM only uses 1-3ms for the whole graph!\n    increasingISO.reset();\n    increasingISO.fit(xs, ys, ws);\n    let isoYs = increasingISO.predict(xs);\n\n    state.pointDataBuffer = JSON.parse(JSON.stringify(state.pointData));\n    state.additiveDataBuffer = JSON.parse(JSON.stringify(state.additiveData));\n\n    // Update the last edit graph\n    drawLastEdit(state, svg);\n\n    redrawMonotone(state, svg, isoYs, () => {\n      updateEBM('current');\n    });\n    myContextMenu.showConfirmation('increasing', 600);\n\n    // Copy current metrics as last metrics\n    if (!sidebarInfo.hasUpdatedLastMetrics) {\n      sidebarInfo.curGroup = 'last';\n      sidebarInfo.hasUpdatedLastMetrics = true;\n      sidebarStore.set(sidebarInfo);\n    }\n\n    // Update the footer message\n    footerStore.update(value => {\n      value.state = `Made ${xs.length} bins <b>monotonically increasing</b>`;\n      value.type = 'increasing';\n      return value;\n    });\n  };\n\n  /**\n   * Event handler when user clicks the decreasing button\n   */\n  const multiMenuDecreasingClicked = () => {\n    console.log('decreasing clicked');\n\n    // Animate the bbox\n    d3.select(svg)\n      .select('g.line-chart-content-group g.select-bbox-group')\n      .select('rect.original-bbox')\n      .classed('animated', true);\n\n    // Fit an isotonic regression model\n    let xs = [];\n    let ys = [];\n    let ws = [];\n\n    state.selectedInfo.nodeData.forEach((d) => {\n      xs.push(state.pointData[d.id].x);\n      ys.push(state.pointData[d.id].y);\n      ws.push(state.pointData[d.id].count);\n    });\n\n    // WASM only uses 1-3ms for the whole graph!\n    decreasingISO.reset();\n    decreasingISO.fit(xs, ys, ws);\n    let isoYs = decreasingISO.predict(xs);\n\n    state.pointDataBuffer = JSON.parse(JSON.stringify(state.pointData));\n    state.additiveDataBuffer = JSON.parse(JSON.stringify(state.additiveData));\n\n    // Update the last edit graph\n    drawLastEdit(state, svg);\n\n    redrawMonotone(state, svg, isoYs, () => {updateEBM('current');});\n    myContextMenu.showConfirmation('decreasing', 600);\n\n    // Copy current metrics as last metrics\n    if (!sidebarInfo.hasUpdatedLastMetrics) {\n      sidebarInfo.curGroup = 'last';\n      sidebarInfo.hasUpdatedLastMetrics = true;\n      sidebarStore.set(sidebarInfo);\n    }\n\n    // Update the footer message\n    footerStore.update(value => {\n      value.state = `Made ${xs.length} bins <b>monotonically decreasing</b>`;\n      value.type = 'decreasing';\n      return value;\n    });\n  };\n\n  /**\n   * Event handler when user clicks the interpolation button\n   */\n  const multiMenuInterpolationClicked = () => {\n    console.log('interpolation clicked');\n\n    // Animate the bbox\n    d3.select(svg)\n      .select('g.line-chart-content-group g.select-bbox-group')\n      .select('rect.original-bbox')\n      .classed('animated', true);\n\n    state.pointDataBuffer = JSON.parse(JSON.stringify(state.pointData));\n    state.additiveDataBuffer = JSON.parse(JSON.stringify(state.additiveData));\n\n    // Special for interpolation: we need to create a buffer for the selectedInfo\n    // as well (selectedInfo.boundingBox would not change, no need to buffer it)\n    state.selectedInfo.nodeDataBuffer = JSON.parse(JSON.stringify(state.selectedInfo.nodeData));\n\n    // Update the last edit graph\n    drawLastEdit(state, svg);\n\n    // Set the EBM model (need to change bin definition)\n    const callBack = () => {setEBM('current', state.pointDataBuffer);};\n\n    // Determine whether to use in-place interpolation\n    if (state.selectedInfo.nodeData.length == 1) {\n      return;\n    } else if (state.selectedInfo.nodeData.length == 2) {\n      multiMenuControlInfo.interpolationMode = 'equal';\n      stepInterpolate(state, svg, multiMenuControlInfo.step, callBack);\n    } else {\n      multiMenuControlInfo.interpolationMode = 'inplace';\n      inplaceInterpolate(state, svg, callBack);\n    }\n\n    myContextMenu.showConfirmation('interpolation', 600);\n\n    // Copy current metrics as last metrics\n    if (!sidebarInfo.hasUpdatedLastMetrics) {\n      sidebarInfo.curGroup = 'last';\n      sidebarInfo.hasUpdatedLastMetrics = true;\n      sidebarStore.set(sidebarInfo);\n    }\n\n    // Update the footer message\n    footerStore.update(value => {\n      value.interpolateStyle = 'Interpolated';\n      value.state = `<b>Interpolated</b> ${state.selectedInfo.nodeData.length} bins <b>in place</b>`;\n      value.interpolateEqual = 'in place';\n      if (multiMenuControlInfo.interpolationMode === 'equal') {\n        value.type = 'equal-interpolate';\n      } else {\n        value.type = 'inplace-interpolate';\n      }\n      return value;\n    });\n  };\n\n  /**\n   * Event handler when user clicks the control button in the interpolation sub-menu\n  */\n  const multiMenuInterpolateUpdated = async () => {\n    console.log('interpolation updated');\n    let beforeBinNum = 0;\n\n    const callBack = () => {\n      setEBM('current', state.pointDataBuffer);\n    };\n\n    if (multiMenuControlInfo.interpolationMode === 'inplace') {\n      // Special case: we want to do inplace interpolation from the original data\n      // Need to recover original data\n      state.pointDataBuffer = JSON.parse(JSON.stringify(state.pointData));\n      state.additiveDataBuffer = JSON.parse(JSON.stringify(state.additiveData));\n      state.selectedInfo.nodeDataBuffer = JSON.parse(JSON.stringify(state.selectedInfo.nodeData));\n      beforeBinNum = state.selectedInfo.nodeDataBuffer.length;\n      inplaceInterpolate(state, svg, callBack);\n\n      footerValue.interpolateStyle = 'Interpolated';\n      footerValue.interpolateEqual = 'in place';\n\n    } else if (multiMenuControlInfo.interpolationMode === 'equal') {\n      // Here we don't reset the pointDataBuffer\n      // If user clicks here direction => step interpolate between start & end\n      // If user has clicked regression => regression with equal bins\n      beforeBinNum = state.selectedInfo.nodeDataBuffer.length;\n      stepInterpolate(state, svg, multiMenuControlInfo.step, callBack);\n\n      footerValue.interpolateEqual = `with ${multiMenuControlInfo.step} equal-size bins`;\n\n    } else if (multiMenuControlInfo.interpolationMode === 'regression') {\n      // Need to recover original data\n      state.pointDataBuffer = JSON.parse(JSON.stringify(state.pointData));\n      state.additiveDataBuffer = JSON.parse(JSON.stringify(state.additiveData));\n      state.selectedInfo.nodeDataBuffer = JSON.parse(JSON.stringify(state.selectedInfo.nodeData));\n      beforeBinNum = state.selectedInfo.nodeDataBuffer.length;\n\n      regressionInterpolate(state, svg, callBack);\n\n      footerValue.interpolateStyle = 'Regression transformed';\n      footerValue.interpolateEqual = 'in place';\n\n    } else {\n      console.error('Unknown regression mode ', multiMenuControlInfo.interpolationMode);\n    }\n\n    // Update the footer message\n    footerValue.state = `<b>${footerValue.interpolateStyle}</b> ${beforeBinNum}\n      bins <b>${footerValue.interpolateEqual}</b>`;\n\n    if (footerValue.interpolateEqual !== 'in place') {\n      if (footerValue.interpolateStyle === 'Interpolated') {\n        footerValue.type = 'equal-interpolate';\n      } else {\n        footerValue.type = 'equal-regression';\n      }\n    } else {\n      if (footerValue.interpolateStyle === 'Interpolated') {\n        footerValue.type = 'inplace-interpolate';\n      } else {\n        footerValue.type = 'inplace-regression';\n      }\n    }\n\n    footerStore.set(footerValue);\n  };\n\n  const multiMenuMergeClicked = () => {\n    console.log('merge clicked');\n\n    // Animate the bbox\n    d3.select(svg)\n      .select('g.line-chart-content-group g.select-bbox-group')\n      .select('rect.original-bbox')\n      .classed('animated', true);\n\n    state.pointDataBuffer = JSON.parse(JSON.stringify(state.pointData));\n    state.additiveDataBuffer = JSON.parse(JSON.stringify(state.additiveData));\n\n    // Update EBM\n    const callBack = () => {updateEBM('current');};\n\n    // Update the last edit graph\n    drawLastEdit(state, svg);\n\n    merge(state, svg, 'left', callBack);\n\n    myContextMenu.showConfirmation('merge', 600);\n\n    // Copy current metrics as last metrics\n    if (!sidebarInfo.hasUpdatedLastMetrics) {\n      sidebarInfo.curGroup = 'last';\n      sidebarInfo.hasUpdatedLastMetrics = true;\n      sidebarStore.set(sidebarInfo);\n    }\n\n    // Update the footer message\n    footerStore.update(value => {\n      value.type = 'align';\n      value.state = `Set scores of ${state.selectedInfo.nodeData.length} bins to\n        <b>${round(state.selectedInfo.nodeData[0].y, 4)}</b>`;\n      return value;\n    });\n  };\n\n  const multiMenuInputChanged = () => {\n    // Animate the bbox\n    d3.select(svg)\n      .select('g.line-chart-content-group g.select-bbox-group')\n      .select('rect.original-bbox')\n      .classed('animated', true);\n\n    state.pointDataBuffer = JSON.parse(JSON.stringify(state.pointData));\n    state.additiveDataBuffer = JSON.parse(JSON.stringify(state.additiveData));\n\n    // Update EBM\n    const callBack = () => {updateEBM('current');};\n    merge(state, svg, multiMenuControlInfo.setValue, callBack);\n\n    myContextMenu.showConfirmation('change', 600);\n\n    // Copy current metrics as last metrics\n    if (!sidebarInfo.hasUpdatedLastMetrics) {\n      sidebarInfo.curGroup = 'last';\n      sidebarInfo.hasUpdatedLastMetrics = true;\n      sidebarStore.set(sidebarInfo);\n    }\n\n    const target = round(multiMenuControlInfo.setValue, 4);\n\n    // Update the footer message\n    footerStore.update(value => {\n      value.type = 'align';\n      value.state = `Set scores of ${state.selectedInfo.nodeData.length} bins to <b>${target}</b>`;\n      return value;\n    });\n  };\n\n  const multiMenuMergeUpdated = () => {\n    state.pointDataBuffer = JSON.parse(JSON.stringify(state.pointData));\n    state.additiveDataBuffer = JSON.parse(JSON.stringify(state.additiveData));\n\n    // Update EBM\n    const callBack = () => {updateEBM('current');};\n    let target = merge(state, svg, multiMenuControlInfo.mergeMode, callBack);\n    target = round(target, 4);\n\n    // Copy current metrics as last metrics\n    if (!sidebarInfo.hasUpdatedLastMetrics) {\n      sidebarInfo.curGroup = 'last';\n      sidebarInfo.hasUpdatedLastMetrics = true;\n      sidebarStore.set(sidebarInfo);\n    }\n\n    // Update the footer message\n    footerStore.update(value => {\n      value.type = 'align';\n      value.state = `Set scores of ${state.selectedInfo.nodeData.length} bins to <b>${target}</b>`;\n      return value;\n    });\n  };\n\n  const multiMenuDeleteClicked = () => {\n    console.log('delete clicked');\n\n    // Animate the bbox\n    d3.select(svg)\n      .select('g.line-chart-content-group g.select-bbox-group')\n      .select('rect.original-bbox')\n      .classed('animated', true);\n\n    state.pointDataBuffer = JSON.parse(JSON.stringify(state.pointData));\n    state.additiveDataBuffer = JSON.parse(JSON.stringify(state.additiveData));\n\n    // Update the last edit graph\n    drawLastEdit(state, svg);\n\n    // Update EBM\n    const callBack = () => {updateEBM('current');};\n\n    merge(state, svg, 0, callBack);\n\n    myContextMenu.showConfirmation('delete', 600);\n\n    // Copy current metrics as last metrics\n    if (!sidebarInfo.hasUpdatedLastMetrics) {\n      sidebarInfo.curGroup = 'last';\n      sidebarInfo.hasUpdatedLastMetrics = true;\n      sidebarStore.set(sidebarInfo);\n    }\n\n    // Update the footer message\n    footerStore.update(value => {\n      value.type = 'delete';\n      value.state = `Set scores of ${state.selectedInfo.nodeData.length} bins to <b>${0}</b>`;\n      return value;\n    });\n  };\n\n  /**\n   * Event handler when user clicks the check icon in the sub-menu\n   */\n  const multiMenuSubItemCheckClicked = () => {\n    // Check if user is in previous commit\n    if (sidebarInfo.previewHistory) {\n      let proceed = confirm('Current graph is not on the latest edit, committing' +\n        ' this edit would overwrite all later edits on this feature. Is it OK?'\n      );\n      if (!proceed) {\n        multiMenuMoveCancelClicked();\n        return;\n      }\n    }\n\n    if (multiMenuControlInfo.subItemMode === null) {\n      console.error('No sub item is selected but check is clicked!');\n    }\n\n    const existingModes = new Set(['increasing', 'decreasing', 'interpolation', 'change', 'merge', 'delete']);\n    if (!existingModes.has(multiMenuControlInfo.subItemMode)) {\n      console.error(`Encountered unknown subItemMode: ${multiMenuControlInfo.subItemMode}`);\n    }\n\n    // Stop the bbox animation\n    d3.select(svg)\n      .select('g.line-chart-content-group g.select-bbox-group')\n      .select('rect.original-bbox')\n      .classed('animated', false);\n\n    const binNum = state.selectedInfo.nodeData.length;\n\n    // Save the changes\n    state.pointData = JSON.parse(JSON.stringify(state.pointDataBuffer));\n    state.additiveData = JSON.parse(JSON.stringify(state.additiveDataBuffer));\n\n    // Update the last edit data to current data (redraw the graph only when user enters\n    // editing mode next time)\n    if (state.additiveDataLastEdit !== undefined) {\n      state.additiveDataLastLastEdit = JSON.parse(JSON.stringify(state.additiveDataLastEdit));\n    }\n    state.additiveDataLastEdit = JSON.parse(JSON.stringify(state.additiveData));\n\n    // Special [interpolation]: need to save the new selectedInfo as well\n    if (multiMenuControlInfo.subItemMode === 'interpolation') {\n      state.selectedInfo.nodeData = JSON.parse(JSON.stringify(state.selectedInfo.nodeDataBuffer));\n      state.selectedInfo.nodeDataBuffer = null;\n    }\n\n    // Hide the confirmation panel\n    myContextMenu.hideConfirmation(multiMenuControlInfo.subItemMode);\n\n    // Move the menu bar\n    d3.select(multiMenu)\n      .call(moveMenubar, svg, component);\n\n    // Exit the sub-item mode\n    multiMenuControlInfo.subItemMode = null;\n    multiMenuControlInfo.setValue = null;\n\n    // Update metrics\n    sidebarInfo.curGroup = 'commit';\n    sidebarInfo.hasUpdatedLastMetrics = false;\n    sidebarStore.set(sidebarInfo);\n\n    // Update the footer message\n    let editType = '';\n    footerStore.update(value => {\n      editType = value.type;\n      // Reset the baseline\n      value.baseline = 0;\n      value.baselineInit = false;\n      value.state = '';\n      value.type = '';\n      value.help = '<b>Drag</b> to marquee select, <b>Scroll</b> to zoom';\n      return value;\n    });\n\n    // Push the commit to history\n\n    // Get the info of edited bins\n    const binLeft = state.selectedInfo.nodeData[0];\n    const binRight = state.pointData[state.pointData[\n      state.selectedInfo.nodeData[state.selectedInfo.nodeData.length - 1].id].rightPointID];\n    const binRange = binRight === undefined ? `${round(binLeft.x, 2)} <= x` : `${round(binLeft.x, 2)} <= x < ${round(binRight.x, 2)}`;\n    let description = '';\n\n    switch(editType) {\n    case 'increasing':\n      description = `Made ${binNum} bins (${binRange}) monotonically increasing.`;\n      break;\n    case 'decreasing':\n      description = `Made ${binNum} bins (${binRange}) monotonically decreasing.`;\n      break;\n    case 'inplace-interpolate':\n      description = `Interpolated ${binNum} bins (${binRange}) in place.`;\n      break;\n    case 'inplace-regression':\n      description = `Regression transformed ${binNum} bins (${binRange}) in place.`;\n      break;\n    case 'equal-interpolate':\n      description = `Interpolated ${binNum} bins (${binRange}) into ${multiMenuControlInfo.step} equal-size bins.`;\n      break;\n    case 'equal-regression':\n      description = `Regression transformed ${binNum} bins (${binRange}) into ${multiMenuControlInfo.step} equal-size bins.`;\n      break;\n    case 'align':\n      description = `Set ${binNum} bins (${binRange}) to score ${round(state.selectedInfo.nodeData[0].y, 4)}.`;\n      break;\n    case 'delete':\n      description = `Set ${binNum} bins (${binRange}) to score 0.`;\n      break;\n    default:\n      break;\n    }\n\n    pushCurStateToHistoryStack(state, editType, description, historyStore, sidebarStore);\n\n    // Any new commit purges the redo stack\n    redoStack = [];\n  };\n\n  /**\n   * Event handler when user clicks the cross icon in the sub-menu\n   */\n  const multiMenuSubItemCancelClicked = (e, cancelFromMove = false) => {\n    console.log('sub item cancel clicked');\n    if (!cancelFromMove && multiMenuControlInfo.subItemMode === null) {\n      console.error('No sub item is selected but check is clicked!');\n    }\n\n    const existingModes = new Set(['increasing', 'decreasing', 'interpolation', 'change', 'merge', 'delete']);\n    if (!cancelFromMove && !existingModes.has(multiMenuControlInfo.subItemMode)) {\n      console.error(`Encountered unknown subItemMode: ${multiMenuControlInfo.subItemMode}`);\n    }\n\n    // Stop the bbox animation\n    d3.select(svg)\n      .select('g.line-chart-content-group g.select-bbox-group')\n      .select('rect.original-bbox')\n      .classed('animated', false);\n\n    // Discard the change\n    state.pointDataBuffer = null;\n    state.additiveDataBuffer = null;\n\n    // Recover the last edit graph\n    if (state.additiveDataLastLastEdit !== undefined){\n      state.additiveDataLastEdit = JSON.parse(JSON.stringify(state.additiveDataLastLastEdit));\n      drawLastEdit(state, svg);\n      // Prepare for next redrawing after recovering the last last edit graph\n      state.additiveDataLastEdit = JSON.parse(JSON.stringify(state.additiveData));\n    }\n\n    // If the current edit is interpolation, we need to recover the bin definition\n    // in the EBM model\n    let callBack = () => {};\n\n    if (!cancelFromMove) {\n      if (multiMenuControlInfo.subItemMode === 'interpolation') {\n        callBack = () => {setEBM('current', state.pointData);};\n      } else {\n        // For other types of update, we need to revoke the changes\n        callBack = () => {updateEBM('recoverEBM');};\n      }\n\n      // Update the metrics\n      sidebarInfo.curGroup = 'recover';\n      sidebarInfo.hasUpdatedLastMetrics = false;\n      sidebarStore.set(sidebarInfo);\n    }\n\n    // Recover the original graph\n    redrawOriginal(state, svg, true, () => {\n      // Move the menu bar after the animation\n      d3.select(multiMenu)\n        .call(moveMenubar, svg, component);\n\n      // Update the EBM in \"background\"\n      callBack();\n    });\n\n    // Hide the confirmation panel\n    myContextMenu.hideConfirmation(multiMenuControlInfo.subItemMode);\n\n    // Exit the sub-item mode\n    multiMenuControlInfo.subItemMode = null;\n    multiMenuControlInfo.setValue = null;\n\n    // Update the footer message\n    footerStore.update(value => {\n      // Reset the baseline\n      value.baseline = 0;\n      value.baselineInit = false;\n      value.state = '';\n      value.type = '';\n      value.help = '<b>Drag</b> to marquee select, <b>Scroll</b> to zoom';\n      return value;\n    });\n  };\n\n  $: featureData && ebm && mounted && !initialized && featureData.name === ebm.editingFeatureName && drawFeature(featureData);\n\n</script>\n\n<style type='text/scss'>\n  @import '../define';\n  @import './common.scss';\n\n  :global(.explain-panel circle.node) {\n    fill: $blue-icon;\n    stroke: change-color($blue-icon, $lightness: 95%) ;\n  }\n\n  :global(.explain-panel circle.node.selected) {\n    fill: $orange-400;\n    stroke: white;\n  }\n\n  :global(.explain-panel .additive-line-segment) {\n    stroke-linejoin: round;\n    stroke-linecap: round;\n  }\n\n  :global(.explain-panel path.additive-line-segment.selected) {\n    stroke: adjust-color($orange-400, $lightness: -8%);\n  }\n\n  :global(.explain-panel .line-chart-content-group) {\n    cursor: grab;\n  }\n\n  :global(.explain-panel .line-chart-content-group:active) {\n    cursor: grabbing;\n  }\n\n  :global(.explain-panel .line-chart-content-group.select-mode) {\n    cursor: crosshair;\n  }\n\n  :global(.explain-panel .line-chart-content-group.select-mode:active) {\n    cursor: crosshair;\n  }\n\n  :global(.explain-panel .svg-icon) {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    :global(svg) {\n      width: 1.2em;\n      height: 1.2em;\n    }\n  }\n\n  :global(.explain-panel .select-bbox) {\n    fill: none;\n  }\n\n  :global(.explain-panel .select-bbox-group) {\n    pointer-events: all;\n  }\n\n  @keyframes dash {\n      to {\n      stroke-dashoffset: -1000;\n    }\n  }\n\n  @-moz-keyframes dash {\n      to {\n      stroke-dashoffset: -1000;\n    }\n  }\n\n  @-webkit-keyframes dash {\n      to {\n      stroke-dashoffset: -1000;\n    }\n  }\n\n  :global(.explain-panel rect.original-bbox.animated) {\n    -webkit-animation: dash 50s infinite linear;\n    animation: dash 50s infinite linear;\n  }\n\n  .context-menu-container {\n    pointer-events: fill;\n\n    &.hidden {\n      pointer-events: none;\n      cursor: none;\n    }\n  }\n\n</style>\n\n<div class='explain-panel' bind:this={component}>\n    <a id=\"download-anchor\" style=\"display:none\"> </a>\n\n    <div class='context-menu-container hidden' bind:this={multiMenu}>\n      <ContextMenu\n        bind:controlInfo={multiMenuControlInfo}\n        bind:this={myContextMenu}\n        on:inputChanged={multiMenuInputChanged}\n        on:moveButtonClicked={multiMenuMoveClicked}\n        on:increasingClicked={multiMenuIncreasingClicked}\n        on:decreasingClicked={multiMenuDecreasingClicked}\n        on:interpolationClicked={multiMenuInterpolationClicked}\n        on:mergeClicked={multiMenuMergeClicked}\n        on:mergeUpdated={multiMenuMergeUpdated}\n        on:deleteClicked={multiMenuDeleteClicked}\n        on:moveCheckClicked={multiMenuMoveCheckClicked}\n        on:moveCancelClicked={multiMenuMoveCancelClicked}\n        on:subItemCheckClicked={multiMenuSubItemCheckClicked}\n        on:subItemCancelClicked={multiMenuSubItemCancelClicked}\n        on:interpolateUpdated={multiMenuInterpolateUpdated}\n      />\n    </div>\n\n  <div class='svg-container'>\n    <svg class='svg-explainer' width={svgWidth} height={svgHeight} bind:this={svg}></svg>\n  </div>\n\n</div>","import d3 from '../../utils/d3-import';\n\nexport class SelectedInfo {\n  constructor() {\n    this.hasSelected = false;\n    this.nodeData = [];\n    this.boundingBox = [];\n    this.nodeDataBuffer = null;\n  }\n\n  computeBBox() {\n    if (this.nodeData.length > 0) {\n      let minIDIndex = -1;\n      let maxIDIndex = -1;\n      let minID = Infinity;\n      let maxID = -Infinity;\n      this.nodeData.forEach((d, i) => {\n        if (d.id > maxID) {\n          maxID = d.id;\n          maxIDIndex = i;\n        }\n\n        if (d.id < minID) {\n          minID = d.id;\n          minIDIndex = i;\n        }\n      });\n\n      this.boundingBox = [{\n        x1: this.nodeData[minIDIndex].x,\n        y1: d3.max(this.nodeData.map(d => d.y)),\n        x2: this.nodeData[maxIDIndex].x,\n        y2: d3.min(this.nodeData.map(d => d.y))\n      }];\n    } else {\n      this.boundingBox = [];\n    }\n  }\n\n  computeBBoxBuffer() {\n    if (this.nodeDataBuffer.length > 0) {\n      this.boundingBox = [{\n        x1: d3.min(this.nodeDataBuffer.map(d => d.x)),\n        y1: d3.max(this.nodeDataBuffer.map(d => d.y)),\n        x2: d3.max(this.nodeDataBuffer.map(d => d.x)),\n        y2: d3.min(this.nodeDataBuffer.map(d => d.y))\n      }];\n    } else {\n      this.boundingBox = [];\n    }\n  }\n\n  updateNodeData(pointData) {\n    for (let i = 0; i < this.nodeData.length; i++) {\n      this.nodeData[i].x = pointData[this.nodeData[i].id].x;\n      this.nodeData[i].y = pointData[this.nodeData[i].id].y;\n    }\n  }\n}","import d3 from '../../utils/d3-import';\nimport { moveMenubar } from '../continuous/cont-bbox';\n\nexport const rExtent = [3, 16];\nexport const zoomScaleExtent = [1, 4];\n\nexport const zoomStart = (state, multiMenu) => {\n  if (state.selectedInfo.hasSelected) {\n    d3.select(multiMenu)\n      .classed('hidden', true);\n  }\n};\n\nexport const zoomEnd = (state, multiMenu) => {\n  if (state.selectedInfo.hasSelected) {\n    d3.select(multiMenu)\n      .classed('hidden', false);\n  }\n};\n\n/**\n * Update the view with zoom transformation\n * @param event Zoom event\n * @param xScale Scale for the x-axis\n * @param yScale Scale for the y-axis\n */\nexport const zoomed = (event, state, xScale, yScale, svg,\n  linePathWidth, nodeStrokeWidth, yAxisWidth, chartWidth, chartHeight,\n  multiMenu, component\n) => {\n\n  let svgSelect = d3.select(svg);\n  let transform = event.transform;\n\n  // Transform the axises\n  // let zXScale = transform.rescaleX(xScale);\n  let zXScale = d3.scalePoint()\n    .domain(xScale.domain())\n    .padding(0.7)\n    .range([transform.applyX(0), transform.applyX(chartWidth)]);\n    // Do not use round here, it would make the transition shaking (interpolation)\n    // .round(true);\n\n  let zYScale = transform.rescaleY(yScale);\n\n  state.curXScale = zXScale;\n  state.curYScale = zYScale;\n  state.curTransform = transform;\n\n  // Redraw the scales\n  svgSelect.select('g.x-axis')\n    .call(d3.axisBottom(zXScale));\n\n  svgSelect.select('g.y-axis')\n    .call(d3.axisLeft(zYScale).tickFormat(d => Math.abs(d) >= 1000 ? d / 1000 + 'K' : d));\n\n  // Transform the bars\n  svgSelect.selectAll('g.scatter-plot-bar-group')\n    .attr('transform', transform);\n\n  // Transform the circles\n  svgSelect.selectAll('g.scatter-plot-dot-group')\n    .attr('transform', transform);\n\n  // Transform the confidence lines\n  let confidenceGroup = svgSelect.selectAll('g.scatter-plot-confidence-group')\n    .attr('transform', transform);\n\n  // Rescale the stroke width a little bit\n  confidenceGroup.style('stroke-width', 2 / transform.k);\n\n  // Transform the confidence rectangles\n  svgSelect.select('g.line-chart-confidence-group')\n    .attr('transform', transform);\n\n  // Transform the density rectangles\n  // Here we want to translate and scale the x axis, and keep y axis consistent\n  svgSelect.select('g.hist-chart-content-group')\n    .attr('transform', `translate(${yAxisWidth + transform.x},\n        ${chartHeight})scale(${transform.k}, 1)`);\n\n  // Transform the selection bbox if applicable\n  if (state.selectedInfo.hasSelected) {\n    // Here we don't use transform, because we want to keep the gap between\n    // the nodes and bounding box border constant across all scales\n\n    // We want to compute the world coordinate here\n    // Need to transfer back the scale factor from the node radius\n    let curPadding = (rExtent[0] + state.bboxPadding) * state.curTransform.k;\n\n    svgSelect.select('g.scatter-plot-content-group')\n      .selectAll('rect.select-bbox')\n      .attr('x', d => state.curXScale(d.x1) - curPadding)\n      .attr('y', d => state.curYScale(d.y1) - curPadding)\n      .attr('width', d => state.curXScale(d.x2) - state.curXScale(d.x1) + 2 * curPadding)\n      .attr('height', d => state.curYScale(d.y2) - state.curYScale(d.y1) + 2 * curPadding);\n\n    // Also transform the menu bar\n    d3.select(multiMenu)\n      .call(moveMenubar, svg, component);\n  }\n\n  // Draw or update the grid\n  svgSelect.select('g.scatter-plot-grid-group')\n    .call(drawGrid, zXScale, zYScale, chartWidth, chartHeight);\n\n};\n\n/**\n * Use linear interpolation to scale the node radius during zooming\n * It is actually kind of tricky, there should be better functions\n * (1) In overview, we want the radius to be small to avoid overdrawing;\n * (2) When zooming in, we want the radius to increase (slowly)\n * (3) Need to counter the zoom's scaling effect\n * @param k Scale factor\n */\nexport const rScale = (k) => {\n  let alpha = (k - zoomScaleExtent[0]) / (zoomScaleExtent[1] - zoomScaleExtent[0]);\n  alpha = d3.easeLinear(alpha);\n  let target = alpha * (rExtent[1] - rExtent[0]) + rExtent[0];\n  return target / k;\n};\n\nconst drawGrid = (g, xScale, yScale, lineChartWidth, lineChartHeight) => {\n  g.style('stroke', 'black')\n    .style('stroke-opacity', 0.08);\n\n  // Add vertical lines based on the xScale ticks\n  g.call(g => g.selectAll('line.grid-line-x')\n    .data(xScale.domain(), d => d)\n    .join(\n      enter => enter.append('line')\n        .attr('class', 'grid-line-x')\n        .attr('y2', lineChartHeight),\n      update => update,\n      exit => exit.remove()\n    )\n    .attr('x1', d => 0.5 + xScale(d))\n    .attr('x2', d => 0.5 + xScale(d))\n  );\n\n  // Add horizontal lines based on the yScale ticks\n  return g.call(g => g.selectAll('line.grid-line-y')\n    .data(yScale.ticks(), d => d)\n    .join(\n      enter => enter.append('line')\n        .attr('class', 'grid-line-y')\n        .classed('grid-line-y-0-solid', d => d === 0)\n        .attr('x2', lineChartWidth),\n      update => update,\n      exit => exit.remove()\n    )\n    .attr('y1', d => yScale(d))\n    .attr('y2', d => yScale(d))\n  );\n};","import d3 from '../../utils/d3-import';\nimport { rScale } from './cat-zoom';\nimport { round } from '../../utils/utils';\n\nlet dragTimeout = null;\n\nexport const dragged = (e, state, svg, sidebarStore, sidebarInfo, ebm, setEBM, footerStore) => {\n\n  const dataYChange = state.curYScale.invert(e.y) - state.curYScale.invert(e.y - e.dy);\n\n  // Change the data based on the y-value changes, then redraw nodes (preferred method)\n  state.selectedInfo.nodeData.forEach(d => {\n\n    // Step 1.1: update point data\n    state.pointDataBuffer[d.id].y += dataYChange;\n  });\n\n  // Step 1.2: update the bbox info\n  state.selectedInfo.updateNodeData(state.pointDataBuffer);\n  state.selectedInfo.computeBBox(state.pointDataBuffer);\n\n  // Draw the new graph\n  drawBufferGraph(state, svg, false, 400);\n\n  const useTimeout = sidebarInfo.totalSampleNum > 2000;\n\n  // Update the sidebar info\n  if (dragTimeout !== null) {\n    clearTimeout(dragTimeout);\n  }\n\n  dragTimeout = setTimeout(() => {\n    setEBM(state, ebm, 'current', state.pointDataBuffer, sidebarStore, sidebarInfo);\n  }, useTimeout ? 300 : 0);\n\n  // Update the footer message\n  footerStore.update(value => {\n    value.baseline += dataYChange;\n    value.state = `Scores <b>${value.baseline >= 0 ? 'increased' : 'decreased'}</b> by <b>${round(Math.abs(value.baseline), 2)}</b>`;\n    return value;\n  });\n};\n\nexport const drawBufferGraph = (state, svg, animated, duration, callback = () => { }) => {\n  const svgSelect = d3.select(svg);\n\n  let trans = d3.transition('buffer')\n    .duration(duration)\n    .ease(d3.easeCubicInOut)\n    .on('end', () => {\n      callback();\n    });\n\n  let nodes = svgSelect.select('g.scatter-plot-dot-group')\n    .selectAll('.additive-dot');\n\n  let bars = svgSelect.select('g.scatter-plot-bar-group.real')\n    .selectAll('.additive-bar');\n\n  // Only update, no enter or exit\n  if (animated) {\n    nodes.data(Object.values(state.pointDataBuffer), d => d.id)\n      .transition(trans)\n      .attr('cx', d => state.oriXScale(d.x))\n      .attr('cy', d => state.oriYScale(d.y));\n\n    bars.data(Object.values(state.pointDataBuffer), d => d.id)\n      .transition(trans)\n      .attr('y', d => d.y > 0 ? state.oriYScale(d.y) : state.oriYScale(0))\n      .attr('height', d => Math.abs(state.oriYScale(d.y) - state.oriYScale(0)));\n  } else {\n    nodes.data(Object.values(state.pointDataBuffer), d => d.id)\n      .attr('cx', d => state.oriXScale(d.x))\n      .attr('cy', d => state.oriYScale(d.y));\n\n    bars.data(Object.values(state.pointDataBuffer), d => d.id)\n      .attr('y', d => d.y > 0 ? state.oriYScale(d.y) : state.oriYScale(0))\n      .attr('height', d => Math.abs(state.oriYScale(d.y) - state.oriYScale(0)));\n  }\n\n  // Move the selected bbox\n  let curPadding = rScale(state.curTransform.k) + state.bboxPadding * state.curTransform.k;\n\n  if (animated) {\n    svgSelect.select('g.scatter-plot-content-group g.select-bbox-group')\n      .selectAll('rect.select-bbox')\n      .datum(state.selectedInfo.boundingBox[0])\n      .transition(trans)\n      .attr('y', d => state.curYScale(d.y1) - curPadding)\n      .attr('height', d => state.curYScale(d.y2) - state.curYScale(d.y1) + 2 * curPadding);\n  } else {\n    svgSelect.select('g.scatter-plot-content-group g.select-bbox-group')\n      .selectAll('rect.select-bbox')\n      .datum(state.selectedInfo.boundingBox[0])\n      .attr('y', d => state.curYScale(d.y1) - curPadding)\n      .attr('height', d => state.curYScale(d.y2) - state.curYScale(d.y1) + 2 * curPadding);\n  }\n};\n\nexport const drawLastEdit = (state, svg, barWidth) => {\n  if (state.pointDataLastEdit === undefined) {\n    return;\n  }\n\n  const svgSelect = d3.select(svg);\n\n  let trans = d3.transition('lastEdit')\n    .duration(400)\n    .ease(d3.easeCubicInOut);\n\n  let bars = svgSelect.select('g.scatter-plot-bar-group.last-edit-back')\n    .selectAll('.additive-bar');\n\n  let lines = svgSelect.select('g.scatter-plot-bar-group.last-edit-front')\n    .selectAll('.additive-line');\n\n  bars.data(Object.values(state.pointDataLastEdit), d => d.id)\n    .join(\n      enter => enter.append('rect')\n        .attr('class', 'additive-bar')\n        .attr('x', d => state.oriXScale(d.x) - barWidth / 2)\n        .attr('y', state.oriYScale(0))\n        .attr('width', barWidth)\n        .attr('height', 0)\n        .call(enter => enter.transition(trans)\n          .attr('y', d => d.y > 0 ? state.oriYScale(d.y) : state.oriYScale(0))\n          .attr('height', d => Math.abs(state.oriYScale(d.y) - state.oriYScale(0)))\n        ),\n      update => update.call(update => update.transition(trans)\n        .attr('y', d => d.y > 0 ? state.oriYScale(d.y) : state.oriYScale(0))\n        .attr('height', d => Math.abs(state.oriYScale(d.y) - state.oriYScale(0)))\n      )\n    );\n\n  lines.data(Object.values(state.pointDataLastEdit), d => d.id)\n    .join(\n      enter => enter.append('path')\n        .attr('class', 'additive-line')\n        .attr('d', d => `M ${state.oriXScale(d.x) - barWidth / 2}, ${state.oriYScale(d.y)} l ${barWidth}, 0`),\n      update => update.call(update => update.transition(trans)\n        .attr('d', d => `M ${state.oriXScale(d.x) - barWidth / 2}, ${state.oriYScale(d.y)} l ${barWidth}, 0`)\n      )\n    );\n\n};\n\nexport const grayOutConfidenceLine = (state, svg) => {\n  let editingIDs = new Set();\n  state.selectedInfo.nodeData.forEach(d => editingIDs.add(d.id));\n\n  d3.select(svg)\n    .selectAll('.scatter-plot-confidence-group .dot-confidence')\n    .filter(d => editingIDs.has(d.id))\n    .classed('edited', true);\n};\n\nexport const redrawOriginal = (state, svg, bounce=true, animationEndFunc=undefined) => {\n  const svgSelect = d3.select(svg);\n\n  let trans = d3.transition('restore')\n    .duration(500)\n    .ease(d3.easeElasticOut\n      .period(0.35)\n    );\n\n  let transNoBounce = d3.transition('restoreNo')\n    .duration(500)\n    .ease(d3.easeLinear);\n\n  if (!bounce) {\n    trans = transNoBounce;\n  }\n\n  if (animationEndFunc !== undefined) {\n    trans.on('end', animationEndFunc);\n  }\n\n  // Step 1: update the bbox info\n  state.selectedInfo.updateNodeData(state.pointData);\n  state.selectedInfo.computeBBox(state.pointData);\n\n  // Step 2: redraw the nodes and bars with original data\n  let nodes = svgSelect.select('g.scatter-plot-dot-group')\n    .selectAll('.additive-dot');\n\n  let bars = svgSelect.select('g.scatter-plot-bar-group.real')\n    .selectAll('.additive-bar');\n\n  // Only update, no enter or exit\n  nodes.data(Object.values(state.pointData), d => d.id)\n    .transition(trans)\n    .attr('cx', d => state.oriXScale(d.x))\n    .attr('cy', d => state.oriYScale(d.y));\n\n  bars.data(Object.values(state.pointData), d => d.id)\n    .transition(trans)\n    .attr('y', d => d.y > 0 ? state.oriYScale(d.y) : state.oriYScale(0))\n    .attr('height', d => Math.abs(state.oriYScale(d.y) - state.oriYScale(0)));\n\n  // Step 4: move the selected bbox to their original place\n  let curPadding = rScale(state.curTransform.k) + state.bboxPadding * state.curTransform.k;\n\n  svgSelect.select('g.scatter-plot-content-group g.select-bbox-group')\n    .selectAll('rect.select-bbox')\n    .datum(state.selectedInfo.boundingBox[0])\n    .transition(trans)\n    .attr('y', d => state.curYScale(d.y1) - curPadding)\n    .attr('height', d => state.curYScale(d.y2) - state.curYScale(d.y1) + 2 * curPadding);\n};\n\nexport const merge = (state, svg, value, callBack) => {\n  // Step 1: Find the left and right point in the selected region\n  let leftPoint = { x: Infinity, y: null, id: null };\n  let rightPoint = { x: -Infinity, y: null, id: null };\n\n  let sum = 0;\n  let count = 0;\n\n  let selectedNodeXs = new Set();\n\n  state.selectedInfo.nodeData.forEach((d, i) => {\n    if (i === 0) {\n      leftPoint = state.pointDataBuffer[d.id];\n    }\n    if (i === state.selectedInfo.nodeData.length - 1) {\n      rightPoint = state.pointDataBuffer[d.id];\n    }\n    selectedNodeXs.add(d.x);\n    sum += state.pointDataBuffer[d.id].y * state.pointDataBuffer[d.id].count;\n    count += state.pointDataBuffer[d.id].count;\n  });\n\n  const average = sum / count;\n\n  // Compute the merge values\n  let target = 0;\n\n  if (value === 'left') {\n    target = leftPoint.y;\n  } else if (value === 'right') {\n    target = rightPoint.y;\n  } else if (value === 'average') {\n    target = average;\n  } else {\n    target = value;\n  }\n\n  // Step 2: Iterate through all nodes in the region and change their values\n  Object.keys(state.pointDataBuffer).forEach(k => {\n    let curPoint = state.pointDataBuffer[k];\n    if (selectedNodeXs.has(curPoint.x)) {\n      state.pointDataBuffer[k].y = target;\n    }\n  });\n\n  // Step 3: update the bbox info\n  state.selectedInfo.updateNodeData(state.pointDataBuffer);\n  state.selectedInfo.computeBBox(state.pointDataBuffer);\n\n  // Step 5: Update the graph using new data\n  drawBufferGraph(state, svg, true, 500, callBack);\n\n  return target;\n};\n","// EBM methods\n\nexport const getEBMMetrics = async (state, ebm, scope = 'global') => {\n  // Depending on the selected scope, we have different modes of getMetrics()\n  let metrics;\n\n  switch (scope) {\n  case 'global':\n    metrics = ebm.getMetrics();\n    break;\n  case 'selected': {\n    let selectedBinIndexes = state.selectedInfo.nodeData.map(d => d.id);\n    metrics = ebm.getMetricsOnSelectedBins(selectedBinIndexes);\n    break;\n  }\n  case 'slice':\n    metrics = ebm.getMetricsOnSelectedSlice();\n    break;\n  default:\n    break;\n  }\n  return metrics;\n};\n\n/**\n * Pass the metrics info to sidebar handler (classification or egression metrics tab)\n * @param metrics Metrics info from the EBM\n * @param curGroup Name of the message\n */\nexport const transferMetricToSidebar = (metrics, curGroup, ebm, sidebarStore, sidebarInfo) => {\n  if (ebm.isClassification) {\n    sidebarInfo.accuracy = metrics.accuracy;\n    sidebarInfo.rocAuc = metrics.rocAuc;\n    sidebarInfo.balancedAccuracy = metrics.balancedAccuracy;\n    sidebarInfo.confusionMatrix = metrics.confusionMatrix;\n  } else {\n    sidebarInfo.rmse = metrics.rmse;\n    sidebarInfo.mae = metrics.mae;\n    sidebarInfo.mape = metrics.mape;\n  }\n\n  sidebarInfo.curGroup = curGroup;\n\n  sidebarStore.set(sidebarInfo);\n};\n\n\n/**\n * Overwrite the edge definition in the EBM WASM model.\n * @param {string} curGroup Message to the metrics sidebar\n * @param {object} curNodeData Node data in `state`\n * @param {featureName} featureName The name of feature to be edited\n * @param {bool} transfer If the new metrics need to be transferred to the sidebar\n */\nexport const setEBM = async (state, ebm, curGroup, curNodeData, sidebarStore, sidebarInfo,\n  featureName = undefined, transfer = true) => {\n\n  // Iterate through the curNodeData\n  let newBinEdges = [];\n  let newScores = [];\n\n  for (let i = 1; i < Object.keys(curNodeData).length + 1; i++) {\n    newBinEdges.push(curNodeData[i].id);\n    newScores.push(curNodeData[i].y);\n  }\n\n  await ebm.setModel(newBinEdges, newScores, featureName);\n\n  if (transfer) {\n    switch (sidebarInfo.effectScope) {\n    case 'global': {\n      let metrics = await getEBMMetrics(state, ebm, 'global');\n      transferMetricToSidebar(metrics, curGroup, ebm, sidebarStore, sidebarInfo);\n      break;\n    }\n    case 'selected': {\n      let metrics = await getEBMMetrics(state, ebm, 'selected');\n      transferMetricToSidebar(metrics, curGroup, ebm, sidebarStore, sidebarInfo);\n      break;\n    }\n    case 'slice': {\n      let metrics = await getEBMMetrics(state, ebm, 'slice');\n      transferMetricToSidebar(metrics, curGroup, ebm, sidebarStore, sidebarInfo);\n      break;\n    }\n    default:\n      break;\n    }\n  }\n};","import d3 from '../../utils/d3-import';\nimport { SelectedInfo } from './cat-class';\nimport { moveMenubar } from '../continuous/cont-bbox';\nimport { rExtent } from './cat-zoom';\nimport { redrawOriginal, drawLastEdit } from './cat-edit';\nimport { setEBM } from './cat-ebm';\n\n// Need a timer to avoid the brush event call after brush.move()\nlet idleTimeout = null;\nconst idleDelay = 300;\n\n/**\n * Reset the idleTimeout timer\n */\nconst idled = () => {\n  idleTimeout = null;\n};\n\n/**\n * Stop animating all flowing lines\n */\nconst stopAnimateLine = (svg) => {\n  d3.select(svg)\n    .select('g.line-chart-line-group')\n    .selectAll('path.additive-line-segment.flow-line')\n    .interrupt()\n    .attr('stroke-dasharray', '0 0')\n    .classed('flow-line', false);\n};\n\nexport const brushDuring = (event, state, svg, multiMenu, ebm, footerStore) => {\n  // Get the selection boundary\n  let selection = event.selection;\n  let svgSelect = d3.select(svg);\n\n  if (selection === null) {\n    if (idleTimeout === null) {\n      return idleTimeout = setTimeout(idled, idleDelay);\n    }\n  } else {\n    // Compute the selected data region\n    // X is ordinal, we just use the view coordinate instead of data\n    let xRange = [selection[0][0], selection[1][0]];\n    let yRange = [state.curYScale.invert(selection[1][1]), state.curYScale.invert(selection[0][1])];\n\n    // Clean up the previous flowing lines\n    state.selectedInfo = new SelectedInfo();\n\n    // Remove the selection bbox\n    svgSelect.selectAll('g.scatter-plot-content-group g.select-bbox-group').remove();\n\n    d3.select(multiMenu)\n      .classed('hidden', true);\n\n    // Track the selected bins\n    let selectedBinIndexes = [];\n\n    // Highlight the selected dots\n    svgSelect.select('g.scatter-plot-dot-group')\n      .selectAll('circle.additive-dot')\n      .classed('selected', d => {\n        if (state.curXScale(d.x) >= xRange[0] && state.curXScale(d.x) <= xRange[1]\n          && d.y >= yRange[0] && d.y <= yRange[1]) {\n          // For categorical data, the ID is from Interpret's label encoder (starting from 1)\n          // EBM.js uses 0-based indexes\n          selectedBinIndexes.push(d.id - 1);\n          return true;\n        }\n      });\n\n    // Highlight the bars associated with the selected dots\n    svgSelect.select('g.scatter-plot-bar-group.real')\n      .selectAll('rect.additive-bar')\n      .classed('selected', d => (state.curXScale(d.x) >= xRange[0] &&\n        state.curXScale(d.x) <= xRange[1] && d.y >= yRange[0] && d.y <= yRange[1]));\n\n    // Update the footer message\n    footerStore.update(value => {\n      let sampleNum = ebm.getSelectedSampleNum(selectedBinIndexes);\n      value.sample = `<b>${sampleNum}/${value.totalSampleNum}</b> validation samples selected`;\n      return value;\n    });\n  }\n};\n\nexport const brushEndSelect = (event, state, svg, multiMenu, brush, component,\n  resetContextMenu, barWidth, ebm, sidebarStore, sidebarInfo, updateFeatureSidebar,\n  resetFeatureSidebar, nullifyMetrics, computeSelectedEffects\n) => {\n  // Get the selection boundary\n  let selection = event.selection;\n  let svgSelect = d3.select(svg);\n\n  if (selection === null) {\n    if (idleTimeout === null) {\n      // Clean up the previous flowing lines\n      stopAnimateLine();\n      state.selectedInfo = new SelectedInfo();\n\n      svgSelect.select('g.line-chart-content-group g.brush rect.overlay')\n        .attr('cursor', null);\n\n      d3.select(multiMenu)\n        .classed('hidden', true);\n\n      let modeInfo = resetContextMenu();\n\n      if (modeInfo.moveMode || modeInfo.subItemMode !== null) {\n        // Do not save the user's change (same as clicking the cancel button)\n        // Redraw the graph with original data\n        redrawOriginal(state, svg, true, () => {\n          setEBM(state, ebm, 'recoverEBM', state.pointData, sidebarStore, sidebarInfo, undefined, false);\n        });\n\n        // Redraw the last edit if possible\n        if (state.pointDataLastLastEdit !== undefined) {\n          state.pointDataLastEdit = JSON.parse(JSON.stringify(state.pointDataLastLastEdit));\n          drawLastEdit(state, svg, barWidth);\n          // Prepare for next redrawing after recovering the last last edit graph\n          state.pointDataLastEdit = JSON.parse(JSON.stringify(state.pointData));\n        }\n      }\n\n      // Recover the metrics if user is quitting context menu without committing\n      sidebarStore.update(value => {\n        // Svelte would trigger an update when update() is called\n        // So if we want to avoid call 'recover' twice, we need to set another\n        // message\n        if (modeInfo.moveMode || modeInfo.subItemMode !== null) {\n          value.curGroup = 'recover';\n        } else {\n          value.curGroup = 'no action';\n        }\n        value.hasUpdatedLastMetrics = false;\n        return value;\n      });\n\n      // Remove the selection bbox\n      svgSelect.selectAll('g.scatter-plot-content-group g.select-bbox-group').remove();\n\n      // Reset the feature sidebar\n      resetFeatureSidebar();\n\n      // Nullify the metrics if in selected tab\n      nullifyMetrics();\n\n      return idleTimeout = setTimeout(idled, idleDelay);\n    }\n  } else {\n\n    // Compute the selected data region\n    // X is ordinal, we just use the view coordinate instead of data\n    let xRange = [selection[0][0], selection[1][0]];\n    let yRange = [state.curYScale.invert(selection[1][1]), state.curYScale.invert(selection[0][1])];\n\n    let selectedBinIndexes = [];\n\n    // Highlight the selected dots\n    svgSelect.select('g.scatter-plot-dot-group')\n      .selectAll('circle.additive-dot')\n      .classed('selected', d => {\n        if (state.curXScale(d.x) >= xRange[0] && state.curXScale(d.x) <= xRange[1] && d.y >= yRange[0] && d.y <= yRange[1]) {\n          state.selectedInfo.nodeData.push({ x: d.x, y: d.y, id: d.id });\n          selectedBinIndexes.push(d.id - 1);\n          return true;\n        } else {\n          return false;\n        }\n      });\n\n    // Compute the bounding box\n    state.selectedInfo.computeBBox();\n\n    let curPadding = (rExtent[0] + state.bboxPadding) * state.curTransform.k;\n\n    let bbox = svgSelect.select('g.scatter-plot-content-group')\n      .append('g')\n      .attr('class', 'select-bbox-group')\n      .selectAll('rect.select-bbox')\n      .data(state.selectedInfo.boundingBox)\n      .join('rect')\n      .attr('class', 'select-bbox original-bbox')\n      .attr('x', d => state.curXScale(d.x1) - curPadding)\n      .attr('y', d => state.curYScale(d.y1) - curPadding)\n      .attr('width', d => state.curXScale(d.x2) - state.curXScale(d.x1) + 2 * curPadding)\n      .attr('height', d => state.curYScale(d.y2) - state.curYScale(d.y1) + 2 * curPadding)\n      .style('stroke-width', 1)\n      .style('stroke', 'hsl(230, 100%, 10%)')\n      .style('stroke-dasharray', '5 3');\n\n    bbox.clone(true)\n      .classed('original-bbox', false)\n      .style('stroke', 'white')\n      .style('stroke-dasharray', null)\n      .style('stroke-width', 1 * 3)\n      .lower();\n\n    state.selectedInfo.hasSelected = svgSelect.selectAll('g.scatter-plot-dot-group circle.additive-dot.selected').size() > 0;\n\n    if (state.selectedInfo.hasSelected) {\n      // Show the context menu near the selected region\n      d3.select(multiMenu)\n        .call(moveMenubar, svg, component)\n        .classed('hidden', false);\n\n      // Trigger a counting of the feature distribution of the selected sampels\n      updateFeatureSidebar(selectedBinIndexes);\n    }\n\n    // Nullify the metrics if in selected tab and no selection\n    nullifyMetrics();\n\n    // Recompute the selected effects if in selected tab and we do have selection\n    computeSelectedEffects();\n\n    // Remove the brush box\n    svgSelect.select('g.scatter-plot-content-group g.brush')\n      .call(brush.move, null)\n      .select('rect.overlay')\n      .attr('cursor', null);\n  }\n};\n\n/**\n * Discard the current marquee selection. This function does not handle any graph\n * drawing/redrawing.\n * @param {object} svg The svg object\n * @param {object} multiMenu The multimenu object\n * @param {func} resetContextMenu Function to reset the context menu\n * @param {func} resetFeatureSidebar Function to reset the feature sidebar\n */\nexport const quitSelection = (svg, state, multiMenu, resetContextMenu, resetFeatureSidebar) => {\n  let svgSelect = d3.select(svg);\n\n  state.selectedInfo = new SelectedInfo();\n\n  // De-highlight the paths associated with the selected dots\n  svgSelect.select('g.scatter-plot-dot-group')\n    .selectAll('circle')\n    .classed('selected', false);\n\n  svgSelect.select('g.scatter-plot-bar-group.real')\n    .selectAll('rect')\n    .classed('selected', false);\n\n  svgSelect.select('g.scatter-plot-content-group g.brush rect.overlay')\n    .attr('cursor', null);\n\n  d3.select(multiMenu)\n    .classed('hidden', true);\n\n  // End move mode\n  resetContextMenu();\n\n  // Remove the selection bbox\n  svgSelect.selectAll('g.scatter-plot-content-group g.select-bbox-group').remove();\n\n  // Reset the feature sidebar\n  resetFeatureSidebar();\n};\n\nexport const selectAllBins = (svg, state, multiMenu, component, updateFeatureSidebar,\n  brush, nullifyMetrics, computeSelectedEffects, footerStore, ebm) => {\n  let svgSelect = d3.select(svg);\n\n  let xRange = [-Infinity, Infinity];\n  let yRange = [-Infinity, Infinity];\n\n  let selectedBinIndexes = [];\n\n  // Highlight the selected dots\n  svgSelect.select('g.scatter-plot-dot-group')\n    .selectAll('circle.additive-dot')\n    .classed('selected', d => {\n      if (state.curXScale(d.x) >= xRange[0] && state.curXScale(d.x) <= xRange[1] && d.y >= yRange[0] && d.y <= yRange[1]) {\n        state.selectedInfo.nodeData.push({ x: d.x, y: d.y, id: d.id });\n        selectedBinIndexes.push(d.id - 1);\n        return true;\n      } else {\n        return false;\n      }\n    });\n\n  // Highlight the bars associated with the selected dots\n  svgSelect.select('g.scatter-plot-bar-group.real')\n    .selectAll('rect.additive-bar')\n    .classed('selected', d => (state.curXScale(d.x) >= xRange[0] &&\n      state.curXScale(d.x) <= xRange[1] && d.y >= yRange[0] && d.y <= yRange[1]));\n\n  // Update the footer message\n  footerStore.update(value => {\n    let sampleNum = ebm.getSelectedSampleNum(selectedBinIndexes);\n    value.sample = `<b>${sampleNum}/${value.totalSampleNum}</b> validation samples selected`;\n    return value;\n  });\n\n  // Compute the bounding box\n  state.selectedInfo.computeBBox();\n\n  let curPadding = (rExtent[0] + state.bboxPadding) * state.curTransform.k;\n\n  let bbox = svgSelect.select('g.scatter-plot-content-group')\n    .append('g')\n    .attr('class', 'select-bbox-group')\n    .selectAll('rect.select-bbox')\n    .data(state.selectedInfo.boundingBox)\n    .join('rect')\n    .attr('class', 'select-bbox original-bbox')\n    .attr('x', d => state.curXScale(d.x1) - curPadding)\n    .attr('y', d => state.curYScale(d.y1) - curPadding)\n    .attr('width', d => state.curXScale(d.x2) - state.curXScale(d.x1) + 2 * curPadding)\n    .attr('height', d => state.curYScale(d.y2) - state.curYScale(d.y1) + 2 * curPadding)\n    .style('stroke-width', 1)\n    .style('stroke', 'hsl(230, 100%, 10%)')\n    .style('stroke-dasharray', '5 3');\n\n  bbox.clone(true)\n    .classed('original-bbox', false)\n    .style('stroke', 'white')\n    .style('stroke-dasharray', null)\n    .style('stroke-width', 1 * 3)\n    .lower();\n\n  state.selectedInfo.hasSelected = svgSelect.selectAll('g.scatter-plot-dot-group circle.additive-dot.selected').size() > 0;\n\n  if (state.selectedInfo.hasSelected) {\n    // Show the context menu near the selected region\n    d3.select(multiMenu)\n      .call(moveMenubar, svg, component)\n      .classed('hidden', false);\n\n    // Trigger a counting of the feature distribution of the selected samples\n    updateFeatureSidebar(selectedBinIndexes);\n  }\n\n  // Nullify the metrics if in selected tab and no selection\n  nullifyMetrics();\n\n  // Recompute the selected effects if in selected tab and we do have selection\n  computeSelectedEffects();\n\n  // Remove the brush box\n  svgSelect.select('g.scatter-plot-content-group g.brush')\n    .call(brush.move, null)\n    .select('rect.overlay')\n    .attr('cursor', null);\n};\n","import { quitSelection } from './cat-brush';\nimport { drawLastEdit, redrawOriginal } from './cat-edit';\nimport { setEBM } from './cat-ebm';\nimport { MD5 } from '../../utils/md5';\n\n/**\n * Add a new commit to the history stack\n * @param {object} state Global state\n * @param {str} type Commit type\n * @param {str} description Commit description\n * @param {object} historyStore Store object of the history stack\n * @param {object} sidebarStore sidebar store object\n */\nexport const pushCurStateToHistoryStack = (state, type, description, historyStore, sidebarStore) => {\n  // Push the new commit to the history stack\n  let historyLength = 0;\n  let sidebarInfo;\n\n  sidebarStore.update(value => {\n    sidebarInfo = value;\n    return value;\n  });\n\n  historyStore.update(value => {\n    const time = Date.now();\n\n    value.push({\n      state: {\n        pointData: state.pointData,\n      },\n      metrics: {\n        barData: JSON.parse(JSON.stringify(sidebarInfo.barData)),\n        confusionMatrixData: JSON.parse(JSON.stringify(sidebarInfo.confusionMatrixData))\n      },\n      featureName: state.featureName,\n      type: type,\n      description: description,\n      time: time,\n      hash: MD5(`${type}${description}${time}`),\n      reviewed: type === 'original'\n    });\n\n    historyLength = value.length;\n    return value;\n  });\n\n  // Change the HEAD pointer to new commit\n  sidebarStore.update(value => {\n    value.historyHead = historyLength - 1;\n    value.previewHistory = false;\n    return value;\n  });\n};\n\n\n/**\n * Undo the last commit\n * @param {object} state Global state\n * @param {element} svg SVG element\n * @param {element} multiMenu multiMenu element\n * @param {func} resetContextMenu function to reset context menu bar\n * @param {func} resetFeatureSidebar function to reset the feature side bar\n * @param {object} historyStore History store\n * @param {list} redoStack List of commits to redo\n * @param {object} ebm EBM object\n * @param {object} sidebarStore sidebar store object\n * @param {number} barWidth width of each bar\n */\nexport const undoHandler = async (state, svg, multiMenu, resetContextMenu, resetFeatureSidebar,\n  historyStore, redoStack, ebm, sidebarStore, barWidth) => {\n\n  // If the current edit is original, we do not undo\n  let curHistoryStoreValue;\n  historyStore.update(value => {\n    curHistoryStoreValue = value;\n    return value;\n  });\n\n  if (curHistoryStoreValue[curHistoryStoreValue.length - 1].type === 'original' ||\n    state.featureName !== curHistoryStoreValue[curHistoryStoreValue.length - 1].featureName\n  ) {\n    return;\n  }\n\n  let curCommit;\n  let lastCommit;\n  let lastCommitIndex;\n\n  // Step 1: If the user has selected some nodes, discard the selections\n  quitSelection(svg, state, multiMenu, resetContextMenu, resetFeatureSidebar);\n\n  // Search for the lastEdit\n  for (let i = curHistoryStoreValue.length - 2; i >= 0; i--) {\n    if (curHistoryStoreValue[i].featureName === state.featureName) {\n      lastCommit = curHistoryStoreValue[i];\n      lastCommitIndex = i;\n      break;\n    }\n  }\n\n  // Step 1.5: Update the HEAD\n  // This step must be done before updating the historyStore!\n  let sidebarInfo;\n  sidebarStore.update(value => {\n    value.historyHead = lastCommitIndex;\n    if (value.historyHead !== curHistoryStoreValue.length - 2) {\n      value.previewHistory = true;\n    }\n    sidebarInfo = value;\n    return value;\n  });\n\n  // Step 2: Remove the current commit from history\n  historyStore.update(value => {\n    curCommit = value.pop();\n    return value;\n  });\n\n  // Step 3: Save the current commit into the redo stack\n  redoStack.push(curCommit);\n\n  // Step 4: Replace the current state with lastCommit\n  state.pointData = lastCommit.state.pointData;\n  state.pointDataBuffer = null;\n\n  // Step 5: Update the last edit state, redraw the last edit graphs\n\n  // Note that the last last edit is possible not the one right next to lastCommit\n  // because users can edit multiple features\n  // Need to search it backward\n  let lastLastCommit = null;\n  for (let i = lastCommitIndex - 1; i >= 0; i--) {\n    if (curHistoryStoreValue[i].featureName === state.featureName) {\n      lastLastCommit = curHistoryStoreValue[i];\n      break;\n    }\n  }\n\n  if (lastLastCommit !== null) {\n    state.pointDataLastEdit = lastLastCommit.state.pointData;\n    drawLastEdit(state, svg, barWidth);\n  } else {\n    // If there is no last edit, then it is the origin\n    state.pointDataLastEdit = undefined;\n  }\n\n  // Step 6: Update the last last edit state\n  // Note lastLastEdit is *only* used to restore lastEdit after user enters editing mode then cancel\n  // So when we restore it, it is the same as lastEdit\n  if (lastLastCommit !== null) {\n    state.pointDataLastLastEdit = lastLastCommit.state.pointData;\n  } else {\n    // If there is no last last edit, then it is the origin or the first edit\n    state.pointDataLastLastEdit = undefined;\n  }\n\n  // After drawing the lastEdit bar, change lastEdit to curEdit (so when user\n  // clicks any editing, the orange line moves to current location)\n  state.lastDataLastEdit = JSON.parse(JSON.stringify(state.pointData));\n\n  // Step 7: Overwrite the EBM definition and score using the historical state\n  // One can update EBM partially to optimize the performance (e.g., this commit\n  // only moves the bins a bit), but it requires to save the selected bins and\n  // scores in the history stack\n  await setEBM(state, ebm, 'current', state.pointData, sidebarStore, sidebarInfo);\n\n  /**\n   * Step 8: Update the metrics, last metrics\n   * It depends on the current effect mode:\n   * 1. Global: load the metrics from history stack => update the tab\n   * 2. Selected: load the metrics from history stack (no draw);\n   *  then the selection is canceled => show NA everywhere\n   * 3. Slice: load the metrics from history stack (no draw);\n   *  then reset EBM to compute the metrics\n   */\n\n  // No matter what scope it is, we need to reload the global metrics from the\n  // history stack\n  sidebarStore.update(value => {\n    value.curGroup = 'no action';\n    value.barData = JSON.parse(JSON.stringify(lastCommit.metrics.barData));\n    value.confusionMatrixData = JSON.parse(JSON.stringify(lastCommit.metrics.confusionMatrixData));\n    sidebarInfo = value;\n    return value;\n  });\n\n  switch (sidebarInfo.effectScope) {\n  case 'global':\n    sidebarStore.update(value => {\n      value.curGroup = 'overwrite';\n      return value;\n    });\n    break;\n  case 'selected':\n    sidebarStore.update(value => {\n      value.curGroup = 'nullify';\n      return value;\n    });\n    break;\n  case 'slice': {\n    // Nullify the original\n    sidebarInfo.curGroup = 'nullify';\n    sidebarStore.set(sidebarInfo);\n    while (sidebarInfo.curGroup !== 'nullifyCompleted') {\n      await new Promise(r => setTimeout(r, 300));\n    }\n\n    // Step 2.2: Last edit\n    if (lastLastCommit !== null) {\n      await setEBM('last-only', lastLastCommit.state.pointData);\n    }\n\n    break;\n  }\n  default:\n    break;\n  }\n\n  // Redraw the graph\n  redrawOriginal(state, svg);\n};\n\n\n/**\n * Redo the last undo.\n * @param {object} state Global state\n * @param {element} svg SVG element\n * @param {element} multiMenu multiMenu element\n * @param {func} resetContextMenu function to reset context menu bar\n * @param {func} resetFeatureSidebar function to reset the feature side bar\n * @param {object} historyStore History store\n * @param {list} redoStack List of commits to redo\n * @param {object} ebm function to set EBM bin definitions\n * @param {object} sidebarStore sidebar store object\n */\nexport const redoHandler = async (state, svg, multiMenu, resetContextMenu, resetFeatureSidebar,\n  historyStore, redoStack, ebm, sidebarStore) => {\n  // Step 1: If the user has selected some nodes, discard the selections\n  quitSelection(svg, state, multiMenu, resetContextMenu, resetFeatureSidebar);\n\n  let curHistoryStoreValue;\n  let sidebarInfo;\n\n  historyStore.update(value => {\n    curHistoryStoreValue = value;\n    return value;\n  });\n\n  // Step 1.5: Update the HEAD\n  // This step must be done before updating the historyStore!\n  sidebarStore.update(value => {\n    value.historyHead = curHistoryStoreValue.length;\n    sidebarInfo = value;\n    return value;\n  });\n\n  // Step 2: Pop the redo stack and add it to the history stack\n  let newCommit = redoStack.pop();\n\n  historyStore.update(value => {\n    value.push(newCommit);\n    curHistoryStoreValue = value;\n    return value;\n  });\n\n  // Replace the current state with the new commit\n  state.pointData = newCommit.state.pointData;\n\n  state.pointDataBuffer = null;\n\n  // Update the last edit state, redraw the last edit graphs\n  if (curHistoryStoreValue.length > 1) {\n    state.pointDataLastEdit = curHistoryStoreValue[curHistoryStoreValue.length - 2].state.additiveData;\n    drawLastEdit(state, svg);\n  } else {\n    // If there is no last edit, then it is the origin\n    state.pointDataLastEdit = undefined;\n  }\n\n  // Update the last last edit state\n  // Note lastLastEdit is *only* used to restore lastEdit after user enters editing mode then cancel\n  // So when we restore it, it is the same as lastEdit\n  if (curHistoryStoreValue.length > 1) {\n    state.pointDataLastLastEdit = curHistoryStoreValue[curHistoryStoreValue.length - 2].state.additiveData;\n  } else {\n    // If there is no last last edit, then it is the origin or the first edit\n    state.pointDataLastLastEdit = undefined;\n  }\n\n  // After drawing the lastEdit curve, change lastEdit to curEdit (so when user\n  // clicks any editing, the orange line moves to current location)\n  state.pointDataLastEdit = JSON.parse(JSON.stringify(state.pointData));\n\n  // Overwrite the EBM definition and score using the undo state\n  // One can update EBM partially to optimize the performance (e.g., this commit\n  // only moves the bins a bit), but it requires to save the selected bins and\n  // scores in the history stack\n  await setEBM(state, ebm, 'current', state.pointData, sidebarStore, sidebarInfo);\n\n  /**\n   * Update the metrics, last metrics\n   * It depends on the current effect mode:\n   * 1. Global: load the metrics from redo stack => update the tab\n   * 2. Selected: load the metrics from redo stack (no draw);\n   *  then the selection is canceled => show NA everywhere\n   * 3. Slice: load the metrics from history stack (no draw);\n   *  then reset EBM to compute the metrics\n   */\n\n  // No matter what scope it is, we need to reload the global metrics from the\n  // history stack\n  sidebarStore.update(value => {\n    value.curGroup = 'no action';\n    value.barData = JSON.parse(JSON.stringify(newCommit.metrics.barData));\n    value.confusionMatrixData = JSON.parse(JSON.stringify(newCommit.metrics.confusionMatrixData));\n    sidebarInfo = value;\n    return value;\n  });\n\n  switch (sidebarInfo.effectScope) {\n  case 'global':\n    sidebarStore.update(value => {\n      value.curGroup = 'overwrite';\n      return value;\n    });\n    break;\n  case 'selected':\n    sidebarStore.update(value => {\n      value.curGroup = 'nullify';\n      return value;\n    });\n    break;\n  case 'slice': {\n    break;\n  }\n  default:\n    break;\n  }\n\n  // Redraw the graph\n  redrawOriginal(state, svg);\n};\n\n/**\n * Try to restore the graph to last edit (if possible)\n * @param {object} state Global state\n * @param {element} svg SVG element\n * @param {object} historyStore History store\n * @param {object} ebm function to set EBM bin definitions\n * @param {object} sidebarStore sidebar store object\n * @param {number} barWidth width of each bar in the plot for categorical variables\n * @returns last edit's hash if found a last edit, false otherwise\n */\nexport const tryRestoreLastEdit = async (state, svg, historyStore, ebm,\n  sidebarStore, barWidth) => {\n\n  let lastCommit = null;\n  let lastCommitID = -1;\n  let lastLastCommit = null;\n  let curHistoryStoreValue;\n\n  historyStore.update(value => {\n    curHistoryStoreValue = value;\n    return value;\n  });\n\n  // Try to find the last edit\n  for (let i = curHistoryStoreValue.length - 1; i >= 0; i--) {\n    if (curHistoryStoreValue[i].featureName === state.featureName) {\n      lastCommit = curHistoryStoreValue[i];\n      lastCommitID = i;\n      break;\n    }\n  }\n\n  if (lastCommit === null) {\n    return false;\n  }\n\n  // If we have found an edit, try to find the edit before it (to restore last\n  // edit info)\n  for (let i = lastCommitID - 1; i >= 0; i--) {\n    if (curHistoryStoreValue[i].featureName === state.featureName) {\n      lastLastCommit = curHistoryStoreValue[i];\n      break;\n    }\n  }\n\n  // Replace the current state with last edit\n  state.pointData = lastCommit.state.pointData;\n  state.pointDataBuffer = null;\n\n  // Update the last edit state, redraw the last edit graphs\n  if (lastLastCommit !== null) {\n    state.pointDataLastEdit = lastLastCommit.state.pointData;\n    drawLastEdit(state, svg, barWidth);\n  } else {\n    // If there is no last edit, then it is the origin\n    state.pointDataLastEdit = undefined;\n  }\n\n  // Update the last last edit state\n  // Note lastLastEdit is *only* used to restore lastEdit after user enters editing mode then cancel\n  // So when we restore it, it is the same as lastEdit\n  if (lastLastCommit !== null) {\n    state.pointDataLastLastEdit = lastLastCommit.state.pointData;\n  } else {\n    // If there is no last last edit, then it is the origin or the first edit\n    state.pointDataLastLastEdit = undefined;\n  }\n\n  // After drawing the lastEdit curve, change lastEdit to curEdit (so when user\n  // clicks any editing, the orange line moves to current location)\n  state.pointDataLastEdit = JSON.parse(JSON.stringify(state.pointData));\n\n  // Restore the bin definition\n  let sidebarInfo = null;\n  sidebarStore.update(value => {\n    sidebarInfo = value;\n    return value;\n  });\n\n  await setEBM(state, ebm, 'current', state.pointData, sidebarStore, sidebarInfo);\n\n  // Redraw the graph\n  redrawOriginal(state, svg);\n\n  return lastCommit.hash;\n};\n\n\n/**\n * Checkout the current HEAD commit\n * @param {object} state Global state\n * @param {element} svg SVG element\n * @param {element} multiMenu multiMenu element\n * @param {func} resetContextMenu function to reset context menu bar\n * @param {func} resetFeatureSidebar function to reset the feature side bar\n * @param {object} historyStore History store\n * @param {func} ebm function to set EBM bin definitions\n * @param {object} sidebarStore sidebar store object\n * @param {number} barWidth width of each bar in the categorical variable plot\n */\nexport const checkoutCommitHead = async (state, svg, multiMenu, resetContextMenu, resetFeatureSidebar,\n  historyStore, ebm, sidebarStore, barWidth) => {\n\n  let curHistoryStoreValue;\n  historyStore.update(value => {\n    curHistoryStoreValue = value;\n    return value;\n  });\n\n  let sidebarInfo;\n  sidebarStore.update(value => {\n    sidebarInfo = value;\n    return value;\n  });\n\n  let targetCommit = curHistoryStoreValue[sidebarInfo.historyHead];\n  let targetCommitIndex = sidebarInfo.historyHead;\n\n  // Step 1: If the user has selected some nodes, discard the selections\n  quitSelection(svg, state, multiMenu, resetContextMenu, resetFeatureSidebar);\n\n  // Step 2: Replace the current state with targetCommit\n  state.pointData = targetCommit.state.pointData;\n  state.pointDataBuffer = null;\n\n  // Step 3: Update the last edit state, redraw the last edit graphs\n\n  // Note that the last last edit is possible not the one right next to lastCommit\n  // because users can edit multiple features\n  // Need to search it backward\n  let lastCommit = null;\n  for (let i = targetCommitIndex - 1; i >= 0; i--) {\n    if (curHistoryStoreValue[i].featureName === state.featureName) {\n      lastCommit = curHistoryStoreValue[i];\n      break;\n    }\n  }\n\n  if (lastCommit !== null) {\n    state.pointDataLastEdit = lastCommit.state.pointData;\n    drawLastEdit(state, svg, barWidth);\n  } else {\n    // If there is no last edit, then it is the origin\n    state.pointDataLastEdit = undefined;\n  }\n\n  // Step 4: Update the last last edit state\n  // Note lastLastEdit is *only* used to restore lastEdit after user enters editing mode then cancel\n  // So when we restore it, it is the same as lastEdit\n  if (lastCommit !== null) {\n    state.pointDataLastLastEdit = lastCommit.state.pointData;\n  } else {\n    // If there is no last last edit, then it is the origin or the first edit\n    state.pointDataLastLastEdit = undefined;\n  }\n\n  // Step 4.5: If the user tries to check out the original graph, the lastEdit would\n  // be the same as the original graph\n  if (lastCommit === null & targetCommit.type === 'original') {\n    state.pointDataLastEdit = targetCommit.state.pointData;\n    state.pointDataLastLastEdit = targetCommit.state.pointData;\n    drawLastEdit(state, svg, barWidth);\n  }\n\n  // After drawing the lastEdit curve, change lastEdit to curEdit (so when user\n  // clicks any editing, the orange line moves to current location)\n  state.pointDataLastEdit = JSON.parse(JSON.stringify(state.pointData));\n\n  /**\n   * Step 5: Reset EBM bin definition\n   * This step is tricky when we have edited multiple features between the checkouts\n   * A0 -> A1 -> A2 -> B0 -> C0 -> C1 -> A3\n   * Backward (A3 -> A2), iterate backward, setEBM when we pass original graph\n   * Forward (A2 -> A3), iterate forward, if the next step changes featureName, setEBM\n   * at the cur step.\n   * \n   * Another approach is to not restore the historical metrics when jump in history\n   * stack => the current is always the latest' edit metric, last would be NA\n   */\n  await setEBM(state, ebm, 'current', state.pointData, sidebarStore, sidebarInfo);\n\n  // Change the currently editing feature to the target\n  ebm.setEditingFeature(targetCommit.featureName);\n\n  // Update the metrics, we has forced it to be global scope\n  sidebarStore.update(value => {\n    value.curGroup = 'nullify-last';\n    return value;\n  });\n\n  // Redraw the graph\n  redrawOriginal(state, svg);\n};\n","<script>\n  import d3 from '../utils/d3-import';\n  import { onMount, onDestroy } from 'svelte';\n  import { round } from '../utils/utils';\n  import { config } from '../config';\n\n  import { drawBarLegend, approximateYAxisWidth } from './draw';\n  import { SelectedInfo } from './categorical/cat-class';\n  import { zoomStart, zoomEnd, zoomed, zoomScaleExtent, rExtent } from './categorical/cat-zoom';\n  import { brushDuring, brushEndSelect, quitSelection, selectAllBins } from './categorical/cat-brush';\n  import { moveMenubar } from './continuous/cont-bbox';\n  import { drawLastEdit, dragged, grayOutConfidenceLine, redrawOriginal, merge } from './categorical/cat-edit';\n  import { getEBMMetrics, transferMetricToSidebar, setEBM } from './categorical/cat-ebm';\n  import { pushCurStateToHistoryStack, undoHandler, redoHandler, checkoutCommitHead,\n    tryRestoreLastEdit } from './categorical/cat-history';\n\n  import ContextMenu from '../components/ContextMenu.svelte';\n\n  export let featureData = null;\n  export let labelEncoder = null;\n  export let scoreRange = null;\n  export let svgHeight = 500;\n  export let svgWidth = null;\n  export let ebm = null;\n  export let sidebarStore = null;\n  export let footerStore = null;\n  export let footerActionStore = null;\n  export let historyStore = null;\n\n  let svg = null;\n  let component = null;\n  let brush = null;\n  let multiMenu = null;\n  let myContextMenu = null;\n\n  let mounted = false;\n  let initialized = false;\n\n  // Visualization constants\n  const svgPadding = config.svgPadding;\n  const densityHeight = 90;\n\n  // Viewbox width and height\n  let width = 600;\n  let height = 400;\n\n  // If both svg width and height are given, we re-compute the Viewbox dimension\n  if (svgWidth !== null & svgHeight !== null) {\n    height = width / svgWidth * svgHeight;\n  }\n\n  // Context menu info\n  let multiMenuControlInfo = {\n    moveMode: false,\n    toSwitchMoveMode: false,\n    subItemMode: null,\n    setValue: null\n  };\n\n  // Subscribe the history store\n  let redoStack = [];\n  let historyList = null;\n  let historyStoreUnsubscribe = historyStore.subscribe(value => {historyList = value;});\n\n  // Sidebar store\n  let sidebarInfo = null;\n  let sidebarStoreUnsubscribe = sidebarStore.subscribe(async value => {\n    sidebarInfo = value;\n\n    // Listen to events ['globalClicked', 'selectedClicked', 'sliceClicked']\n    // from the sidebar\n    switch(value.curGroup) {\n    case 'globalClicked':\n      console.log('globalClicked');\n\n      // footerStore.update(value => {\n      //   if (value.sample.includes(',')) {\n      //     value.sample = value.sample.slice(0, -1);\n      //   }\n      //   value.slice = '';\n      //   return value;\n      // });\n\n      // We keep track of the global metrics in history in any current scope\n      // To restore the global tab, we just need to query the history stack\n      sidebarInfo.curGroup = 'overwrite';\n      sidebarStore.set(sidebarInfo);\n      break;\n\n    case 'selectedClicked':\n      console.log('selectedClicked');\n\n      footerStore.update(value => {\n        if (value.sample.includes(',')) {\n          value.sample = value.sample.slice(0, -1);\n        }\n        value.slice = '';\n        return value;\n      });\n\n      // Step 1: If there is no selected nodes, then the metrics are all NAs\n      if (!state.selectedInfo.hasSelected) {\n        sidebarInfo.curGroup = 'nullify';\n        sidebarStore.set(sidebarInfo);\n      } else {\n        // Step 2: Reset/Update EBM 3 times and compute three metrics on the selected nodes\n\n        // Step 2.1: Original\n        // Here we reset the EBM model completely, because\n        // the intermediate historical events might update() different portions\n        // of the EBM\n        // Be careful! The first commit might be on a different feature!\n        // It is way too complicated to load the initial edit then come back (need to revert\n        // every edit on every feature!)\n        // Here we just use ignore it [better than confusing the users with some other \"original\"]\n        // await setEBM('original-only', historyList[0].state.pointData);\n\n        // Nullify the original\n        sidebarInfo.curGroup = 'nullify';\n        sidebarStore.set(sidebarInfo);\n        while (sidebarInfo.curGroup !== 'nullifyCompleted') {\n          await new Promise(r => setTimeout(r, 300));\n        }\n\n        // Step 2.2: Last edit\n        if (sidebarInfo.historyHead - 1 >= 0 &&\n          historyList[sidebarInfo.historyHead - 1].type !== 'original' &&\n          historyList[sidebarInfo.historyHead - 1].featureName === state.featureName) {\n          await setEBM(state, ebm, 'last-only', historyList[sidebarInfo.historyHead - 1].state.pointData,\n            sidebarStore, sidebarInfo);\n        }\n\n        // // Step 2.3: Current edit\n        let curPointData = state.pointDataBuffer === null ?\n          historyList[sidebarInfo.historyHead].state.pointData :\n          state.pointDataBuffer;\n\n        // await setEBM('current-only', curPointData);\n        await setEBM(state, ebm, 'current-only', curPointData, sidebarStore, sidebarInfo);\n      }\n\n      break;\n\n    case 'sliceClicked': {\n      console.log('sliceClicked');\n\n      // Step 1: set the slice feature ID and level ID to EBM\n      let sliceSize = ebm.setSliceData(sidebarInfo.sliceInfo.featureID, sidebarInfo.sliceInfo.level);\n\n      footerStore.update(value => {\n        if (!value.sample.includes(',')) value.sample += ',';\n        value.slice = `<b>${sliceSize}</b> sliced`;\n        return value;\n      });\n\n      // Step 2: Reset/Update EBM 3 times and compute three metrics on the selected nodes\n\n      // Step 2.1: Original\n      // Here we reset the EBM model completely, because\n      // the intermediate historical events might update() different portions\n      // of the EBM\n      // await setEBM('original-only', historyList[0].state.pointData);\n\n      // Nullify the original\n      sidebarInfo.curGroup = 'nullify';\n      sidebarStore.set(sidebarInfo);\n      while (sidebarInfo.curGroup !== 'nullifyCompleted') {\n        await new Promise(r => setTimeout(r, 300));\n      }\n\n      // Step 2.2: Last edit\n      if (sidebarInfo.historyHead - 1 >= 0 &&\n        historyList[sidebarInfo.historyHead - 1].type !== 'original' &&\n        historyList[sidebarInfo.historyHead - 1].featureName === state.featureName) {\n        await setEBM(state, ebm, 'last-only', historyList[sidebarInfo.historyHead - 1].state.pointData,\n          sidebarStore, sidebarInfo);\n      }\n\n      // Step 2.3: Current edit\n      let curPointData = state.pointDataBuffer === null ?\n        historyList[sidebarInfo.historyHead].state.pointData :\n        state.pointDataBuffer;\n\n      await setEBM(state, ebm, 'current-only', curPointData, sidebarStore, sidebarInfo);\n\n      break;\n    }\n\n    // User clicks to preview a previous edit\n    case 'headChanged': {\n      const headFeatureName = historyList[value.historyHead].featureName;\n      // // Only checkout the commit if it is still on the same feature\n      // // Otherwise, this component should wait for its parent to kill it\n      if (headFeatureName === state.featureName) {\n        checkoutCommitHead(state, svg, multiMenu, resetContextMenu, resetFeatureSidebar,\n          historyStore, ebm, sidebarStore, barWidth);\n      }\n      break;\n    }\n\n    default:\n      break;\n    }\n  });\n\n  let footerValue = null;\n  let footerValueUnsubscribe = footerStore.subscribe(value => {\n    footerValue = value;\n  });\n\n  // Listen to footer buttons\n  let footerActionUnsubscribe = footerActionStore.subscribe(message => {\n    switch(message){\n    case 'undo': {\n      console.log('undo clicked');\n\n      if (historyList.length > 1) {\n        undoHandler(state, svg, multiMenu, resetContextMenu, resetFeatureSidebar,\n          historyStore, redoStack, ebm, sidebarStore, barWidth);\n      }\n      break;\n    }\n\n    case 'redo': {\n      console.log('redo clicked');\n\n      if (redoStack.length > 0) {\n        redoHandler(state, svg, multiMenu, resetContextMenu, resetFeatureSidebar,\n          historyStore, redoStack, ebm, sidebarStore);\n      }\n      break;\n    }\n\n    case 'save':\n      console.log('save clicked');\n      break;\n\n    case 'selectAll':\n      console.log('selectAll clicked');\n\n      // Select all bins if in select mode and nothing has been selected yet\n      if (selectMode) {\n        // Discard any existing selection\n        quitSelection(svg, state, multiMenu, resetContextMenu, resetFeatureSidebar);\n\n        // Cheeky way to select all nodes by fake a brush event\n        selectAllBins(svg, state, multiMenu, component, updateFeatureSidebar,\n          brush, nullifyMetrics, computeSelectedEffects, footerStore, ebm);\n      }\n      break;\n\n    default:\n      break;\n    }\n\n    footerActionStore.set('');\n  });\n\n  // Some styles\n  const colors = config.colors;\n  const defaultFont = config.defaultFont;\n  let barWidth = null;\n\n  // Select mode\n  let state = {\n    curXScale: null,\n    curYScale: null,\n    curTransform: null,\n    selectedInfo: null,\n    pointData: null,\n    pointDataBuffer: null,\n    oriXScale: null,\n    oriYScale: null,\n    bboxPadding: 5,\n  };\n  let selectMode = false;\n  state.selectedInfo = new SelectedInfo();\n\n  /**\n   * Create a path to indicate the confidence interval for the additive score of\n   * categorical variables.\n   * @param d\n   * @param xScale\n   * @param yScale\n   */\n  const createDotConfidencePath = (d, width, xScale, yScale) => {\n\n    let topMid = {\n      x: xScale(d.x),\n      y: yScale(d.y + d.error)\n    };\n\n    let btmMid = {\n      x: xScale(d.x),\n      y: yScale(d.y - d.error)\n    };\n\n    // Draw the top line\n    let pathStr = `M ${topMid.x - width}, ${topMid.y} L ${topMid.x + width}, ${topMid.y} `;\n\n    // Draw the vertical line\n    pathStr = pathStr.concat(`M ${topMid.x}, ${topMid.y} L ${btmMid.x}, ${btmMid.y} `);\n\n    // Draw the bottom line\n    pathStr = pathStr.concat(`M ${btmMid.x - width}, ${btmMid.y} L ${btmMid.x + width}, ${btmMid.y} `);\n\n    return pathStr;\n  };\n\n  onMount(() => {\n    mounted = true;\n  });\n\n  onDestroy(() => {\n    sidebarStoreUnsubscribe();\n    footerActionUnsubscribe();\n    footerValueUnsubscribe();\n    historyStoreUnsubscribe();\n  });\n\n  /**\n   * Draw the plot in the SVG component\n   * @param featureData\n   */\n  const drawFeature = async (featureData) => {\n    console.log(featureData);\n\n    initialized = true;\n\n    // Register the feature name\n    state.featureName = featureData.name;\n\n    let svgSelect = d3.select(svg);\n\n    // For categorical variables, the width depends on the number of levels\n    // Level # <= 4 => 300, level # <= 10 => 450, others => 600\n    // let levelNum = featureData.binLabel.length;\n    // if (levelNum <= 10) width = 450;\n    // if (levelNum <= 4) width = 300;\n\n    // Make the svg keep the viewbox 3:2 ratio\n    svgWidth = svgHeight * (width / height);\n\n    // Set svg viewBox (3:2 WH ratio)\n    // width = 300;\n    // height = 400;\n    // svgWidth = svgHeight * (width / height);\n    svgSelect.attr('viewBox', `0 0 ${width} ${height}`)\n      .attr('preserveAspectRatio', 'xMinYMin meet')\n      .attr('width', svgWidth)\n      .attr('height', svgHeight)\n      // WebKit bug workaround (see https://bugs.webkit.org/show_bug.cgi?id=226683)\n      .on('wheel', (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n      });\n\n    // Some constant lengths of different elements\n    const chartHeight = height - svgPadding.top - svgPadding.bottom - densityHeight;\n\n    // Approximate the longest width of score (y-axis)\n    let yScale = d3.scaleLinear()\n      .domain(scoreRange)\n      .range([chartHeight, 0]);\n\n    let tempWidth = Math.max(40, approximateYAxisWidth(svg, yScale, defaultFont, true));\n    const yAxisWidth = 18 + tempWidth / svgWidth * width;\n\n    const chartWidth = width - svgPadding.left - svgPadding.right - yAxisWidth;\n\n    // Draw the bar legend\n    drawBarLegend(svgSelect, width, svgPadding);\n\n    let content = svgSelect.append('g')\n      .attr('class', 'content')\n      .attr('transform', `translate(${svgPadding.left}, ${svgPadding.top})`);\n\n    let binValues = featureData.binLabel.map(d => labelEncoder[d]);\n\n    let xScale = d3.scalePoint()\n      .domain(binValues)\n      .padding(0.7)\n      .range([0, chartWidth]);\n\n    // For the y scale, it seems InterpretML presets the center at 0 (offset\n    // doesn't really matter in EBM because we can modify intercept)\n    // TODO: Provide interaction for users to change the center point\n    // Normalize the Y axis by the global score range\n\n    state.oriXScale = xScale;\n    state.oriYScale = yScale;\n    state.curXScale = xScale;\n    state.curYScale = yScale;\n\n    // Use the # of ticks and y score range to set the default change unit for\n    // the up and down in the context menu bar\n    multiMenuControlInfo.changeUnit = round((scoreRange[1] - scoreRange[0]) / yScale.ticks().length, 4);\n\n    // Create a data array by combining the bin labels, additive terms, and errors\n    let pointData = {};\n\n    for (let i = 0; i < featureData.binLabel.length; i++) {\n      pointData[featureData.binLabel[i]] = {\n        x: labelEncoder[featureData.binLabel[i]],\n        y: featureData.additive[i],\n        id: featureData.binLabel[i],\n        error: featureData.error[i],\n        count: featureData.count[i]\n      };\n    }\n\n    state.pointData = pointData;\n\n    // Create histogram chart group\n    let histChart = content.append('g')\n      .attr('class', 'hist-chart-group');\n\n    // For the histogram clippath, need to carefully play around with the\n    // transformation, the path should be in a static group; the group having\n    // clip-path attr should be static. Therefore we apply the transformation to\n    // histChart's child later.\n    histChart.append('clipPath')\n      .attr('id', `${featureData.name.replace(/\\s/g, '')}-hist-chart-clip`)\n      .append('rect')\n      .attr('x', yAxisWidth)\n      .attr('y', chartHeight)\n      .attr('width', chartWidth)\n      .attr('height', densityHeight);\n\n    histChart.attr('clip-path', `url(#${featureData.name.replace(/\\s/g, '')}-hist-chart-clip)`);\n\n    // Draw the dot plot\n    let scatterPlot = content.append('g')\n      .attr('class', 'scatter-plot-group');\n\n    scatterPlot.append('clipPath')\n      .attr('id', `${featureData.name.replace(/\\s/g, '')}-chart-clip`)\n      .append('rect')\n      .attr('width', chartWidth)\n      .attr('height', chartHeight - 1);\n\n    scatterPlot.append('clipPath')\n      .attr('id', `${featureData.name.replace(/\\s/g, '')}-x-axis-clip`)\n      .append('rect')\n      .attr('x', yAxisWidth)\n      .attr('y', chartHeight)\n      .attr('width', chartWidth)\n      .attr('height', densityHeight);\n\n    // Create axis group early so it shows up at the bottom\n    let axisGroup = scatterPlot.append('g')\n      .attr('class', 'axis-group');\n\n    let scatterPlotContent = scatterPlot.append('g')\n      .attr('class', 'scatter-plot-content-group')\n      .attr('clip-path', `url(#${featureData.name.replace(/\\s/g, '')}-chart-clip)`)\n      .attr('transform', `translate(${yAxisWidth}, 0)`);\n\n    // Append a rect so we can listen to events\n    scatterPlotContent.append('rect')\n      .attr('width', chartWidth)\n      .attr('height', chartHeight)\n      .style('opacity', 0);\n\n    // Create a group to draw grids\n    let gridGroup = scatterPlotContent.append('g')\n      .attr('class', 'scatter-plot-grid-group');\n\n    let confidenceGroup = scatterPlotContent.append('g')\n      .attr('class', 'scatter-plot-confidence-group');\n\n    let barGroup = scatterPlotContent.append('g')\n      .attr('class', 'scatter-plot-bar-group real');\n\n    let scatterGroup = scatterPlotContent.append('g')\n      .attr('class', 'scatter-plot-dot-group');\n\n    barWidth = Math.min(30, xScale(pointData[2].x) - xScale(pointData[1].x));\n\n    // We draw bars from the 0 baseline to the dot position\n    barGroup.style('fill', colors.bar)\n      .selectAll('rect')\n      .data(Object.values(pointData), d => d.id)\n      .join('rect')\n      .attr('class', 'additive-bar')\n      .attr('x', d => xScale(d.x) - barWidth / 2)\n      .attr('y', d => d.y > 0 ? yScale(d.y) : yScale(0))\n      .attr('width', barWidth)\n      .attr('height', d => Math.abs(yScale(d.y) - yScale(0)));\n\n    // We draw the shape function with many line segments (path)\n    scatterGroup.selectAll('circle')\n      .data(Object.values(pointData), d => d.id)\n      .join('circle')\n      .attr('class', 'additive-dot')\n      .attr('cx', d => xScale(d.x))\n      .attr('cy', d => yScale(d.y))\n      .attr('r', rExtent[0])\n      .style('stroke-width', 1);\n\n    // Draw the underlying confidence interval\n    confidenceGroup.style('stroke', colors.dotConfidence)\n      .style('stroke-width', 2)\n      .selectAll('path')\n      .data(Object.values(pointData))\n      .join('path')\n      .attr('class', 'dot-confidence')\n      .attr('d', d => createDotConfidencePath(d, 5, xScale, yScale));\n\n    // Clone the rects and dots for original and last edit\n    confidenceGroup.lower();\n\n    barGroup.clone(true)\n      .classed('last-edit-back', true)\n      .classed('real', false)\n      .lower()\n      .selectAll('rect')\n      .remove();\n\n    barGroup.clone(true)\n      .classed('last-edit-front', true)\n      .classed('real', false)\n      .raise()\n      .selectAll('rect')\n      .remove();\n\n    barGroup.clone(true)\n      .classed('original', true)\n      .classed('real', false)\n      .style('fill', 'hsl(0, 0%, 85%)')\n      .style('opacity', 1)\n      .lower();\n\n    // Add level lines to the original bar group\n    let originalFront = barGroup.clone(true)\n      .classed('original-front', true)\n      .classed('real', false)\n      .raise();\n\n    originalFront.selectAll('rect')\n      .remove();\n\n    originalFront.selectAll('path.original-line')\n      .data(Object.values(pointData), d => d.id)\n      .join('path')\n      .attr('class', 'original-line')\n      .style('stroke', 'hsl(0, 0%, 75%)')\n      .attr('d', d => `M ${state.oriXScale(d.x) - barWidth / 2}, ${state.oriYScale(d.y)} l ${barWidth}, 0`);\n\n    // Make sure the dots are on top\n    confidenceGroup.raise();\n    scatterGroup.raise();\n    gridGroup.lower();\n\n\n    // Draw the chart X axis\n    // Hack: create a wrapper so we can apply clip before transformation\n    let xAxisGroup = axisGroup.append('g')\n      .attr('class', 'x-axis-wrapper')\n      .attr('clip-path', `url(#${featureData.name.replace(/\\s/g, '')}-x-axis-clip)`)\n      .append('g')\n      .attr('class', 'x-axis')\n      .attr('transform', `translate(${yAxisWidth}, ${chartHeight})`)\n      .call(d3.axisBottom(xScale));\n\n    xAxisGroup.attr('font-family', defaultFont)\n      .select('path')\n      .style('stroke-width', 1.5);\n\n    // Rotate the x axis label if there are too many values\n    if (featureData.binLabel.length > 6) {\n      xAxisGroup.selectAll('g.tick text')\n        .attr('y', 0)\n        .attr('x', -9)\n        .attr('dy', '-0.6em')\n        .attr('transform', 'rotate(-90)')\n        .style('text-anchor', 'end');\n    }\n\n    // Add x axis label\n    // Dynamically determine the height of x-axis first\n    const xAxisGroupHeight = xAxisGroup.node().getBoundingClientRect().height / svgHeight * height;\n\n    xAxisGroup.append('g')\n      .attr('transform', `translate(${chartWidth / 2}, ${Math.min(densityHeight - 15, xAxisGroupHeight + 5)})`)\n      .append('text')\n      .attr('class', 'x-axis-text')\n      .text(featureData.name)\n      .style('fill', 'black');\n\n    // Draw the chart Y axis\n    let yAxisGroup = axisGroup.append('g')\n      .attr('class', 'y-axis')\n      .attr('transform', `translate(${yAxisWidth}, 0)`);\n\n    yAxisGroup.call(d3.axisLeft(yScale).tickFormat(d => Math.abs(d) >= 1000 ? d / 1000 + 'K' : d));\n    yAxisGroup.attr('font-family', defaultFont);\n\n    yAxisGroup.append('g')\n      .attr('class', 'y-axis-text')\n      .attr('transform', `translate(${-yAxisWidth + 15}, ${chartHeight / 2}) rotate(-90)`)\n      .append('text')\n      .text('Score')\n      .style('fill', 'black');\n\n    // Draw the histograms at the bottom\n    let histData = [];\n\n    // Transform the count to frequency (percentage)\n    let histCountSum = d3.sum(featureData.histCount);\n    let histFrequency = featureData.histCount.map(d => d / histCountSum);\n\n    for (let i = 0; i < histFrequency.length; i++) {\n      histData.push({\n        x1: labelEncoder[featureData.histEdge[i]],\n        x2: labelEncoder[featureData.histEdge[i + 1]],\n        height: histFrequency[i]\n      });\n    }\n\n    let histYScale = d3.scaleLinear()\n      .domain(d3.extent(histFrequency))\n      .range([0, densityHeight]);\n\n    let histWidth = Math.min(30, xScale(histData[0].x2) - xScale(histData[0].x1));\n\n    // Draw the density histogram\n    let histChartContent = histChart.append('g')\n      .attr('class', 'hist-chart-content-group')\n      .attr('transform', `translate(${yAxisWidth}, ${chartHeight})`);\n\n    histChartContent.selectAll('rect')\n      .data(histData)\n      .join('rect')\n      .attr('class', 'hist-rect')\n      .attr('x', d => xScale(d.x1) - histWidth / 2)\n      .attr('y', 0)\n      .attr('width', histWidth)\n      .attr('height', d => histYScale(d.height))\n      .style('fill', colors.hist);\n\n    // Draw a Y axis for the histogram chart\n    let yAxisHistGroup = scatterPlot.append('g')\n      .attr('class', 'y-axis')\n      .attr('transform', `translate(${yAxisWidth}, ${chartHeight})`);\n\n    yAxisHistGroup.call(\n      d3.axisLeft(histYScale)\n        .ticks(2)\n    );\n\n    yAxisHistGroup.attr('font-family', defaultFont);\n\n    // Change 0.0 to 0\n    yAxisHistGroup.selectAll('text')\n      .style('fill', colors.histAxis)\n      .filter((d, i, g) => d3.select(g[i]).text() === '0.0')\n      .text('0');\n\n    yAxisHistGroup.selectAll('path,line')\n      .style('stroke', colors.histAxis);\n\n    yAxisHistGroup.append('g')\n      .attr('transform', `translate(${-yAxisWidth + 15}, ${densityHeight / 2}) rotate(-90)`)\n      .append('text')\n      .attr('class', 'y-axis-text')\n      .text('Density')\n      .style('fill', colors.histAxis);\n\n    // Add brush\n    brush = d3.brush()\n      .on('end', e => brushEndSelect(\n        e, state, svg, multiMenu, brush, component, resetContextMenu, barWidth,\n        ebm, sidebarStore, sidebarInfo, updateFeatureSidebar, resetFeatureSidebar,\n        nullifyMetrics, computeSelectedEffects\n      ))\n      .on('start brush', e => brushDuring(e, state, svg, multiMenu, ebm, footerStore))\n      .extent([[0, 0], [chartWidth, chartHeight]])\n      .filter((e) => {\n        if (selectMode) {\n          return e.button === 0;\n        } else {\n          return e.button === 2;\n        }\n      });\n\n    let brushGroup = scatterPlotContent.append('g')\n      .attr('class', 'brush')\n      .call(brush);\n\n    // Change the style of the select box\n    brushGroup.select('rect.overlay')\n      .attr('cursor', null);\n\n    // Add panning and zooming\n    let zoom = d3.zoom()\n      .scaleExtent(zoomScaleExtent)\n      .translateExtent([[0, -Infinity], [width, Infinity]])\n      .on('zoom', e => zoomed(e, state, xScale, yScale, svg, 2,\n        1, yAxisWidth, chartWidth, chartHeight, multiMenu, component))\n      .on('start', () => zoomStart(state, multiMenu))\n      .on('end', () => zoomEnd(state, multiMenu))\n      .filter(e => {\n        if (selectMode) {\n          return (e.type === 'wheel' || e.button === 2);\n        } else {\n          return (e.button === 0 || e.type === 'wheel');\n        }\n      });\n\n    scatterPlotContent.call(zoom)\n      .call(zoom.transform, d3.zoomIdentity);\n\n    scatterPlotContent.on('dblclick.zoom', null);\n\n    // Listen to double click to reset zoom\n    scatterPlotContent.on('dblclick', () => {\n      scatterPlotContent.transition('reset')\n        .duration(750)\n        .ease(d3.easeCubicInOut)\n        .call(zoom.transform, d3.zoomIdentity);\n    });\n\n    // Update the footer for more instruction\n    footerStore.update(value => {\n      value.help = '<b>Drag</b> to pan view, <b>Scroll</b> to zoom';\n      return value;\n    });\n\n    // Try to restore the last edit if possible\n    let hasBeenCreated = await tryRestoreLastEdit(state, svg, historyStore, ebm,\n      sidebarStore, barWidth);\n\n    if (!hasBeenCreated) {\n      // Push the initial state into the history stack\n      pushCurStateToHistoryStack(state, 'original', 'Original graph', historyStore, sidebarStore);\n    } else {\n      pushCurStateToHistoryStack(state, 'original',\n        `Reloaded commit ${hasBeenCreated.substring(0, 7)}`,\n        historyStore, sidebarStore);\n    }\n\n    sidebarInfo.historyHead = historyList.length - 1;\n    sidebarInfo.previewHistory = false;\n    sidebarStore.set(sidebarInfo);\n  };\n\n  // ---- Interaction Functions ----\n  /**\n   * Quit the sub-menu mode (move, sub-item in the context menu) when user clicks\n   * the empty space during editing\n   * This function is implemented as a callback for brushSelected() because it\n   * needs access to variable `multiMenuControlInfo`\n   */\n  const resetContextMenu = () => {\n    let moveMode = multiMenuControlInfo.moveMode;\n    let subItemMode = multiMenuControlInfo.subItemMode;\n\n    if (multiMenuControlInfo.moveMode) {\n      multiMenuControlInfo.moveMode = false;\n      multiMenuControlInfo.toSwitchMoveMode = true;\n\n      // DO not update the data\n      state.pointDataBuffer = null;\n      state.additiveDataBuffer = null;\n    }\n\n    // End sub-menu mode\n    if (multiMenuControlInfo.subItemMode !== null) {\n      // Hide the confirmation panel\n      myContextMenu.hideConfirmation(multiMenuControlInfo.subItemMode);\n      multiMenuControlInfo.subItemMode = null;\n\n      // Discard changes\n      state.pointDataBuffer = null;\n      state.additiveDataBuffer = null;\n    }\n\n    multiMenuControlInfo.setValue = null;\n    myContextMenu.hideToolTipDuringSubMenu();\n\n    // Update the footer message\n    footerStore.update(value => {\n      // Reset the baseline\n      value.baseline = 0;\n      value.baselineInit = false;\n      value.state = '';\n      value.help = '<b>Drag</b> to marquee select, <b>Scroll</b> to zoom';\n      return value;\n    });\n\n    return {moveMode: moveMode, subItemMode: subItemMode};\n  };\n\n  const multiMenuMoveClicked = () => {\n\n    // Step 1. create data clone buffers for user to change\n    // We only do this when buffer has not been created --- it is possible that\n    // user switch to move from other editing mode\n    if (state.pointDataBuffer === null) {\n      state.pointDataBuffer = JSON.parse(JSON.stringify(state.pointData));\n    }\n\n    let bboxGroup = d3.select(svg)\n      .select('g.scatter-plot-content-group g.select-bbox-group')\n      .style('cursor', 'row-resize')\n      .call(d3.drag()\n        .on('start', () => {\n          grayOutConfidenceLine(state, svg);\n          // Update footer\n          footerStore.update(value => {\n            if (!value.baselineInit) {\n              value.baseline = 0;\n              value.baselineInit = true;\n            }\n            return value;\n          });\n        })\n        .on('drag', (e) => dragged(e, state, svg, sidebarStore, sidebarInfo,\n          ebm, setEBM, footerStore))\n      );\n\n    bboxGroup.select('rect.original-bbox')\n      .classed('animated', true);\n\n    // Show the last edit\n    if (state.pointDataLastEdit !== undefined) {\n      drawLastEdit(state, svg, barWidth);\n    }\n\n    // Copy current metrics as last metrics\n    if (!sidebarInfo.hasUpdatedLastMetrics) {\n      sidebarInfo.curGroup = 'last';\n      sidebarInfo.hasUpdatedLastMetrics = true;\n      sidebarStore.set(sidebarInfo);\n    }\n\n    // Update the footer message\n    footerStore.update(value => {\n      value.help = '<b>Drag</b> the <b>selected bars</b> to change score';\n      return value;\n    });\n\n  };\n\n  const multiMenuMergeClicked = () => {\n    console.log('merge clicked');\n\n    // Animate the bbox\n    d3.select(svg)\n      .select('g.scatter-plot-content-group g.select-bbox-group')\n      .select('rect.original-bbox')\n      .classed('animated', true);\n\n    state.pointDataBuffer = JSON.parse(JSON.stringify(state.pointData));\n\n    // Update EBM\n    const callBack = () => {\n      setEBM(state, ebm, 'current', state.pointDataBuffer, sidebarStore, sidebarInfo);\n    };\n\n    // Update the last edit graph\n    drawLastEdit(state, svg, barWidth);\n\n    merge(state, svg, 'left', callBack);\n\n    myContextMenu.showConfirmation('merge', 600);\n\n    if (!sidebarInfo.hasUpdatedLastMetrics) {\n      sidebarInfo.curGroup = 'last';\n      sidebarInfo.hasUpdatedLastMetrics = true;\n      sidebarStore.set(sidebarInfo);\n    }\n\n\n    // Update the footer message\n    footerStore.update(value => {\n      value.type = 'align';\n      value.state = `Set scores of ${state.selectedInfo.nodeData.length} bins to\n        <b>${round(state.selectedInfo.nodeData[0].y, 4)}</b>`;\n      return value;\n    });\n  };\n\n  const multiMenuInputChanged = () => {\n    // Animate the bbox\n    d3.select(svg)\n      .select('g.scatter-plot-content-group g.select-bbox-group')\n      .select('rect.original-bbox')\n      .classed('animated', true);\n\n    state.pointDataBuffer = JSON.parse(JSON.stringify(state.pointData));\n\n    if (!sidebarInfo.hasUpdatedLastMetrics) {\n      sidebarInfo.curGroup = 'last';\n      sidebarInfo.hasUpdatedLastMetrics = true;\n      sidebarStore.set(sidebarInfo);\n    }\n\n    // Update EBM\n    const callBack = () => {\n      setEBM(state, ebm, 'current', state.pointDataBuffer, sidebarStore, sidebarInfo);\n    };\n    merge(state, svg, multiMenuControlInfo.setValue, callBack);\n\n    myContextMenu.showConfirmation('change', 600);\n\n    const target = round(multiMenuControlInfo.setValue, 4);\n\n    // Update the footer message\n    footerStore.update(value => {\n      value.type = 'align';\n      value.state = `Set scores of ${state.selectedInfo.nodeData.length} bins to <b>${target}</b>`;\n      return value;\n    });\n  };\n\n  const multiMenuMergeUpdated = () => {\n    state.pointDataBuffer = JSON.parse(JSON.stringify(state.pointData));\n\n    // Update EBM\n    const callBack = () => {\n      setEBM(state, ebm, 'current', state.pointDataBuffer, sidebarStore, sidebarInfo);\n    };\n\n    let target = merge(state, svg, multiMenuControlInfo.mergeMode, callBack);\n    target = round(target, 4);\n\n    // Update the footer message\n    footerStore.update(value => {\n      value.type = 'align';\n      value.state = `Set scores of ${state.selectedInfo.nodeData.length} bins to <b>${target}</b>`;\n      return value;\n    });\n  };\n\n  const multiMenuDeleteClicked = () => {\n    console.log('delete clicked');\n\n    // Animate the bbox\n    d3.select(svg)\n      .select('g.scatter-plot-content-group g.select-bbox-group')\n      .select('rect.original-bbox')\n      .classed('animated', true);\n\n    state.pointDataBuffer = JSON.parse(JSON.stringify(state.pointData));\n\n    // Update the last edit graph\n    drawLastEdit(state, svg, barWidth);\n\n    // Update EBM\n    const callBack = () => {\n      setEBM(state, ebm, 'current', state.pointDataBuffer, sidebarStore, sidebarInfo);\n    };\n\n    merge(state, svg, 0, callBack);\n\n    myContextMenu.showConfirmation('delete', 600);\n\n    // Copy current metrics as last metrics\n    if (!sidebarInfo.hasUpdatedLastMetrics) {\n      sidebarInfo.curGroup = 'last';\n      sidebarInfo.hasUpdatedLastMetrics = true;\n      sidebarStore.set(sidebarInfo);\n    }\n\n    // Update the footer message\n    footerStore.update(value => {\n      value.type = 'delete';\n      value.state = `Set scores of ${state.selectedInfo.nodeData.length} bins to <b>${0}</b>`;\n      return value;\n    });\n  };\n\n  const multiMenuMoveCheckClicked = async () => {\n    // Check if user is in previous commit\n    if (sidebarInfo.previewHistory) {\n      let proceed = confirm('Current graph is not on the latest edit, committing' +\n        ' this edit would overwrite all later edits on this feature. Is it OK?'\n      );\n      if (!proceed) {\n        multiMenuMoveCancelClicked();\n        return;\n      }\n    }\n\n    // Save the changes\n    state.pointData = JSON.parse(JSON.stringify(state.pointDataBuffer));\n\n    // Remove the drag\n    let bboxGroup = d3.select(svg)\n      .select('g.scatter-plot-content-group g.select-bbox-group')\n      .style('cursor', null)\n      .on('.drag', null);\n\n    // stop the animation\n    bboxGroup.select('rect.original-bbox')\n      .classed('animated', false);\n\n    // Move the menu bar\n    d3.select(multiMenu)\n      .call(moveMenubar, svg, component);\n\n    // Save this change to lastEdit, update lastEdit graph\n    if (state.pointDataLastEdit !== undefined) {\n      state.pointDataLastLastEdit = JSON.parse(JSON.stringify(state.pointDataLastEdit));\n    }\n    state.pointDataLastEdit = JSON.parse(JSON.stringify(state.pointData));\n\n    // Update metrics\n    sidebarInfo.curGroup = 'commit';\n    sidebarInfo.hasUpdatedLastMetrics = false;\n    sidebarStore.set(sidebarInfo);\n\n    // Query the global metrics and save it in the history if the scope is not in global\n    if (sidebarInfo.effectScope !== 'global') {\n      let metrics = await getEBMMetrics(state, ebm, 'global');\n      transferMetricToSidebar(metrics, 'commit-not-global', ebm, sidebarStore, sidebarInfo);\n    }\n\n    // Wait until the the effect sidebar is updated\n    if (ebm.isDummy === undefined) {\n      while (sidebarInfo.curGroup !== 'commitCompleted') {\n        await new Promise(r => setTimeout(r, 500));\n      }\n    }\n\n    // Update the footer message\n    let curEditBaseline = 0;\n    footerStore.update(value => {\n      // Reset the baseline\n      curEditBaseline = value.baseline;\n      value.baseline = 0;\n      value.baselineInit = false;\n      value.type = '';\n      value.state = '';\n      value.help = '<b>Drag</b> to marquee select, <b>Scroll</b> to zoom';\n      return value;\n    });\n\n    // Save into the history\n    // Generate the description message\n    const selectedBins = state.selectedInfo.nodeData.map(d => d.x);\n    const binRange = `[\"${selectedBins.join('\", \"')}\"]`;\n\n    const message = `${curEditBaseline >= 0 ? 'Increased' : 'Decreased'} scores of ${binRange} ` +\n      `by ${round(Math.abs(curEditBaseline), 2)}.`;\n\n    pushCurStateToHistoryStack(state, 'move', message, historyStore, sidebarStore);\n\n    // Any new commit purges the redo stack\n    redoStack = [];\n  };\n\n  const multiMenuMoveCancelClicked = () => {\n    // Discard the changes\n    state.pointDataBuffer = null;\n    state.additiveDataBuffer = null;\n\n    // Recover the original graph\n    redrawOriginal(state, svg, true, () => {\n      // Move the menu bar after animation\n      d3.select(multiMenu)\n        .call(moveMenubar, svg, component);\n\n      // Recover the EBM\n      setEBM(state, ebm, 'recoverEBM', state.pointData, sidebarStore, sidebarInfo, undefined, false);\n    });\n\n    // Update the metrics\n    sidebarInfo.curGroup = 'recover';\n    sidebarInfo.hasUpdatedLastMetrics = false;\n    sidebarStore.set(sidebarInfo);\n\n    // Remove the drag\n    let bboxGroup = d3.select(svg)\n      .select('g.scatter-plot-content-group g.select-bbox-group')\n      .style('cursor', null)\n      .on('.drag', null);\n\n    // stop the animation\n    bboxGroup.select('rect.original-bbox')\n      .classed('animated', false);\n\n    // Redraw the last edit if possible\n    if (state.pointDataLastLastEdit !== undefined){\n      state.pointDataLastEdit = JSON.parse(JSON.stringify(state.pointDataLastLastEdit));\n      drawLastEdit(state, svg, barWidth);\n      // Prepare for next redrawing after recovering the last last edit graph\n      state.pointDataLastEdit = JSON.parse(JSON.stringify(state.pointData));\n    }\n\n    // Update the footer message\n    footerStore.update(value => {\n      // Reset the baseline\n      value.baseline = 0;\n      value.baselineInit = false;\n      value.state = '';\n      value.type = '';\n      value.help = '<b>Drag</b> to marquee select, <b>Scroll</b> to zoom';\n      return value;\n    });\n  };\n\n  /**\n   * Event handler when user clicks the check icon in the sub-menu\n   */\n  const multiMenuSubItemCheckClicked = () => {\n    // Check if user is in previous commit\n    if (sidebarInfo.previewHistory) {\n      let proceed = confirm('Current graph is not on the latest edit, committing' +\n        ' this edit would overwrite all later edits on this feature. Is it OK?'\n      );\n      if (!proceed) {\n        multiMenuMoveCancelClicked();\n        return;\n      }\n    }\n\n    if (multiMenuControlInfo.subItemMode === null) {\n      console.error('No sub item is selected but check is clicked!');\n    }\n\n    const existingModes = new Set(['change', 'merge', 'delete']);\n    if (!existingModes.has(multiMenuControlInfo.subItemMode)) {\n      console.error(`Encountered unknown subItemMode: ${multiMenuControlInfo.subItemMode}`);\n    }\n\n    // Stop the bbox animation\n    d3.select(svg)\n      .select('g.scatter-plot-content-group g.select-bbox-group')\n      .select('rect.original-bbox')\n      .classed('animated', false);\n\n    // Save the changes\n    state.pointData = JSON.parse(JSON.stringify(state.pointDataBuffer));\n\n    // Update the last edit data to current data (redraw the graph only when user enters\n    // editing mode next time)\n    if (state.pointDataLastEdit !== undefined) {\n      state.pointDataLastLastEdit = JSON.parse(JSON.stringify(state.pointDataLastEdit));\n    }\n    state.pointDataLastEdit = JSON.parse(JSON.stringify(state.pointData));\n\n    // Hide the confirmation panel\n    myContextMenu.hideConfirmation(multiMenuControlInfo.subItemMode);\n\n    // Move the menu bar\n    d3.select(multiMenu)\n      .call(moveMenubar, svg, component);\n\n    // Exit the sub-item mode\n    multiMenuControlInfo.subItemMode = null;\n    multiMenuControlInfo.setValue = null;\n\n    // Update metrics\n    sidebarInfo.curGroup = 'commit';\n    sidebarInfo.hasUpdatedLastMetrics = false;\n    sidebarStore.set(sidebarInfo);\n\n    // Update the footer message\n    let editType = '';\n    footerStore.update(value => {\n      editType = value.type;\n      // Reset the baseline\n      value.baseline = 0;\n      value.baselineInit = false;\n      value.state = '';\n      value.type = '';\n      value.help = '<b>Drag</b> to marquee select, <b>Scroll</b> to zoom';\n      return value;\n    });\n\n    // Push the commit to history\n    // Get the info of edited bins\n    const selectedBins = state.selectedInfo.nodeData.map(d => d.x);\n    const binRange = `[\"${selectedBins.join('\", \"')}\"]`;\n\n    let description = '';\n\n    switch(editType) {\n    case 'align':\n      description = `Set scores of ${binRange} to ${round(state.selectedInfo.nodeData[0].y, 4)}.`;\n      break;\n    case 'delete':\n      description = `Set scores of ${binRange} to ${round(state.selectedInfo.nodeData[0].y, 0)}.`;\n      break;\n    default:\n      break;\n    }\n\n    pushCurStateToHistoryStack(state, editType, description, historyStore, sidebarStore);\n\n    // Any new commit purges the redo stack\n    redoStack = [];\n  };\n\n  /**\n   * Event handler when user clicks the cross icon in the sub-menu\n   */\n  const multiMenuSubItemCancelClicked = (e, cancelFromMove = false) => {\n    console.log('sub item cancel clicked');\n    if (!cancelFromMove && multiMenuControlInfo.subItemMode === null) {\n      console.error('No sub item is selected but check is clicked!');\n    }\n\n    const existingModes = new Set(['change', 'merge', 'delete']);\n    if (!cancelFromMove && !existingModes.has(multiMenuControlInfo.subItemMode)) {\n      console.error(`Encountered unknown subItemMode: ${multiMenuControlInfo.subItemMode}`);\n    }\n\n    // Stop the bbox animation\n    d3.select(svg)\n      .select('g.scatter-plot-content-group g.select-bbox-group')\n      .select('rect.original-bbox')\n      .classed('animated', false);\n\n    // Discard the change\n    state.pointDataBuffer = null;\n\n    // Recover the last edit graph\n    if (state.pointDataLastLastEdit !== undefined){\n      state.pointDataLastEdit = JSON.parse(JSON.stringify(state.pointDataLastLastEdit));\n      drawLastEdit(state, svg, barWidth);\n      // Prepare for next redrawing after recovering the last last edit graph\n      state.pointDataLastEdit = JSON.parse(JSON.stringify(state.pointData));\n    }\n\n    // If the current edit is interpolation, we need to recover the bin definition\n    // in the EBM model\n    let callBack = () => {};\n\n    if (!cancelFromMove) {\n      callBack = () => {\n        setEBM(state, ebm, 'recoverEBM', state.pointData,\n          sidebarStore, sidebarInfo, undefined, false);\n      };\n    }\n\n    // Update the metrics\n    sidebarInfo.curGroup = 'recover';\n    sidebarInfo.hasUpdatedLastMetrics = false;\n    sidebarStore.set(sidebarInfo);\n\n    // Recover the original graph\n    redrawOriginal(state, svg, true, () => {\n      // Move the menu bar after the animation\n      d3.select(multiMenu)\n        .call(moveMenubar, svg, component);\n\n      // Update the EBM in \"background\"\n      callBack();\n    });\n\n    // Hide the confirmation panel\n    myContextMenu.hideConfirmation(multiMenuControlInfo.subItemMode);\n\n    // Exit the sub-item mode\n    multiMenuControlInfo.subItemMode = null;\n    multiMenuControlInfo.setValue = null;\n\n    // Update the footer message\n    footerStore.update(value => {\n      // Reset the baseline\n      value.baseline = 0;\n      value.baselineInit = false;\n      value.state = '';\n      value.type = '';\n      value.help = '<b>Drag</b> to marquee select, <b>Scroll</b> to zoom';\n      return value;\n    });\n  };\n\n  /**\n   * Event handler for the select button in the header\n   */\n  export const selectModeSwitched = () => {\n    selectMode = !selectMode;\n\n    let lineChartContent = d3.select(svg)\n      .select('g.scatter-plot-content-group')\n      .classed('select-mode', selectMode);\n\n    lineChartContent.select('g.brush rect.overlay')\n      .attr('cursor', null);\n  };\n\n  /**\n   * Count the feature distribution for the selected test samples\n   * @param {[number]} binIndexes Selected bin indexes\n   */\n  const updateFeatureSidebar = async (binIndexes) => {\n    if (ebm.isDummy !== undefined) return;\n\n    // Get the selected counts\n    let selectedHistCounts = ebm.getSelectedSampleDist(binIndexes);\n\n    // Update the counts in the store\n    for (let i = 0; i < sidebarInfo.featurePlotData.cont.length; i++) {\n      let curID = sidebarInfo.featurePlotData.cont[i].id;\n      sidebarInfo.featurePlotData.cont[i].histSelectedCount = selectedHistCounts[curID];\n    }\n\n    for (let i = 0; i < sidebarInfo.featurePlotData.cat.length; i++) {\n      let curID = sidebarInfo.featurePlotData.cat[i].id;\n      sidebarInfo.featurePlotData.cat[i].histSelectedCount = selectedHistCounts[curID];\n    }\n\n    sidebarInfo.curGroup = 'updateFeature';\n    sidebarStore.set(sidebarInfo);\n  };\n\n  /**\n   * Update the selected scope metrics\n  */\n  const computeSelectedEffects = async () => {\n    if (sidebarInfo.effectScope === 'selected' && state.selectedInfo.hasSelected) {\n      // Step 1: compute the original metrics\n      // Be careful! The first commit might be on a different feature!\n      // It is way too complicated to load the initial edit then come back (need to revert\n      // every edit on every feature!)\n      // Here we just use ignore it [better than confusing the users with some other \"original\"]\n      // if (historyList[0].featureName !== state.featureName) {\n      //   ebm.setEditingFeature(historyList[0].featureName);\n      // }\n      // await setEBM('original-only', historyList[0].state.pointData);\n      // ebm.setEditingFeature(state.featureName);\n\n      // Nullify the original\n      sidebarInfo.curGroup = 'nullify';\n      sidebarStore.set(sidebarInfo);\n      while (sidebarInfo.curGroup !== 'nullifyCompleted') {\n        await new Promise(r => setTimeout(r, 300));\n      }\n\n      // Step 2: Last edit\n      if (sidebarInfo.historyHead - 1 >= 0 &&\n        historyList[sidebarInfo.historyHead - 1].type !== 'original' &&\n        historyList[sidebarInfo.historyHead - 1].featureName === state.featureName) {\n        await setEBM(state, ebm, 'last-only', historyList[sidebarInfo.historyHead - 1].state.pointData,\n          sidebarStore, sidebarInfo);\n      }\n\n      // Step 3: Current edit\n      await setEBM(state, ebm, 'current-only', historyList[sidebarInfo.historyHead].state.pointData,\n        sidebarStore, sidebarInfo);\n    }\n  };\n\n  /**\n   * Reset the feature count of selected samples to 0\n   */\n  const resetFeatureSidebar = async () => {\n    if (ebm.isDummy !== undefined) return;\n\n    for (let i = 0; i < sidebarInfo.featurePlotData.cont.length; i++) {\n      sidebarInfo.featurePlotData.cont[i].histSelectedCount = new Array(\n        sidebarInfo.featurePlotData.cont[i].histSelectedCount.length).fill(0);\n    }\n\n    for (let i = 0; i < sidebarInfo.featurePlotData.cat.length; i++) {\n      sidebarInfo.featurePlotData.cat[i].histSelectedCount = new Array(\n        sidebarInfo.featurePlotData.cat[i].histSelectedCount.length).fill(0);\n    }\n\n    sidebarInfo.curGroup = 'updateFeature';\n    sidebarStore.set(sidebarInfo);\n  };\n\n  /**\n   * Set all metrics to null if there is no selection and the scope is 'selected'.\n  */\n  const nullifyMetrics = () => {\n    if (!state.selectedInfo.hasSelected && sidebarInfo.effectScope === 'selected') {\n      sidebarInfo.curGroup = 'nullify';\n      sidebarStore.set(sidebarInfo);\n    }\n  };\n\n  $: featureData && ebm && mounted && !initialized && featureData.name === ebm.editingFeatureName && drawFeature(featureData);\n\n</script>\n\n<style type='text/scss'>\n  @import '../define';\n  @import './common.scss';\n\n  :global(.explain-panel path.dot-confidence.edited) {\n    stroke: hsl(0, 0%, 75%);\n  }\n\n  :global(.explain-panel rect.additive-bar.selected) {\n    fill: $orange-300;\n    opacity: 0.9;\n  }\n\n  :global(.explain-panel .last-edit-back rect.additive-bar) {\n    fill: hsl(35, 100%, 85%);\n    opacity: 0.7;\n  }\n\n  :global(.explain-panel .last-edit-front path.additive-line) {\n    stroke: hsl(35, 100%, 85%);\n    opacity: 1;\n  }\n\n  :global(.explain-panel circle.additive-dot) {\n    fill: $blue-icon;\n    stroke: white;\n  }\n\n  :global(.explain-panel circle.additive-dot.selected) {\n    fill: $orange-400;\n    stroke: white;\n  }\n\n  :global(.explain-panel .scatter-plot-content-group) {\n    cursor: grab;\n  }\n\n  :global(.explain-panel .scatter-plot-content-group:active) {\n    cursor: grabbing;\n  }\n\n  :global(.explain-panel .scatter-plot-content-group.select-mode) {\n    cursor: crosshair;\n  }\n\n  :global(.explain-panel .scatter-plot-content-group.select-mode:active) {\n    cursor: crosshair;\n  }\n\n</style>\n\n<div class='explain-panel' bind:this={component}>\n\n  <div class='context-menu-container hidden' bind:this={multiMenu}>\n    <ContextMenu\n      bind:controlInfo={multiMenuControlInfo}\n      bind:this={myContextMenu}\n      type='cat'\n      on:inputChanged={multiMenuInputChanged}\n      on:moveButtonClicked={multiMenuMoveClicked}\n      on:mergeClicked={multiMenuMergeClicked}\n      on:mergeUpdated={multiMenuMergeUpdated}\n      on:deleteClicked={multiMenuDeleteClicked}\n      on:moveCheckClicked={multiMenuMoveCheckClicked}\n      on:moveCancelClicked={multiMenuMoveCancelClicked}\n      on:subItemCheckClicked={multiMenuSubItemCheckClicked}\n      on:subItemCancelClicked={multiMenuSubItemCancelClicked}\n    />\n  </div>\n\n  <div class='svg-container'>\n    <svg class='svg-explainer' bind:this={svg}></svg>\n  </div>\n\n</div>","import d3 from '../../utils/d3-import';\nimport { moveMenubar } from '../continuous/cont-bbox';\nimport { state } from './cont-cat-state';\n\nexport const rExtent = [3, 16];\nexport const zoomScaleExtent = [0.95, 4];\n\nexport const zoomStart = (multiMenu) => {\n  // if (state.selectedInfo.hasSelected) {\n  //   d3.select(multiMenu)\n  //     .classed('hidden', true);\n  // }\n};\n\nexport const zoomEnd = (multiMenu) => {\n  // if (state.selectedInfo.hasSelected) {\n  //   d3.select(multiMenu)\n  //     .classed('hidden', false);\n  // }\n};\n\n/**\n * Update the view with zoom transformation\n * @param event Zoom event\n * @param xScale Scale for the x-axis\n * @param yScale Scale for the y-axis\n */\nexport const zoomedLine = (event, xScale, yScale, svg,\n  linePathWidth, nodeStrokeWidth, yAxisWidth, chartWidth, chartHeight,\n  multiMenu, component\n) => {\n\n  let svgSelect = d3.select(svg);\n  let transform = event.transform;\n\n  // Transform the axises\n  let zXScale = transform.rescaleX(xScale);\n  let zYScale = transform.rescaleY(yScale);\n\n  state.curXScale = zXScale;\n  state.curYScale = zYScale;\n  state.curTransform = transform;\n\n  // Redraw the scales\n  svgSelect.select('g.x-axis')\n    .call(d3.axisBottom(zXScale));\n\n  svgSelect.select('g.y-axis')\n    .call(d3.axisLeft(zYScale));\n\n  // Transform the lines\n  let lineGroup = svgSelect.selectAll('g.line-chart-line-group')\n    .attr('transform', transform);\n\n  // Rescale the stroke width a little bit\n  lineGroup.style('stroke-width', linePathWidth / transform.k);\n\n  // Transform the confidence bars\n  svgSelect.selectAll('g.line-chart-confidence-group')\n    .attr('transform', transform);\n\n  // Transform the density rectangles\n  // Here we want to translate and scale the x axis, and keep y axis consistent\n  svgSelect.select('g.hist-chart-content-group')\n    .attr('transform', `translate(${yAxisWidth + transform.x},\n        ${chartHeight})scale(${transform.k}, 1)`);\n\n  // // Transform the selection bbox if applicable\n  // if (state.selectedInfo.hasSelected) {\n  //   // Here we don't use transform, because we want to keep the gap between\n  //   // the nodes and bounding box border constant across all scales\n\n  //   // We want to compute the world coordinate here\n  //   // Need to transfer back the scale factor from the node radius\n  //   let curPadding = (rExtent[0] + state.bboxPadding) * state.curTransform.k;\n\n  //   svgSelect.select('g.scatter-plot-content-group')\n  //     .selectAll('rect.select-bbox')\n  //     .attr('x', d => state.curXScale(d.x1) - curPadding)\n  //     .attr('y', d => state.curYScale(d.y1) - curPadding)\n  //     .attr('width', d => state.curXScale(d.x2) - state.curXScale(d.x1) + 2 * curPadding)\n  //     .attr('height', d => state.curYScale(d.y2) - state.curYScale(d.y1) + 2 * curPadding);\n\n  //   // Also transform the menu bar\n  //   d3.select(multiMenu)\n  //     .call(moveMenubar, svg, component);\n  // }\n\n  // Draw or update the grid\n  svgSelect.select('g.line-chart-grid-group')\n    .call(drawGridLine, zXScale, zYScale, chartWidth, chartHeight);\n\n};\n\n/**\n * Update the view with zoom transformation\n * @param event Zoom event\n * @param xScale Scale for the x-axis\n * @param yScale Scale for the y-axis\n */\nexport const zoomedBar = (event, xScale, yScale, svg,\n  linePathWidth, nodeStrokeWidth, yAxisWidth, chartWidth, chartHeight, legendHeight,\n  multiMenu, component\n) => {\n\n  let svgSelect = d3.select(svg);\n  let transform = event.transform;\n\n  // Transform the axises\n  let zXScale = transform.rescaleX(xScale);\n\n  let zYScale = d3.scalePoint()\n    .domain(yScale.domain())\n    .padding(0.7)\n    .range([transform.applyY(0), transform.applyY(chartHeight)]);\n  // Do not use round here, it would make the transition shaking (interpolation)\n  // .round(true);\n\n  state.curXScale = zXScale;\n  state.curYScale = zYScale;\n  state.curTransform = transform;\n\n  // Redraw the scales\n  svgSelect.select('g.x-axis')\n    .call(d3.axisBottom(zXScale));\n\n  svgSelect.select('g.y-axis')\n    .call(d3.axisLeft(zYScale));\n\n  // Transform the bars\n  let barGroup = svgSelect.selectAll('g.bar-chart-bar-group')\n    .attr('transform', transform);\n\n  barGroup.style('stroke-width', 1 / transform.k);\n\n  // Transform the density rectangles\n  // Here we want to translate and scale the x axis, and keep y axis consistent\n  svgSelect.select('g.hist-chart-content-group')\n    .attr('transform', `translate(${yAxisWidth + transform.x},\n        ${chartHeight + legendHeight})scale(${transform.k}, 1)`);\n\n  // // Transform the selection bbox if applicable\n  // if (state.selectedInfo.hasSelected) {\n  //   // Here we don't use transform, because we want to keep the gap between\n  //   // the nodes and bounding box border constant across all scales\n\n  //   // We want to compute the world coordinate here\n  //   // Need to transfer back the scale factor from the node radius\n  //   let curPadding = (rExtent[0] + state.bboxPadding) * state.curTransform.k;\n\n  //   svgSelect.select('g.scatter-plot-content-group')\n  //     .selectAll('rect.select-bbox')\n  //     .attr('x', d => state.curXScale(d.x1) - curPadding)\n  //     .attr('y', d => state.curYScale(d.y1) - curPadding)\n  //     .attr('width', d => state.curXScale(d.x2) - state.curXScale(d.x1) + 2 * curPadding)\n  //     .attr('height', d => state.curYScale(d.y2) - state.curYScale(d.y1) + 2 * curPadding);\n\n  //   // Also transform the menu bar\n  //   d3.select(multiMenu)\n  //     .call(moveMenubar, svg, component);\n  // }\n\n  // Draw or update the grid\n  svgSelect.select('g.bar-plot-grid-group')\n    .call(drawGridBar, zXScale, zYScale, chartWidth, chartHeight);\n\n};\n\n/**\n * Use linear interpolation to scale the node radius during zooming\n * It is actually kind of tricky, there should be better functions\n * (1) In overview, we want the radius to be small to avoid overdrawing;\n * (2) When zooming in, we want the radius to increase (slowly)\n * (3) Need to counter the zoom's scaling effect\n * @param k Scale factor\n */\nexport const rScale = (k) => {\n  let alpha = (k - zoomScaleExtent[0]) / (zoomScaleExtent[1] - zoomScaleExtent[0]);\n  alpha = d3.easeLinear(alpha);\n  let target = alpha * (rExtent[1] - rExtent[0]) + rExtent[0];\n  return target / k;\n};\n\nconst drawGridLine = (g, xScale, yScale, lineChartWidth, lineChartHeight) => {\n  g.style('stroke', 'black')\n    .style('stroke-opacity', 0.08);\n\n  // Add vertical lines based on the xScale ticks\n  g.call(g => g.selectAll('line.grid-line-x')\n    .data(xScale.ticks(), d => d)\n    .join(\n      enter => enter.append('line')\n        .attr('class', 'grid-line-x')\n        .attr('y2', lineChartHeight),\n      update => update,\n      exit => exit.remove()\n    )\n    .attr('x1', d => 0.5 + xScale(d))\n    .attr('x2', d => 0.5 + xScale(d))\n  );\n\n  // Add horizontal lines based on the yScale ticks\n  return g.call(g => g.selectAll('line.grid-line-y')\n    .data(yScale.ticks(), d => d)\n    .join(\n      enter => enter.append('line')\n        .attr('class', 'grid-line-y')\n        .classed('grid-line-y-0', d => d === 0)\n        .attr('x2', lineChartWidth),\n      update => update,\n      exit => exit.remove()\n    )\n    .attr('y1', d => yScale(d))\n    .attr('y2', d => yScale(d))\n  );\n};\n\n\nconst drawGridBar = (g, xScale, yScale, lineChartWidth, lineChartHeight) => {\n  g.style('stroke', 'black')\n    .style('stroke-opacity', 0.08);\n\n  // Add vertical lines based on the xScale ticks\n  g.call(g => g.selectAll('line.grid-line-x')\n    .data(xScale.ticks(), d => d)\n    .join(\n      enter => enter.append('line')\n        .attr('class', 'grid-line-x')\n        .attr('y2', lineChartHeight),\n      update => update,\n      exit => exit.remove()\n    )\n    .attr('x1', d => 0.5 + xScale(d))\n    .attr('x2', d => 0.5 + xScale(d))\n  );\n\n  // Add horizontal lines based on the yScale ticks\n  return g.call(g => g.selectAll('line.grid-line-y')\n    .data(yScale.domain(), d => d)\n    .join(\n      enter => enter.append('line')\n        .attr('class', 'grid-line-y')\n        .classed('grid-line-y-0', d => d === 0)\n        .attr('x2', lineChartWidth),\n      update => update,\n      exit => exit.remove()\n    )\n    .attr('y1', d => yScale(d))\n    .attr('y2', d => yScale(d))\n  );\n};","<script>\n  import d3 from '../utils/d3-import';\n  import { onMount, createEventDispatcher } from 'svelte';\n  import selectIconSVG from '../img/select-icon.svg';\n  import dragIconSVG from '../img/drag-icon.svg';\n\n  import { tooltipConfigStore } from '../store';\n\n  export let name = '';\n\n  let selectMode = false;\n  let component = null;\n  let tooltipConfig = {};\n  let mouseoverTimeout = null;\n  const dispatch = createEventDispatcher();\n\n  tooltipConfigStore.subscribe(value => {tooltipConfig = value;});\n\n  /**\n   * Event handler for the select button in the header\n   */\n  const selectModeSwitched = () => {\n    selectMode = !selectMode;\n    dispatch('selectModeSwitched', {\n      selectMode: selectMode\n    });\n  };\n\n  export const reset = () => {\n    d3.select(component)\n      .select(`#${name}-toggle`)\n      .property('checked', false);\n    selectMode = false;\n  };\n\n  /**\n   * Dynamically bind SVG files as inline SVG strings in this component\n   */\n  const bindInlineSVG = () => {\n    d3.select(component)\n      .select('.svg-icon#toggle-button-move')\n      .html(dragIconSVG.replaceAll('black', 'currentcolor'));\n\n    d3.select(component)\n      .select('.svg-icon#toggle-button-select')\n      .html(selectIconSVG.replaceAll('black', 'currentcolor'));\n  };\n\n\n  const mouseoverHandler = (e, message, width, yOffset) => {\n    let node = e.currentTarget;\n    mouseoverTimeout = setTimeout(() => {\n      let position = node.getBoundingClientRect();\n      let curWidth = position.width;\n\n      let tooltipCenterX = position.x + curWidth / 2;\n      let tooltipCenterY = position.y - yOffset;\n      tooltipConfig.html = `\n        <div class='tooltip-content' style='display: flex; flex-direction: column;\n          justify-content: center;'>\n          ${message}\n        </div>\n      `;\n      tooltipConfig.width = width;\n      tooltipConfig.maxWidth = width;\n      tooltipConfig.left = tooltipCenterX - tooltipConfig.width / 2;\n      tooltipConfig.top = tooltipCenterY;\n      tooltipConfig.fontSize = '14px';\n      tooltipConfig.show = true;\n      tooltipConfig.orientation = 's';\n      tooltipConfigStore.set(tooltipConfig);\n    }, 1000);\n  };\n\n  const mouseleaveHandler = () => {\n    clearTimeout(mouseoverTimeout);\n    mouseoverTimeout = null;\n    tooltipConfig.show = false;\n    tooltipConfigStore.set(tooltipConfig);\n  };\n\n  onMount(() => {\n    bindInlineSVG();\n  });\n\n</script>\n\n<style type='text/scss'>\n  @import '../define';\n\n  $secondary-color: hsl(0, 0%, 40%);\n  $border-radius: 13px;\n  $dot-background: $blue-dark;\n\n  @mixin toggle-button-label {\n    padding: 5px 0;\n    width: 50%;\n    display: flex;\n    justify-content: center;\n    position: absolute;\n    z-index: 2;\n    color: white;\n    transition: all .2s ease;\n  }\n\n  .toggle-wrapper {\n    display: flex;\n    // Expect the parent to have a width defined\n    width: 100%;\n  }\n\n  .toggle {\n    display: none;\n    \n    &:checked + .toggle-button .dot {\n      left: 50%;\n    }\n  }\n\n  .toggle-button {\n    outline: 0;\n    display: flex;\n    align-items: center;\n    justify-content: space-around;\n    width: 100%;\n    position: relative;\n    height: 2em;\n    cursor: pointer;\n    user-select: none;\n\n    background: $brown-50;\n    border: 1px solid hsl(0, 0%, 86%);\n    border-radius: $border-radius;\n    transition: all .4s ease;\n\n    .left-label {\n      @include toggle-button-label;\n      left: 0;\n\n      &.select-mode {\n        color: $secondary-color;\n      }\n    }\n\n    .right-label {\n      @include toggle-button-label;\n      right: 0px;\n      color: $secondary-color;\n\n      &.select-mode {\n        color: white;\n      }\n    }\n\n    .dot {\n      position: absolute;\n      width: 50%;\n      height: 100%;\n      left: 0;\n      border-radius: $border-radius;\n      background: $dot-background;\n      transition: all .2s ease;\n    }\n\n    .icon-label {\n      margin-left: 5px;\n    }\n  }\n\n  :global(.toggle-wrapper .svg-icon) {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    :global(svg) {\n      width: 1.2em;\n      height: 1.2em;\n    }\n  }\n\n</style>\n\n<div class='toggle-wrapper' bind:this={component}>\n\n  <input class='toggle' id={`${name}-toggle`} type='checkbox' on:change={selectModeSwitched}/>\n\n  <label for={`${name}-toggle`} class='toggle-button'>\n\n    <div class='left-label' class:select-mode = {selectMode}\n      on:mouseenter={(e) => mouseoverHandler(e, 'navigate graph', 120, 30)}\n      on:mouseleave={mouseleaveHandler}\n    >\n      <div class='svg-icon' id='toggle-button-move'></div>\n      <div class='icon-label'>Move</div>\n    </div>\n\n    <div class='right-label' class:select-mode = {selectMode}\n      on:mouseenter={(e) => mouseoverHandler(e, 'select nodes', 110, 30)}\n      on:mouseleave={mouseleaveHandler}\n    >\n      <div class='svg-icon' id='toggle-button-select'></div>\n      <div class='icon-label'>Select</div>\n    </div>\n\n    <div class='dot'></div>\n\n  </label>\n</div>\n","<script>\n  import d3 from '../utils/d3-import';\n  import { onMount } from 'svelte';\n  import { round } from '../utils/utils';\n  import { config } from '../config';\n  import { drawHorizontalColorLegend, approximateYAxisWidth } from './draw';\n\n  import { state } from './inter-cont-cat/cont-cat-state';\n  import { SelectedInfo } from './inter-cont-cat/cont-cat-class';\n  import { drawFeatureLine } from './inter-cont-cat/cont-cat-draw';\n  import { zoomStart, zoomEnd, zoomedLine, zoomedBar, zoomScaleExtent, rExtent } from './inter-cont-cat/cont-cat-zoom';\n  import { brushDuring, brushEndSelect } from './inter-cont-cat/cont-cat-brush';\n\n  import ToggleSwitch from '../components/ToggleSwitch.svelte';\n  // import ContextMenu from '../components/ContextMenu.svelte';\n\n  export let featureData = null;\n  export let labelEncoder = null;\n  export let scoreRange = null;\n  export let svgHeight = 500;\n  export let svgWidth = null;\n  export let chartType = 'bar';\n\n  let svg = null;\n  let component = null;\n  let multiMenu = null;\n  let myContextMenu = null;\n  let multiMenuControlInfo = null;\n\n  let mounted = false;\n  let initialized = false;\n\n  // Interactions\n  let selectMode = false;\n  state.selectedInfo = new SelectedInfo();\n\n  // Visualization constants\n  const svgPadding = config.svgPadding;\n  const densityHeight = 90;\n\n  // Viewbox width and height\n  let width = 600;\n  let height = 400;\n\n  // If both svg width and height are given, we re-compute the Viewbox dimension\n  if (svgWidth !== null & svgHeight !== null) {\n    height = width / svgWidth * svgHeight;\n  }\n\n  // Show some hidden elements for development\n  const showRuler = false;\n\n  // Colors\n  const colors = config.colors;\n  const defaultFont = config.defaultFont;\n\n  /**\n   * Create additiveData which is used to draw line segments for each categorical\n   * level.\n   * @param {[object]} featureData Original feature data passed from the parent component\n   * @param {[object]} data Processed feature data (separated by cont/cat variables)\n   */\n  const createAdditiveData = (featureData, data) => {\n    let additiveData = [];\n\n    if (data.catDim === 0) {\n      for (let c = 0; c < featureData.additive.length; c++) {\n        let curValues = [];\n\n        for (let i = 0; i < featureData.additive[0].length - 1; i++) {\n          curValues.push({\n            sx: data.contBinLabel[i],\n            sAdditive: featureData.additive[c][i],\n            sError: featureData.error[c][i],\n            tx: data.contBinLabel[i + 1],\n            tAdditive: featureData.additive[c][i + 1],\n            tError: featureData.error[c][i + 1]\n          });\n        }\n\n        // Finally, add the ending point (xMax without additive value)\n        // We would use the second last point's additive value and error value\n        let endI = featureData.additive[0].length - 1;\n        curValues.push({\n          sx: data.contBinLabel[endI],\n          sAdditive: featureData.additive[c][endI],\n          sError: featureData.error[c][endI],\n          tx: data.contBinLabel[endI + 1],\n          tAdditive: featureData.additive[c][endI],\n          tError: featureData.error[c][endI]\n        });\n\n        additiveData.push(curValues);\n      }\n    } else {\n      for (let c = 0; c < featureData.additive[0].length; c++) {\n        let curValues = [];\n\n        for (let i = 0; i < featureData.additive.length - 1; i++) {\n          curValues.push({\n            sx: data.contBinLabel[i],\n            sAdditive: featureData.additive[i][c],\n            sError: featureData.error[i][c],\n            tx: data.contBinLabel[i + 1],\n            tAdditive: featureData.additive[i + 1][c],\n            tError: featureData.error[i + 1][c]\n          });\n        }\n\n        // Finally, add the ending point (xMax without additive value)\n        // We would use the second last point's additive value and error value\n        let endI = featureData.additive.length - 1;\n        curValues.push({\n          sx: data.contBinLabel[endI],\n          sAdditive: featureData.additive[endI][c],\n          sError: featureData.error[endI][c],\n          tx: data.contBinLabel[endI + 1],\n          tAdditive: featureData.additive[endI][c],\n          tError: featureData.error[endI][c]\n        });\n\n        additiveData.push(curValues);\n      }\n    }\n\n    return additiveData;\n  };\n\n  /**\n   * Separate feature data into categorical and continuous variables.\n   * @param {object} featureData\n   */\n  const preProcessData = (featureData) => {\n    let data = {};\n\n    if (featureData.type1 === 'continuous' && featureData.type2 === 'categorical') {\n      data.contBinLabel = featureData.binLabel1;\n      data.catBinLabel = featureData.binLabel2;\n      data.contName = featureData.name1;\n      data.catName = featureData.name2;\n      data.contHistEdge = featureData.histEdge1;\n      data.catHistEdge = featureData.histEdge2;\n      data.contHistCount = featureData.histCount1;\n      data.catHistCount = featureData.histCount2;\n      data.contDim = 0;\n      data.catDim = 1;\n    } else if (featureData.type2 === 'continuous' && featureData.type1 === 'categorical'){\n      data.contBinLabel = featureData.binLabel2;\n      data.catBinLabel = featureData.binLabel1;\n      data.contName = featureData.name2;\n      data.catName = featureData.name1;\n      data.contHistEdge = featureData.histEdge2;\n      data.catHistEdge = featureData.histEdge1;\n      data.contHistCount = featureData.histCount2;\n      data.catHistCount = featureData.histCount1;\n      data.contDim = 1;\n      data.catDim = 0;\n    } else {\n      console.error('The interaction is not continuous x categorical.');\n    }\n\n    // Encode the cat var level\n    data.catBinName = data.catBinLabel.map(d => labelEncoder[data.catName][d]);\n    data.catHistEdgeName = data.catHistEdge.map(d => labelEncoder[data.catName][d]);\n\n    return data;\n  };\n\n  onMount(() => {mounted = true;});\n\n  const drawFeatureBar = (featureData) => {\n    initialized = true;\n\n    console.log(featureData);\n\n    let svgSelect = d3.select(svg);\n\n    // Set svg viewBox (3:2 WH ratio)\n    // width = 450;\n    // height = 400;\n\n    svgWidth = svgHeight * (width / height);\n\n    svgSelect.attr('viewBox', `0 0 ${width} ${height}`)\n      .attr('preserveAspectRatio', 'xMinYMin meet')\n      .attr('width', svgWidth)\n      .attr('height', svgHeight)\n      // WebKit bug workaround (see https://bugs.webkit.org/show_bug.cgi?id=226683)\n      .on('wheel', (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n      });\n\n    // Draw a border for the svg\n    svgSelect.append('rect')\n      .attr('class', 'border')\n      .classed('hidden', !showRuler)\n      .attr('width', 600)\n      .attr('height', 400)\n      .style('fill', 'none')\n      .style('stroke', 'pink');\n\n    let content = svgSelect.append('g')\n      .attr('class', 'content')\n      .attr('transform', `translate(${svgPadding.left}, ${svgPadding.top})`);\n\n    // We want to draw continuous variable on the x-axis, and categorical variable\n    // as lines. Need to figure out individual variable type.\n    let data = preProcessData(featureData);\n\n    // Some constant lengths of different elements\n    // Approximate the longest width of score (y-axis)\n    const legendConfig = {\n      startColor: '#2166ac',\n      endColor: '#b2182b',\n      width: 180,\n      height: 6\n    };\n    const legendHeight = legendConfig.height;\n    const chartHeight = height - svgPadding.top - svgPadding.bottom - densityHeight - legendHeight;\n\n    // Categorical variable on the y-axis\n    let yScale = d3.scaleBand()\n      .domain(data.catHistEdgeName)\n      .paddingInner(0.4)\n      .paddingOuter(0.3)\n      .range([chartHeight, 0])\n      .round(true);\n\n    let tempWidth = Math.max(40, approximateYAxisWidth(svg, yScale, defaultFont));\n    const yAxisWidth = 20 + tempWidth / svgWidth * width;\n\n    const chartWidth = width - svgPadding.left - svgPadding.right - yAxisWidth;\n\n    // We put continuous variable on the x-axis\n    let xMin = data.contBinLabel[0];\n    let xMax = data.contBinLabel[data.contBinLabel.length - 1];\n\n    let xScale = d3.scaleLinear()\n      .domain([xMin, xMax])\n      .range([0, chartWidth]);\n\n    // Create histogram chart group\n    let histChart = content.append('g')\n      .attr('class', 'hist-chart-group');\n\n    // For the histogram clippath, need to carefully play around with the\n    // transformation, the path should be in a static group; the group having\n    // clip-path attr should be static. Therefore we apply the transformation to\n    // histChart's child later.\n    histChart.append('clipPath')\n      .attr('id', `${featureData.name.replace(/\\s/g, '')}-hist-chart-clip`)\n      .append('rect')\n      .attr('x', yAxisWidth)\n      .attr('y', chartHeight)\n      .attr('width', chartWidth)\n      .attr('height', densityHeight);\n\n    histChart.attr('clip-path', `url(#${featureData.name.replace(/\\s/g, '')}-hist-chart-clip)`);\n\n    let additiveData = createAdditiveData(featureData, data);\n\n    // Create color scale for the bar chart\n    let maxAbsScore = 0;\n    additiveData.forEach(curArray => {\n      curArray.forEach(d => {\n        if (Math.abs(d.sAdditive) > maxAbsScore) maxAbsScore = Math.abs(d.sAdditive);\n      });\n    });\n\n    // One can consider to use the color scale to encode the global range\n    // let maxAbsScore = Math.max(Math.abs(scoreRange[0]), Math.abs(scoreRange[1]));\n    let colorScale = d3.scaleLinear()\n      .domain([-maxAbsScore, 0, maxAbsScore])\n      .range([legendConfig.startColor, 'white', legendConfig.endColor]);\n\n    // Draw the bar chart\n    let barChart = content.append('g')\n      .attr('transform', `translate(${0}, ${legendHeight})`)\n      .attr('class', 'bar-chart-group');\n\n    barChart.append('clipPath')\n      .attr('id', `${featureData.name.replace(/\\s/g, '')}-chart-clip`)\n      .append('rect')\n      .attr('width', chartWidth)\n      .attr('height', chartHeight - 1);\n\n    barChart.append('clipPath')\n      .attr('id', `${featureData.name.replace(/\\s/g, '')}-y-axis-clip`)\n      .append('rect')\n      .attr('x', -svgPadding.left)\n      .attr('y', 0)\n      .attr('width', svgPadding.left + yAxisWidth)\n      .attr('height', chartHeight);\n\n    let barChartContent = barChart.append('g')\n      .attr('class', 'bar-chart-content-group')\n      .attr('clip-path', `url(#${featureData.name.replace(/\\s/g, '')}-chart-clip)`)\n      .attr('transform', `translate(${yAxisWidth}, 0)`);\n\n    // Append a rect so we can listen to events\n    barChartContent.append('rect')\n      .attr('width', chartWidth)\n      .attr('height', chartHeight)\n      .style('opacity', 0);\n\n    // Create a group to draw grids\n    barChartContent.append('g')\n      .attr('class', 'bar-plot-grid-group');\n\n    let barGroup = barChartContent.append('g')\n      .attr('class', 'bar-chart-bar-group')\n      .style('stroke', 'hsla(0, 0%, 0%, 0.06)');\n\n    let axisGroup = barChart.append('g')\n      .attr('class', 'axis-group');\n\n    // Draw the bars one by one (iterate through the categorical levels)\n    for (let l = 0; l < additiveData.length; l++) {\n      barGroup.append('g')\n        .attr('class', `bar-group-${l}`)\n        .attr('transform', `translate(${0}, ${yScale(data.catBinName[l])})`)\n        .selectAll('rect.bar')\n        .data(additiveData[l])\n        .join('rect')\n        .attr('class', 'bar')\n        .attr('x', d => xScale(d.sx))\n        .attr('y', 0)\n        .attr('width', d => xScale(d.tx) - xScale(d.sx))\n        .attr('height', yScale.bandwidth())\n        .style('fill', d => colorScale(d.sAdditive));\n    }\n\n    // Draw the line chart X axis\n    let xAxisGroup = axisGroup.append('g')\n      .attr('class', 'x-axis')\n      .attr('transform', `translate(${yAxisWidth}, ${chartHeight})`)\n      .call(d3.axisBottom(xScale));\n\n    xAxisGroup.attr('font-family', defaultFont);\n\n    // Add x axis label\n    // Dynamically determine the height of x-axis first\n    const xAxisGroupHeight = xAxisGroup.node().getBoundingClientRect().height / svgHeight * height;\n\n    xAxisGroup.append('g')\n      .attr('transform', `translate(${chartWidth / 2}, ${xAxisGroupHeight + 5})`)\n      .append('text')\n      .attr('class', 'x-axis-text')\n      .text(data.contName)\n      .style('fill', 'black');\n\n    // Draw the line chart Y axis\n    let yAxisGroup = axisGroup.append('g')\n      .attr('class', 'y-axis-wrapper')\n      .attr('clip-path', `url(#${featureData.name.replace(/\\s/g, '')}-y-axis-clip)`)\n      .append('g')\n      .attr('class', 'y-axis')\n      .attr('transform', `translate(${yAxisWidth}, 0)`);\n\n    yAxisGroup.call(d3.axisLeft(yScale));\n    yAxisGroup.attr('font-family', defaultFont);\n\n    yAxisGroup.append('g')\n      .attr('class', 'y-axis-text')\n      .attr('transform', `translate(${-yAxisWidth + 15}, ${chartHeight / 2}) rotate(-90)`)\n      .append('text')\n      .text(data.catName)\n      .style('fill', 'black');\n\n    // Add panning and zooming\n    let zoom = d3.zoom()\n      .translateExtent([[-Infinity, 0], [Infinity, height]])\n      .scaleExtent(zoomScaleExtent)\n      .on('zoom', e => zoomedBar(e, xScale, yScale, svg, 2,\n        1, yAxisWidth, chartWidth, chartHeight, legendHeight, null, component))\n      .on('start', () => zoomStart(multiMenu))\n      .on('end', () => zoomEnd(multiMenu))\n      .filter(e => {\n        if (selectMode) {\n          return (e.type === 'wheel' || e.button === 2);\n        } else {\n          return (e.button === 0 || e.type === 'wheel');\n        }\n      });\n\n    barChartContent.call(zoom)\n      .call(zoom.transform, d3.zoomIdentity);\n\n    barChartContent.on('dblclick.zoom', null);\n\n    // Use animation as a signifier for zoom affordance\n    // setTimeout(() => {\n    //   barChartContent.transition()\n    //     .duration(400)\n    //     .call(zoom.scaleTo, 0.95);\n    // }, 400);\n\n    // Listen to double click to reset zoom\n    barChartContent.on('dblclick', () => {\n      barChartContent.transition('reset')\n        .duration(750)\n        .ease(d3.easeCubicInOut)\n        .call(zoom.transform, d3.zoomIdentity);\n    });\n\n    // Draw a color legend\n    let legendGroup = content.append('g')\n      .attr('class', 'legend-group')\n      .attr('transform', `translate(${width - legendConfig.width - svgPadding.right - svgPadding.left}, ${-20})`);\n\n    drawHorizontalColorLegend(legendGroup, legendConfig, maxAbsScore);\n\n    // Draw the cont histograms at the bottom\n    let histData = [];\n\n    // Transform the count to frequency (percentage)\n    let histCountSum = d3.sum(data.contHistCount);\n    let histFrequency = data.contHistCount.map(d => d / histCountSum);\n\n    for (let i = 0; i < histFrequency.length; i++) {\n      histData.push({\n        x1: data.contHistEdge[i],\n        x2: data.contHistEdge[i + 1],\n        height: histFrequency[i]\n      });\n    }\n\n    let histYScale = d3.scaleLinear()\n      .domain(d3.extent(histFrequency))\n      .range([0, densityHeight]);\n\n    // Draw the density histogram\n    let histChartContent = histChart.append('g')\n      .attr('class', 'hist-chart-content-group')\n      .attr('transform', `translate(${yAxisWidth}, ${chartHeight + legendHeight})`);\n\n    histChartContent.selectAll('rect')\n      .data(histData)\n      .join('rect')\n      .attr('class', 'hist-rect')\n      .attr('x', d => xScale(d.x1))\n      .attr('y', 0)\n      .attr('width', d => xScale(d.x2) - xScale(d.x1))\n      .attr('height', d => histYScale(d.height))\n      .style('fill', colors.hist);\n\n    // Draw a Y axis for the histogram chart\n    let yAxisHistGroup = barChart.append('g')\n      .attr('class', 'y-axis-hist')\n      .attr('transform', `translate(${yAxisWidth}, ${chartHeight})`)\n      .lower();\n\n    yAxisHistGroup.call(\n      d3.axisLeft(histYScale)\n        .ticks(2)\n    );\n\n    yAxisHistGroup.attr('font-family', defaultFont);\n\n    // Change 0.0 to 0\n    yAxisHistGroup.selectAll('text')\n      .style('fill', colors.histAxis)\n      .filter((d, i, g) => d3.select(g[i]).text() === '0.0')\n      .text('0');\n\n    yAxisHistGroup.selectAll('path,line')\n      .style('stroke', colors.histAxis);\n\n    yAxisHistGroup.append('g')\n      .attr('transform', `translate(${-yAxisWidth + 15}, ${densityHeight / 2}) rotate(-90)`)\n      .append('text')\n      .attr('class', 'y-axis-text')\n      .text('Density')\n      .style('fill', colors.histAxis);\n  };\n\n  let drawFeature = null;\n\n  if (chartType === 'bar') {\n    drawFeature = drawFeatureBar;\n  } else if (chartType === 'line') {\n    drawFeature = (featureData) => {\n      drawFeatureLine(featureData, svg, width,\n        height, svgWidth, svgHeight, svgPadding, preProcessData, scoreRange,\n        round, densityHeight, createAdditiveData, defaultFont, colors,\n        zoomScaleExtent, zoomedLine,  zoomStart, zoomEnd, component, multiMenu,\n        selectMode);\n      initialized = true;\n    };\n  } else {\n    console.error('The provided chart type is not supported.');\n  }\n\n  /**\n   * Event handler for the select button in the header\n   */\n  export const selectModeSwitched = () => {\n    selectMode = !selectMode;\n\n    let lineChartContent = d3.select(svg)\n      .select('g.scatter-plot-content-group')\n      .classed('select-mode', selectMode);\n\n    lineChartContent.select('g.brush rect.overlay')\n      .attr('cursor', null);\n  };\n\n  $: featureData && mounted && !initialized && drawFeatureBar(featureData);\n\n</script>\n\n<style type='text/scss'>\n  @import '../define';\n  @import './common.scss';\n\n  :global(.explain-panel .hidden) {\n    visibility: hidden;\n    pointer-events: none;\n  }\n\n  :global(.explain-panel .bar-chart-content-group) {\n    cursor: grab;\n  }\n\n</style>\n\n<div class='explain-panel' bind:this={component}>\n\n  <!-- <div class='context-menu-container hidden' bind:this={multiMenu}>\n    <ContextMenu\n      bind:controlInfo={multiMenuControlInfo}\n      bind:this={myContextMenu}\n      type='cat'\n      on:inputChanged={multiMenuInputChanged}\n      on:moveButtonClicked={multiMenuMoveClicked}\n      on:mergeClicked={multiMenuMergeClicked}\n      on:deleteClicked={multiMenuDeleteClicked}\n      on:moveCheckClicked={multiMenuMoveCheckClicked}\n      on:moveCancelClicked={multiMenuMoveCancelClicked}\n      on:subItemCheckClicked={multiMenuSubItemCheckClicked}\n      on:subItemCancelClicked={multiMenuSubItemCancelClicked}\n    />\n  </div> -->\n\n  <div class='svg-container'>\n    <svg class='svg-explainer' bind:this={svg}></svg>\n  </div>\n\n</div>","import d3 from '../../utils/d3-import';\n// import { moveMenubar } from '../continuous/cont-bbox';\nimport { state } from './cont-cont-state';\n\nexport const rExtent = [3, 16];\nexport const zoomScaleExtent = [0.95, 4];\n\nexport const zoomStart = (multiMenu) => {\n  // if (state.selectedInfo.hasSelected) {\n  //   d3.select(multiMenu)\n  //     .classed('hidden', true);\n  // }\n};\n\nexport const zoomEnd = (multiMenu) => {\n  // if (state.selectedInfo.hasSelected) {\n  //   d3.select(multiMenu)\n  //     .classed('hidden', false);\n  // }\n};\n\n/**\n * Update the view with zoom transformation\n * @param event Zoom event\n * @param xScale Scale for the x-axis\n * @param yScale Scale for the y-axis\n */\nexport const zoomed = (event, xScale, yScale, svg,\n  linePathWidth, nodeStrokeWidth, yAxisWidth, chartWidth, chartHeight, legendHeight,\n  multiMenu, component\n) => {\n\n  let svgSelect = d3.select(svg);\n  let transform = event.transform;\n\n  // Transform the axises\n  let zXScale = transform.rescaleX(xScale);\n  let zYScale = transform.rescaleY(yScale);\n\n  state.curXScale = zXScale;\n  state.curYScale = zYScale;\n  state.curTransform = transform;\n\n  // Redraw the scales\n  svgSelect.select('g.x-axis')\n    .call(d3.axisBottom(zXScale));\n\n  svgSelect.select('g.y-axis')\n    .call(d3.axisLeft(zYScale));\n\n  // Transform the bars\n  let barGroup = svgSelect.selectAll('g.bar-chart-bar-group')\n    .attr('transform', transform);\n\n  barGroup.style('stroke-width', 1 / transform.k);\n\n  // Transform the density rectangles\n  // Here we want to translate and scale the x axis, and keep y axis consistent\n  svgSelect.select('g.hist-chart-content-group')\n    .attr('transform', `translate(${yAxisWidth + transform.x},\n        ${chartHeight + legendHeight})scale(${transform.k}, 1)`);\n\n  // // Transform the selection bbox if applicable\n  // if (state.selectedInfo.hasSelected) {\n  //   // Here we don't use transform, because we want to keep the gap between\n  //   // the nodes and bounding box border constant across all scales\n\n  //   // We want to compute the world coordinate here\n  //   // Need to transfer back the scale factor from the node radius\n  //   let curPadding = (rExtent[0] + state.bboxPadding) * state.curTransform.k;\n\n  //   svgSelect.select('g.scatter-plot-content-group')\n  //     .selectAll('rect.select-bbox')\n  //     .attr('x', d => state.curXScale(d.x1) - curPadding)\n  //     .attr('y', d => state.curYScale(d.y1) - curPadding)\n  //     .attr('width', d => state.curXScale(d.x2) - state.curXScale(d.x1) + 2 * curPadding)\n  //     .attr('height', d => state.curYScale(d.y2) - state.curYScale(d.y1) + 2 * curPadding);\n\n  //   // Also transform the menu bar\n  //   d3.select(multiMenu)\n  //     .call(moveMenubar, svg, component);\n  // }\n\n  // Draw the grid\n  svgSelect.select('g.bar-chart-grid-group')\n    .call(drawGrid, zXScale, zYScale, chartWidth, chartHeight);\n\n};\n\n/**\n * Use linear interpolation to scale the node radius during zooming\n * It is actually kind of tricky, there should be better functions\n * (1) In overview, we want the radius to be small to avoid overdrawing;\n * (2) When zooming in, we want the radius to increase (slowly)\n * (3) Need to counter the zoom's scaling effect\n * @param k Scale factor\n */\nexport const rScale = (k) => {\n  let alpha = (k - zoomScaleExtent[0]) / (zoomScaleExtent[1] - zoomScaleExtent[0]);\n  alpha = d3.easeLinear(alpha);\n  let target = alpha * (rExtent[1] - rExtent[0]) + rExtent[0];\n  return target / k;\n};\n\nconst drawGrid = (g, xScale, yScale, lineChartWidth, lineChartHeight) => {\n  g.style('stroke', 'black')\n    .style('stroke-opacity', 0.08);\n\n  // Add vertical lines based on the xScale ticks\n  g.call(g => g.selectAll('line.grid-line-x')\n    .data(xScale.ticks(), d => d)\n    .join(\n      enter => enter.append('line')\n        .attr('class', 'grid-line-x')\n        .attr('y2', lineChartHeight),\n      update => update,\n      exit => exit.remove()\n    )\n    .attr('x1', d => 0.5 + xScale(d))\n    .attr('x2', d => 0.5 + xScale(d))\n  );\n\n  // Add horizontal lines based on the yScale ticks\n  return g.call(g => g.selectAll('line.grid-line-y')\n    .data(yScale.ticks(), d => d)\n    .join(\n      enter => enter.append('line')\n        .attr('class', 'grid-line-y')\n        .attr('x2', lineChartWidth),\n      update => update,\n      exit => exit.remove()\n    )\n    .attr('y1', d => yScale(d))\n    .attr('y2', d => yScale(d))\n  );\n};\n","<script>\n  import d3 from '../utils/d3-import';\n  import { onMount } from 'svelte';\n  import { round, transpose2dArray } from '../utils/utils';\n  import { config } from '../config';\n  import { drawHorizontalColorLegend, approximateYAxisWidth } from './draw';\n\n  import { state } from './inter-cont-cont/cont-cont-state';\n  import { SelectedInfo } from './inter-cont-cont/cont-cont-class';\n  import { zoomStart, zoomEnd, zoomed, zoomScaleExtent, rExtent } from './inter-cont-cont/cont-cont-zoom';\n  import { brushDuring, brushEndSelect } from './inter-cont-cont/cont-cont-brush';\n\n  import ToggleSwitch from '../components/ToggleSwitch.svelte';\n  import ContextMenu from '../components/ContextMenu.svelte';\n\n  export let featureData = null;\n  export let labelEncoder = null;\n  export let scoreRange = null;\n  export let svgWidth = null;\n  export let svgHeight = 500;\n\n  let svg = null;\n  let component = null;\n  let multiMenu = null;\n\n  let mounted = false;\n  let initialized = false;\n\n  // Visualization constants\n  const svgPadding = config.svgPadding;\n  const densityHeight = 90;\n\n  // Viewbox width and height\n  let width = 600;\n  let height = 400;\n\n  // If both svg width and height are given, we re-compute the Viewbox dimension\n  if (svgWidth !== null & svgHeight !== null) {\n    height = width / svgWidth * svgHeight;\n  }\n\n  // Select mode\n  let selectMode = false;\n  state.selectedInfo = new SelectedInfo();\n\n  // Show some hidden elements for development\n  const showRuler = false;\n\n  // Colors\n  const colors = config.colors;\n  const defaultFont = config.defaultFont;\n\n  const drawFeatureBar = (featureData) => {\n    initialized = true;\n    console.log(featureData);\n\n    let svgSelect = d3.select(svg);\n\n    // Set svg viewBox (3:2 WH ratio)\n    // width = 450;\n    // height = 400;\n\n    svgWidth = svgHeight * (width / height);\n\n    svgSelect.attr('viewBox', `0 0 ${width} ${height}`)\n      .attr('preserveAspectRatio', 'xMinYMin meet')\n      .attr('width', svgWidth)\n      .attr('height', svgHeight)\n      // WebKit bug workaround (see https://bugs.webkit.org/show_bug.cgi?id=226683)\n      .on('wheel', (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n      });\n\n    // Draw a border for the svg\n    svgSelect.append('rect')\n      .attr('class', 'border')\n      .classed('hidden', !showRuler)\n      .attr('width', 600)\n      .attr('height', 400)\n      .style('fill', 'none')\n      .style('stroke', 'pink');\n\n    let content = svgSelect.append('g')\n      .attr('class', 'content')\n      .attr('transform', `translate(${svgPadding.left}, ${svgPadding.top})`);\n\n    // Some constant lengths of different elements\n    // Approximate the longest width of score (y-axis)\n    const legendConfig = {\n      startColor: '#2166ac',\n      endColor: '#b2182b',\n      width: 180,\n      height: 6\n    };\n    const legendHeight = legendConfig.height;\n    const chartHeight = height - svgPadding.top - svgPadding.bottom - densityHeight - legendHeight;\n\n    // Continuous 2 on the y-axis\n    let yMin = featureData.binLabel2[0];\n    let yMax = featureData.binLabel2[featureData.binLabel2.length - 1];\n\n    let yScale = d3.scaleLinear()\n      .domain([yMin, yMax])\n      .range([chartHeight, 0]);\n\n    let tempWidth = Math.max(40, approximateYAxisWidth(svg, yScale, defaultFont));\n    const yAxisWidth = 20 + tempWidth / svgWidth * width;\n\n    const chartWidth = width - svgPadding.left - svgPadding.right - yAxisWidth;\n\n    // We put continuous 1 on the x-axis\n    let xMin = featureData.binLabel1[0];\n    let xMax = featureData.binLabel1[featureData.binLabel1.length - 1];\n\n    let xScale = d3.scaleLinear()\n      .domain([xMin, xMax])\n      .range([0, chartWidth]);\n\n    // Create histogram chart group\n    let histChart = content.append('g')\n      .attr('class', 'hist-chart-group');\n\n    // For the histogram clippath, need to carefully play around with the\n    // transformation, the path should be in a static group; the group having\n    // clip-path attr should be static. Therefore we apply the transformation to\n    // histChart's child later.\n    histChart.append('clipPath')\n      .attr('id', `${featureData.name.replace(/\\s/g, '')}-hist-chart-clip`)\n      .append('rect')\n      .attr('x', yAxisWidth)\n      .attr('y', chartHeight)\n      .attr('width', chartWidth)\n      .attr('height', densityHeight);\n\n    histChart.attr('clip-path', `url(#${featureData.name.replace(/\\s/g, '')}-hist-chart-clip)`);\n\n    let additiveData = transpose2dArray(featureData.additive);\n\n    // Create color scale for the bar chart\n    let maxAbsScore = 0;\n    featureData.additive.forEach(curArray => {\n      curArray.forEach(d => {\n        if (Math.abs(d) > maxAbsScore) maxAbsScore = Math.abs(d);\n      });\n    });\n\n    // One can consider to use the color scale to encode the global range\n    // let maxAbsScore = Math.max(Math.abs(scoreRange[0]), Math.abs(scoreRange[1]));\n    let colorScale = d3.scaleLinear()\n      .domain([-maxAbsScore, 0, maxAbsScore])\n      .range([legendConfig.startColor, 'white', legendConfig.endColor]);\n\n    // Draw the bar chart\n    let barChart = content.append('g')\n      .attr('transform', `translate(${0}, ${legendHeight})`)\n      .attr('class', 'bar-chart-group');\n\n    barChart.append('clipPath')\n      .attr('id', `${featureData.name.replace(/\\s/g, '')}-chart-clip`)\n      .append('rect')\n      .attr('width', chartWidth)\n      .attr('height', chartHeight - 1);\n\n    let barChartContent = barChart.append('g')\n      .attr('class', 'bar-chart-content-group')\n      .attr('clip-path', `url(#${featureData.name.replace(/\\s/g, '')}-chart-clip)`)\n      .attr('transform', `translate(${yAxisWidth}, 0)`);\n\n    // Append a rect so we can listen to events\n    barChartContent.append('rect')\n      .attr('width', chartWidth)\n      .attr('height', chartHeight)\n      .style('opacity', 0);\n\n    // Create a group to draw grids\n    barChartContent.append('g')\n      .attr('class', 'bar-chart-grid-group');\n\n    let barGroup = barChartContent.append('g')\n      .attr('class', 'bar-chart-bar-group')\n      .style('stroke', 'hsla(0, 0%, 0%, 0.05)')\n      .style('stroke-width', 1);\n\n    let axisGroup = barChart.append('g')\n      .attr('class', 'axis-group');\n\n    // Draw the bars one by one (iterate through continuous 2 at y-axis)\n    for (let l = 0; l < featureData.additive[0].length; l++) {\n      let curHeight = yScale(featureData.binLabel2[l]) - yScale(featureData.binLabel2[l + 1]);\n\n      barGroup.append('g')\n        .attr('class', `bar-group-${l}`)\n        .attr('transform', `translate(${0}, ${yScale(featureData.binLabel2[l])})`)\n        .selectAll('rect.bar')\n        .data(additiveData[l])\n        .join('rect')\n        .attr('class', 'bar')\n        .attr('x', (d, i) => xScale(featureData.binLabel1[i]))\n        .attr('y', -curHeight)\n        .attr('width', (d, i) => xScale(featureData.binLabel1[i + 1]) - xScale(featureData.binLabel1[i]))\n        .attr('height', curHeight)\n        .style('fill', d => colorScale(d));\n    }\n\n    // Draw the line chart X axis\n    let xAxisGroup = axisGroup.append('g')\n      .attr('class', 'x-axis')\n      .attr('transform', `translate(${yAxisWidth}, ${chartHeight})`)\n      .call(d3.axisBottom(xScale));\n\n    xAxisGroup.attr('font-family', defaultFont);\n\n    // Add x axis label\n    // Dynamically determine the height of x-axis first\n    const xAxisGroupHeight = xAxisGroup.node().getBoundingClientRect().height / svgHeight * svgHeight;\n\n    xAxisGroup.append('g')\n      .attr('transform', `translate(${chartWidth / 2}, ${xAxisGroupHeight + 5})`)\n      .append('text')\n      .attr('class', 'x-axis-text')\n      .text(featureData.name1)\n      .style('fill', 'black');\n\n    // Draw the line chart Y axis\n    let yAxisGroup = axisGroup.append('g')\n      .attr('class', 'y-axis')\n      .attr('transform', `translate(${yAxisWidth}, 0)`);\n\n    yAxisGroup.call(d3.axisLeft(yScale));\n    yAxisGroup.attr('font-family', defaultFont);\n\n    yAxisGroup.append('g')\n      .attr('transform', `translate(${-yAxisWidth + 15}, ${chartHeight / 2}) rotate(-90)`)\n      .append('text')\n      .attr('class', 'y-axis-text')\n      .text(featureData.name2)\n      .style('fill', 'black');\n\n    // Draw a color legend\n    let legendGroup = content.append('g')\n      .attr('class', 'legend-group')\n      .attr('transform', `translate(${width - legendConfig.width -\n        svgPadding.right - svgPadding.left}, ${-20})`);\n\n    drawHorizontalColorLegend(legendGroup, legendConfig, maxAbsScore);\n\n    // Draw the cont histograms at the bottom\n    let histData = [];\n\n    // Transform the count to frequency (percentage)\n    let histCountSum = d3.sum(featureData.histCount1);\n    let histFrequency = featureData.histCount1.map(d => d / histCountSum);\n\n    for (let i = 0; i < histFrequency.length; i++) {\n      histData.push({\n        x1: featureData.histEdge1[i],\n        x2: featureData.histEdge1[i + 1],\n        height: histFrequency[i]\n      });\n    }\n\n    let histYScale = d3.scaleLinear()\n      .domain(d3.extent(histFrequency))\n      .range([0, densityHeight]);\n\n    // Draw the density histogram\n    let histChartContent = histChart.append('g')\n      .attr('class', 'hist-chart-content-group')\n      .attr('transform', `translate(${yAxisWidth}, ${chartHeight + legendHeight})`);\n\n    histChartContent.selectAll('rect')\n      .data(histData)\n      .join('rect')\n      .attr('class', 'hist-rect')\n      .attr('x', d => xScale(d.x1))\n      .attr('y', 0)\n      .attr('width', d => xScale(d.x2) - xScale(d.x1))\n      .attr('height', d => histYScale(d.height))\n      .style('fill', colors.hist);\n\n    // Draw a Y axis for the histogram chart\n    let yAxisHistGroup = barChart.append('g')\n      .attr('class', 'y-axis')\n      .attr('transform', `translate(${yAxisWidth}, ${chartHeight})`);\n\n    yAxisHistGroup.call(\n      d3.axisLeft(histYScale)\n        .ticks(2)\n    );\n\n    yAxisHistGroup.attr('font-family', defaultFont);\n\n    // Change 0.0 to 0\n    yAxisHistGroup.selectAll('text')\n      .style('fill', colors.histAxis)\n      .filter((d, i, g) => d3.select(g[i]).text() === '0.0')\n      .text('0');\n\n    yAxisHistGroup.selectAll('path,line')\n      .style('stroke', colors.histAxis);\n\n    yAxisHistGroup.append('g')\n      .attr('class', 'y-axis-text')\n      .attr('transform', `translate(${-yAxisWidth + 15}, ${densityHeight / 2}) rotate(-90)`)\n      .append('text')\n      .text('Density')\n      .style('fill', colors.histAxis);\n\n    // Add panning and zooming\n    let zoom = d3.zoom()\n      .scaleExtent(zoomScaleExtent)\n      .on('zoom', e => zoomed(e, xScale, yScale, svg, 2,\n        1, yAxisWidth, chartWidth, chartHeight, legendHeight, multiMenu, component))\n      .on('start', () => zoomStart(multiMenu))\n      .on('end', () => zoomEnd(multiMenu))\n      .filter(e => {\n        if (selectMode) {\n          return (e.type === 'wheel' || e.button === 2);\n        } else {\n          return (e.button === 0 || e.type === 'wheel');\n        }\n      });\n\n    barChartContent.call(zoom)\n      .call(zoom.transform, d3.zoomIdentity);\n\n    barChartContent.on('dblclick.zoom', null);\n\n    // Listen to double click to reset zoom\n    barChartContent.on('dblclick', () => {\n      barChartContent.transition('reset')\n        .duration(750)\n        .ease(d3.easeCubicInOut)\n        .call(zoom.transform, d3.zoomIdentity);\n    });\n\n    // Use animation as a signifier for zoom affordance\n    setTimeout(() => {\n      barChartContent.transition()\n        .duration(400)\n        .call(zoom.scaleTo, 0.95);\n    }, 400);\n\n  };\n\n  onMount(() => {mounted = true;});\n\n  const drawFeature = drawFeatureBar;\n\n  /**\n   * Event handler for the select button in the header\n   */\n  export const selectModeSwitched = () => {\n    selectMode = !selectMode;\n\n    let lineChartContent = d3.select(svg)\n      .select('g.scatter-plot-content-group')\n      .classed('select-mode', selectMode);\n\n    lineChartContent.select('g.brush rect.overlay')\n      .attr('cursor', null);\n  };\n\n  $: featureData && mounted && !initialized && drawFeature(featureData);\n\n</script>\n\n<style type='text/scss'>\n  @import '../define';\n  @import './common.scss';\n\n  :global(.explain-panel .legend-title) {\n    font-size: 0.9em;\n    dominant-baseline: hanging;\n  }\n\n  :global(.explain-panel .legend-value) {\n    font-size: 13px;\n    dominant-baseline: middle;\n  }\n\n</style>\n\n<div class='explain-panel' bind:this={component}>\n\n  <!-- <div class='context-menu-container hidden' bind:this={multiMenu}>\n    <ContextMenu\n      bind:controlInfo={multiMenuControlInfo}\n      bind:this={myContextMenu}\n      type='cat'\n      on:inputChanged={multiMenuInputChanged}\n      on:moveButtonClicked={multiMenuMoveClicked}\n      on:mergeClicked={multiMenuMergeClicked}\n      on:deleteClicked={multiMenuDeleteClicked}\n      on:moveCheckClicked={multiMenuMoveCheckClicked}\n      on:moveCancelClicked={multiMenuMoveCancelClicked}\n      on:subItemCheckClicked={multiMenuSubItemCheckClicked}\n      on:subItemCancelClicked={multiMenuSubItemCancelClicked}\n    />\n  </div> -->\n\n  <div class='svg-container'>\n    <svg class='svg-explainer' bind:this={svg}></svg>\n  </div>\n\n</div>","import d3 from '../../utils/d3-import';\nimport { moveMenubar } from '../continuous/cont-bbox';\nimport { state } from './cat-cat-state';\nimport { config } from '../../config';\n\nexport const rExtent = [3, 16];\nexport const zoomScaleExtent = [0.95, 4];\n\nexport const zoomStart = (multiMenu) => {\n  // if (state.selectedInfo.hasSelected) {\n  //   d3.select(multiMenu)\n  //     .classed('hidden', true);\n  // }\n};\n\nexport const zoomEnd = (multiMenu) => {\n  // if (state.selectedInfo.hasSelected) {\n  //   d3.select(multiMenu)\n  //     .classed('hidden', false);\n  // }\n};\n\n/**\n * Update the view with zoom transformation\n * @param event Zoom event\n * @param xScale Scale for the x-axis\n * @param yScale Scale for the y-axis\n */\nexport const zoomed = (event, xScale, yScale, svg,\n  linePathWidth, nodeStrokeWidth, yAxisWidth, chartWidth, chartHeight, legendHeight,\n  multiMenu, component\n) => {\n\n  let svgSelect = d3.select(svg);\n  let transform = event.transform;\n\n  // Transform the axises\n  let zXScale = d3.scalePoint()\n    .domain(xScale.domain())\n    .padding(config.scalePointPadding)\n    .range([transform.applyX(0), transform.applyX(chartWidth)]);\n\n  let zYScale = d3.scalePoint()\n    .domain(yScale.domain())\n    .padding(config.scalePointPadding)\n    .range([transform.applyY(0), transform.applyY(chartHeight)]);\n\n  state.curXScale = zXScale;\n  state.curYScale = zYScale;\n  state.curTransform = transform;\n\n  // Redraw the scales\n  svgSelect.select('g.x-axis')\n    .call(d3.axisBottom(zXScale));\n\n  svgSelect.select('g.y-axis')\n    .call(d3.axisLeft(zYScale));\n\n  // Transform the dots\n  let scatterGroup = svgSelect.selectAll('g.scatter-plot-scatter-group')\n    .attr('transform', transform);\n\n  scatterGroup.style('stroke-width', 1 / transform.k);\n\n  // Transform the density rectangles\n  // Here we want to translate and scale the x axis, and keep y axis consistent\n  svgSelect.select('g.hist-chart-content-group')\n    .attr('transform', `translate(${yAxisWidth + transform.x},\n        ${chartHeight + legendHeight})scale(${transform.k}, 1)`);\n\n  // // Transform the selection bbox if applicable\n  // if (state.selectedInfo.hasSelected) {\n  //   // Here we don't use transform, because we want to keep the gap between\n  //   // the nodes and bounding box border constant across all scales\n\n  //   // We want to compute the world coordinate here\n  //   // Need to transfer back the scale factor from the node radius\n  //   let curPadding = (rExtent[0] + state.bboxPadding) * state.curTransform.k;\n\n  //   svgSelect.select('g.scatter-plot-content-group')\n  //     .selectAll('rect.select-bbox')\n  //     .attr('x', d => state.curXScale(d.x1) - curPadding)\n  //     .attr('y', d => state.curYScale(d.y1) - curPadding)\n  //     .attr('width', d => state.curXScale(d.x2) - state.curXScale(d.x1) + 2 * curPadding)\n  //     .attr('height', d => state.curYScale(d.y2) - state.curYScale(d.y1) + 2 * curPadding);\n\n  //   // Also transform the menu bar\n  //   d3.select(multiMenu)\n  //     .call(moveMenubar, svg, component);\n  // }\n\n  // Draw or update the grid\n  svgSelect.select('g.scatter-plot-grid-group')\n    .call(drawGrid, zXScale, zYScale, chartWidth, chartHeight);\n\n};\n\n/**\n * Use linear interpolation to scale the node radius during zooming\n * It is actually kind of tricky, there should be better functions\n * (1) In overview, we want the radius to be small to avoid overdrawing;\n * (2) When zooming in, we want the radius to increase (slowly)\n * (3) Need to counter the zoom's scaling effect\n * @param k Scale factor\n */\nexport const rScale = (k) => {\n  let alpha = (k - zoomScaleExtent[0]) / (zoomScaleExtent[1] - zoomScaleExtent[0]);\n  alpha = d3.easeLinear(alpha);\n  let target = alpha * (rExtent[1] - rExtent[0]) + rExtent[0];\n  return target / k;\n};\n\n\nconst drawGrid = (g, xScale, yScale, lineChartWidth, lineChartHeight) => {\n  g.style('stroke', 'black')\n    .style('stroke-opacity', 0.08);\n\n  // Add vertical lines based on the xScale ticks\n  g.call(g => g.selectAll('line.grid-line-x')\n    .data(xScale.domain(), d => d)\n    .join(\n      enter => enter.append('line')\n        .attr('class', 'grid-line-x')\n        .attr('y2', lineChartHeight),\n      update => update,\n      exit => exit.remove()\n    )\n    .attr('x1', d => 0.5 + xScale(d))\n    .attr('x2', d => 0.5 + xScale(d))\n  );\n\n  // Add horizontal lines based on the yScale ticks\n  return g.call(g => g.selectAll('line.grid-line-y')\n    .data(yScale.domain(), d => d)\n    .join(\n      enter => enter.append('line')\n        .attr('class', 'grid-line-y')\n        .classed('grid-line-y-0', d => d === 0)\n        .attr('x2', lineChartWidth),\n      update => update,\n      exit => exit.remove()\n    )\n    .attr('y1', d => yScale(d))\n    .attr('y2', d => yScale(d))\n  );\n};","<script>\n  import d3 from '../utils/d3-import';\n  import { onMount } from 'svelte';\n  import { round } from '../utils/utils';\n  import { config } from '../config';\n  import { drawHorizontalColorLegend, approximateYAxisWidth } from './draw';\n\n  import { state } from './inter-cat-cat/cat-cat-state';\n  import { SelectedInfo } from './inter-cat-cat/cat-cat-class';\n  import { zoomStart, zoomEnd, zoomed, zoomScaleExtent, rExtent } from './inter-cat-cat/cat-cat-zoom';\n  import { brushDuring, brushEndSelect } from './inter-cat-cat/cat-cat-brush';\n\n  import ToggleSwitch from '../components/ToggleSwitch.svelte';\n  import ContextMenu from '../components/ContextMenu.svelte';\n\n  export let featureData = null;\n  export let labelEncoder = null;\n  export let scoreRange = null;\n  export let svgWidth = null;\n  export let svgHeight = 500;\n\n  let svg = null;\n  let component = null;\n  let multiMenu = null;\n\n  let mounted = false;\n  let initialized = false;\n\n  // Visualization constants\n  const svgPadding = config.svgPadding;\n  const densityHeight = 90;\n\n  // Viewbox width and height\n  let width = 600;\n  let height = 400;\n\n  // If both svg width and height are given, we re-compute the Viewbox dimension\n  if (svgWidth !== null & svgHeight !== null) {\n    height = width / svgWidth * svgHeight;\n  }\n\n  // Show some hidden elements for development\n  const showRuler = false;\n\n  // Colors\n  const colors = config.colors;\n  const defaultFont = config.defaultFont;\n\n  // Select mode\n  let selectMode = false;\n  state.selectedInfo = new SelectedInfo();\n\n  /**\n   * Create additiveData which is used to draw dots on the plot.\n   * @param {[object]} featureData Original feature data passed from the parent component\n   * @param {[object]} data Processed feature data (separated by long/short categorical variables)\n   */\n  const createAdditiveData = (featureData, data) => {\n    let additiveData = [];\n\n    for (let i = 0; i < featureData.additive.length; i++) {\n      for (let j = 0; j < featureData.additive[i].length; j++) {\n        additiveData.push({\n          longLabel: data.longDim === 0 ? data.longBinLabel[i] : data.longBinLabel[j],\n          longLabelName: data.longDim === 0 ? data.longBinName[i] : data.longBinName[j],\n          shortLabel: data.longDim === 0 ? data.shortBinLabel[j] : data.shortBinLabel[i],\n          shortLabelName: data.longDim === 0 ? data.shortBinName[j] : data.shortBinName[i],\n          additive: featureData.additive[i][j],\n          error: featureData.error[i][j]\n        });\n      }\n    }\n\n    return additiveData;\n  };\n\n  /**\n   * Separate feature data into categorical variable with more & fewer levels\n   * @param {object} featureData\n   */\n  const preProcessData = (featureData) => {\n    let data = {};\n    let len1 = featureData.binLabel1.length;\n    let len2 = featureData.binLabel2.length;\n\n    if (len1 >= len2) {\n      data.longBinLabel = featureData.binLabel1;\n      data.shortBinLabel = featureData.binLabel2;\n      data.longName = featureData.name1;\n      data.shortName = featureData.name2;\n      data.longHistEdge = featureData.histEdge1;\n      data.shortHistEdge = featureData.histEdge2;\n      data.longHistCount = featureData.histCount1;\n      data.shortHistCount = featureData.histCount2;\n      data.longDim = 0;\n      data.shortDim = 1;\n    } else {\n      data.longBinLabel = featureData.binLabel2;\n      data.shortBinLabel = featureData.binLabel1;\n      data.longName = featureData.name2;\n      data.shortName = featureData.name1;\n      data.longHistEdge = featureData.histEdge2;\n      data.shortHistEdge = featureData.histEdge1;\n      data.longHistCount = featureData.histCount2;\n      data.shortHistCount = featureData.histCount1;\n      data.longDim = 1;\n      data.shortDim = 0;\n    }\n\n    // Encode the categorical level names\n    data.longBinName = data.longBinLabel.map(d => labelEncoder[data.longName][d]);\n    data.shortBinName = data.shortBinLabel.map(d => labelEncoder[data.shortName][d]);\n\n    data.longHistEdgeName = data.longHistEdge.map(d => labelEncoder[data.longName][d]);\n    data.shortHistEdgeName = data.shortHistEdge.map(d => labelEncoder[data.shortName][d]);\n\n    return data;\n  };\n\n  onMount(() => {mounted = true;});\n\n  const drawFeature = (featureData) => {\n    console.log(featureData);\n    initialized = true;\n\n    let svgSelect = d3.select(svg);\n\n    // Set svg viewBox (3:2 WH ratio)\n    // width = 450;\n    // height = 400;\n\n    svgWidth = svgHeight * (width / height);\n\n    svgSelect.attr('viewBox', `0 0 ${width} ${height}`)\n      .attr('preserveAspectRatio', 'xMinYMin meet')\n      .attr('width', svgWidth)\n      .attr('height', svgHeight)\n      // WebKit bug workaround (see https://bugs.webkit.org/show_bug.cgi?id=226683)\n      .on('wheel', (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n      });\n\n    // Draw a border for the svg\n    svgSelect.append('rect')\n      .attr('class', 'border')\n      .classed('hidden', !showRuler)\n      .attr('width', 600)\n      .attr('height', 400)\n      .style('fill', 'none')\n      .style('stroke', 'pink');\n\n    let content = svgSelect.append('g')\n      .attr('class', 'content')\n      .attr('transform', `translate(${svgPadding.left}, ${svgPadding.top})`);\n\n    // We want to draw the categorical variable with more levels on the x-axis,\n    // and the other one on the y-axis\n    let data = preProcessData(featureData);\n\n    // Some constant lengths of different elements\n    // Approximate the longest width of score (y-axis)\n\n    // Shorter categorical variable on the y-axis\n    const legendConfig = {\n      startColor: '#2166ac',\n      endColor: '#b2182b',\n      width: 180,\n      height: 6\n    };\n    const legendHeight = legendConfig.height;\n    const chartHeight = height - svgPadding.top - svgPadding.bottom - densityHeight - legendHeight;\n\n    let yScale = d3.scalePoint()\n      .domain(data.shortBinName)\n      .padding(config.scalePointPadding)\n      .range([chartHeight, 0]);\n\n    let tempWidth = Math.max(40, approximateYAxisWidth(svg, yScale, defaultFont));\n    const yAxisWidth = 20 + tempWidth / svgWidth * width;\n\n    const chartWidth = width - svgPadding.left - svgPadding.right - yAxisWidth;\n\n    // We put longer categorical variable on the x-axis\n    let xScale = d3.scalePoint()\n      .domain(data.longBinName)\n      .padding(config.scalePointPadding)\n      .range([0, chartWidth]);\n\n    // Create histogram chart group\n    let histChart = content.append('g')\n      .attr('class', 'hist-chart-group');\n\n    // For the histogram clippath, need to carefully play around with the\n    // transformation, the path should be in a static group; the group having\n    // clip-path attr should be static. Therefore we apply the transformation to\n    // histChart's child later.\n    histChart.append('clipPath')\n      .attr('id', `${featureData.name.replace(/\\s/g, '')}-hist-chart-clip`)\n      .append('rect')\n      .attr('x', yAxisWidth)\n      .attr('y', chartHeight)\n      .attr('width', chartWidth)\n      .attr('height', densityHeight);\n\n    histChart.attr('clip-path', `url(#${featureData.name.replace(/\\s/g, '')}-hist-chart-clip)`);\n\n    let additiveData = createAdditiveData(featureData, data);\n\n    // Create color scale for the bar chart\n    let maxAbsScore = 0;\n    featureData.additive.forEach(curArray => {\n      curArray.forEach(d => {\n        if (Math.abs(d) > maxAbsScore) maxAbsScore = Math.abs(d);\n      });\n    });\n\n    // One can consider to use the color scale to encode the global range\n    // let maxAbsScore = Math.max(Math.abs(scoreRange[0]), Math.abs(scoreRange[1]));\n    let colorScale = d3.scaleLinear()\n      .domain([-maxAbsScore, 0, maxAbsScore])\n      .range([legendConfig.startColor, 'white', legendConfig.endColor]);\n\n    // Draw the scatter chart\n    let scatterPlot = content.append('g')\n      .attr('transform', `translate(${0}, ${legendHeight})`)\n      .attr('class', 'scatter-plot-group');\n\n    scatterPlot.append('clipPath')\n      .attr('id', `${featureData.name.replace(/\\s/g, '')}-chart-clip`)\n      .append('rect')\n      .attr('width', chartWidth)\n      .attr('height', chartHeight - 1);\n\n    scatterPlot.append('clipPath')\n      .attr('id', `${featureData.name.replace(/\\s/g, '')}-x-axis-clip`)\n      .append('rect')\n      .attr('x', yAxisWidth)\n      .attr('y', chartHeight)\n      .attr('width', chartWidth)\n      .attr('height', densityHeight);\n\n    scatterPlot.append('clipPath')\n      .attr('id', `${featureData.name.replace(/\\s/g, '')}-y-axis-clip`)\n      .append('rect')\n      .attr('x', -svgPadding.left)\n      .attr('y', 0)\n      .attr('width', svgPadding.left + yAxisWidth)\n      .attr('height', chartHeight);\n\n    let scatterPlotContent = scatterPlot.append('g')\n      .attr('class', 'scatter-plot-content-group')\n      .attr('clip-path', `url(#${featureData.name.replace(/\\s/g, '')}-chart-clip)`)\n      .attr('transform', `translate(${yAxisWidth}, 0)`);\n\n    // Append a rect so we can listen to events\n    scatterPlotContent.append('rect')\n      .attr('width', chartWidth)\n      .attr('height', chartHeight)\n      .style('opacity', 0);\n\n    // Create a group to draw grids\n    scatterPlotContent.append('g')\n      .attr('class', 'scatter-plot-grid-group');\n\n    let scatterGroup = scatterPlotContent.append('g')\n      .attr('class', 'scatter-plot-scatter-group');\n\n    let axisGroup = scatterPlot.append('g')\n      .attr('class', 'axis-group');\n\n    // Draw the scatter plot\n    scatterGroup.style('stroke', 'hsla(0, 0%, 0%, 0.5)')\n      .style('stroke-width', 1)\n      .selectAll('circle.dot')\n      .data(additiveData)\n      .join('circle')\n      .attr('class', 'dot')\n      .attr('cx', d => xScale(d.longLabelName))\n      .attr('cy', d => yScale(d.shortLabelName))\n      .attr('r', config.catDotRadius)\n      .style('fill', d => colorScale(d.additive));\n\n\n    // Draw the line chart X axis\n    let xAxisGroup = axisGroup.append('g')\n      .attr('class', 'x-axis-wrapper')\n      .attr('clip-path', `url(#${featureData.name.replace(/\\s/g, '')}-x-axis-clip)`)\n      .append('g')\n      .attr('class', 'x-axis')\n      .attr('transform', `translate(${yAxisWidth}, ${chartHeight})`)\n      .call(d3.axisBottom(xScale));\n\n    xAxisGroup.attr('font-family', defaultFont);\n\n    // Rotate the x axis label if there are too many values\n    if (data.longBinName.length > 6) {\n      xAxisGroup.selectAll('g.tick text')\n        .attr('y', 0)\n        .attr('x', -9)\n        .attr('dy', '-0.6em')\n        .attr('transform', 'rotate(-90)')\n        .style('text-anchor', 'end');\n    }\n\n    // Add x axis label\n    // Dynamically determine the height of x-axis first\n    // Note that the height is measured in the screen px instead of SVG viewbox unit\n    // So we don't need to add padding, but itt might look weird when real\n    // dimension is very different from the viewbox\n    const xAxisGroupHeight = xAxisGroup.node().getBoundingClientRect().height / svgHeight * height;\n\n    xAxisGroup.append('g')\n      .attr('transform', `translate(${chartWidth / 2}, ${Math.min(densityHeight - 15, xAxisGroupHeight + 5)})`)\n      .append('text')\n      .attr('class', 'x-axis-text')\n      .text(data.longName)\n      .style('fill', 'black')\n      .clone(true)\n      .style('stroke', '#FDFCFC')\n      .style('stroke-width', 3)\n      .lower();\n\n    // Draw the line chart Y axis\n    let yAxisGroup = axisGroup.append('g')\n      .attr('class', 'y-axis-wrapper')\n      .attr('clip-path', `url(#${featureData.name.replace(/\\s/g, '')}-y-axis-clip)`)\n      .append('g')\n      .attr('class', 'y-axis')\n      .attr('transform', `translate(${yAxisWidth}, 0)`);\n\n    yAxisGroup.call(d3.axisLeft(yScale));\n    yAxisGroup.attr('font-family', defaultFont);\n\n    yAxisGroup.append('g')\n      .attr('transform', `translate(${-yAxisWidth + 15}, ${chartHeight / 2}) rotate(-90)`)\n      .append('text')\n      .attr('class', 'y-axis-text')\n      .text(data.shortName)\n      .style('fill', 'black');\n\n    // Draw a color legend\n    let legendGroup = content.append('g')\n      .attr('class', 'legend-group')\n      .attr('transform', `translate(${width - legendConfig.width - svgPadding.right -\n        svgPadding.left}, ${-20})`);\n\n    drawHorizontalColorLegend(legendGroup, legendConfig, maxAbsScore);\n\n    // Draw the cont histograms at the bottom\n    let histData = [];\n\n    // Transform the count to frequency (percentage)\n    let histCountSum = d3.sum(data.longHistCount);\n    let histFrequency = data.longHistCount.map(d => d / histCountSum);\n\n    for (let i = 0; i < histFrequency.length; i++) {\n      histData.push({\n        x1: data.longHistEdgeName[i],\n        x2: data.longHistEdgeName[i + 1],\n        height: histFrequency[i]\n      });\n    }\n\n    let histYScale = d3.scaleLinear()\n      .domain(d3.extent(histFrequency))\n      .range([0, densityHeight]);\n\n    let histWidth = Math.min(30, xScale(histData[0].x2) - xScale(histData[0].x1));\n\n    // Draw the density histogram\n    let histChartContent = histChart.append('g')\n      .attr('class', 'hist-chart-content-group')\n      .attr('transform', `translate(${yAxisWidth}, ${chartHeight + legendHeight})`);\n\n    histChartContent.selectAll('rect')\n      .data(histData)\n      .join('rect')\n      .attr('class', 'hist-rect')\n      .attr('x', d => xScale(d.x1) - histWidth / 2)\n      .attr('y', 0)\n      .attr('width', histWidth)\n      .attr('height', d => histYScale(d.height))\n      .style('fill', colors.hist);\n\n    // Draw a Y axis for the histogram chart\n    let yAxisHistGroup = scatterPlot.append('g')\n      .attr('class', 'y-axis')\n      .attr('transform', `translate(${yAxisWidth}, ${chartHeight})`);\n\n    yAxisHistGroup.call(\n      d3.axisLeft(histYScale)\n        .ticks(2)\n    );\n\n    yAxisHistGroup.attr('font-family', defaultFont);\n\n    // Change 0.0 to 0\n    yAxisHistGroup.selectAll('text')\n      .style('fill', colors.histAxis)\n      .filter((d, i, g) => d3.select(g[i]).text() === '0.0')\n      .text('0');\n\n    yAxisHistGroup.selectAll('path,line')\n      .style('stroke', colors.histAxis);\n\n    yAxisHistGroup.append('g')\n      .attr('class', 'y-axis-text')\n      .attr('transform', `translate(${-yAxisWidth + 15}, ${densityHeight / 2}) rotate(-90)`)\n      .append('text')\n      .text('Density')\n      .style('fill', colors.histAxis);\n\n\n    // Add panning and zooming\n    let zoom = d3.zoom()\n      .scaleExtent(zoomScaleExtent)\n      .translateExtent([[0, 0], [width, height]])\n      .on('zoom', e => zoomed(e, xScale, yScale, svg, 2,\n        1, yAxisWidth, chartWidth, chartHeight, legendHeight, multiMenu, component))\n      .on('start', () => zoomStart(multiMenu))\n      .on('end', () => zoomEnd(multiMenu))\n      .filter(e => {\n        if (selectMode) {\n          return (e.type === 'wheel' || e.button === 2);\n        } else {\n          return (e.button === 0 || e.type === 'wheel');\n        }\n      });\n\n    scatterPlotContent.call(zoom)\n      .call(zoom.transform, d3.zoomIdentity);\n\n    // Use animation as a signifier for zoom affordance\n    // setTimeout(() => {\n    //   scatterPlotContent.transition()\n    //     .duration(400)\n    //     .call(zoom.scaleTo, 0.95);\n    // }, 400);\n\n    scatterPlotContent.on('dblclick.zoom', null);\n\n    // Listen to double click to reset zoom\n    scatterPlotContent.on('dblclick', () => {\n      scatterPlotContent.transition('reset')\n        .duration(750)\n        .ease(d3.easeCubicInOut)\n        .call(zoom.transform, d3.zoomIdentity);\n    });\n\n  };\n\n  /**\n   * Event handler for the select button in the header\n   */\n  export const selectModeSwitched = () => {\n    selectMode = !selectMode;\n\n    let lineChartContent = d3.select(svg)\n      .select('g.scatter-plot-content-group')\n      .classed('select-mode', selectMode);\n\n    lineChartContent.select('g.brush rect.overlay')\n      .attr('cursor', null);\n  };\n\n  $: featureData && mounted && !initialized && drawFeature(featureData);\n\n</script>\n\n<style type='text/scss'>\n  @import '../define';\n  @import './common.scss';\n\n\n  :global(.explain-panel .scatter-plot-content-group) {\n    cursor: grab;\n  }\n\n  :global(.explain-panel .scatter-plot-content-group:active) {\n    cursor: grabbing;\n  }\n\n  :global(.explain-panel .scatter-plot-content-group.select-mode) {\n    cursor: crosshair;\n  }\n\n  :global(.explain-panel .scatter-plot-content-group.select-mode:active) {\n    cursor: crosshair;\n  }\n\n</style>\n\n<div class='explain-panel' bind:this={component}>\n\n  <!-- <div class='context-menu-container hidden' bind:this={multiMenu}>\n    <ContextMenu\n      bind:controlInfo={multiMenuControlInfo}\n      bind:this={myContextMenu}\n      type='cat'\n      on:inputChanged={multiMenuInputChanged}\n      on:moveButtonClicked={multiMenuMoveClicked}\n      on:mergeClicked={multiMenuMergeClicked}\n      on:deleteClicked={multiMenuDeleteClicked}\n      on:moveCheckClicked={multiMenuMoveCheckClicked}\n      on:moveCancelClicked={multiMenuMoveCancelClicked}\n      on:subItemCheckClicked={multiMenuSubItemCheckClicked}\n      on:subItemCancelClicked={multiMenuSubItemCancelClicked}\n    />\n  </div> -->\n\n  <div class='svg-container'>\n    <svg class='svg-explainer' bind:this={svg}></svg>\n  </div>\n\n</div>","import d3 from '../utils/d3-import';\nimport { config } from '../config';\nimport { round } from '../utils/utils';\n\nconst barHeight = 18;\nconst textHeight = 22;\nconst sectionGap = 28;\nlet regressionScales = {};\n\n/**\n* Function to draw a curve (PR curve or ROC curve).\n*/\nexport const drawCurve = (curve, isPR, svg, lineGroup, groupColors) => {\n  const svgPadding = { top: 10, right: 40, bottom: 40, left: 40 };\n  const defaultFont = config.defaultFont;\n\n  let axisColor = groupColors.axis;\n\n  // Create data based on the curve type\n  let xText = isPR ? 'Recall' : 'False Positive Rate';\n  let yText = isPR ? 'Precision' : 'True Positive Rate';\n\n  let chartWidth = 200 - svgPadding.left - svgPadding.right;\n  let chartHeight = 170 - svgPadding.top - svgPadding.bottom;\n  let yAxisWidth = 15;\n\n  // Create x and y axis\n  let xScale = d3.scaleLinear().domain([0, 1]).range([0, chartWidth]);\n  let yScale = d3.scaleLinear().domain([0, 1]).range([chartHeight, 0]);\n\n  let xAxis = d3.axisBottom(xScale).ticks(2);\n  let yAxis = d3.axisLeft(yScale).ticks(2);\n\n  // Draw axis if user does not specify the argument\n  if (svg.select('.x-axis-group').size() === 0) {\n\n    // Add border\n    svg.append('rect')\n      .attr('class', 'border-rect')\n      .attr('x', svgPadding.left + yAxisWidth)\n      .attr('y', svgPadding.top)\n      .attr('width', chartWidth)\n      .attr('height', chartHeight)\n      .style('fill', 'none')\n      .style('stroke', axisColor);\n\n    // Add axis to the plot\n    svg.append('g')\n      .attr('class', 'x-axis-group')\n      .attr('transform', `translate(${svgPadding.left + yAxisWidth}, ${chartHeight + svgPadding.top})`)\n      .call(xAxis)\n      .attr('font-family', defaultFont)\n      .style('color', axisColor)\n      .append('text')\n      .attr('class', 'axis-label')\n      .attr('x', chartWidth / 2)\n      .attr('y', 30)\n      .attr('fill', axisColor)\n      .style('text-anchor', 'middle')\n      .text(xText);\n\n    svg.append('g')\n      .attr('class', 'y-axis-group')\n      .attr('transform', `translate(${svgPadding.left + yAxisWidth}, ${svgPadding.top})`)\n      .call(yAxis)\n      .attr('font-family', defaultFont)\n      .style('color', axisColor)\n      .append('text')\n      .attr('transform', 'rotate(-90)')\n      .attr('class', 'axis-label')\n      .attr('x', -chartHeight / 2)\n      .attr('y', -30)\n      .attr('fill', axisColor)\n      .style('text-anchor', 'middle')\n      .text(yText);\n  }\n\n  // Generate line path\n  let lineValue = d3.line()\n    .curve(d3.curveStepAfter)\n    .x(d => xScale(round(d[1], 4)))\n    .y(d => yScale(round(d[0], 4)));\n\n  // Add lines to the plot\n  svg.selectAll(`g.${lineGroup}`)\n    .data([curve])\n    .join(\n      enter => enter.append('g')\n        .attr('class', `${lineGroup}`)\n        .attr('transform', `translate(${svgPadding.left + yAxisWidth}, ${svgPadding.top})`)\n        .append('path')\n        .attr('d', d => lineValue(d))\n        .style('stroke', groupColors[lineGroup])\n        .style('fill', 'none'),\n      update => update.select('path')\n        .attr('d', d => lineValue(d)),\n      exit => exit.remove()\n    );\n\n};\n\n/**\n * Draw the bar charts in the classification metric tab. It also allocates space\n * for the confusion matrix at the bottom of the bar chart.\n * @param width Sidebar total width\n * @param svgPadding Object describing the paddings of the sidebar content\n * @param component Sidebar component\n * @param barData Data of metrics\n */\nexport const drawRegressionBarChart = (width, svgPadding, component, barData) => {\n\n  const lineY = barHeight * 3 + textHeight + sectionGap / 2 + 2;\n  const lineWidth = width - svgPadding.left - svgPadding.right;\n\n  let svg = d3.select(component)\n    .select('.bar-svg');\n\n  const groupData = [\n    { name: 'rmse', text: 'RMSE', title: 'Root Mean Squared Error' },\n    { name: 'mae', text: 'MAE', title: 'Mean Absolute Error' },\n    { name: 'mape', text: 'MAPE', title: 'Mean Absolute Percentage Error' }\n  ];\n\n  const rectOrder = ['original', 'last', 'current'];\n\n  // Initialize the group structure if it is the first call\n  if (svg.select('.bar-group').size() === 0) {\n\n    let barGroup = svg.append('g')\n      .attr('class', 'bar-group')\n      .attr('transform', `translate(0, ${10})`);\n\n    // Add three bar chart groups\n    let bars = barGroup.selectAll('g.bar')\n      .data(groupData)\n      .join('g')\n      .attr('class', d => `bar ${d.name}-group`)\n      .attr('transform', (d, i) => `translate(${svgPadding.left}, ${i * (3 * barHeight + textHeight + sectionGap)})`);\n\n    bars.append('text')\n      .attr('class', 'metric-title')\n      .text(d => d.text);\n\n    bars.append('path')\n      .attr('d', `M ${0}, ${lineY} L ${lineWidth}, ${lineY}`)\n      .style('stroke', 'hsla(0, 0%, 0%, 0.2)')\n      .style('visibility', d => d.name === 'confusionMatrix' ? 'hidden' : 'show');\n\n    // Add color legend next to the first metric\n    let legendGroup = barGroup.select(`g.${groupData[0].name}-group`);\n\n    const legendData = [\n      { name: 'origin', class: 'original', title: 'Metrics of the original graph', width: 42, x: 0 },\n      { name: 'last', class: 'last', title: 'Metrics of the last edit', width: 28, x: 47 },\n      { name: 'current', class: 'current', title: 'Metrics of the current graph', width: 50, x: 80 }\n    ];\n\n    let items = legendGroup.selectAll('g.legend-item')\n      .data(legendData)\n      .join('g')\n      .style('cursor', 'default')\n      .attr('transform', d => `translate(${60 + d.x}, 0)`);\n\n    items.append('title')\n      .text(d => d.title);\n\n    items.append('rect')\n      .attr('width', d => d.width)\n      .attr('height', 16)\n      .attr('rx', 3)\n      .attr('class', d => d.class);\n\n    items.append('text')\n      .attr('class', 'legend-title')\n      .attr('y', 2)\n      .attr('x', d => d.width / 2)\n      .text(d => d.name);\n\n    // Add metrics explanation (we have some space left for regression metrics)\n    let metricLegendGroup = barGroup.append('g')\n      .attr('class', 'metric-legend')\n      .attr('transform', `translate(${svgPadding.left},\n        ${6 + 3 * (3 * barHeight + textHeight + sectionGap)})`);\n\n    let rmseText = metricLegendGroup.append('text')\n      .style('dominant-baseline', 'hanging')\n      .style('font-size', '0.85em')\n      .attr('x', 0)\n      .attr('y', 0);\n    \n    rmseText.append('tspan')\n      .attr('x', 0)\n      .attr('dy', 0)\n      .style('font-weight', 600)\n      .text('RMSE: ');\n    \n    rmseText.append('tspan')\n      .text('Root Mean Squared Error');\n\n    rmseText.append('tspan')\n      .attr('dy', '1.1em')\n      .attr('x', 0)\n      .style('fill', 'hsl(0, 0%, 60%)')\n      .text('Penalize larger errors');\n\n    let maeText = metricLegendGroup.append('text')\n      .attr('x', 0)\n      .attr('y', 52)\n      .style('font-size', '0.85em');\n\n    maeText.append('tspan')\n      .attr('x', 0)\n      .attr('dy', 0)\n      .style('font-weight', 600)\n      .text('MAE: ');\n\n    maeText.append('tspan')\n      .text('Mean Absolute Error');\n\n    maeText.append('tspan')\n      .attr('dy', '1.1em')\n      .attr('x', 0)\n      .style('fill', 'hsl(0, 0%, 60%)')\n      .text('Weight all errors equally');\n\n    let mapeText = metricLegendGroup.append('text')\n      .attr('x', 0)\n      .attr('y', 83)\n      .style('dominant-baseline', 'hanging')\n      .style('font-size', '0.85em');\n\n    mapeText.append('tspan')\n      .attr('x', 0)\n      .attr('dy', 0)\n      .style('font-weight', 600)\n      .text('MAPE: ');\n\n    mapeText.append('tspan')\n      .text('Mean Abs Percentage Err');\n\n    mapeText.append('tspan')\n      .attr('dy', '1.1em')\n      .attr('x', 0)\n      .style('fill', 'hsl(0, 0%, 60%)')\n      .text('Insensitive to the unit of errors');\n  }\n\n  // Create bars and texts (for the first time)\n  let barGroup = svg.select('.bar-group');\n\n  if (svg.selectAll('rect.bar').size() === 0) {\n\n    /**\n     * Figure out the width scale (more complicated than classification metrics)\n     * Here we don't know what's the upper limit for all errors\n     * 1. We map the default value to the 61.803% point\n     * 2. We clamp the width at 0% and 100% points\n     */\n\n    Object.keys(barData).forEach(k => {\n\n      const curMaxError = barData[k][0] / (100 - 61.803) * 100;\n\n      regressionScales[k] = d3.scaleLinear()\n        .domain([0, curMaxError])\n        .range([0, width - svgPadding.left - svgPadding.right])\n        .unknown(25)\n        .clamp(true);\n\n      barGroup.select(`.${k}-group`)\n        .selectAll('rect.bar')\n        .data(barData[k].slice(0, 3))\n        .join('rect')\n        .attr('class', (d, i) => `bar ${rectOrder[i]}`)\n        .attr('y', (d, i) => (i) * (barHeight + 0) + textHeight)\n        .attr('width', d => regressionScales[k](d))\n        .attr('height', barHeight);\n\n      barGroup.select(`.${k}-group`)\n        .selectAll('text.bar')\n        .data(barData[k].slice(0, 3))\n        .join('text')\n        .attr('class', (d, i) => `bar-label ${rectOrder[i]}`)\n        .attr('x', 3)\n        .attr('y', (d, i) => (i) * (barHeight + 0) + barHeight / 2 + textHeight + 1)\n        .text(d => round(d, 4));\n    });\n  }\n\n  // Update the bars\n  Object.keys(barData).forEach(k => {\n    for (let i = 0; i < 3; i++) {\n      barGroup.select(`.${k}-group`)\n        .select(`rect.bar.${rectOrder[i]}`)\n        .transition('update-metric')\n        .duration(200)\n        .attr('width', regressionScales[k](barData[k][i]));\n\n      barGroup.select(`.${k}-group`)\n        .select(`text.bar-label.${rectOrder[i]}`)\n        .text(barData[k][i] === null || isNaN(barData[k][i]) ? 'NA' : round(barData[k][i], 4));\n    }\n  });\n\n};\n\n/**\n * Draw the bar charts in the classification metric tab. It also allocates space\n * for the confusion matrix at the bottom of the bar chart.\n * @param width Sidebar total width\n * @param svgPadding Object describing the paddings of the sidebar content\n * @param component Sidebar component\n * @param barData Data of metrics\n * @param isClassification If the current model is a classifier\n */\nexport const drawClassificationBarChart = (width, svgPadding, component, barData) => {\n\n  const lineY = barHeight * 3 + textHeight + sectionGap / 2 + 2;\n  const lineWidth = width - svgPadding.left - svgPadding.right;\n\n  let svg = d3.select(component)\n    .select('.bar-svg');\n\n  const groupData = [\n    { name: 'accuracy', text: 'Accuracy' },\n    { name: 'balancedAccuracy', text: 'Balanced Accuracy' },\n    { name: 'rocAuc', text: 'ROC AUC' },\n    { name: 'confusionMatrix', text: 'Confusion Matrix' }\n  ];\n\n  let widthScale = d3.scaleLinear()\n    .domain([0, 1])\n    .range([0, width - svgPadding.left - svgPadding.right])\n    .unknown(25);\n\n  const rectOrder = ['original', 'last', 'current'];\n\n  // Initialize the group structure if it is the first call\n  if (svg.select('.bar-group').size() === 0) {\n\n    let barGroup = svg.append('g')\n      .attr('class', 'bar-group')\n      .attr('transform', `translate(0, ${10})`);\n\n    // Add three bar chart groups\n    let bars = barGroup.selectAll('g.bar')\n      .data(groupData)\n      .join('g')\n      .attr('class', d => `bar ${d.name}-group`)\n      .attr('transform', (d, i) => `translate(${svgPadding.left}, ${i * (3 * barHeight + textHeight + sectionGap)})`);\n\n    bars.append('text')\n      .attr('class', 'metric-title')\n      .text(d => d.text);\n\n    bars.append('path')\n      .attr('d', `M ${0}, ${lineY} L ${lineWidth}, ${lineY}`)\n      .style('stroke', 'hsla(0, 0%, 0%, 0.2)')\n      .style('visibility', d => d.name === 'confusionMatrix' ? 'hidden' : 'show');\n\n    // Add color legend next to the first metric\n    let legendGroup = barGroup.select(`g.${groupData[0].name}-group`);\n\n    const legendData = [\n      { name: 'origin', class: 'original', title: 'Metrics of the original graph', width: 42, x: 0 },\n      { name: 'last', class: 'last', title: 'Metrics of the last edit', width: 28, x: 47 },\n      { name: 'current', class: 'current', title: 'Metrics of the current graph', width: 50, x: 80 }\n    ];\n\n    let items = legendGroup.selectAll('g.legend-item')\n      .data(legendData)\n      .join('g')\n      .style('cursor', 'default')\n      .attr('transform', d => `translate(${80 + d.x}, 0)`);\n\n    items.append('title')\n      .text(d => d.title);\n\n    items.append('rect')\n      .attr('width', d => d.width)\n      .attr('height', 16)\n      .attr('rx', 3)\n      .attr('class', d => d.class);\n\n    items.append('text')\n      .attr('class', 'legend-title')\n      .attr('y', 2)\n      .attr('x', d => d.width / 2)\n      .text(d => d.name);\n  }\n\n  // Create bars and texts\n  let barGroup = svg.select('.bar-group');\n\n  if (svg.selectAll('rect.bar').size() === 0) {\n    Object.keys(barData).forEach(k => {\n\n      barGroup.select(`.${k}-group`)\n        .selectAll('rect.bar')\n        .data(barData[k].slice(0, 3))\n        .join('rect')\n        .attr('class', (d, i) => `bar ${rectOrder[i]}`)\n        .attr('y', (d, i) => (i) * (barHeight + 0) + textHeight)\n        .attr('width', d => widthScale(d))\n        .attr('height', barHeight);\n\n      barGroup.select(`.${k}-group`)\n        .selectAll('text.bar')\n        .data(barData[k].slice(0, 3))\n        .join('text')\n        .attr('class', (d, i) => `bar-label ${rectOrder[i]}`)\n        .attr('x', 3)\n        .attr('y', (d, i) => (i) * (barHeight + 0) + barHeight / 2 + textHeight + 1)\n        .text(d => round(d, 4));\n    });\n  }\n\n  // Update the bars\n  Object.keys(barData).forEach(k => {\n    for(let i = 0; i < 3; i++) {\n      barGroup.select(`.${k}-group`)\n        .select(`rect.bar.${rectOrder[i]}`)\n        .transition('update-metric')\n        .duration(200)\n        .attr('width', widthScale(barData[k][i]));\n      \n      barGroup.select(`.${k}-group`)\n        .select(`text.bar-label.${rectOrder[i]}`)\n        .text(barData[k][i] === null || isNaN(barData[k][i]) ? 'NA' : round(barData[k][i], 4));\n    }\n  });\n\n};\n\n/**\n * Draw the confusion matrix\n * @param width Sidebar total width\n * @param svgPadding Object describing the paddings of the sidebar content\n * @param component Sidebar component\n */\nexport const drawConfusionMatrix = (width, svgPadding, component, confusionMatrixData) => {\n\n  let barGroup = d3.select(component)\n    .select('.bar-svg')\n    .select('.bar-group');\n\n  // Draw the confusion matrix if it has not been created yet\n  if (barGroup.select('.confusion-matrix-content').empty()) {\n    let matrixGroup = barGroup.select('.confusionMatrix-group')\n      .append('g')\n      .attr('class', 'confusion-matrix-content')\n      .attr('transform', `translate(0, ${textHeight})`);\n\n    // Compute the rectangle width\n    const middleGap = 6;\n    const rectHeight = 20;\n    const explanationHeight = 14;\n    const explanationWidth = 40;\n    const sRectWidth = (width - svgPadding.left - svgPadding.right - middleGap - explanationWidth) / 4;\n    const lRectWidth = 2 * sRectWidth;\n\n    const drawRectGroup = (curGroup, data) => {\n      // Draw the rectangles\n      curGroup.selectAll('rect.matrix-element')\n        .data(data)\n        .join('rect')\n        .attr('class', d => `matrix-element ${d.group}`)\n        .attr('x', d => d.x)\n        .attr('y', d => d.y)\n        .attr('width', d => d.width)\n        .attr('height', rectHeight);\n\n      // Draw the text\n      curGroup.selectAll('text.matrix-label')\n        .data(data)\n        .join('text')\n        .attr('class', d => `matrix-label ${d.group}`)\n        .attr('x', d => d.x + d.width / 2)\n        .attr('y', d => d.y + rectHeight / 2 + 1)\n        .text('32');\n    };\n\n    const topData = [\n      { x: 0, y: 0, width: sRectWidth, group: 'original' },\n      { x: sRectWidth, y: 0, width: sRectWidth, group: 'last' },\n      { x: 0, y: rectHeight, width: lRectWidth, group: 'current' }\n    ];\n\n    const botData = [\n      { x: 0, y: rectHeight, width: sRectWidth, group: 'original' },\n      { x: sRectWidth, y: rectHeight, width: sRectWidth, group: 'last' },\n      { x: 0, y: 0, width: lRectWidth, group: 'current' }\n    ];\n\n    // TP group\n    let matSubGroup = matrixGroup.append('g')\n      .attr('class', 'matrix-group-tp')\n      .attr('transform', `translate(${0}, ${0})`);\n\n    matSubGroup.append('text')\n      .attr('class', 'matrix-explanation')\n      .text('Predicted Yes');\n\n    matSubGroup.append('g', 'matrix-element')\n      .attr('transform', `translate(${0}, ${explanationHeight})`)\n      .call(drawRectGroup, topData);\n\n    // FP group\n    matSubGroup = matrixGroup.append('g')\n      .attr('class', 'matrix-group-fp')\n      .attr('transform', `translate(${lRectWidth + middleGap}, ${0})`);\n\n    matSubGroup.append('text')\n      .attr('class', 'matrix-explanation')\n      .text('Predicted No');\n\n    let curText = matSubGroup.append('text')\n      .attr('class', 'matrix-explanation dominant-middle')\n      .attr('y', rectHeight + explanationHeight - explanationHeight / 2 + 2);\n\n    curText.append('tspan')\n      .attr('class', 'dominant-middle')\n      .attr('x', lRectWidth + 3)\n      .attr('dy', 0)\n      .text('Actual');\n\n    curText.append('tspan')\n      .attr('class', 'dominant-middle')\n      .attr('x', lRectWidth + 3)\n      .attr('dy', '1em')\n      .text('Yes');\n\n    matSubGroup.append('g', 'matrix-element')\n      .attr('transform', `translate(${0}, ${explanationHeight})`)\n      .call(drawRectGroup, topData);\n\n    // FN group\n    matSubGroup = matrixGroup.append('g')\n      .attr('class', 'matrix-group-fn')\n      .attr('transform', `translate(${0}, ${2 * rectHeight + middleGap + explanationHeight})`);\n\n    matSubGroup.append('g', 'matrix-element')\n      .attr('transform', `translate(${0}, ${0})`)\n      .call(drawRectGroup, botData);\n\n    // TN group\n    matSubGroup = matrixGroup.append('g')\n      .attr('class', 'matrix-group-tn')\n      .attr('transform', `translate(${lRectWidth + middleGap}, ${2 * rectHeight + middleGap + explanationHeight})`);\n\n    curText = matSubGroup.append('text')\n      .attr('class', 'matrix-explanation dominant-middle')\n      .attr('y', rectHeight - explanationHeight / 2 + 2);\n\n    curText.append('tspan')\n      .attr('class', 'dominant-middle')\n      .attr('x', lRectWidth + 3)\n      .attr('dy', 0)\n      .text('Actual');\n\n    curText.append('tspan')\n      .attr('class', 'dominant-middle')\n      .attr('x', lRectWidth + 3)\n      .attr('dy', '1em')\n      .text('No');\n\n    matSubGroup.append('g', 'matrix-element')\n      .attr('transform', `translate(${0}, ${0})`)\n      .call(drawRectGroup, botData);\n  }\n\n  // Update the text in the matrix with confusionMatrixData\n  let contentGroup = barGroup.select('.confusion-matrix-content');\n\n  Object.keys(confusionMatrixData).forEach(k => {\n    let groups = ['original', 'last', 'current'];\n\n    for (let i = 0; i < groups.length; i++) {\n      let g = groups[i];\n      let curText;\n\n      if (confusionMatrixData[k][i] === null) {\n        curText = 'NA';\n      } else {\n        curText = confusionMatrixData[k][i];\n      }\n\n      contentGroup.select(`.matrix-group-${k}`)\n        .select(`.matrix-label.${g}`)\n        .text(curText);\n    }\n\n\n  });\n\n\n\n};\n","<script>\n  import d3 from '../utils/d3-import';\n  import { round } from '../utils/utils';\n  import { onMount } from 'svelte';\n  import { drawClassificationBarChart, drawConfusionMatrix, drawRegressionBarChart } from './draw-metric';\n\n  export let sidebarStore;\n\n  let component = null;\n  let sliceSelect = null;\n  let loadingBar = null;\n  let sidebarInfo = {};\n  let width = 0;\n  let height = 0;\n\n  const svgPadding = {top: 10, right: 15, bottom: 40, left: 15};\n\n  let confusionMatrixData = {\n    tn: [23.2, null, 23, null],\n    fn: [23.2, null, 23, null],\n    fp: [23.2, null, 23, null],\n    tp: [23.2, null, 23, null]\n  };\n\n  // [original, last, current, last last]\n  let barData = {\n    accuracy: [0.5, null, 0.5, null],\n    rocAuc: [0.5, null, 0.5, null],\n    balancedAccuracy: [0.5, null, 0.5, null]\n  };\n\n  let barDataRegression = {\n    rmse: [0.5, null, 0.5, null],\n    mae: [0.5, null, 0.5, null],\n    mape: [0.5, null, 0.5, null]\n  };\n\n  onMount(() => {\n    width = component.getBoundingClientRect().width;\n    height = component.getBoundingClientRect().height;\n\n    let svgInstance = d3.select(component)\n      .select('.bar-svg')\n      .node()\n      .parentNode;\n\n    let scrollBarWidth = svgInstance.offsetWidth - svgInstance.clientWidth;\n\n    console.log(`effect tab: [${width}, ${height}, ${scrollBarWidth}]`);\n\n    width -= scrollBarWidth;\n\n    // Initialize the size of all svgs\n    d3.select(component)\n      .selectAll('.bar-svg')\n      .attr('width', width)\n      .attr('height', 455);\n\n    // Expose loading bar to other components\n    sidebarInfo.loadingBar = loadingBar;\n    d3.select(loadingBar).classed('animated', false);\n    sidebarStore.set(sidebarInfo);\n  });\n\n  const copyMetricData = (barData, confusionMatrixData, fromIndex, toIndex) => {\n\n    Object.keys(barData).forEach(d => {\n      barData[d][toIndex] = barData[d][fromIndex];\n    });\n\n    Object.keys(confusionMatrixData).forEach((d) => {\n      confusionMatrixData[d][toIndex] = confusionMatrixData[d][fromIndex];\n    });\n  };\n\n  const tabClicked = (tab) => {\n    let opt = sliceSelect.options[sliceSelect.selectedIndex];\n\n    if (sidebarInfo.effectScope !== tab) {\n      if (tab !== 'slice') {\n        sidebarInfo.curGroup = `${tab}Clicked`;\n        sidebarInfo.effectScope = tab;\n        sidebarStore.set(sidebarInfo);\n      } else {\n        if (opt.value !== 'slice') {\n          sidebarInfo.curGroup = `${tab}Clicked`;\n          sidebarInfo.effectScope = tab;\n          sidebarStore.set(sidebarInfo);\n        }\n      }\n    }\n  };\n\n  const sliceChanged = () => {\n    // Change the focus to the slice tab\n    sidebarInfo.curGroup = 'sliceClicked';\n    sidebarInfo.effectScope = 'slice';\n\n    // Get the selected variable info\n    let opt = sliceSelect.options[sliceSelect.selectedIndex];\n\n    // User clicks the default 'slice' => jump back to global\n    if (opt.value === 'slice') {\n      sidebarInfo.curGroup = 'globalClicked';\n      sidebarInfo.effectScope = 'global';\n    } else {\n      sidebarInfo.sliceInfo = {\n        featureID: parseInt(opt.value),\n        level: parseInt(opt.dataset.level)\n      };\n    }\n    sidebarStore.set(sidebarInfo);\n  };\n\n  /**\n   * Load the data from sidebarInfo to barData, confusionMatrixData at index i\n   */\n  const updateData = (index, barData, confusionMatrixData, sidebarInfo) => {\n    if (sidebarInfo.confusionMatrix.length === 0 && sidebarInfo.isClassification) {\n      return;\n    }\n\n    Object.keys(barData).forEach(d => {\n      barData[d][index] = sidebarInfo[d];\n    });\n\n    if (sidebarInfo.isClassification) {\n      let total = sidebarInfo.confusionMatrix.reduce((a, b) => a + b);\n\n      const confusionMatrixIndexes = ['tn', 'fn', 'fp', 'tp'];\n      confusionMatrixIndexes.forEach((d, i) => {\n        // Convert the count to percentage if total is above 10k\n        if (total > 10000) {\n          confusionMatrixData[d][index] = sidebarInfo.confusionMatrix[i] / total;\n          confusionMatrixData[d][index] = `${round(confusionMatrixData[d][index] * 100, 1)}%`;\n        } else {\n          // Use the raw count other wise\n          confusionMatrixData[d][index] = sidebarInfo.confusionMatrix[i];\n        }\n      });\n    }\n  };\n\n  sidebarStore.subscribe(value => {\n    sidebarInfo = value;\n\n    switch(sidebarInfo.curGroup) {\n    case 'original': {\n      // Change the barData definition if it is a regression model\n      if (!sidebarInfo.isClassification) {\n        barData = barDataRegression;\n      }\n\n      updateData(0, barData, confusionMatrixData, sidebarInfo);\n\n      copyMetricData(barData, confusionMatrixData, 0, 2);\n\n      sidebarInfo.barData = JSON.parse(JSON.stringify(barData));\n      sidebarInfo.confusionMatrixData = JSON.parse(JSON.stringify(confusionMatrixData));\n      sidebarInfo.curGroup = 'originalCompleted';\n\n      // Popularize the slice option list\n      let selectElement = d3.select(component).select('#slice-select');\n      sidebarInfo.sliceOptions.forEach(optionGroup => {\n        let optGroup = selectElement.append('optgroup')\n          .attr('label', optionGroup[0].name);\n\n        optionGroup.forEach(opt => {\n          optGroup.append('option')\n            .attr('value', opt.featureID)\n            .attr('data-level', opt.level)\n            .text(opt.levelName);\n        });\n      });\n\n      sidebarStore.set(sidebarInfo);\n      break;\n    }\n\n    case 'new-feature-original': {\n      // Nullify the last metric\n      Object.keys(barData).forEach(k => barData[k][1] = null);\n      Object.keys(confusionMatrixData).forEach(k => confusionMatrixData[k][1] = null);\n\n      sidebarInfo.barData = JSON.parse(JSON.stringify(barData));\n      sidebarInfo.confusionMatrixData = JSON.parse(JSON.stringify(confusionMatrixData));\n      sidebarInfo.curGroup = 'originalCompleted';\n\n      sidebarStore.set(sidebarInfo);\n\n      break;\n    }\n\n    case 'current':\n      updateData(2, barData, confusionMatrixData, sidebarInfo);\n      break;\n\n    case 'last':\n      // Copy current to last\n      copyMetricData(barData, confusionMatrixData, 2, 1);\n\n      // Handle edge case: users can use multiple editing methods without committing\n      // or canceling, and the last metrics should not be updated when user switch\n      // the editing tool during one editing sequence\n      // Solution: use a state to track if user enters/leaves one editing sequence\n      // Make sure sidebarInfo.hasUpdatedLastMetrics is updated when calling\n      // sidebar update with 'last'\n      break;\n\n    case 'commit':\n\n      // Copy last to last last\n      copyMetricData(barData, confusionMatrixData, 1, 3);\n\n      // Track the barData and confusionMatrix in the store so they can saved\n      // in the history stack (only if the commit is global)\n      if (sidebarInfo.effectScope === 'global') {\n        sidebarInfo.barData = JSON.parse(JSON.stringify(barData));\n        sidebarInfo.confusionMatrixData = JSON.parse(JSON.stringify(confusionMatrixData));\n\n        sidebarInfo.curGroup = 'commitCompleted';\n        sidebarStore.set(sidebarInfo);\n      }\n\n      break;\n\n    case 'commit-not-global': {\n      let globalBarData = sidebarInfo.barData;\n      let globalConfusionMatrixData = sidebarInfo.confusionMatrixData;\n\n      // Copy last to last last\n      copyMetricData(globalBarData, globalConfusionMatrixData, 1, 3);\n\n      // Copy current to last\n      copyMetricData(globalBarData, globalConfusionMatrixData, 2, 1);\n\n      // Update the current\n      updateData(2, globalBarData, globalConfusionMatrixData, sidebarInfo);\n\n      // Save into the history stack\n      sidebarInfo.barData = JSON.parse(JSON.stringify(globalBarData));\n      sidebarInfo.confusionMatrixData = JSON.parse(JSON.stringify(globalConfusionMatrixData));\n\n      sidebarInfo.curGroup = 'commitCompleted';\n      sidebarStore.set(sidebarInfo);\n\n      break;\n    }\n\n    case 'recover':\n      // Copy last to current, copy last last to last\n      copyMetricData(barData, confusionMatrixData, 1, 2);\n      copyMetricData(barData, confusionMatrixData, 3, 1);\n      break;\n\n    case 'overwrite':\n      barData = JSON.parse(JSON.stringify(sidebarInfo.barData));\n      confusionMatrixData = JSON.parse(JSON.stringify(sidebarInfo.confusionMatrixData));\n\n      sidebarInfo.curGroup = 'overwriteCompleted';\n      sidebarStore.set(sidebarInfo);\n      break;\n\n    case 'nullify':\n      confusionMatrixData = {\n        tn: [null, null, null, null],\n        fn: [null, null, null, null],\n        fp: [null, null, null, null],\n        tp: [null, null, null, null]\n      };\n\n      Object.keys(barData).forEach(d => {\n        barData[d] = [null, null, null, null];\n      });\n\n      sidebarInfo.curGroup = 'nullifyCompleted';\n      sidebarStore.set(sidebarInfo);\n      break;\n\n    case 'nullify-last':\n      Object.keys(confusionMatrixData).forEach(k => confusionMatrixData[k][1] = null);\n      Object.keys(barData).forEach(k => barData[k][1] = null);\n      break;\n\n    case 'original-only':\n      updateData(0, barData, confusionMatrixData, sidebarInfo);\n      break;\n\n    case 'last-only':\n      updateData(1, barData, confusionMatrixData, sidebarInfo);\n      break;\n\n    case 'current-only':\n      updateData(2, barData, confusionMatrixData, sidebarInfo);\n      break;\n\n    default:\n      break;\n    }\n\n    // We only update the graph if the user is currently in this tab\n    if (sidebarInfo.selectedTab === 'effect' && sidebarInfo.isClassification !== null) {\n      if (sidebarInfo.isClassification) {\n        drawClassificationBarChart(width, svgPadding, component, barData);\n        drawConfusionMatrix(width, svgPadding, component, confusionMatrixData);\n      } else {\n        drawRegressionBarChart(width, svgPadding, component, barData);\n      }\n    }\n\n  });\n\n</script>\n\n<style type='text/scss'>\n\n  @import '../define';\n\n  .metrics-tab {\n    height: 100%;\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    overflow-y: hidden;\n    overflow-x: hidden;\n  }\n\n  .metrics {\n    height: 100%;\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: flex-start;\n    overflow-y: scroll;\n    overflow-x: hidden;\n    position: relative;\n    background-color: $brown-50;\n    border-top: 1px solid $blue-50;\n\n    svg {\n      flex-shrink: 0;\n    }\n  }\n\n  .text {\n    width: 100%;\n    text-align: center;\n  }\n\n  .bar-svg {\n    margin-top: 0px;\n  }\n\n  .scope-selection.field {\n    margin-top: 11px;\n    margin-bottom: 11px;\n    padding: 0 5px;\n    justify-content: space-around;\n  }\n\n  .control {\n    flex: 1;\n  }\n\n  .button {\n    width: 100%;\n    padding: 1px 11px;\n    font-size: 0.9em;\n    font-weight: 400;\n    height: auto;\n    border-color: $gray-border;\n\n    &:hover {\n      background: $gray-100;\n    }\n\n    &:focus:not(:active) {\n      box-shadow: none;\n    }\n\n    &:focus {\n      border-color: $gray-border;\n    }\n\n    &.selected {\n      background: $gray-200;\n    }\n  }\n\n  .select {\n    text-overflow: ellipsis;\n    width: 100%;\n  }\n\n  :global(.metrics-tab text.bar) {\n    fill: hsl(230, 100%, 11%);\n    font-size: 13px;\n  }\n\n  :global(.metrics-tab rect.original) {\n    fill: $gray-300;\n  }\n\n  :global(.metrics-tab rect.last) {\n    fill: $pastel1-orange;\n  }\n\n  :global(.metrics-tab rect.current) {\n    fill: $pastel1-blue;\n  }\n\n  :global(.metrics-tab svg text) {\n    cursor: default;\n  }\n\n  :global(.metrics-tab .metric-title) {\n    dominant-baseline: hanging;\n    font-size: 1.1em;\n    font-weight: 600;\n  }\n\n  :global(.metrics-tab .legend-title) {\n    dominant-baseline: hanging;\n    text-anchor: middle;\n    font-size: 0.8em;\n    font-weight: 300;\n    fill: $indigo-dark;\n  }\n\n  :global(.metrics-tab .bar-label) {\n    dominant-baseline: middle;\n    text-anchor: start;\n    font-size: 0.8em;\n    font-weight: 200;\n    fill: $indigo-dark;\n  }\n\n  :global(.metrics-tab .matrix-label) {\n    dominant-baseline: middle;\n    text-anchor: middle;\n    font-size: 0.8em;\n    font-weight: 300;\n    fill: $indigo-dark;\n  }\n\n  :global(.metrics-tab .matrix-explanation) {\n    dominant-baseline: hanging;\n    text-anchor: start;\n    font-size: 0.7em;\n    font-weight: 300;\n    fill: hsl(0, 0%, 45%);\n  }\n\n  :global(.metrics-tab .dominant-middle) {\n    dominant-baseline: middle;\n  }\n\n\n</style>\n\n<div class='metrics-tab' bind:this={component}>\n\n    <div class='scope-selection field has-addons'>\n\n      <div class='control'>\n        <button class='button' title='Show model performance across all validation samples'\n          class:selected={sidebarInfo.effectScope === 'global'}\n          on:click={() => tabClicked('global')}\n        >\n          <span class='is-small'>\n            Global\n          </span>\n        </button>\n      </div>\n\n      <div class='control'>\n        <button class='button' title='Show model performance on the selected validation samples'\n          class:selected={sidebarInfo.effectScope === 'selected'}\n          on:click={() => tabClicked('selected')}\n        >\n          <span class='is-small'>\n            Selected\n          </span>\n        </button>\n      </div>\n\n      <div class='control'>\n        <select class='button right-button select' name='slice'\n          bind:this={sliceSelect}\n          id='slice-select'\n          title='Show model performance on the sliced validation samples'\n          class:selected={sidebarInfo.effectScope === 'slice'}\n          on:click={() => tabClicked('slice')}\n          on:blur={() => {}}\n          on:change={sliceChanged}\n        >\n          <option selected value='slice'>Slice</option>\n\n          <!-- <span style='color: hsla(0, 0%, 0%, 0.2); margin-left: 5px;'>▼</span> -->\n      </select>\n      </div>\n\n    </div>\n\n  <div class='metrics'>\n    <svg class='bar-svg'></svg>\n  </div>\n\n</div>","<script>\n  import d3 from '../utils/d3-import';\n  import { onMount } from 'svelte';\n  import { splitFileName } from '../utils/utils';\n\n  import oneIconSVG from '../img/one-icon.svg';\n  import twoIconSVG from '../img/two-icon.svg';\n\n  // 'sampleData' or 'modelData'\n  export let dataType = 'sampleData';\n  export let sidebarStore;\n\n  let component = null;\n  let inputElem = null;\n  let isDragging = false;\n  let dragElement = null;\n\n  let errorMessage = ' ';\n\n  // Bind the SVGs\n  const preProcessSVG = (svgString) => {\n    return svgString.replaceAll('black', 'currentcolor')\n      .replaceAll('fill:none', 'fill:currentcolor')\n      .replaceAll('stroke:none', 'fill:currentcolor');\n  };\n\n  /**\n   * Dynamically bind SVG files as inline SVG strings in this component\n   */\n  const bindInlineSVG = () => {\n    d3.select(component)\n      .selectAll('.svg-icon.icon-one')\n      .html(preProcessSVG(oneIconSVG));\n\n    d3.select(component)\n      .selectAll('.svg-icon.icon-two')\n      .html(preProcessSVG(twoIconSVG));\n  };\n\n  const clickHandler = () => {\n    inputElem.click();\n  };\n\n  const dragEnterHandler = (e) => {\n    e.preventDefault();\n\n    isDragging = true;\n\n    // Store the drag element, so we don't leave the drag state when user hovers\n    // over the messages\n    dragElement = e.target;\n  };\n\n  const dragOverHandler = (e) => {\n    e.preventDefault();\n  };\n\n  const dragLeaveHandler = (e) => {\n    e.preventDefault();\n\n    if (dragElement === e.target) {\n      isDragging = false;\n    }\n  };\n\n  const readJSON = (file) => {\n    return new Promise((resolve, reject) => {\n      let fr = new FileReader();  \n      fr.onload = () => {\n        resolve(JSON.parse(fr.result));\n      };\n      fr.onerror = reject;\n      fr.readAsText(file);\n    });\n  };\n\n  const validateFile = async (file) => {\n\n    // Test if it is a valid .gamchanger file\n    let extension = splitFileName(file)[1];\n    let isGamchangerFile = extension === 'gamchanger';\n\n    if (file.type !== 'application/json' && !isGamchangerFile) {\n      errorMessage = 'It is not a JSON file';\n      return false;\n    }\n\n    // Try to read the file\n    let data = await readJSON(file);\n\n    // Test if it is a valid file\n    let isValid = false;\n    if (dataType === 'sampleData') {\n      isValid = (data.featureNames !== undefined && data.featureTypes !== undefined &&\n        data.samples !== undefined && data.labels !== undefined);\n    }\n\n    if (dataType === 'modelData') {\n      isValid = (data.intercept !== undefined && data.features !== undefined &&\n        data.labelEncoder !== undefined && data.scoreRange !== undefined);\n    }\n\n    if (isGamchangerFile) {\n      isValid = (data.modelData !== undefined && data.sampleData !== undefined);\n    }\n\n    if (!isValid) {\n      if (isGamchangerFile) {\n        errorMessage = 'Not a valid .gamchanger document file';\n      } else {\n        errorMessage = `Not a valid ${dataType === 'sampleData' ? 'sample data' : 'model data'} file`;\n      }\n      return false;\n    }\n\n    return data;\n  };\n\n  const dropHandler = async(e) => {\n    e.preventDefault();\n    let data = false;\n    let file = null;\n\n    if (e.dataTransfer.items) {\n      // Use DataTransferItemList interface to access the file(s)\n      if (e.dataTransfer.items[0].kind === 'file') {\n        file = e.dataTransfer.items[0].getAsFile();\n        data = await validateFile(file);\n      }\n    } else {\n      // Use DataTransfer interface to access the file(s)\n      file = e.dataTransfer.files[0];\n      data = await validateFile(file);\n    }\n\n    if (!data) return;\n\n    // Check if the file is .gamchanger file\n    const extension = splitFileName(file)[1];\n    const isGamchangerFile = extension === 'gamchanger';\n\n    // Pass the data to other components through store\n    sidebarStore.update(value => {\n      value.curGroup = isGamchangerFile ? 'gamchangerCreated' : `${dataType}Created`;\n      value.loadedData = data;\n      return value;\n    });\n\n    isDragging = false;\n  };\n\n  const inputChanged = async (e) => {\n    e.preventDefault();\n    let data = false;\n\n    let file = e.target.files[0];\n    data = await validateFile(file);\n\n    if (!data) return;\n\n    // Pass the data to other components through store\n    sidebarStore.update(value => {\n      value.curGroup = `${dataType}Created`;\n      value.loadedData = data;\n      return value;\n    });\n  };\n\n  const inputClicked = () => {\n    console.log('input clicked');\n  };\n\n  onMount(() => {bindInlineSVG();});\n\n</script>\n\n<style type='text/scss'>\n\n  @import '../define';\n\n  .dropzone-tab {\n    height: 100%;\n    width: 100%;\n    padding: 10px;\n    display: flex;\n    background-color: hsl(20, 16%, 99%);\n  }\n\n  .dropzone {\n    height: 100%;\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    border: 3px dashed hsla(0, 0%, 86%);\n    border-radius: 3px;\n    transition: border 300ms ease-in-out;\n    padding: 0 10px;\n    gap: 18px;\n\n    &.drag-over {\n      border: 3px dashed $blue-300;\n    }\n  }\n\n  .svg-icon {\n    color: hsl(0, 0%, 90%);\n    fill: hsl(0, 0%, 90%);\n    display: inline-flex;\n    align-items: center;\n    pointer-events: none;\n\n    :global(svg) {\n      width: 40px;\n      height: 40px;\n    }\n  }\n\n  .drop-message {\n    text-align: center;\n    color: hsl(0, 0%, 50%);\n    cursor: default;\n  }\n\n  .help-message {\n    text-align: center;\n    font-size: 0.9em;\n    color: hsl(0, 0%, 50%);\n    padding: 2px 8px;\n    background: change-color($blue-dark, $alpha: 0.1);\n    border-radius: 5px;\n\n    &:hover {\n      background: change-color($blue-dark, $alpha: 0.2);\n\n      a {\n        text-decoration: none;\n      }\n    }\n\n    a {\n      font-style: italic;\n      color: hsl(0, 0%, 35%);\n    }\n  }\n\n  .error-message {\n    font-size: 0.9em;\n    color: hsl(0, 50%, 56%);\n    text-align: center;\n    white-space: pre-wrap;\n  }\n\n</style>\n\n<div class='dropzone-tab' bind:this={component}>\n\n  <div class='dropzone'\n    class:drag-over={isDragging}\n    on:click={clickHandler}\n    on:dragenter={dragEnterHandler}\n    on:dragover={dragOverHandler}\n    on:dragleave={dragLeaveHandler}\n    on:drop={dropHandler}\n  >\n    {#if dataType === 'modelData'}\n      <div class='svg-icon icon-one'></div>\n    {:else}\n      <div class='svg-icon icon-two'></div>\n    {/if}\n    \n    <div class='drop-message'>\n      {#if dataType === 'modelData'}\n        Drop a <u>model file</u> (.json) or a <u>GAM Changer document</u> (.gamchanger) here to start\n      {:else}\n        Drop a <u>sample data file</u> (.json) file here to start\n      {/if}\n    </div>\n\n    <div class='help-message' on:click={(e) => {e.stopPropagation();}}>\n      <a href='https://gist.github.com/xiaohk/875b5374840c66689eb42a4b8820c3b5' target=\"_blank\">How to generate this file?</a>\n    </div>\n\n    <span class='error-message'>\n      {errorMessage}\n    </span>\n\n    <input\n      accept=\"json\"\n      type=\"file\"\n      autocomplete=\"off\"\n      on:change={inputChanged}\n      on:click={inputClicked}\n      bind:this={inputElem}\n      style=\"display: none;\"/>\n\n  </div>\n\n</div>","export { identity as linear } from '../internal/index.mjs';\n\n/*\nAdapted from https://github.com/mattdesl\nDistributed under MIT License https://github.com/mattdesl/eases/blob/master/LICENSE.md\n*/\nfunction backInOut(t) {\n    const s = 1.70158 * 1.525;\n    if ((t *= 2) < 1)\n        return 0.5 * (t * t * ((s + 1) * t - s));\n    return 0.5 * ((t -= 2) * t * ((s + 1) * t + s) + 2);\n}\nfunction backIn(t) {\n    const s = 1.70158;\n    return t * t * ((s + 1) * t - s);\n}\nfunction backOut(t) {\n    const s = 1.70158;\n    return --t * t * ((s + 1) * t + s) + 1;\n}\nfunction bounceOut(t) {\n    const a = 4.0 / 11.0;\n    const b = 8.0 / 11.0;\n    const c = 9.0 / 10.0;\n    const ca = 4356.0 / 361.0;\n    const cb = 35442.0 / 1805.0;\n    const cc = 16061.0 / 1805.0;\n    const t2 = t * t;\n    return t < a\n        ? 7.5625 * t2\n        : t < b\n            ? 9.075 * t2 - 9.9 * t + 3.4\n            : t < c\n                ? ca * t2 - cb * t + cc\n                : 10.8 * t * t - 20.52 * t + 10.72;\n}\nfunction bounceInOut(t) {\n    return t < 0.5\n        ? 0.5 * (1.0 - bounceOut(1.0 - t * 2.0))\n        : 0.5 * bounceOut(t * 2.0 - 1.0) + 0.5;\n}\nfunction bounceIn(t) {\n    return 1.0 - bounceOut(1.0 - t);\n}\nfunction circInOut(t) {\n    if ((t *= 2) < 1)\n        return -0.5 * (Math.sqrt(1 - t * t) - 1);\n    return 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1);\n}\nfunction circIn(t) {\n    return 1.0 - Math.sqrt(1.0 - t * t);\n}\nfunction circOut(t) {\n    return Math.sqrt(1 - --t * t);\n}\nfunction cubicInOut(t) {\n    return t < 0.5 ? 4.0 * t * t * t : 0.5 * Math.pow(2.0 * t - 2.0, 3.0) + 1.0;\n}\nfunction cubicIn(t) {\n    return t * t * t;\n}\nfunction cubicOut(t) {\n    const f = t - 1.0;\n    return f * f * f + 1.0;\n}\nfunction elasticInOut(t) {\n    return t < 0.5\n        ? 0.5 *\n            Math.sin(((+13.0 * Math.PI) / 2) * 2.0 * t) *\n            Math.pow(2.0, 10.0 * (2.0 * t - 1.0))\n        : 0.5 *\n            Math.sin(((-13.0 * Math.PI) / 2) * (2.0 * t - 1.0 + 1.0)) *\n            Math.pow(2.0, -10.0 * (2.0 * t - 1.0)) +\n            1.0;\n}\nfunction elasticIn(t) {\n    return Math.sin((13.0 * t * Math.PI) / 2) * Math.pow(2.0, 10.0 * (t - 1.0));\n}\nfunction elasticOut(t) {\n    return (Math.sin((-13.0 * (t + 1.0) * Math.PI) / 2) * Math.pow(2.0, -10.0 * t) + 1.0);\n}\nfunction expoInOut(t) {\n    return t === 0.0 || t === 1.0\n        ? t\n        : t < 0.5\n            ? +0.5 * Math.pow(2.0, 20.0 * t - 10.0)\n            : -0.5 * Math.pow(2.0, 10.0 - t * 20.0) + 1.0;\n}\nfunction expoIn(t) {\n    return t === 0.0 ? t : Math.pow(2.0, 10.0 * (t - 1.0));\n}\nfunction expoOut(t) {\n    return t === 1.0 ? t : 1.0 - Math.pow(2.0, -10.0 * t);\n}\nfunction quadInOut(t) {\n    t /= 0.5;\n    if (t < 1)\n        return 0.5 * t * t;\n    t--;\n    return -0.5 * (t * (t - 2) - 1);\n}\nfunction quadIn(t) {\n    return t * t;\n}\nfunction quadOut(t) {\n    return -t * (t - 2.0);\n}\nfunction quartInOut(t) {\n    return t < 0.5\n        ? +8.0 * Math.pow(t, 4.0)\n        : -8.0 * Math.pow(t - 1.0, 4.0) + 1.0;\n}\nfunction quartIn(t) {\n    return Math.pow(t, 4.0);\n}\nfunction quartOut(t) {\n    return Math.pow(t - 1.0, 3.0) * (1.0 - t) + 1.0;\n}\nfunction quintInOut(t) {\n    if ((t *= 2) < 1)\n        return 0.5 * t * t * t * t * t;\n    return 0.5 * ((t -= 2) * t * t * t * t + 2);\n}\nfunction quintIn(t) {\n    return t * t * t * t * t;\n}\nfunction quintOut(t) {\n    return --t * t * t * t * t + 1;\n}\nfunction sineInOut(t) {\n    return -0.5 * (Math.cos(Math.PI * t) - 1);\n}\nfunction sineIn(t) {\n    const v = Math.cos(t * Math.PI * 0.5);\n    if (Math.abs(v) < 1e-14)\n        return 1;\n    else\n        return 1 - v;\n}\nfunction sineOut(t) {\n    return Math.sin((t * Math.PI) / 2);\n}\n\nexport { backIn, backInOut, backOut, bounceIn, bounceInOut, bounceOut, circIn, circInOut, circOut, cubicIn, cubicInOut, cubicOut, elasticIn, elasticInOut, elasticOut, expoIn, expoInOut, expoOut, quadIn, quadInOut, quadOut, quartIn, quartInOut, quartOut, quintIn, quintInOut, quintOut, sineIn, sineInOut, sineOut };\n","import { cubicOut } from '../easing/index.mjs';\nimport { is_function } from '../internal/index.mjs';\n\nfunction flip(node, animation, params = {}) {\n    const style = getComputedStyle(node);\n    const transform = style.transform === 'none' ? '' : style.transform;\n    const scaleX = animation.from.width / node.clientWidth;\n    const scaleY = animation.from.height / node.clientHeight;\n    const dx = (animation.from.left - animation.to.left) / scaleX;\n    const dy = (animation.from.top - animation.to.top) / scaleY;\n    const d = Math.sqrt(dx * dx + dy * dy);\n    const { delay = 0, duration = (d) => Math.sqrt(d) * 120, easing = cubicOut } = params;\n    return {\n        delay,\n        duration: is_function(duration) ? duration(d) : duration,\n        easing,\n        css: (_t, u) => `transform: ${transform} translate(${u * dx}px, ${u * dy}px);`\n    };\n}\n\nexport { flip };\n","<script>\n  import d3 from '../utils/d3-import';\n  import { onMount, afterUpdate } from 'svelte';\n  import { flip } from 'svelte/animate';\n  import { initLegend, initContFeature, initCatFeature, updateContFeature, updateCatFeature } from './draw-feature';\n\n  export let sidebarStore;\n  export let width = 0;\n\n  let component = null;\n  let selectedTab = 'cont';\n  let sidebarInfo = {};\n  let tabHeights = {cont: '100%', cat: '100%'};\n  $: curTabHeight = tabHeights[selectedTab];\n  let featureInitialized = false;\n  let waitingToDrawDIV = false;\n  \n  let height = 0;\n\n  const svgHeight = 40;\n\n  const svgCatPadding = {top: 2, bottom: 2, left: 10, right: 10};\n  const svgContPadding = svgCatPadding;\n\n  const titleHeight = 10;\n  let catBarWidth = 0;\n\n  let sortedContFeatures = [];\n  let sortedCatFeatures = [];\n  let labelEncoder = null;\n\n\n  onMount(() => {\n    // width = component.getBoundingClientRect().width;\n    height = component.getBoundingClientRect().height;\n\n    let instance = d3.select(component)\n      .select('.feature-list')\n      .node();\n    \n    let scrollBarWidth = instance.offsetWidth - instance.clientWidth;\n\n    console.log(`effect tab: [${width}, ${height}, ${scrollBarWidth}]`);\n\n    width -= scrollBarWidth;\n  });\n\n  afterUpdate(() => {\n    const totalSampleNum = sidebarInfo.totalSampleNum;\n\n    if (waitingToDrawDIV) {\n\n      // Draw the legend\n      initLegend(component, width, svgCatPadding);\n\n      sortedContFeatures.forEach(f => {\n        initContFeature(component, f, svgContPadding, totalSampleNum,\n          width, svgHeight, titleHeight);\n      });\n\n      // Find the max equal bar width\n      catBarWidth = (width - svgCatPadding.left - svgCatPadding.right) /\n        d3.max(sortedCatFeatures, d => d.histCount.length);\n\n      sortedCatFeatures.forEach(f => {\n        initCatFeature(component, f, svgCatPadding, totalSampleNum, width,\n          catBarWidth, svgHeight, titleHeight, labelEncoder);\n      });\n\n      waitingToDrawDIV = false;\n    }\n\n  });\n\n  sidebarStore.subscribe(value => {\n    sidebarInfo = value;\n\n    // Initialize the feature elements in DOM when we have the data\n    if (sidebarInfo.featurePlotData !== undefined && !featureInitialized) {\n      featureInitialized = true;\n\n      sortedContFeatures = sidebarInfo.featurePlotData.cont;\n      sortedCatFeatures = sidebarInfo.featurePlotData.cat;\n      labelEncoder = sidebarInfo.featurePlotData.labelEncoder;\n\n      // Wait for the DOM to update (will trigger afterUpdate)\n      waitingToDrawDIV = true;\n    }\n\n    // Update the feature graph\n    if (sidebarInfo.curGroup === 'updateFeature' && featureInitialized) {\n\n      let tempSortedContFeatures = sidebarInfo.featurePlotData.cont;\n      let tempSortedCatFeatures = sidebarInfo.featurePlotData.cat;\n\n      // Update the overlay histogram\n      const selectedSampleCount = sortedContFeatures[0].histSelectedCount.reduce((a, b) => a + b);\n      const totalSampleCount = sortedContFeatures[0].histCount.reduce((a, b) => a + b);\n      let needToResort = false;\n\n      // Step 1: update the continuous feature graph\n      tempSortedContFeatures.forEach(f => {\n        needToResort = updateContFeature(component, f, selectedSampleCount,\n          totalSampleCount, svgHeight, svgContPadding, titleHeight);\n      });\n\n      if (needToResort) {\n        d3.timeout(() => {\n          tempSortedContFeatures.sort((a, b) => b.distanceScore - a.distanceScore);\n          sortedContFeatures = tempSortedContFeatures;\n        }, 700);\n      } else {\n        sortedContFeatures = tempSortedContFeatures;\n      }\n\n      // Step 2: update the categorical feature graph\n      needToResort = false;\n\n      tempSortedCatFeatures.forEach(f => {\n        needToResort = updateCatFeature(component, f, selectedSampleCount,\n          totalSampleCount, svgHeight, svgCatPadding, titleHeight, labelEncoder);\n      });\n\n      if (needToResort) {\n        d3.timeout(() => {\n          tempSortedCatFeatures.sort((a, b) => b.distanceScore - a.distanceScore);\n          sortedCatFeatures = tempSortedCatFeatures;\n        }, 700);\n      } else {\n        sortedCatFeatures = tempSortedCatFeatures;\n      }\n      \n      sidebarInfo.curGroup = '';\n      sidebarStore.set(sidebarInfo);\n    }\n\n  });\n\n</script>\n\n<style type='text/scss'>\n\n  @import '../define';\n\n  .feature-tab {\n    height: 100%;\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n\n  .feature-list {\n    height: 100%;\n    width: 100%;\n    overflow-y: scroll;\n    overflow-x: hidden;\n    position: relative;\n    border-top: 1px solid $blue-50;\n    background-color: $brown-50;\n  }\n\n  .feature-cont, .feature-cat {\n    position: absolute;\n    height: 100%;\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    gap: 0px;\n\n    &.hidden {\n      display: none;\n    }\n  }\n\n  .feature-cont {\n    .feature {\n      border-bottom: 1px solid $pastel2-gray;\n    }\n  }\n\n  .feature-legend {\n    position: relative;\n    padding: 5px 0 4px 0;\n  }\n\n  .feature {\n    will-change: transform, height;\n    margin: 0 auto;\n  }\n\n  .scope-selection.field {\n    margin-top: 11px;\n    margin-bottom: 11px;\n  }\n\n  .button {\n    padding: 1px 11px;\n    font-size: 0.9em;\n    font-weight: 400;\n    height: auto;\n    border-color: $gray-border;\n\n    &:hover {\n      background: $gray-100;\n    }\n\n    &:focus:not(:active) {\n      box-shadow: none;\n    }\n\n    &:focus {\n      border-color: $gray-border;\n    }\n\n    &:active {\n      border-color: $gray-border;\n    }\n\n    &.selected {\n      background: $gray-200;\n    }\n  }\n\n  :global(.feature-tab .feature-title) {\n    dominant-baseline: hanging;\n    text-anchor: start;\n    font-size: 0.7em;\n    font-weight: 400;\n    fill: black;\n\n    &:global(.shadow) {\n      stroke: white;\n      fill: white;\n    }\n  }\n\n  :global(.feature-tab .area-path) {\n    fill: $pastel1-blue;\n    stroke: $pastel1-blue;\n    opacity: 1;\n    stroke-linejoin: round;\n  }\n\n  :global(.feature-tab .global-bar) {\n    fill: $pastel1-blue;\n    opacity: 1;\n  }\n\n  :global(.feature-tab .selected-bar) {\n    fill: $orange-400;\n    opacity: 0.4;\n  }\n\n  :global(.feature-tab rect.selected-sample) {\n    fill: $orange-400;\n    opacity: 0.4;\n  }\n\n  :global(.feature-tab .legend-title) {\n    dominant-baseline: hanging;\n    text-anchor: middle;\n    font-size: 0.8em;\n    font-weight: 300;\n    fill: $indigo-dark;\n  }\n\n</style>\n\n<div class='feature-tab' bind:this={component}>\n\n  <div class='scope-selection field has-addons'>\n\n    <div class='control'>\n      <button class='button' title='show continuous variables'\n        class:selected={selectedTab === 'cont'}\n        on:click={() => {selectedTab = 'cont';}}\n      >\n        <span class='is-small'>\n          Continuous\n        </span>\n      </button>\n    </div>\n\n    <div class='control'>\n      <button class='button' title='show categorical variables'\n        class:selected={selectedTab === 'cat'}\n        on:click={() => {selectedTab = 'cat';}}\n      >\n        <span class='is-small'>\n          Categorical\n        </span>\n      </button>\n    </div>\n\n  </div>\n\n  <div class='feature-list'>\n\n    <div class='feature-legend'>\n      <svg id='legend'></svg>\n    </div>\n\n    <div class='feature-cont' class:hidden={selectedTab !== 'cont'}>\n      {#each sortedContFeatures as f (f.id)}\n        <div class={`feature feature-${f.id}`}\n          style={`height: ${svgHeight}px;`}\n          animate:flip=\"{{duration: 800}}\"\n        >\n          <svg id={`cont-feature-svg-${f.id}`} width={width} height={svgHeight}></svg>\n        </div>\n      {/each}\n    </div>\n\n    <div class='feature-cat' class:hidden={selectedTab !== 'cat'}>\n      {#each sortedCatFeatures as f (f.id)}\n        <div class={`feature feature-${f.id}`}\n          style={`height: ${svgHeight}px;`}\n          animate:flip=\"{{duration: 800}}\"\n        >\n          <svg id={`cat-feature-svg-${f.id}`} width={width} height={svgHeight}></svg>\n        </div>\n      {/each}\n    </div>\n\n  </div>\n\n</div>","import d3 from '../utils/d3-import';\nimport { l1Distance } from '../utils/utils';\n\n/**\n * Draw the legend and title for the first time.\n * @param {object} component Sidebar component\n * @param {number} width Width of sidebar\n * @param {object} svgCatPadding Paddings for the current svg\n */\nexport const initLegend = (component, width, svgCatPadding) => {\n  let legendSVG = d3.select(component)\n    .select('svg#legend')\n    .attr('width', width)\n    .attr('height', 42);\n\n  let leftGroup = legendSVG.append('g')\n    .attr('class', 'left')\n    .attr('transform', `translate(${svgCatPadding.left}, 10)`);\n\n  let rightGroup = legendSVG.append('g')\n    .attr('class', 'right')\n    .attr('transform', `translate(${svgCatPadding.left + 170}, 6)`);\n\n\n  leftGroup.append('text')\n    .attr('x', 0)\n    .attr('y', 0)\n    .style('dominant-baseline', 'hanging')\n    .style('font-size', '0.9em')\n    .style('font-weight', 600)\n    .text('Frequency Distributions')\n    .append('tspan')\n    .style('font-size', '0.9em')\n    .style('font-weight', 400)\n    .style('fill', 'gray')\n    .style('dominant-baseline', 'hanging')\n    .attr('x', 0)\n    .attr('y', 0)\n    .attr('dy', '1.1em')\n    .text('Sorted by correlation ↓');\n\n  let labelWidth = 48;\n  rightGroup.append('rect')\n    .attr('width', labelWidth)\n    .attr('height', 16)\n    .attr('rx', 3)\n    .style('fill', '#B5CEE3');\n\n  rightGroup.append('text')\n    .attr('class', 'legend-title')\n    .attr('y', 2)\n    .attr('x', labelWidth / 2)\n    .text('all');\n\n  rightGroup.append('rect')\n    .attr('y', 20)\n    .attr('width', labelWidth)\n    .attr('height', 16)\n    .attr('rx', 3)\n    .style('fill', '#FFD499');\n\n  rightGroup.append('text')\n    .attr('class', 'legend-title')\n    .attr('y', 22)\n    .attr('x', labelWidth / 2)\n    .text('select');\n};\n\n\n/**\n * Draw the continuous feature plot for the first time.\n * @param {object} component Side bar component\n * @param {object} f Current feature\n * @param {object} svgContPadding Padding info\n * @param {number} totalSampleNum Number of selected test samples\n * @param {number} width Sidebar width\n * @param {number} svgHeight SVG Height\n * @param {number} titleHeight Feature name text height\n */\nexport const initContFeature = (component, f, svgContPadding, totalSampleNum,\n  width, svgHeight, titleHeight) => {\n\n  let svg = d3.select(component)\n    .select(`.feature-${f.id}`)\n    .select('svg');\n\n  let lowContent = svg.append('g')\n    .attr('class', 'low-content')\n    .attr('transform', `translate(${svgContPadding.left}, ${svgContPadding.top})`);\n\n  let midContent = svg.append('g')\n    .attr('class', 'mid-content')\n    .attr('transform', `translate(${svgContPadding.left}, ${svgContPadding.top})`);\n\n  let topContent = svg.append('g')\n    .attr('class', 'top-content')\n    .attr('transform', `translate(${svgContPadding.left}, ${svgContPadding.top})`);\n\n  // Add the feature title\n  topContent.append('text')\n    .attr('class', 'feature-title')\n    .attr('x', 0)\n    .text(f.name);\n\n  // Compute the frequency of test samples\n  let curDensity = f.histCount.map((d, i) => [f.histEdge[i], d / totalSampleNum]);\n\n  // Create the axis scales\n  let expectedBarWidth = (width - svgContPadding.left - svgContPadding.right) / f.histEdge.length;\n  let xScale = d3.scaleLinear()\n    .domain(d3.extent(f.histEdge))\n    .range([0, width - svgContPadding.left - svgContPadding.right - expectedBarWidth]);\n\n  let barWidth = xScale(f.histEdge[1]) - xScale(f.histEdge[0]);\n\n  let yScale = d3.scaleLinear()\n    .domain([0, d3.max(curDensity, d => d[1])])\n    .range([svgHeight - svgContPadding.bottom, svgContPadding.top + titleHeight]);\n\n  lowContent.selectAll('rect.global-bar')\n    .data(curDensity)\n    .join('rect')\n    .attr('class', 'global-bar')\n    .attr('x', d => xScale(d[0]))\n    .attr('y', d => yScale(d[1]))\n    .attr('width', barWidth)\n    .attr('height', d => svgHeight - svgContPadding.bottom - yScale(d[1]));\n\n  // Draw overlay layer\n  let curDensitySelected = new Array(f.histCount.length).fill(0);\n\n  const yMax = d3.max(curDensitySelected) === 0 ? 1 : d3.max(curDensitySelected);\n\n  let yScaleBar = d3.scaleLinear()\n    .domain([0, yMax])\n    .range([svgHeight - svgContPadding.bottom, svgContPadding.top + titleHeight]);\n\n  midContent.selectAll('rect.selected-bar')\n    .data(curDensitySelected)\n    .join('rect')\n    .attr('class', 'selected-bar')\n    .attr('x', (d, i) => xScale(f.histEdge[i]))\n    .attr('y', d => yScaleBar(d))\n    .attr('width', barWidth)\n    .attr('height', d => svgHeight - svgContPadding.bottom - yScaleBar(d));\n};\n\n\n/**\n * Draw the categorical feature plot for the first time.\n * @param {object} component Side bar component\n * @param {object} f Current feature\n * @param {object} svgCatPadding Padding info\n * @param {number} catBarWidth Width of bars in the histogram plot\n * @param {number} totalSampleNum Number of selected test samples\n * @param {number} width Sidebar width\n * @param {number} svgHeight SVG Height\n * @param {number} titleHeight Feature name text height\n * @param {object} labelEncoder Label encoder\n */\nexport const initCatFeature = (component, f, svgCatPadding, totalSampleNum,\n  width, catBarWidth, svgHeight, titleHeight, labelEncoder) => {\n  let svg = d3.select(component)\n    .select(`.feature-${f.id}`)\n    .select('svg');\n\n  let lowContent = svg.append('g')\n    .attr('class', 'low-content')\n    .attr('transform', `translate(${svgCatPadding.left}, ${svgCatPadding.top})`);\n\n  let midContent = svg.append('g')\n    .attr('class', 'mid-content')\n    .attr('transform', `translate(${svgCatPadding.left}, ${svgCatPadding.top})`);\n\n  let topContent = svg.append('g')\n    .attr('class', 'top-content')\n    .attr('transform', `translate(${svgCatPadding.left}, ${svgCatPadding.top})`);\n\n  // Sort the bins from high count to low count, and save the sorting order\n  // (needed to update selected bins)\n  let curData = f.histEdge.map((d, i) => ({\n    edge: f.histEdge[i],\n    label: labelEncoder[f.name][f.histEdge[i]],\n    count: f.histCount[i],\n    density: f.histCount[i] / totalSampleNum,\n    // Initialize selected bars with 0 density\n    selectedCount: 0,\n    selectedDensity: 0\n  }));\n\n  // curData.sort((a, b) => b.count - a.count);\n\n  // Create the axis scales\n  // histEdge, histCount, histDensity\n  let xScale = d3.scaleBand()\n    .domain(curData.map(d => d.edge))\n    .paddingInner(0.1)\n    .range([0, width - svgCatPadding.left - svgCatPadding.right]);\n\n  let yScale = d3.scaleLinear()\n    .domain([0, d3.max(curData, d => d.density)])\n    .range([svgHeight - svgCatPadding.bottom, svgCatPadding.top + titleHeight]);\n\n  // Add the feature title\n  topContent.append('text')\n    .datum(f.name)\n    .attr('class', 'feature-title')\n    .attr('x', xScale(curData[0].edge))\n    .text(d => d);\n\n  // Draw a short pink rectangle as baseline (to signal missing value / small value)\n  lowContent.selectAll('rect.base-bar')\n    .data(curData)\n    .join('rect')\n    .attr('class', 'base-bar')\n    .attr('x', d => xScale(d.edge))\n    .attr('y', svgHeight - svgCatPadding.bottom - 1)\n    .attr('width', xScale.bandwidth())\n    .attr('height', 1)\n    .style('fill', 'hsl(0, 0%, 95%)');\n\n  // Draw the global histogram\n  lowContent.selectAll('rect.global-bar')\n    .data(curData)\n    .join('rect')\n    .attr('class', 'global-bar')\n    .attr('x', d => xScale(d.edge))\n    .attr('y', d => yScale(d.density))\n    .attr('width', xScale.bandwidth())\n    .attr('height', d => svgHeight - svgCatPadding.bottom - yScale(d.density))\n    .on('mouseenter', e => {\n      let label = d3.select(e.target).datum().label;\n      d3.select(e.target.parentNode.parentNode)\n        .select('.top-content .feature-title')\n        .text(d => d + ': ' + label);\n    })\n    .on('mouseleave', e => {\n      d3.select(e.target.parentNode.parentNode)\n        .select('.top-content .feature-title')\n        .text(d => d);\n    });\n\n  // Draw overlay layer\n  let yScaleSelected = d3.scaleLinear()\n    .domain([0, 1])\n    .range([svgHeight - svgCatPadding.bottom, svgCatPadding.top + titleHeight]);\n\n  midContent.selectAll('rect.selected-bar')\n    .data(curData)\n    .join('rect')\n    .attr('class', 'selected-bar')\n    .attr('x', d => xScale(d.edge))\n    .attr('y', d => yScaleSelected(d.selectedDensity))\n    .attr('width', xScale.bandwidth())\n    .attr('height', d => svgHeight - svgCatPadding.bottom - yScaleSelected(d.selectedDensity))\n    .on('mouseenter', e => {\n      let label = d3.select(e.target).datum().label;\n      d3.select(e.target.parentNode.parentNode)\n        .select('.top-content .feature-title')\n        .text(d => d + ': ' + label);\n    })\n    .on('mouseleave', e => {\n      d3.select(e.target.parentNode.parentNode)\n        .select('.top-content .feature-title')\n        .text(d => d);\n    });\n};\n\n\n/**\n * Update the continuous feature plot with distributions of the selected samples.\n * @param {object} component Side bar component\n * @param {object} f Current feature\n * @param {number} selectedSampleCount Number of selected test samples\n * @param {number} totalSampleNum Number of total test samples\n * @param {number} svgHeight SVG Height\n * @param {object} svgContPadding Padding info\n * @param {number} titleHeight Feature name text height\n */\nexport const updateContFeature = (component, f, selectedSampleCount, totalSampleCount,\n  svgHeight, svgContPadding, titleHeight) => {\n  let svg = d3.select(component)\n    .select(`svg#cont-feature-svg-${f.id}`);\n\n  let curDensitySelected = f.histSelectedCount.map(c => selectedSampleCount === 0 ? 0 : c / selectedSampleCount);\n  let globalDensity = f.histCount.map(c => c / totalSampleCount);\n\n  // Compute teh distance between subset density vs. global density\n  f.distanceScore = l1Distance(globalDensity, curDensitySelected);\n\n  const yMax = d3.max(curDensitySelected) === 0 ? 1 : d3.max(curDensitySelected);\n  const needToResort = d3.max(curDensitySelected) === 0 ? false : true;\n\n  let yScaleBar = d3.scaleLinear()\n    .domain([0, yMax])\n    .range([svgHeight - svgContPadding.bottom, svgContPadding.top + titleHeight]);\n\n  svg.select('g.mid-content')\n    .selectAll('rect.selected-bar')\n    .data(curDensitySelected)\n    .join('rect')\n    .transition('bar')\n    .duration(500)\n    .attr('y', d => yScaleBar(d))\n    .attr('height', d => svgHeight - svgContPadding.bottom - yScaleBar(d));\n\n  return needToResort;\n};\n\n\n/**\n * Update the categorical feature plot with distributions of the selected samples.\n * @param {object} component Side bar component\n * @param {object} f Current feature\n * @param {number} selectedSampleCount Number of selected test samples\n * @param {number} totalSampleNum Number of total test samples\n * @param {number} svgHeight SVG Height\n * @param {object} svgCatPadding Padding info\n * @param {number} titleHeight Feature name text height\n * @param {object} labelEncoder Label encoder\n */\nexport const updateCatFeature = (component, f, selectedSampleCount, totalSampleCount,\n  svgHeight, svgCatPadding, titleHeight, labelEncoder) => {\n  let svg = d3.select(component)\n    .select(`#cat-feature-svg-${f.id}`);\n\n  let curData = f.histEdge.map((d, i) => ({\n    edge: f.histEdge[i],\n    label: labelEncoder[f.name][f.histEdge[i]],\n    count: f.histCount[i],\n    selectedCount: f.histSelectedCount[i],\n    selectedDensity: selectedSampleCount === 0 ? 0 : f.histSelectedCount[i] / selectedSampleCount\n  }));\n\n  // Compute the distance score\n  let selectedDensity = curData.map(d => d.selectedDensity);\n  let globalDensity = curData.map(d => d.count / totalSampleCount);\n  f.distanceScore = l1Distance(globalDensity, selectedDensity);\n\n  // curData.sort((a, b) => b.count - a.count);\n\n  const yMax = d3.max(curData, d => d.selectedDensity) === 0 ? 1 : d3.max(curData, d => d.selectedDensity);\n  const needToResort = d3.max(curData, d => d.selectedDensity) === 0 ? false : true;\n\n  let yScaleSelected = d3.scaleLinear()\n    .domain([0, yMax])\n    .range([svgHeight - svgCatPadding.bottom, svgCatPadding.top + titleHeight]);\n\n  svg.select('g.mid-content')\n    .selectAll('rect.selected-bar')\n    .data(curData, d => d.edge)\n    .join('rect')\n    .transition('cont-bar')\n    .duration(500)\n    .attr('y', d => yScaleSelected(d.selectedDensity))\n    .attr('height', d => svgHeight - svgCatPadding.bottom - yScaleSelected(d.selectedDensity));\n\n  return needToResort;\n};\n","import { cubicInOut, linear, cubicOut } from '../easing/index.mjs';\nimport { is_function, assign } from '../internal/index.mjs';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\n\nfunction blur(node, { delay = 0, duration = 400, easing = cubicInOut, amount = 5, opacity = 0 } = {}) {\n    const style = getComputedStyle(node);\n    const target_opacity = +style.opacity;\n    const f = style.filter === 'none' ? '' : style.filter;\n    const od = target_opacity * (1 - opacity);\n    return {\n        delay,\n        duration,\n        easing,\n        css: (_t, u) => `opacity: ${target_opacity - (od * u)}; filter: ${f} blur(${u * amount}px);`\n    };\n}\nfunction fade(node, { delay = 0, duration = 400, easing = linear } = {}) {\n    const o = +getComputedStyle(node).opacity;\n    return {\n        delay,\n        duration,\n        easing,\n        css: t => `opacity: ${t * o}`\n    };\n}\nfunction fly(node, { delay = 0, duration = 400, easing = cubicOut, x = 0, y = 0, opacity = 0 } = {}) {\n    const style = getComputedStyle(node);\n    const target_opacity = +style.opacity;\n    const transform = style.transform === 'none' ? '' : style.transform;\n    const od = target_opacity * (1 - opacity);\n    return {\n        delay,\n        duration,\n        easing,\n        css: (t, u) => `\n\t\t\ttransform: ${transform} translate(${(1 - t) * x}px, ${(1 - t) * y}px);\n\t\t\topacity: ${target_opacity - (od * u)}`\n    };\n}\nfunction slide(node, { delay = 0, duration = 400, easing = cubicOut } = {}) {\n    const style = getComputedStyle(node);\n    const opacity = +style.opacity;\n    const height = parseFloat(style.height);\n    const padding_top = parseFloat(style.paddingTop);\n    const padding_bottom = parseFloat(style.paddingBottom);\n    const margin_top = parseFloat(style.marginTop);\n    const margin_bottom = parseFloat(style.marginBottom);\n    const border_top_width = parseFloat(style.borderTopWidth);\n    const border_bottom_width = parseFloat(style.borderBottomWidth);\n    return {\n        delay,\n        duration,\n        easing,\n        css: t => 'overflow: hidden;' +\n            `opacity: ${Math.min(t * 20, 1) * opacity};` +\n            `height: ${t * height}px;` +\n            `padding-top: ${t * padding_top}px;` +\n            `padding-bottom: ${t * padding_bottom}px;` +\n            `margin-top: ${t * margin_top}px;` +\n            `margin-bottom: ${t * margin_bottom}px;` +\n            `border-top-width: ${t * border_top_width}px;` +\n            `border-bottom-width: ${t * border_bottom_width}px;`\n    };\n}\nfunction scale(node, { delay = 0, duration = 400, easing = cubicOut, start = 0, opacity = 0 } = {}) {\n    const style = getComputedStyle(node);\n    const target_opacity = +style.opacity;\n    const transform = style.transform === 'none' ? '' : style.transform;\n    const sd = 1 - start;\n    const od = target_opacity * (1 - opacity);\n    return {\n        delay,\n        duration,\n        easing,\n        css: (_t, u) => `\n\t\t\ttransform: ${transform} scale(${1 - (sd * u)});\n\t\t\topacity: ${target_opacity - (od * u)}\n\t\t`\n    };\n}\nfunction draw(node, { delay = 0, speed, duration, easing = cubicInOut } = {}) {\n    const len = node.getTotalLength();\n    if (duration === undefined) {\n        if (speed === undefined) {\n            duration = 800;\n        }\n        else {\n            duration = len / speed;\n        }\n    }\n    else if (typeof duration === 'function') {\n        duration = duration(len);\n    }\n    return {\n        delay,\n        duration,\n        easing,\n        css: (t, u) => `stroke-dasharray: ${t * len} ${u * len}`\n    };\n}\nfunction crossfade(_a) {\n    var { fallback } = _a, defaults = __rest(_a, [\"fallback\"]);\n    const to_receive = new Map();\n    const to_send = new Map();\n    function crossfade(from, node, params) {\n        const { delay = 0, duration = d => Math.sqrt(d) * 30, easing = cubicOut } = assign(assign({}, defaults), params);\n        const to = node.getBoundingClientRect();\n        const dx = from.left - to.left;\n        const dy = from.top - to.top;\n        const dw = from.width / to.width;\n        const dh = from.height / to.height;\n        const d = Math.sqrt(dx * dx + dy * dy);\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        const opacity = +style.opacity;\n        return {\n            delay,\n            duration: is_function(duration) ? duration(d) : duration,\n            easing,\n            css: (t, u) => `\n\t\t\t\topacity: ${t * opacity};\n\t\t\t\ttransform-origin: top left;\n\t\t\t\ttransform: ${transform} translate(${u * dx}px,${u * dy}px) scale(${t + (1 - t) * dw}, ${t + (1 - t) * dh});\n\t\t\t`\n        };\n    }\n    function transition(items, counterparts, intro) {\n        return (node, params) => {\n            items.set(params.key, {\n                rect: node.getBoundingClientRect()\n            });\n            return () => {\n                if (counterparts.has(params.key)) {\n                    const { rect } = counterparts.get(params.key);\n                    counterparts.delete(params.key);\n                    return crossfade(rect, node, params);\n                }\n                // if the node is disappearing altogether\n                // (i.e. wasn't claimed by the other list)\n                // then we need to supply an outro\n                items.delete(params.key);\n                return fallback && fallback(node, params, intro);\n            };\n        };\n    }\n    return [\n        transition(to_send, to_receive, false),\n        transition(to_receive, to_send, true)\n    ];\n}\n\nexport { blur, crossfade, draw, fade, fly, scale, slide };\n","<script>\n  import d3 from '../utils/d3-import';\n  import { onMount, beforeUpdate, afterUpdate } from 'svelte';\n  import { slide, fade, crossfade } from 'svelte/transition';\n  import { quadInOut, expoInOut, cubicInOut } from 'svelte/easing';\n  import { round, shuffle } from '../utils/utils';\n  import { bindInlineSVG } from '../utils/svg-icon-binding';\n  \n  export let sidebarStore;\n  export let historyStore;\n  export let ebm;\n\n  let component = null;\n  let historyList = [];\n  let sidebarInfo = null;\n  let needToBindSVGs = false;\n\n  // Auto scroll\n  let autoscroll = null;\n  let historyDIV = null;\n\n  const editTypeIconMap = {\n    'increasing': 'icon-increasing',\n    'decreasing': 'icon-decreasing',\n    'move': 'icon-updown',\n    'align': 'icon-merge',\n    'equal-interpolate': 'icon-interpolation',\n    'inplace-interpolate': 'icon-inplace',\n    'equal-regression': 'icon-interpolation',\n    'inplace-regression': 'icon-regression',\n    'delete': 'icon-delete',\n    'original': 'icon-original'\n  };\n\n  sidebarStore.subscribe(value => {\n    sidebarInfo = value;\n  });\n\n  historyStore.subscribe(value => {\n    historyList = value;\n    needToBindSVGs = true;\n  });\n\n  /**\n   * Overwrite the edge definition in the EBM WASM model.\n   * @param {string} curGroup Message to the metrics sidebar\n   * @param {object} curNodeData Node data in `state`\n   * @param {featureName} featureName The name of feature to be edited\n   */\n  const setEBM = async (curGroup, curNodeData, featureName=undefined) => {\n\n    // Update the complete bin edge definition in the EBM model\n    let newBinEdges = [];\n    let newScores = [];\n\n    // The left point will always have index 0\n    let curPoint = curNodeData[0];\n    let curEBMID = 0;\n\n    while (curPoint.rightPointID !== null) {\n      // Collect x and y\n      newBinEdges.push(curPoint.x);\n      newScores.push(curPoint.y);\n\n      // Update the new ID so we can map them to bin indexes later (needed for\n      // selection to check sample number)\n      curPoint.ebmID = curEBMID;\n      curEBMID++;\n\n      curPoint = curNodeData[curPoint.rightPointID];\n    }\n\n    // Add the right node\n    newBinEdges.push(curPoint.x);\n    newScores.push(curPoint.y);\n    curPoint.ebmID = curEBMID;\n\n    await ebm.setModel(newBinEdges, newScores, featureName);\n  };\n\n  /**\n   * Format the millisecond time to string\n   * @param time Time in millisecond\n   */\n  const getTime = (time) => {\n    let date = new Date(time);\n    let hour = date.getHours();\n    let minute = String(date.getMinutes()).padStart(2, '0');\n    let months = ['January','February','March','April','May','June','July',\n      'August','September','October','November','December'].map(d => d.substring(0, 3));\n    let month = months[date.getMonth()];\n    let day = date.getDate();\n    let year  = date.getFullYear();\n\n    return `${hour}:${minute} ${month} ${day}, ${year}`;\n  };\n\n  const checkboxClicked = (i) => {\n    historyList[i].reviewed = !historyList[i].reviewed;\n    historyList = historyList;\n  };\n\n  const previewClicked = (i) => {\n    sidebarStore.update(value => {\n      if (value.historyHead !== i) {\n        value.curGroup = 'headChanged';\n      }\n\n      value.previewHistory = i !== historyList.length - 1;\n      value.historyLastHead = value.historyHead;\n      value.historyHead = i;\n\n      // Force the effect scope to be global\n      value.effectScope = 'global';\n      return value;\n    });\n  };\n\n  const deleteClicked = async (i) => {\n\n    // Search the history stack to see if it is the last commit on this feature\n    const featureName = historyList[i].featureName;\n    let isLastCommit = true;\n    for (let j = i + 1; j < historyList.length; j++) {\n      if (historyList[j].featureName === featureName) {\n        isLastCommit = false;\n        break;\n      }\n    }\n\n    // Need user to confirm the delete action if it is not the last commit\n    let result = true;\n    if (!isLastCommit) {\n      result = confirm(\n        `Deleting this commit will also remove all later commits on feature ${featureName}. This action cannot be undone. Is it OK?`);\n    } else {\n      result = confirm('Deleting a commit cannot be undone. Is it OK?');\n    }\n\n    if (!result) {\n      return;\n    }\n\n    // Iterate the end to i, delete all commits on this feature\n    for (let j = historyList.length - 1; j >= i; j--) {\n      if (historyList[j].featureName === featureName) {\n        historyList.splice(j, 1);\n      }\n    }\n\n    // Need to reset EBM (fallback to the last commit on this feature)\n    // We can always find a commit to fall back to because the first\n    // original commit cannot never be deleted\n    for (let j = i - 1; j >= 0; j--) {\n      if (historyList[j].featureName === featureName) {\n        await setEBM('current', historyList[j].state.pointData, featureName);\n        break;\n      }\n    }\n\n\n    // Update the HEAD if HEAD is at/after the deleted commit\n    // If if the HEAD is on a different feature, the index is influenced\n    if (sidebarInfo.historyHead >= i) {\n      sidebarInfo.curGroup = 'headChanged';\n      sidebarInfo.previewHistory = false;\n      sidebarInfo.historyHead = historyList.length - 1;\n\n      // Force the effect scope to be global\n      sidebarInfo.effectScope = 'global';\n    }\n\n    historyStore.set(historyList);\n    sidebarStore.set(sidebarInfo);\n\n  };\n\n\n  // beforeUpdate(() => {\n  //   if (historyDIV) {\n  //     console.log(historyDIV.offsetHeight, historyDIV.scrollTop, historyDIV.scrollHeight);\n  //     console.log(historyDIV.offsetHeight + historyDIV.scrollTop > historyDIV.scrollHeight);\n  //   }\n  //   autoscroll = historyDIV &&\n  //     (historyDIV.offsetHeight + historyDIV.scrollTop) > (historyDIV.scrollHeight );\n  // });\n\n  afterUpdate(() => {\n    // if (autoscroll) {\n    //   historyDIV.scrollTo(0, historyDIV.scrollHeight);\n    // }\n\n    if (needToBindSVGs) {\n      bindInlineSVG(component);\n      needToBindSVGs = false;\n    }\n  });\n\n  onMount(() => {\n    bindInlineSVG(component);\n  });\n\n</script>\n\n<style type='text/scss'>\n\n  @import '../define';\n\n  .button {\n    padding: 1px 11px;\n    font-size: 0.9em;\n    font-weight: 400;\n    height: auto;\n    border-color: $gray-border;\n\n    &:hover {\n      background: $gray-100;\n    }\n\n    &:focus:not(:active) {\n      box-shadow: none;\n    }\n\n    &:focus {\n      border-color: $gray-border;\n    }\n\n    &:active {\n      border-color: $gray-border;\n    }\n\n    &.selected {\n      background: $gray-200;\n    }\n  }\n\n  .history-tab {\n    height: 100%;\n  }\n\n  .history {\n    height: 100%;\n    width: 100%;\n    overflow-y: scroll;\n    overflow-x: hidden;\n    position: relative;\n    display: flex;\n    flex-direction: column;\n  }\n\n  .commit {\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n    border-bottom: 1px solid $gray-border;\n    padding: 5px 10px;\n    font-size: 0.9em;\n    gap: 5px;\n    // opacity: 0.5;\n\n    // &.current {\n    //   opacity: 1;\n    // }\n  }\n\n  .commit-title {\n    width: 100%;\n    display: flex;\n    flex-direction: row;\n    align-items: baseline;\n    justify-content: space-between;\n    cursor: default;\n    gap: 5px;\n  }\n\n  .commit-feature {\n    font-weight: 400;\n    color: $gray-700;\n    word-break: break-all;\n\n    &.current {\n      font-weight: 600;\n      color: $blue-dark;\n    }\n  }\n\n  .commit-time {\n    font-size: 0.9em;\n    color: $gray-700;\n    flex-shrink: 0;\n  }\n\n  .commit-content {\n    width: 100%;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    gap: 0.5em;\n    position: relative;\n  }\n\n  .commit-pen {\n    position: absolute;\n    right: 8px;\n    bottom: 8px;\n\n    .svg-icon {\n      color: $gray-700;\n      fill: $gray-700;\n      opacity: 0.4;\n      display: flex;\n\n      :global(svg) {\n        width: 0.9em;\n        height: 0.9em;\n      }\n    }\n  }\n\n  .commit-message {\n    width: 100%;\n    background: $gray-100;\n    padding: 5px 10px;\n    border: 1px solid $gray-border;\n    border-radius: 2px;\n\n    .commit-message-text {\n      margin-right: 0.2em;\n    }\n\n    &:focus {\n      background: none;\n    }\n  }\n\n  .commit-checkbox {\n    // margin-left: auto;\n    cursor: pointer;\n    width: 1em;\n    height: 1em;\n  }\n\n  @keyframes thumbup {\n    0%{\n      transform: scale(0);\n      -webkit-transform: scale(0);\n    }\n    80%{\n      transform: scale(1.3);\n      -webkit-transform: scale(1.3);\n    }\n    100%{\n      transform: scale(1);\n      -webkit-transform: scale(1);\n    }\n  }\n\n  .commit-icon {\n    .svg-icon {\n      color: $gray-700;\n      fill: $gray-700;\n      opacity: 0.6;\n      display: flex;\n\n      :global(svg) {\n        width: 1.2em;\n        height: 1.2em;\n      }\n\n      &.current {\n        color: $blue-dark;\n        fill: $blue-dark;\n        opacity: 1;\n      }\n    }\n  }\n\n  .commit-bar {\n    @extend .commit-title;\n    justify-content: flex-end;\n    align-items: flex-start;\n    gap: 10px;\n\n    .svg-icon {\n      cursor: pointer;\n      color: $indigo-dark;\n      fill: $indigo-dark;\n\n      :global(svg) {\n        width: 1em;\n        height: 1em;\n      }\n\n      &:hover {\n        color: $blue-600;\n        fill: $blue-600;\n      }\n\n      &.selected {\n        color: $blue-reg;\n        fill: $blue-reg;\n      }\n\n      &.disabled, &.disabled:hover {\n        cursor: not-allowed;\n        color: $gray-700;\n        fill: $gray-700;\n        opacity: 0.5;\n      }\n\n      &.disabled:active {\n        pointer-events: none;\n      }\n    }\n\n    .checkbox-box {\n      &.hidden {\n        display: none;\n      }\n    }\n\n    .checkbox-check {\n      animation: thumbup 150ms ease-in;\n      -webkit-animation: thumbup 150ms ease-in;\n\n      &.hidden {\n        display: none;\n      }\n\n      .svg-icon {\n        color: $blue-reg;\n        fill: $blue-reg;\n      }\n    }\n  }\n\n  .commit-hash {\n    font-family: ui-monospace,SFMono-Regular,SF Mono,Consolas,Liberation Mono,Menlo,monospace;\n    font-size: 0.9em;\n    color: $gray-700;\n    margin-right: auto;\n    cursor: copy;\n\n    &:hover {\n      color: $blue-600;\n    }\n  }\n\n  .hidden {\n    display: none;\n  }\n\n  .empty-history {\n    display: flex;\n    height: 100%;\n\n    span {\n      margin: auto;\n    }\n\n    &.hidden {\n      display: none;\n    }\n  }\n\n</style>\n\n<div class='history-tab' bind:this={component}>\n\n  <div class='icon-loading'>\n  </div>\n\n  <div class='empty-history' class:hidden={historyList.length > 0}>\n    <span>No GAM is changed :(</span>\n  </div>\n\n  <div class='history' bind:this={historyDIV}>\n\n    {#each historyList as history, i}\n\n      <div class='commit' class:current={sidebarInfo.featureName === history.featureName}\n        transition:slide={{duration: 300}}\n      >\n        <!-- Header -->\n        <div class='commit-title'>\n\n          <div class='commit-feature' class:current={sidebarInfo.featureName === history.featureName}>\n            {history.featureName}\n          </div>\n\n          <div class='commit-time'>\n            {getTime(history.time)}\n          </div>\n\n        </div>\n\n        <!-- Content -->\n        <div class='commit-content'>\n\n          <div class='commit-icon'>\n            <div class={`svg-icon ${editTypeIconMap[history.type]}`}\n              class:current={sidebarInfo.featureName === history.featureName}\n              title={history.type}\n            ></div>\n          </div>\n\n          <span class='commit-message' contenteditable bind:innerHTML={history.description}>\n          </span>\n\n          {#if i === 0}\n            <div class='commit-pen'>\n              <div class='svg-icon icon-pen'></div>\n            </div>\n          {/if}\n\n        </div>\n\n        <!-- Footer -->\n        <div class='commit-bar'>\n          <div class='commit-hash' title={'copy hash: ' + history.hash}\n            on:click={() => navigator.clipboard.writeText(history.hash)}\n          >\n            {history.hash.substring(0, 7)}\n            {#if sidebarInfo.historyHead === i}\n              {' (HEAD)'}\n            {/if}\n          </div>\n\n          <div class='commit-checkbox' title='confirm'\n            on:click={() => checkboxClicked(i)}\n          >\n            <div class='checkbox-box' class:hidden={history.reviewed}>\n              <div class='svg-icon icon-box'></div>\n            </div>\n\n            <div class='checkbox-check' class:hidden={!history.reviewed}>\n              <div class='svg-icon icon-thumbup'></div>\n            </div>\n          </div>\n\n          <div class='svg-icon icon-location selected'\n            class:hidden={sidebarInfo.historyHead !== i}\n            title='current'\n            style='cursor: default;'\n          ></div>\n\n          <div class='svg-icon icon-right-arrow'\n            class:hidden={sidebarInfo.historyHead === i}\n            class:disabled={sidebarInfo.featureName !== history.featureName}\n            title='check out'\n            on:click={() => previewClicked(i)}\n          ></div>\n\n          <div class='svg-icon icon-commit-delete' title='delete'\n            class:disabled={history.type === 'original'}\n            on:click={() => deleteClicked(i)}\n          ></div>\n\n        </div>\n\n      </div>\n\n    {/each}\n\n  </div>\n\n</div>","<script>\n  import ClassificationMetrics from './ClassificationMetrics.svelte';\n  import Dropzone from '../components/Dropzone.svelte';\n  import Feature from './Feature.svelte';\n  import History from './History.svelte';\n\n  export let sidebarStore;\n  export let historyStore;\n  export let width;\n  export let sampleDataInitialized;\n  export let ebm;\n\n  let sidebarInfo = {};\n  let component = null;\n\n  sidebarStore.subscribe(value => {\n    sidebarInfo = value;\n  });\n\n  const updateSelectedTab = (newTab) => {\n    sidebarInfo.selectedTab = newTab;\n    sidebarInfo = sidebarInfo;\n    sidebarStore.set(sidebarInfo);\n  };\n\n</script>\n\n<style type='text/scss'>\n\n  @import '../define';\n\n  .sidebar {\n    width: 100%;\n    height: 100%;\n    border-left: 1px double $gray-border;\n    display: flex;\n    flex-direction: column;\n    background: white;\n    border-top-right-radius: $my-border-radius;\n    border-bottom-right-radius: $my-border-radius;\n  }\n\n  .header {\n    height: 53px;\n    border-bottom: 1px solid $gray-border;\n    padding: 10px 0;\n    border-top-right-radius: $my-border-radius;\n    background: white;\n\n    display: flex;\n    align-items: flex-end;\n    justify-content: space-between;\n    flex-shrink: 0;\n\n    // Hack for firefox's space-evenly\n    &::before, &::after {\n      content: '';\n    }\n  }\n\n  .tab-button {\n    color: $gray-900;\n    border-bottom: 2px solid white;\n    border: 1px solid transparent;\n    cursor: pointer;\n    text-align: center;\n    position: relative;\n\n    display: inline-flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: space-between;\n\n    &.selected {\n      color: currentColor;\n      font-weight: 600;\n\n      &::before {\n        content: '';\n        position: absolute;\n        width: 100%;\n        top: 135%;\n        left: 0;\n        border-bottom: 4px solid $blue-600;\n      }\n    }\n\n    &::after {\n      content: attr(data-text);\n      content: attr(data-text) / '';\n      visibility: hidden;\n      height: 0;\n      pointer-events: none;\n      overflow: hidden;\n      font-weight: 600;\n    }\n  }\n\n  .tab {\n    height: 100%;\n    width: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n\n    &.hidden {\n      visibility: hidden;\n      pointer-events: none;\n    }\n  }\n\n  .content {\n    width: 100%;\n    position: relative;\n    flex-grow: 1;\n    overflow-y: hidden;\n    overflow-x: hidden;\n  }\n\n\n</style>\n\n<div class='sidebar' bind:this={component} style={`width: ${width};`}>\n\n  <div class='header'>\n    <div class='tab-button'\n      data-text='Metrics'\n      class:selected={sidebarInfo.selectedTab === 'effect'}\n      on:click={() => {updateSelectedTab('effect');}}\n    >\n      Metrics\n    </div>\n\n    <div class='tab-button'\n      data-text='Feature'\n      class:selected={sidebarInfo.selectedTab === 'feature'}\n      on:click={() => {updateSelectedTab('feature');}}\n    >\n      Feature\n    </div>\n\n    <div class='tab-button'\n      data-text='History'\n      class:selected={sidebarInfo.selectedTab === 'history'}\n      on:click={() => {updateSelectedTab('history');}}\n    >\n      History\n    </div>\n\n  </div>\n\n  <div class='content'>\n\n    <div class='tab' class:hidden={sidebarInfo.selectedTab !== 'effect'}>\n      {#if sampleDataInitialized}\n        <ClassificationMetrics sidebarStore={sidebarStore}/>\n      {:else}\n        <Dropzone sidebarStore={sidebarStore} dataType={'sampleData'}/>\n      {/if}\n    </div>\n\n    <div class='tab' class:hidden={sidebarInfo.selectedTab !== 'feature'}>\n      {#if sampleDataInitialized}\n        <Feature sidebarStore={sidebarStore} width={width}/>\n      {:else}\n        <Dropzone sidebarStore={sidebarStore} dataType={'sampleData'}/>\n      {/if}\n    </div>\n\n    <div class='tab' class:hidden={sidebarInfo.selectedTab !== 'history'}>\n      <History sidebarStore={sidebarStore} historyStore={historyStore} ebm={ebm}/>\n    </div>\n    \n  </div>\n\n</div>","// Runtime header offsets\nconst ID_OFFSET = -8;\nconst SIZE_OFFSET = -4;\n\n// Runtime ids\nconst ARRAYBUFFER_ID = 0;\nconst STRING_ID = 1;\n// const ARRAYBUFFERVIEW_ID = 2;\n\n// Runtime type information\nconst ARRAYBUFFERVIEW = 1 << 0;\nconst ARRAY = 1 << 1;\nconst STATICARRAY = 1 << 2;\n// const SET = 1 << 3;\n// const MAP = 1 << 4;\nconst VAL_ALIGN_OFFSET = 6;\n// const VAL_ALIGN = 1 << VAL_ALIGN_OFFSET;\nconst VAL_SIGNED = 1 << 11;\nconst VAL_FLOAT = 1 << 12;\n// const VAL_NULLABLE = 1 << 13;\nconst VAL_MANAGED = 1 << 14;\n// const KEY_ALIGN_OFFSET = 15;\n// const KEY_ALIGN = 1 << KEY_ALIGN_OFFSET;\n// const KEY_SIGNED = 1 << 20;\n// const KEY_FLOAT = 1 << 21;\n// const KEY_NULLABLE = 1 << 22;\n// const KEY_MANAGED = 1 << 23;\n\n// Array(BufferView) layout\nconst ARRAYBUFFERVIEW_BUFFER_OFFSET = 0;\nconst ARRAYBUFFERVIEW_DATASTART_OFFSET = 4;\nconst ARRAYBUFFERVIEW_DATALENGTH_OFFSET = 8;\nconst ARRAYBUFFERVIEW_SIZE = 12;\nconst ARRAY_LENGTH_OFFSET = 12;\nconst ARRAY_SIZE = 16;\n\nconst BIGINT = typeof BigUint64Array !== \"undefined\";\nconst THIS = Symbol();\n\nconst STRING_SMALLSIZE = 192; // break-even point in V8\nconst STRING_CHUNKSIZE = 1024; // mitigate stack overflow\nconst utf16 = new TextDecoder(\"utf-16le\", { fatal: true }); // != wtf16\n\n/** Gets a string from memory. */\nfunction getStringImpl(buffer, ptr) {\n  let len = new Uint32Array(buffer)[ptr + SIZE_OFFSET >>> 2] >>> 1;\n  const wtf16 = new Uint16Array(buffer, ptr, len);\n  if (len <= STRING_SMALLSIZE) return String.fromCharCode(...wtf16);\n  try {\n    return utf16.decode(wtf16);\n  } catch {\n    let str = \"\", off = 0;\n    while (len - off > STRING_CHUNKSIZE) {\n      str += String.fromCharCode(...wtf16.subarray(off, off += STRING_CHUNKSIZE));\n    }\n    return str + String.fromCharCode(...wtf16.subarray(off));\n  }\n}\n\n/** Prepares the base module prior to instantiation. */\nfunction preInstantiate(imports) {\n  const extendedExports = {};\n\n  function getString(memory, ptr) {\n    if (!memory) return \"<yet unknown>\";\n    return getStringImpl(memory.buffer, ptr);\n  }\n\n  // add common imports used by stdlib for convenience\n  const env = (imports.env = imports.env || {});\n  env.abort = env.abort || function abort(msg, file, line, colm) {\n    const memory = extendedExports.memory || env.memory; // prefer exported, otherwise try imported\n    throw Error(`abort: ${getString(memory, msg)} at ${getString(memory, file)}:${line}:${colm}`);\n  };\n  env.trace = env.trace || function trace(msg, n, ...args) {\n    const memory = extendedExports.memory || env.memory;\n    console.log(`trace: ${getString(memory, msg)}${n ? \" \" : \"\"}${args.slice(0, n).join(\", \")}`);\n  };\n  env.seed = env.seed || Date.now;\n  imports.Math = imports.Math || Math;\n  imports.Date = imports.Date || Date;\n\n  return extendedExports;\n}\n\nconst E_NOEXPORTRUNTIME = \"Operation requires compiling with --exportRuntime\";\nconst F_NOEXPORTRUNTIME = function () { throw Error(E_NOEXPORTRUNTIME); };\n\n/** Prepares the final module once instantiation is complete. */\nfunction postInstantiate(extendedExports, instance) {\n  const exports = instance.exports;\n  const memory = exports.memory;\n  const table = exports.table;\n  const __new = exports.__new || F_NOEXPORTRUNTIME;\n  const __pin = exports.__pin || F_NOEXPORTRUNTIME;\n  const __unpin = exports.__unpin || F_NOEXPORTRUNTIME;\n  const __collect = exports.__collect || F_NOEXPORTRUNTIME;\n  const __rtti_base = exports.__rtti_base;\n  const getRttiCount = __rtti_base\n    ? function (arr) { return arr[__rtti_base >>> 2]; }\n    : F_NOEXPORTRUNTIME;\n\n  extendedExports.__new = __new;\n  extendedExports.__pin = __pin;\n  extendedExports.__unpin = __unpin;\n  extendedExports.__collect = __collect;\n\n  /** Gets the runtime type info for the given id. */\n  function getInfo(id) {\n    const U32 = new Uint32Array(memory.buffer);\n    const count = getRttiCount(U32);\n    if ((id >>>= 0) >= count) throw Error(`invalid id: ${id}`);\n    return U32[(__rtti_base + 4 >>> 2) + id * 2];\n  }\n\n  /** Gets and validate runtime type info for the given id for array like objects */\n  function getArrayInfo(id) {\n    const info = getInfo(id);\n    if (!(info & (ARRAYBUFFERVIEW | ARRAY | STATICARRAY))) throw Error(`not an array: ${id}, flags=${info}`);\n    return info;\n  }\n\n  /** Gets the runtime base id for the given id. */\n  function getBase(id) {\n    const U32 = new Uint32Array(memory.buffer);\n    const count = getRttiCount(U32);\n    if ((id >>>= 0) >= count) throw Error(`invalid id: ${id}`);\n    return U32[(__rtti_base + 4 >>> 2) + id * 2 + 1];\n  }\n\n  /** Gets the runtime alignment of a collection's values. */\n  function getValueAlign(info) {\n    return 31 - Math.clz32((info >>> VAL_ALIGN_OFFSET) & 31); // -1 if none\n  }\n\n  /** Gets the runtime alignment of a collection's keys. */\n  // function getKeyAlign(info) {\n  //   return 31 - Math.clz32((info >>> KEY_ALIGN_OFFSET) & 31); // -1 if none\n  // }\n\n  /** Allocates a new string in the module's memory and returns its pointer. */\n  function __newString(str) {\n    if (str == null) return 0;\n    const length = str.length;\n    const ptr = __new(length << 1, STRING_ID);\n    const U16 = new Uint16Array(memory.buffer);\n    for (var i = 0, p = ptr >>> 1; i < length; ++i) U16[p + i] = str.charCodeAt(i);\n    return ptr;\n  }\n\n  extendedExports.__newString = __newString;\n\n  /** Reads a string from the module's memory by its pointer. */\n  function __getString(ptr) {\n    if (!ptr) return null;\n    const buffer = memory.buffer;\n    const id = new Uint32Array(buffer)[ptr + ID_OFFSET >>> 2];\n    if (id !== STRING_ID) throw Error(`not a string: ${ptr}`);\n    return getStringImpl(buffer, ptr);\n  }\n\n  extendedExports.__getString = __getString;\n\n  /** Gets the view matching the specified alignment, signedness and floatness. */\n  function getView(alignLog2, signed, float) {\n    const buffer = memory.buffer;\n    if (float) {\n      switch (alignLog2) {\n        case 2: return new Float32Array(buffer);\n        case 3: return new Float64Array(buffer);\n      }\n    } else {\n      switch (alignLog2) {\n        case 0: return new (signed ? Int8Array : Uint8Array)(buffer);\n        case 1: return new (signed ? Int16Array : Uint16Array)(buffer);\n        case 2: return new (signed ? Int32Array : Uint32Array)(buffer);\n        case 3: return new (signed ? BigInt64Array : BigUint64Array)(buffer);\n      }\n    }\n    throw Error(`unsupported align: ${alignLog2}`);\n  }\n\n  /** Allocates a new array in the module's memory and returns its pointer. */\n  function __newArray(id, values) {\n    const info = getArrayInfo(id);\n    const align = getValueAlign(info);\n    const length = values.length;\n    const buf = __new(length << align, info & STATICARRAY ? id : ARRAYBUFFER_ID);\n    let result;\n    if (info & STATICARRAY) {\n      result = buf;\n    } else {\n      __pin(buf);\n      const arr = __new(info & ARRAY ? ARRAY_SIZE : ARRAYBUFFERVIEW_SIZE, id);\n      __unpin(buf);\n      const U32 = new Uint32Array(memory.buffer);\n      U32[arr + ARRAYBUFFERVIEW_BUFFER_OFFSET >>> 2] = buf;\n      U32[arr + ARRAYBUFFERVIEW_DATASTART_OFFSET >>> 2] = buf;\n      U32[arr + ARRAYBUFFERVIEW_DATALENGTH_OFFSET >>> 2] = length << align;\n      if (info & ARRAY) U32[arr + ARRAY_LENGTH_OFFSET >>> 2] = length;\n      result = arr;\n    }\n    const view = getView(align, info & VAL_SIGNED, info & VAL_FLOAT);\n    if (info & VAL_MANAGED) {\n      for (let i = 0; i < length; ++i) {\n        const value = values[i];\n        view[(buf >>> align) + i] = value;\n      }\n    } else {\n      view.set(values, buf >>> align);\n    }\n    return result;\n  }\n\n  extendedExports.__newArray = __newArray;\n\n  /** Gets a live view on an array's values in the module's memory. Infers the array type from RTTI. */\n  function __getArrayView(arr) {\n    const U32 = new Uint32Array(memory.buffer);\n    const id = U32[arr + ID_OFFSET >>> 2];\n    const info = getArrayInfo(id);\n    const align = getValueAlign(info);\n    let buf = info & STATICARRAY\n      ? arr\n      : U32[arr + ARRAYBUFFERVIEW_DATASTART_OFFSET >>> 2];\n    const length = info & ARRAY\n      ? U32[arr + ARRAY_LENGTH_OFFSET >>> 2]\n      : U32[buf + SIZE_OFFSET >>> 2] >>> align;\n    return getView(align, info & VAL_SIGNED, info & VAL_FLOAT).subarray(buf >>>= align, buf + length);\n  }\n\n  extendedExports.__getArrayView = __getArrayView;\n\n  /** Copies an array's values from the module's memory. Infers the array type from RTTI. */\n  function __getArray(arr) {\n    const input = __getArrayView(arr);\n    const len = input.length;\n    const out = new Array(len);\n    for (let i = 0; i < len; i++) out[i] = input[i];\n    return out;\n  }\n\n  extendedExports.__getArray = __getArray;\n\n  /** Copies an ArrayBuffer's value from the module's memory. */\n  function __getArrayBuffer(ptr) {\n    const buffer = memory.buffer;\n    const length = new Uint32Array(buffer)[ptr + SIZE_OFFSET >>> 2];\n    return buffer.slice(ptr, ptr + length);\n  }\n\n  extendedExports.__getArrayBuffer = __getArrayBuffer;\n\n  /** Copies a typed array's values from the module's memory. */\n  function getTypedArray(Type, alignLog2, ptr) {\n    return new Type(getTypedArrayView(Type, alignLog2, ptr));\n  }\n\n  /** Gets a live view on a typed array's values in the module's memory. */\n  function getTypedArrayView(Type, alignLog2, ptr) {\n    const buffer = memory.buffer;\n    const U32 = new Uint32Array(buffer);\n    const bufPtr = U32[ptr + ARRAYBUFFERVIEW_DATASTART_OFFSET >>> 2];\n    return new Type(buffer, bufPtr, U32[bufPtr + SIZE_OFFSET >>> 2] >>> alignLog2);\n  }\n\n  /** Attach a set of get TypedArray and View functions to the exports. */\n  function attachTypedArrayFunctions(ctor, name, align) {\n    extendedExports[`__get${name}`] = getTypedArray.bind(null, ctor, align);\n    extendedExports[`__get${name}View`] = getTypedArrayView.bind(null, ctor, align);\n  }\n\n  [\n    Int8Array,\n    Uint8Array,\n    Uint8ClampedArray,\n    Int16Array,\n    Uint16Array,\n    Int32Array,\n    Uint32Array,\n    Float32Array,\n    Float64Array\n  ].forEach(ctor => {\n    attachTypedArrayFunctions(ctor, ctor.name, 31 - Math.clz32(ctor.BYTES_PER_ELEMENT));\n  });\n\n  if (BIGINT) {\n    [BigUint64Array, BigInt64Array].forEach(ctor => {\n      attachTypedArrayFunctions(ctor, ctor.name.slice(3), 3);\n    });\n  }\n\n  /** Tests whether an object is an instance of the class represented by the specified base id. */\n  function __instanceof(ptr, baseId) {\n    const U32 = new Uint32Array(memory.buffer);\n    let id = U32[ptr + ID_OFFSET >>> 2];\n    if (id <= getRttiCount(U32)) {\n      do {\n        if (id == baseId) return true;\n        id = getBase(id);\n      } while (id);\n    }\n    return false;\n  }\n\n  extendedExports.__instanceof = __instanceof;\n\n  // Pull basic exports to extendedExports so code in preInstantiate can use them\n  extendedExports.memory = extendedExports.memory || memory;\n  extendedExports.table = extendedExports.table || table;\n\n  // Demangle exports and provide the usual utility on the prototype\n  return demangle(exports, extendedExports);\n}\n\nfunction isResponse(src) {\n  return typeof Response !== \"undefined\" && src instanceof Response;\n}\n\nfunction isModule(src) {\n  return src instanceof WebAssembly.Module;\n}\n\n/** Asynchronously instantiates an AssemblyScript module from anything that can be instantiated. */\nasync function instantiate(source, imports = {}) {\n  if (isResponse(source = await source)) return instantiateStreaming(source, imports);\n  const module = isModule(source) ? source : await WebAssembly.compile(source);\n  const extended = preInstantiate(imports);\n  const instance = await WebAssembly.instantiate(module, imports);\n  const exports = postInstantiate(extended, instance);\n  return { module, instance, exports };\n}\n\n/** Synchronously instantiates an AssemblyScript module from a WebAssembly.Module or binary buffer. */\nfunction instantiateSync(source, imports = {}) {\n  const module = isModule(source) ? source : new WebAssembly.Module(source);\n  const extended = preInstantiate(imports);\n  const instance = new WebAssembly.Instance(module, imports);\n  const exports = postInstantiate(extended, instance);\n  return { module, instance, exports };\n}\n\n/** Asynchronously instantiates an AssemblyScript module from a response, i.e. as obtained by `fetch`. */\nasync function instantiateStreaming(source, imports = {}) {\n  if (!WebAssembly.instantiateStreaming) {\n    return instantiate(\n      isResponse(source = await source)\n        ? source.arrayBuffer()\n        : source,\n      imports\n    );\n  }\n  const extended = preInstantiate(imports);\n  const result = await WebAssembly.instantiateStreaming(source, imports);\n  const exports = postInstantiate(extended, result.instance);\n  return { ...result, exports };\n}\n\n/** Demangles an AssemblyScript module's exports to a friendly object structure. */\nfunction demangle(exports, extendedExports = {}) {\n  const setArgumentsLength = exports[\"__argumentsLength\"]\n    ? length => { exports[\"__argumentsLength\"].value = length; }\n    : exports[\"__setArgumentsLength\"] || exports[\"__setargc\"] || (() => { /* nop */ });\n  for (let internalName in exports) {\n    if (!Object.prototype.hasOwnProperty.call(exports, internalName)) continue;\n    const elem = exports[internalName];\n    let parts = internalName.split(\".\");\n    let curr = extendedExports;\n    while (parts.length > 1) {\n      let part = parts.shift();\n      if (!Object.prototype.hasOwnProperty.call(curr, part)) curr[part] = {};\n      curr = curr[part];\n    }\n    let name = parts[0];\n    let hash = name.indexOf(\"#\");\n    if (hash >= 0) {\n      const className = name.substring(0, hash);\n      const classElem = curr[className];\n      if (typeof classElem === \"undefined\" || !classElem.prototype) {\n        const ctor = function (...args) {\n          return ctor.wrap(ctor.prototype.constructor(0, ...args));\n        };\n        ctor.prototype = {\n          valueOf() { return this[THIS]; }\n        };\n        ctor.wrap = function (thisValue) {\n          return Object.create(ctor.prototype, { [THIS]: { value: thisValue, writable: false } });\n        };\n        if (classElem) Object.getOwnPropertyNames(classElem).forEach(name =>\n          Object.defineProperty(ctor, name, Object.getOwnPropertyDescriptor(classElem, name))\n        );\n        curr[className] = ctor;\n      }\n      name = name.substring(hash + 1);\n      curr = curr[className].prototype;\n      if (/^(get|set):/.test(name)) {\n        if (!Object.prototype.hasOwnProperty.call(curr, name = name.substring(4))) {\n          let getter = exports[internalName.replace(\"set:\", \"get:\")];\n          let setter = exports[internalName.replace(\"get:\", \"set:\")];\n          Object.defineProperty(curr, name, {\n            get() { return getter(this[THIS]); },\n            set(value) { setter(this[THIS], value); },\n            enumerable: true\n          });\n        }\n      } else {\n        if (name === 'constructor') {\n          (curr[name] = (...args) => {\n            setArgumentsLength(args.length);\n            return elem(...args);\n          }).original = elem;\n        } else { // instance method\n          (curr[name] = function (...args) { // !\n            setArgumentsLength(args.length);\n            return elem(this[THIS], ...args);\n          }).original = elem;\n        }\n      }\n    } else {\n      if (/^(get|set):/.test(name)) {\n        if (!Object.prototype.hasOwnProperty.call(curr, name = name.substring(4))) {\n          Object.defineProperty(curr, name, {\n            get: exports[internalName.replace(\"set:\", \"get:\")],\n            set: exports[internalName.replace(\"get:\", \"set:\")],\n            enumerable: true\n          });\n        }\n      } else if (typeof elem === \"function\" && elem !== setArgumentsLength) {\n        (curr[name] = (...args) => {\n          setArgumentsLength(args.length);\n          return elem(...args);\n        }).original = elem;\n      } else {\n        curr[name] = elem;\n      }\n    }\n  }\n  return extendedExports;\n}\n\nvar loader = {\n  instantiate,\n  instantiateSync,\n  instantiateStreaming,\n  demangle\n};\n\nclass ConsoleImport {\n\n  constructor() {\n\n    this._exports = null;\n\n    this.wasmImports = {\n      consoleBindings: {\n        _log: (message) => {\n\n          console.log(this._exports.__getString(message));\n\n        }\n      }\n    };\n  }\n\n  get wasmExports() {\n    return this._exports\n  }\n  set wasmExports(e) {\n    this._exports = e;\n  }\n\n  getFn(fnIndex) {\n    if (!this.wasmExports)\n      throw new Error(\n        'Make sure you set .wasmExports after instantiating the Wasm module but before running the Wasm module.',\n      )\n    return this._exports.table.get(fnIndex)\n  }\n}\n\nvar wasmB64 = \"AGFzbQEAAAABlwEXYAJ/fwBgAX8Bf2ACf38Bf2ADf39/AGABfwBgAn9/AXxgBH9/f38AYAF/AXxgAABgA39/fwF/YAJ/fAF/YAABf2ABfAF/YAN/f3wAYAF8AXxgAn98AGAOf39/f39/fH9/f39/f38Bf2ADf398AX9gBn5/fn9+fwF/YAJ8fwF8YAJ8fAF8YAd/f3x8fHx8AGAEf39/fwF/AjADA2VudgVhYm9ydAAGD2NvbnNvbGVCaW5kaW5ncwRfbG9nAAQDZW52BXRyYWNlABUDugG4AQUKAAQBAwQDAAAAAAAAAAAAAAgABAAAAwgLAgIAAgoAAAAAAwIDAwMAAQkAAQEKAwEDARIJDAwCAQANDQACAxMOFA4AAgUPBQUAAgAFBwEECAQEBAgIAgQQAgYGBgIBBwECCQABAQQBAQcBAQIBAQMLARYLCREBAQoBAAEAAQABAAEABw8BAAEAAQABAAEAAQABAAEAAQABAAEAAQABABACAgYGBgEBAgIBCQABBQUFAgEBBwcFEQcEBAFwAAIFAwEAAQaLARt/AEEDC38AQQQLfwBBBQt/AEEGC38AQQcLfwBBCAt/AEEJC38BQQALfwFBAAt/AUEAC38BQQALfwFBAAt/AUEAC38BQQALfwFBAAt/AUEAC38BQQALfgFCAAt+AUIAC38BQQALfwFBAAt+AUIAC38BQQALfwFBAAt/AEEKC38AQcAkC38BQcSlAQsH0g5PBV9fRUJNAxgNSW50MzJBcnJheV9JRAMAD0ludDMyQXJyYXkyRF9JRAMBD0Zsb2F0NjRBcnJheV9JRAMCEUZsb2F0NjRBcnJheTJEX0lEAwMRRmxvYXQ2NEFycmF5M0RfSUQDBA5TdHJpbmdBcnJheV9JRAMFEFN0cmluZ0FycmF5MkRfSUQDBgVfX25ldwAgBV9fcGluAFEHX191bnBpbgBSCV9fY29sbGVjdABTC19fcnR0aV9iYXNlAxkGbWVtb3J5AgAUX19zZXRBcmd1bWVudHNMZW5ndGgAVhZzZWFyY2hTb3J0ZWRMb3dlckluZGV4AHsWX19FQk0jZ2V0OmZlYXR1cmVOYW1lcwB8Fl9fRUJNI3NldDpmZWF0dXJlTmFtZXMAfRZfX0VCTSNnZXQ6ZmVhdHVyZVR5cGVzAH4WX19FQk0jc2V0OmZlYXR1cmVUeXBlcwB/El9fRUJNI2dldDpiaW5FZGdlcwCAARJfX0VCTSNzZXQ6YmluRWRnZXMAgQEQX19FQk0jZ2V0OnNjb3JlcwCCARBfX0VCTSNzZXQ6c2NvcmVzAIMBFl9fRUJNI2dldDpoaXN0QmluRWRnZXMAhAEWX19FQk0jc2V0Omhpc3RCaW5FZGdlcwCFARNfX0VCTSNnZXQ6aW50ZXJjZXB0AIYBE19fRUJNI3NldDppbnRlcmNlcHQAhwEcX19FQk0jZ2V0OmludGVyYWN0aW9uSW5kZXhlcwCIARxfX0VCTSNzZXQ6aW50ZXJhY3Rpb25JbmRleGVzAIkBG19fRUJNI2dldDppbnRlcmFjdGlvblNjb3JlcwCKARtfX0VCTSNzZXQ6aW50ZXJhY3Rpb25TY29yZXMAiwEdX19FQk0jZ2V0OmludGVyYWN0aW9uQmluRWRnZXMAjAEdX19FQk0jc2V0OmludGVyYWN0aW9uQmluRWRnZXMAjQERX19FQk0jZ2V0OnNhbXBsZXMAjgERX19FQk0jc2V0OnNhbXBsZXMAjwEQX19FQk0jZ2V0OmxhYmVscwCQARBfX0VCTSNzZXQ6bGFiZWxzAJEBHV9fRUJNI2dldDplZGl0aW5nRmVhdHVyZUluZGV4AJIBHV9fRUJNI3NldDplZGl0aW5nRmVhdHVyZUluZGV4AJMBGl9fRUJNI2dldDppc0NsYXNzaWZpY2F0aW9uAJQBGl9fRUJNI3NldDppc0NsYXNzaWZpY2F0aW9uAJUBFF9fRUJNI2dldDpwcmVkTGFiZWxzAJYBFF9fRUJNI3NldDpwcmVkTGFiZWxzAJcBE19fRUJNI2dldDpwcmVkUHJvYnMAmAETX19FQk0jc2V0OnByZWRQcm9icwCZASFfX0VCTSNnZXQ6ZWRpdGluZ0ZlYXR1cmVTYW1wbGVNYXAAmgEhX19FQk0jc2V0OmVkaXRpbmdGZWF0dXJlU2FtcGxlTWFwAJsBIl9fRUJNI2dldDplZGl0aW5nRmVhdHVyZVNhbXBsZU1hcHMAnAEiX19FQk0jc2V0OmVkaXRpbmdGZWF0dXJlU2FtcGxlTWFwcwCdARdfX0VCTSNnZXQ6aGlzdEJpbkNvdW50cwCeARdfX0VCTSNzZXQ6aGlzdEJpbkNvdW50cwCfARhfX0VCTSNnZXQ6c2xpY2VTYW1wbGVJRHMAoAEYX19FQk0jc2V0OnNsaWNlU2FtcGxlSURzAKEBEV9fRUJNI2NvbnN0cnVjdG9yAKIBGl9fRUJNI2dldFNlbGVjdGVkU2FtcGxlTnVtAKMBG19fRUJNI2dldFNlbGVjdGVkU2FtcGxlRGlzdACkARFfX0VCTSN1cGRhdGVNb2RlbAClAR1fX0VCTSN1cGRhdGVQcmVkaWN0aW9uUGFydGlhbACmAQ5fX0VCTSNzZXRNb2RlbACnARNfX0VCTSNnZXRQcmVkaWN0aW9uAKgBEF9fRUJNI2dldE1ldHJpY3MAqQEhX19FQk0jZ2V0TWV0cmljc09uU2VsZWN0ZWRTYW1wbGVzAKoBHl9fRUJNI2dldE1ldHJpY3NPblNlbGVjdGVkQmlucwCrAR9fX0VCTSNnZXRNZXRyaWNzT25TZWxlY3RlZFNsaWNlAKwBEl9fRUJNI3NldFNsaWNlRGF0YQCtARdfX0VCTSNzZXRFZGl0aW5nRmVhdHVyZQCuAQ9fX0VCTSNwcmludE5hbWUArwEUcm9vdE1lYW5TcXVhcmVkRXJyb3IAsAERbWVhbkFic29sdXRlRXJyb3IAsQEbbWVhbkFic29sdXRlUGVyY2VudGFnZUVycm9yALIBEGNvdW50QnlUaHJlc2hvbGQAswELZ2V0Uk9DQ3VydmUAtAEKZ2V0UFJDdXJ2ZQC1AQlnZXRST0NBdWMAtgETZ2V0QXZlcmFnZVByZWNpc2lvbgC3AQtnZXRBY2N1cmFjeQC4ARJnZXRDb25mdXNpb25NYXRyaXgAuQETZ2V0QmFsYW5jZWRBY2N1cmFjeQC6AQgBVwkHAQBBAQsBTQqZygG4ASkAIAEgACgCDE8EQEHACEGACUHjAEEqEAAACyAAKAIEIAFBA3RqKwMAC3UBA38gACgCDEEBayEDA0AgAyAEa0EBSgRAIAAgBLcgAyAEa0ECbbecoKoiAhADIAFjBEAgAiEEBSAAIAIQAyABZEUEQCACDwsgAiEDCwwBCwsgACADEAMgAWUEQCADDwsgACAEEAMgAWQEQCAEDwsgA0EBawsSACAAIAEgACgCBEEDcXI2AgQLWAEBfyAAKAIEQXxxIgFFBEBBACAAQcSlAUkgACgCCBtFBEBBAEGwCUH/AEESEAAACw8LIAAoAggiAEUEQEEAQbAJQYMBQRAQ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QcSlAWtBAXYkDEGgCxAHJA5BwAsQByQPCxoAIxpBxCVIBEBB4KUBQZCmAUEBQQEQAAALC/MBAQR/IxpBDGskGhBYIxpCADcDACMaQQA2AgggAUEBayICQQBIBEAjGkEMaiQaQaAPDwsgAkUEQCMaIAAoAgAiADYCACMaQQxqJBogAEGgDyAAGw8LQaAPIQEjGkGgDzYCBEGcDygCAEEBdiEFA0AgAiADSgRAIxogACADQQJ0aigCACIENgIAIAQEQCMaIAQ2AggjGiABIAQQOiIBNgIECyAFBEAjGiABQaAPEDoiATYCBAsgA0EBaiEDDAELCyMaIAAgAkECdGooAgAiADYCACAABEAjGiAANgIIIxogASAAEDoiATYCBAsjGkEMaiQaIAELkAEBAX8jGkEEayQaEFgjGkEANgIAIxpBDGskGhBYIxpCADcDACMaQQA2AggjGkGgDzYCACMaEHMiATYCBCMaQbAbNgIAQbAbQQEgABAyIxpBsBs2AgAjGkGgDzYCCEGwGxA7IQAjGiAANgIAIAEgABA8IAEQdCEAIxpBDGokGiMaIAA2AgAgABABIxpBBGokGguuEAIBfwF8IxpBKGskGhBYIxpCADcDACMaQgA3AwgjGkIANwMQIxpCADcDGCMaQgA3AyAgAEUEQCMaQdQAQQoQICIANgIACyAAQQAQCyAAQQAQDCAAQQAQDSAAQQAQDiAAQQAQDyAARAAAAAAAAAAAOQMYIABBABAQIABBABASIABBABARIABBABATIABBABAUIABBADYCNCAAQQA6ADggAEEAECIgAEEAECMgAEEAECQgAEEAECsgAEEAECUgAEEAEEYgACABEAsgACACEAwgACADEA0gACAEEA4gACAFEA8gACAGOQMYIAAgBxAQIAAgCBARIAAgCRASIAAgChATIAAgCxAUIAAgDDYCNCAAIA06ADgjGiAAKAIwIgE2AgggASgCDBBtIQEjGiABNgIEIAAgASAAKwMYECEQIiMaIAAoAjwiATYCCCABKAIMEG0hASMaIAE2AgQgACABRAAAAAAAAAAAECEQIyMaIAAoAggiATYCCCABIAAoAjQQbyEBIxogATYCBCAAIAEoAgwQbhAkIxogACgCECIBNgIEIAAgASgCDBBuECUDQCMaIAAoAggiATYCCCABIAAoAjQQbyEBIxogATYC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IxpCADcDACMaIQIgABB5IQAjGiAANgIAIAIgABB6IgI2AgQDQCABIAIoAgxBAWtIBEAgAiABEG8hACMaIAA2AgAgAEEBEAMhBCACIAFBAWoiABBvIQMjGiADNgIAIAQgA0EBEAOhIQQgAiABEG8hASMaIAE2AgAgBSAEIAFBABADoqAhBSAAIQEMAQsLIxpBCGokGiAFC5kBAQN/IxpBCGskGhBYIxpCADcDACMaQRBBBRAgIgE2AgAgAUEAEAsgAUEANgIEIAFBADYCCCABQQA2AgwgAEH///8/SwRAQcAKQYAJQcAAQTwQAAALIxogAEEIIABBCEsbQQN0IgNBABAgIgI2AgQgAiADEB8gASACEAsgASACNgIEIAEgAzYCCCABIAA2AgwjGkEIaiQaIAELmgEBA38jGkEIayQaEFgjGkIANwMAIxpBEEEEECAiATYCACABQQAQCyABQQA2AgQgAUEANgIIIAFBADYCDCAAQf////8ASwRAQcAKQYAJQcAAQTwQAAALIxogAEEIIABBCEsbQQJ0IgNBABAgIgI2AgQgAiADEB8gASACEAsgASACNgIEIAEgAzYCCCABIAA2AgwjGkEIaiQaIAELXQAjGkEEayQaEFgjGkEANgIAIAEgACgCDE8EQEHACEGACUHjAEEqEAAACyMaIAAoAgQgAUECdGooAgAiADYCACAARQRAQbAMQYAJQecAQSgQAAALIxpBBGokGiAAC5oBAQN/IxpBCGskGhBYIxpCADcDACMaQRBBAxAgIgE2AgAgAUEAEAsgAUEANgIEIAFBADYCCCABQQA2AgwgAEH/////AEsEQEHACkGACUHAAEE8EAAACyMaIABBCCAAQQhLG0ECdCIDQQAQICICNgIEIAIgAxAfIAEgAhALIAEgAjYCBCABIAM2AgggASAANgIMIxpBCGokGiABC0kBAX8jGkEEayQaEFgjGkEANgIAIABB/P///wNLBEBBwApBsA1BMUErEAAACyMaIABBABAgIgE2AgAgASAAEB8jGkEEaiQaIAEL2wEBA38jGkEEayQaEFgjGkEANgIAIAAgASABECwiBBAtIgMEQCADIAI2AgQgACACQQEQCgUgACgCECAAKAIMRgRAIAAgACgCFCAAKAIMQQNsQQRtSAR/IAAoAgQFIAAoAgRBAXRBAXILEC4LIxogACgCCCIDNgIAIAAgACgCECIFQQFqNgIQIAMgBUEMbGoiAyABNgIAIAMgAjYCBCAAIAJBARAKIAAgACgCFEEBajYCFCADIAAoAgAgBCAAKAIEcUECdGoiACgCADYCCCAAIAM2AgALIxpBBGokGgt1AQJ/IxpBBGskGhBYIxpBADYCACMaQQhBDRAgIgA2AgAgAEEAEAsgAEEANgIEIABBnA8oAgBBAXZBAXQiAUHAACABQcAASxtBABAgEAsgAQRAIAAoAgBBoA8gARAmIAAgASAAKAIEajYCBAsjGkEEaiQaIAALSwECfyMaQQRrJBoQWCMaQQA2AgAgACgCBCIBRQRAIxpBBGokGkGgDw8LIxogAUEBECAiAjYCACACIAAoAgAgARAmIxpBBGokGiACC3EBAn8jGkEEayQaEFgjGkEANgIAIxoCfyAAIAF0IgQhBSAEQQAQICEBIAMEQCABIAMgBRAmCyABIgMLNgIAQRAgAhAgIgEgAzYCACABIANBABAKIAEgAzYCBCABIAQ2AgggASAANgIMIxpBBGokGiABC3MBAn8jGkEIayQaEFgjGkIANwMAIxpBEEEHECAiADYCACAAQQAQCyAAQQA2AgQgAEEANgIIIABBADYCDCMaQSBBABAgIgE2AgQgAUEgEB8gACABEAsgACABNgIEIABBIDYCCCAAQQA2AgwjGkEIaiQaIAALnwEBAX8jGkEEayQaEFgjGkEANgIAIAAoAgwhAyABQQBIBH8gASADaiIBQQAgAUEAShsFIAEgAyABIANIGwshASMaIAJBAEgEfyACIANqIgJBACACQQBKGwUgAiADIAIgA0gbCyABayICQQAgAkEAShsiA0EDQQVBABB1IgI2AgAgAigCBCAAKAIEIAFBA3RqIANBA3QQJiMaQQRqJBogAgvmAQICfwF8IxpBBGskGhBYIxpBADYCACMaQQRBA0EFQcAfEHUiAzYCAANAIAQgACgCDEgEQEQAAAAAAADwP0QAAAAAAAAAACABIAQQAyACZhsiBUQAAAAAAADwP2EEQCAAIAQQAyAFYQRAIANBAyADQQMQA0QAAAAAAADwP6AQPgUgA0EBIANBARADRAAAAAAAAPA/oBA+CwUgACAEEAMgBWEEQCADQQAgA0EAEANEAAAAAAAA8D+gED4FIANBAiADQQIQA0QAAAAAAADwP6AQPgsLIARBAWohBAwBCwsjGkEEaiQaIAMLmwEBBX8jGkEEayQaEFgjGkEANgIAQQAgACgCDCIBIAFBAEobIQIjGiABIAJrIgFBACABQQBKGyIDQQJBBkEAEHUiATYCACABKAIEIQQgACgCBCACQQJ0aiECQQAhACADQQJ0IQMDQCAAIANJBEAgACAEaiAAIAJqKAIAIgU2AgAgASAFQQEQCiAAQQRqIQAMAQsLIxpBBGokGiABC3YBA38jGkEEayQaEFgjGkEANgIAIAAoAgwiAQRAIAAoAgQhAiAAKAIEIAFBAWtBAnRqIQEDQCABIAJLBEAjGiACKAIAIgM2AgAgAiABKAIANgIAIAEgAzYCACACQQRqIQIgAUEEayEBDAELCwsjGkEEaiQaIAALIwAjGkEEayQaEFgjGiAANgIAIAAgARAEIQAjGkEEaiQaIAALIgAjGkEEayQaEFgjGiAANgIAIAAoAgAhACMaQQRqJBogAAsmACMaQQhrJBoQWCMaIAA2AgAjGiABNgIEIAAgARALIxpBCGokGgsiACMaQQRrJBoQWCMaIAA2AgAgACgCBCEAIxpBBGokGiAACyYAIxpBCGskGhBYIxogADYCACMaIAE2AgQgACABEAwjGkEIaiQaCyIAIxpBBGskGhBYIxogADYCACAAKAIIIQAjGkEEaiQaIAALJgAjGkEIayQaEFgjGiAANgIAIxogATYCBCAAIAEQDSMaQQhqJBoLIgAjGkEEayQaEFgjGiAANgIAIAAoAgwhACMaQQRqJBogAAsmACMaQQhrJBoQWCMaIAA2AgAjGiABNgIEIAAgARAOIxpBCGokGgsiACMaQQRrJBoQWCMaIAA2AgAgACgCECEAIxpBBGokGiAACyYAIxpBCGskGhBYIxogADYCACMaIAE2AgQgACABEA8jGkEIaiQaCyQBAXwjGkEEayQaEFgjGiAANgIAIAArAxghASMaQQRqJBogAQsgACMaQQRrJBoQWCMaIAA2AgAgACABOQMYIxpBBGokGgsiACMaQQRrJBoQWCMaIAA2AgAgACgCICEAIxpBBGokGiAACyYAIxpBCGskGhBYIxogADYCACMaIAE2AgQgACABEBAjGkEIaiQaCyIAIxpBBGskGhBYIxogADYCACAAKAIkIQAjGkEEaiQaIAALJgAjGkEIayQaEFgjGiAA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\";\n\nconst Console = new ConsoleImport();\nconst imports = { ...Console.wasmImports };\n\n\nconst initEBM = (_featureData, _sampleData, _editingFeature, _isClassification) => {\n  const wasmB64URL = 'data:application/octet-binary;base64,' + wasmB64;\n\n  return loader.instantiate(\n    fetch(wasmB64URL).then((result) => result.arrayBuffer()),\n    imports\n  ).then(({ exports }) => {\n    Console.wasmExports = exports;\n    const wasm = exports;\n    const __pin = wasm.__pin;\n    const __unpin = wasm.__unpin;\n    const __newArray = wasm.__newArray;\n    const __getArray = wasm.__getArray;\n    const __newString = wasm.__newString;\n    const __getString = wasm.__getString;\n\n    /**\n     * Convert a JS string array to pointer of string pointers in AS\n     * @param {[string]} strings String array\n     * @returns Pointer to the array of string pointers\n     */\n    const __createStringArray = (strings) => {\n      let stringPtrs = strings.map(str => __pin(__newString(str)));\n      let stringArrayPtr = __pin(__newArray(wasm.StringArray_ID, stringPtrs));\n      stringPtrs.forEach(ptr => __unpin(ptr));\n\n      return stringArrayPtr;\n    };\n\n    /**\n     * Utility function to free a 2D array\n     * @param {[[object]]} array2d 2D array\n     */\n    const __unpin2DArray = (array2d) => {\n      for (let i = 0; i < array2d.length; i++) {\n        __unpin(array2d[i]);\n      }\n      __unpin(array2d);\n    };\n\n    /**\n     * Utility function to free a 3D array\n     * @param {[[[object]]]} array2d 3D array\n     */\n    const __unpin3DArray = (array3d) => {\n      for (let i = 0; i < array3d.length; i++) {\n        for (let j = 0; j < array3d[i].length; j++) {\n          __unpin(array3d[i][j]);\n        }\n        __unpin(array3d[i]);\n      }\n      __unpin(array3d);\n    };\n\n    class EBM {\n      // Store an instance of WASM EBM\n      ebm;\n      sampleDataNameMap;\n      editingFeatureIndex;\n      editingFeatureName;\n\n      constructor(featureData, sampleData, editingFeature, isClassification) {\n\n        // Store values for JS object\n        this.isClassification = isClassification;\n\n        /**\n         * Pre-process the feature data\n         *\n         * Feature data includes the main effect and also the interaction effect, and\n         * we want to split those two.\n         */\n\n        // Step 1: For the main effect, we only need bin edges and scores stored with the same order\n        // of `featureNames` and `featureTypes`.\n\n        // Create an index map from feature name to their index in featureData\n        let featureDataNameMap = new Map();\n        featureData.features.forEach((d, i) => featureDataNameMap.set(d.name, i));\n\n        this.sampleDataNameMap = new Map();\n        sampleData.featureNames.forEach((d, i) => this.sampleDataNameMap.set(d, i));\n\n        let featureNamesPtr = __createStringArray(sampleData.featureNames);\n        let featureTypesPtr = __createStringArray(sampleData.featureTypes);\n\n        let editingFeatureIndex = this.sampleDataNameMap.get(editingFeature);\n        this.editingFeatureIndex = editingFeatureIndex;\n        this.editingFeatureName = editingFeature;\n\n        // Create two 2D arrays for binEdge ([feature, bin]) and score ([feature, bin]) respectively\n        // We mix continuous and categorical together (assume the categorical features\n        // have been encoded)\n        let binEdges = [];\n        let scores = [];\n\n\n        // We also pass the histogram edges (defined by InterpretML) to WASM. We use\n        // WASM EBM to count bin size based on the test set, so that we only iterate\n        // the test data once.\n        let histBinEdges = [];\n\n        // This loop won't encounter interaction terms\n        for (let i = 0; i < sampleData.featureNames.length; i++) {\n          let curName = sampleData.featureNames[i];\n          let curIndex = featureDataNameMap.get(curName);\n\n          let curScore = featureData.features[curIndex].additive.slice();\n          let curBinEdge;\n          let curHistBinEdge;\n\n          if (sampleData.featureTypes[i] === 'categorical') {\n            curBinEdge = featureData.features[curIndex].binLabel.slice();\n            curHistBinEdge = featureData.features[curIndex].histEdge.slice();\n          } else {\n            curBinEdge = featureData.features[curIndex].binEdge.slice(0, -1);\n            curHistBinEdge = featureData.features[curIndex].histEdge.slice(0, -1);\n          }\n\n          // Pin the inner 1D arrays\n          let curBinEdgePtr = __pin(__newArray(wasm.Float64Array_ID, curBinEdge));\n          let curScorePtr = __pin(__newArray(wasm.Float64Array_ID, curScore));\n          let curHistBinEdgesPtr = __pin(__newArray(wasm.Float64Array_ID, curHistBinEdge));\n\n          binEdges.push(curBinEdgePtr);\n          scores.push(curScorePtr);\n          histBinEdges.push(curHistBinEdgesPtr);\n        }\n\n        // Pin the 2D arrays\n        const binEdgesPtr = __pin(__newArray(wasm.Float64Array2D_ID, binEdges));\n        const scoresPtr = __pin(__newArray(wasm.Float64Array2D_ID, scores));\n        const histBinEdgesPtr = __pin(__newArray(wasm.Float64Array2D_ID, histBinEdges));\n\n        /**\n         * Step 2: For the interaction effect, we want to store the feature\n         * indexes and the score.\n         *\n         * Here we store arrays of indexes(2D), edges(3D), and scores(3D)\n         */\n        let interactionIndexes = [];\n        let interactionScores = [];\n        let interactionBinEdges = [];\n\n        featureData.features.forEach((d) => {\n          if (d.type === 'interaction') {\n            // Parse the feature name\n            let index1 = sampleData.featureNames.indexOf(d.name1);\n            let index2 = sampleData.featureNames.indexOf(d.name2);\n\n            let curIndexesPtr = __pin(__newArray(wasm.Int32Array_ID, [index1, index2]));\n            interactionIndexes.push(curIndexesPtr);\n\n            // Collect two bin edges\n            let binEdge1Ptr;\n            let binEdge2Ptr;\n\n            // Have to skip the max edge if it is continuous\n            if (sampleData.featureTypes[index1] === 'categorical') {\n              binEdge1Ptr = __pin(__newArray(wasm.Float64Array_ID, d.binLabel1.slice()));\n            } else {\n              binEdge1Ptr = __pin(__newArray(wasm.Float64Array_ID, d.binLabel1.slice(0, -1)));\n            }\n\n            if (sampleData.featureTypes[index2] === 'categorical') {\n              binEdge2Ptr = __pin(__newArray(wasm.Float64Array_ID, d.binLabel2.slice()));\n            } else {\n              binEdge2Ptr = __pin(__newArray(wasm.Float64Array_ID, d.binLabel2.slice(0, -1)));\n            }\n\n            let curBinEdgesPtr = __pin(__newArray(wasm.Float64Array2D_ID, [binEdge1Ptr, binEdge2Ptr]));\n\n            interactionBinEdges.push(curBinEdgesPtr);\n\n            // Add the scores\n            let curScore2D = d.additive.map((a) => {\n              let aPtr = __pin(__newArray(wasm.Float64Array_ID, a));\n              return aPtr;\n            });\n            let curScore2DPtr = __pin(__newArray(wasm.Float64Array2D_ID, curScore2D));\n            interactionScores.push(curScore2DPtr);\n          }\n        });\n\n        // Create 3D arrays\n        let interactionIndexesPtr = __pin(__newArray(wasm.Int32Array2D_ID, interactionIndexes));\n        let interactionBinEdgesPtr = __pin(__newArray(wasm.Float64Array3D_ID, interactionBinEdges));\n        let interactionScoresPtr = __pin(__newArray(wasm.Float64Array3D_ID, interactionScores));\n\n        /**\n         * Step 3: Pass the sample data to WASM. We directly transfer this 2D float\n         * array to WASM (assume categorical features are encoded already)\n         */\n        let samples = sampleData.samples.map((d) => __pin(__newArray(wasm.Float64Array_ID, d)));\n        let samplesPtr = __pin(__newArray(wasm.Float64Array2D_ID, samples));\n        let labelsPtr = __pin(__newArray(wasm.Float64Array_ID, sampleData.labels));\n\n        /**\n         * Step 4: Initialize the EBM in WASM\n         */\n        this.ebm = wasm.__EBM(\n          featureNamesPtr,\n          featureTypesPtr,\n          binEdgesPtr,\n          scoresPtr,\n          histBinEdgesPtr,\n          featureData.intercept,\n          interactionIndexesPtr,\n          interactionBinEdgesPtr,\n          interactionScoresPtr,\n          samplesPtr,\n          labelsPtr,\n          editingFeatureIndex,\n          isClassification\n        );\n        __pin(this.ebm);\n\n        /**\n         * Step 5: free the arrays created to communicate with WASM\n         */\n        __unpin(labelsPtr);\n        __unpin2DArray(samplesPtr);\n        __unpin3DArray(interactionScoresPtr);\n        __unpin3DArray(interactionBinEdgesPtr);\n        __unpin2DArray(interactionIndexesPtr);\n        __unpin2DArray(histBinEdgesPtr);\n        __unpin2DArray(scoresPtr);\n        __unpin2DArray(binEdgesPtr);\n        __unpin(featureTypesPtr);\n        __unpin(featureNamesPtr);\n      }\n\n      /**\n       * Free the ebm wasm memory.\n       */\n      destroy() {\n        __unpin(this.ebm);\n        this.ebm = null;\n      }\n\n      printData() {\n        let namePtr = this.ebm.printName();\n        let name = __getString(namePtr);\n        console.log('Editing: ', name);\n      }\n\n      /**\n       * Get the current predicted probabilities\n       * @returns Predicted probabilities\n       */\n      getProb() {\n        let predProbs = __getArray(this.ebm.getPrediction());\n        return predProbs;\n      }\n\n      /**\n       * Get the current predictions (logits for classification or continuous values\n       * for regression)\n       * @returns predictions\n       */\n      getScore() {\n        return __getArray(this.ebm.predLabels);\n      }\n\n      /**\n       * Get the binary classification results\n       * @returns Binary predictions\n       */\n      getPrediction() {\n        if (this.isClassification) {\n          let predProbs = __getArray(this.ebm.getPrediction());\n          return predProbs.map(d => (d >= 0.5 ? 1 : 0));\n        }\n        return __getArray(this.ebm.getPrediction());\n      }\n\n      /**\n       * Get the number of test samples affected by the given binIndexes\n       * @param {[int]} binIndexes Indexes of bins\n       * @returns {int} number of samples\n       */\n      getSelectedSampleNum(binIndexes) {\n        let binIndexesPtr = __pin(__newArray(wasm.Int32Array_ID, binIndexes));\n        let count = this.ebm.getSelectedSampleNum(binIndexesPtr);\n        __unpin(binIndexesPtr);\n        return count;\n      }\n\n      /**\n       * Get the distribution of the samples affected by the given inIndexes\n       * @param {[int]} binIndexes Indexes of bins\n       * @returns [[int]] distributions of different bins\n       */\n      getSelectedSampleDist(binIndexes) {\n        let binIndexesPtr = __pin(__newArray(wasm.Int32Array_ID, binIndexes));\n        let histBinCounts = __getArray(this.ebm.getSelectedSampleDist(binIndexesPtr));\n        histBinCounts = histBinCounts.map(p => __getArray(p));\n        __unpin(binIndexesPtr);\n        return histBinCounts;\n      }\n\n      /**\n       * Get the histogram from the training data (from EBM python code)\n       * @returns histogram of all bins\n       */\n      getHistBinCounts() {\n        let histBinCounts = __getArray(this.ebm.histBinCounts);\n        histBinCounts = histBinCounts.map(p => __getArray(p));\n        return histBinCounts;\n      }\n\n      /**\n       * Change the currently editing feature. If this feature has not been edited\n       * before, EBM wasm internally creates a bin-sample mapping for it.\n       * Need to call this function before update() or set() ebm on any feature.\n       * @param {string} featureName Name of the editing feature\n       */\n      setEditingFeature(featureName) {\n        let featureIndex = this.sampleDataNameMap.get(featureName);\n        this.ebm.setEditingFeature(featureIndex);\n        this.editingFeatureName = featureName;\n        this.editingFeatureIndex = this.sampleDataNameMap.get(featureName);\n      }\n\n      /**\n       * Change the scores of some bins of a feature.\n       * This function assumes setEditingFeature(featureName) has been called once\n       * @param {[int]} changedBinIndexes Indexes of bins\n       * @param {[float]} changedScores Target scores for these bins\n       * @param {string} featureName Name of the feature to update\n       */\n      updateModel(changedBinIndexes, changedScores, featureName = undefined) {\n        // Get the feature index based on the feature name if it is specified\n        let featureIndex = this.editingFeatureIndex;\n        if (featureName !== undefined) {\n          featureIndex = this.sampleDataNameMap.get(featureName);\n        }\n\n        let changedBinIndexesPtr = __pin(__newArray(wasm.Int32Array_ID, changedBinIndexes));\n        let changedScoresPtr = __pin(__newArray(wasm.Float64Array_ID, changedScores));\n\n        this.ebm.updateModel(changedBinIndexesPtr, changedScoresPtr, featureIndex);\n\n        __unpin(changedBinIndexesPtr);\n        __unpin(changedScoresPtr);\n      }\n\n      /**\n       * Overwrite the whole bin definition for some continuous feature\n       * This function assumes setEditingFeature(featureName) has been called once\n       * @param {[int]} changedBinIndexes Indexes of all new bins\n       * @param {[float]} changedScores Target scores for these bins\n       * @param {string} featureName Name of the feature to overwrite\n       */\n      setModel(newBinEdges, newScores, featureName = undefined) {\n        // Get the feature index based on the feature name if it is specified\n        let featureIndex = this.editingFeatureIndex;\n        if (featureName !== undefined) {\n          featureIndex = this.sampleDataNameMap.get(featureName);\n        }\n\n        let newBinEdgesPtr = __pin(__newArray(wasm.Float64Array_ID, newBinEdges));\n        let newScoresPtr = __pin(__newArray(wasm.Float64Array_ID, newScores));\n\n        this.ebm.setModel(newBinEdgesPtr, newScoresPtr, featureIndex);\n\n        __unpin(newBinEdgesPtr);\n        __unpin(newScoresPtr);\n      }\n\n      /**\n       * Get the metrics\n       * @returns {object}\n       */\n      getMetrics() {\n\n        /**\n         * (1) regression: [[[RMSE, MAE]]]\n         * (2) binary classification: [roc 2D points, [confusion matrix 1D],\n         *  [[accuracy, roc auc, balanced accuracy]]]\n         */\n\n        // Unpack the return value from getMetrics()\n        let metrics = {};\n        if (!this.isClassification) {\n          let result3D = __getArray(this.ebm.getMetrics());\n          let result3DPtr = __pin(result3D);\n\n          let result2D = __getArray(result3D[0]);\n          let result2DPtr = __pin(result2D);\n\n          let result1D = __getArray(result2D[0]);\n          let result1DPtr = __pin(result1D);\n\n          metrics.rmse = result1D[0];\n          metrics.mae = result1D[1];\n          metrics.mape = result1D[2];\n\n          __unpin(result1DPtr);\n          __unpin(result2DPtr);\n          __unpin(result3DPtr);\n        } else {\n          // Unpack ROC curves\n          let result3D = __getArray(this.ebm.getMetrics());\n          let result3DPtr = __pin(result3D);\n\n          // let result1DPtrs = [];\n          // let roc2D = __getArray(result3D[0]);\n          // let result2DPtr = __pin(roc2D);\n\n          // let rocPoints = roc2D.map(d => {\n          //   let point = __getArray(d);\n          //   result1DPtrs.push(__pin(point));\n          //   return point;\n          // });\n\n          // metrics.rocCurve = rocPoints;\n          // result1DPtrs.map(d => __unpin(d));\n          // __unpin(result2DPtr);\n\n          // Unpack PR curves\n          // result1DPtrs = [];\n          // let pr2D = __getArray(result3D[1]);\n          // result2DPtr = __pin(roc2D);\n\n          // let prPoints = pr2D.map(d => {\n          //   let point = __getArray(d);\n          //   result1DPtrs.push(__pin(point));\n          //   return point;\n          // });\n\n          // metrics.prCurve = prPoints;\n          // result1DPtrs.map(d => __unpin(d));\n          // __unpin(result2DPtr);\n\n          // Unpack confusion matrix\n          let result2D = __getArray(result3D[0]);\n          let result2DPtr = __pin(result2D);\n\n          let result1D = __getArray(result2D[0]);\n          let result1DPtr = __pin(result1D);\n\n          metrics.confusionMatrix = result1D;\n\n          __unpin(result1DPtr);\n          __unpin(result2DPtr);\n\n          // Unpack summary statistics\n          result2D = __getArray(result3D[1]);\n          result2DPtr = __pin(result2D);\n\n          result1D = __getArray(result2D[0]);\n          result1DPtr = __pin(result1D);\n\n          metrics.accuracy = result1D[0];\n          metrics.rocAuc = result1D[1];\n          metrics.balancedAccuracy = result1D[2];\n\n          __unpin(result1DPtr);\n          __unpin(result2DPtr);\n\n          __unpin(result3DPtr);\n        }\n\n        // let metrics = __getArray(this.ebm.getMetrics());\n        return metrics;\n      }\n\n      /**\n       * Get the metrics on the selected bins\n       * @param {[int]} binIndexes Indexes of selected bins\n       * @returns {object}\n       */\n      getMetricsOnSelectedBins(binIndexes) {\n        let metrics = {};\n\n        // Handle binIndexes empty array case at the JS interface\n        if (binIndexes.length === 0) {\n          if (!this.isClassification) {\n            metrics.rmse = null;\n            metrics.mae = null;\n            metrics.mape = null;\n          } else {\n            metrics.confusionMatrix = [null, null, null, null];\n            metrics.accuracy = null;\n            metrics.rocAuc = null;\n            metrics.balancedAccuracy = null;\n          }\n          return metrics;\n        }\n\n        let binIndexesPtr = __pin(__newArray(wasm.Int32Array_ID, binIndexes));\n\n        /**\n         * (1) regression: [[[RMSE, MAE]]]\n         * (2) binary classification: [roc 2D points, [confusion matrix 1D],\n         *  [[accuracy, roc auc, balanced accuracy]]]\n         */\n\n        // Unpack the return value from getMetrics()\n        if (!this.isClassification) {\n          let result3D = __getArray(this.ebm.getMetricsOnSelectedBins(binIndexesPtr));\n          let result3DPtr = __pin(result3D);\n\n          let result2D = __getArray(result3D[0]);\n          let result2DPtr = __pin(result2D);\n\n          let result1D = __getArray(result2D[0]);\n          let result1DPtr = __pin(result1D);\n\n          metrics.rmse = result1D[0];\n          metrics.mae = result1D[1];\n          metrics.mape = result1D[2];\n\n          __unpin(result1DPtr);\n          __unpin(result2DPtr);\n          __unpin(result3DPtr);\n        } else {\n          // Unpack ROC curves\n          let result3D = __getArray(this.ebm.getMetricsOnSelectedBins(binIndexesPtr));\n          let result3DPtr = __pin(result3D);\n\n          // Unpack confusion matrix\n          let result2D = __getArray(result3D[0]);\n          let result2DPtr = __pin(result2D);\n\n          let result1D = __getArray(result2D[0]);\n          let result1DPtr = __pin(result1D);\n\n          metrics.confusionMatrix = result1D;\n\n          __unpin(result1DPtr);\n          __unpin(result2DPtr);\n\n          // Unpack summary statistics\n          result2D = __getArray(result3D[1]);\n          result2DPtr = __pin(result2D);\n\n          result1D = __getArray(result2D[0]);\n          result1DPtr = __pin(result1D);\n\n          metrics.accuracy = result1D[0];\n          metrics.rocAuc = result1D[1];\n          metrics.balancedAccuracy = result1D[2];\n\n          __unpin(result1DPtr);\n          __unpin(result2DPtr);\n          __unpin(result3DPtr);\n        }\n        __unpin(binIndexesPtr);\n\n        return metrics;\n      }\n\n      /**\n       * Get the metrics on the selected slice\n       * This function assumes setSliceData() has been called\n       * @returns {object}\n       */\n      getMetricsOnSelectedSlice() {\n        // Unpack the return value from getMetrics()\n        let metrics = {};\n        if (!this.isClassification) {\n          let result3D = __getArray(this.ebm.getMetricsOnSelectedSlice());\n          let result3DPtr = __pin(result3D);\n\n          let result2D = __getArray(result3D[0]);\n          let result2DPtr = __pin(result2D);\n\n          let result1D = __getArray(result2D[0]);\n          let result1DPtr = __pin(result1D);\n\n          metrics.rmse = result1D[0];\n          metrics.mae = result1D[1];\n          metrics.mape = result1D[2];\n\n          __unpin(result1DPtr);\n          __unpin(result2DPtr);\n          __unpin(result3DPtr);\n        } else {\n          // Unpack ROC curves\n          let result3D = __getArray(this.ebm.getMetricsOnSelectedSlice());\n          let result3DPtr = __pin(result3D);\n\n          // Unpack confusion matrix\n          let result2D = __getArray(result3D[0]);\n          let result2DPtr = __pin(result2D);\n\n          let result1D = __getArray(result2D[0]);\n          let result1DPtr = __pin(result1D);\n\n          metrics.confusionMatrix = result1D;\n\n          __unpin(result1DPtr);\n          __unpin(result2DPtr);\n\n          // Unpack summary statistics\n          result2D = __getArray(result3D[1]);\n          result2DPtr = __pin(result2D);\n\n          result1D = __getArray(result2D[0]);\n          result1DPtr = __pin(result1D);\n\n          metrics.accuracy = result1D[0];\n          metrics.rocAuc = result1D[1];\n          metrics.balancedAccuracy = result1D[2];\n\n          __unpin(result1DPtr);\n          __unpin(result2DPtr);\n          __unpin(result3DPtr);\n        }\n\n        return metrics;\n      }\n\n      /**\n       * Set the current sliced data (a level of a categorical feature)\n       * @param {int} featureID The index of the categorical feature\n       * @param {int} featureLevel The integer encoding of the variable level\n       * @returns {int} Number of test samples in this slice\n       */\n      setSliceData(featureID, featureLevel) {\n        return this.ebm.setSliceData(featureID, featureLevel);\n      }\n\n    }\n\n    let model = new EBM(_featureData, _sampleData, _editingFeature, _isClassification);\n    return model;\n\n  });\n};\n\nexport { initEBM };\n","const initDummyEBM = (_featureData, _sampleData, _editingFeature, _isClassification) => {\n\n  class EBM {\n    // Store an instance of WASM EBM\n    ebm;\n    editingFeatureName;\n\n    constructor(featureData, sampleData, editingFeature, isClassification) {\n\n      // Store values for JS object\n      this.isClassification = isClassification;\n      this.ebm = {};\n      this.isDummy = true;\n    }\n\n    destroy() {\n      this.ebm = {};\n    }\n\n    printData() {\n      return;\n    }\n\n    getProb() {\n      return [];\n    }\n\n    getScore() {\n      return [];\n    }\n\n    getPrediction() {\n      return [];\n    }\n\n    getSelectedSampleNum(binIndexes) {\n      return 0;\n    }\n\n    getSelectedSampleDist(binIndexes) {\n      return [[]];\n    }\n\n    getHistBinCounts() {\n      return [[]];\n    }\n\n    updateModel(changedBinIndexes, changedScores) {\n      return;\n    }\n\n    setModel(newBinEdges, newScores) {\n      return;\n    }\n\n    getMetrics() {\n\n      /**\n       * (1) regression: [[[RMSE, MAE]]]\n       * (2) binary classification: [roc 2D points, [confusion matrix 1D],\n       *  [[accuracy, roc auc, balanced accuracy]]]\n       */\n\n      // Unpack the return value from getMetrics()\n      let metrics = {};\n      if (!this.isClassification) {\n        metrics.rmse = null;\n        metrics.mae = null;\n      } else {\n        metrics.rocCurve = [];\n        metrics.confusionMatrix = [null, null, null, null];\n        metrics.accuracy = null;\n        metrics.rocAuc = null;\n        metrics.balancedAccuracy = null;\n      }\n\n      return metrics;\n    }\n\n    getMetricsOnSelectedBins(binIndexes) {\n\n      /**\n       * (1) regression: [[[RMSE, MAE]]]\n       * (2) binary classification: [roc 2D points, [confusion matrix 1D],\n       *  [[accuracy, roc auc, balanced accuracy]]]\n       */\n\n      // Unpack the return value from getMetrics()\n      let metrics = {};\n      if (!this.isClassification) {\n        metrics.rmse = null;\n        metrics.mae = null;\n      } else {\n        metrics.rocCurve = [];\n        metrics.confusionMatrix = [null, null, null, null];\n        metrics.accuracy = null;\n        metrics.rocAuc = null;\n        metrics.balancedAccuracy = null;\n      }\n\n      return metrics;\n    }\n\n    getMetricsOnSelectedSlice() {\n      // Unpack the return value from getMetrics()\n      let metrics = {};\n      if (!this.isClassification) {\n        metrics.rmse = null;\n        metrics.mae = null;\n      } else {\n        metrics.rocCurve = [];\n        metrics.confusionMatrix = [null, null, null, null];\n        metrics.accuracy = null;\n        metrics.rocAuc = null;\n        metrics.balancedAccuracy = null;\n      }\n\n      return metrics;\n    }\n\n    setSliceData(featureID, featureLevel) {\n      return;\n    }\n\n    /**\n     * Change the currently editing feature. If this feature has not been edited\n     * before, EBM wasm internally creates a bin-sample mapping for it.\n     * Need to call this function before update() or set() ebm on any feature.\n     * @param {string} featureName Name of the editing feature\n     */\n    setEditingFeature(featureName) {\n      this.editingFeatureName = featureName;\n    }\n  }\n\n  let model = new EBM(_featureData, _sampleData, _editingFeature, _isClassification);\n  return model;\n\n};\n\nexport { initDummyEBM };","/**\n * Infer new bin edges and scores from the node data.\n * @param {object} curNodeData Node data in `state`\n */\nexport const getBinEdgeScore = (curNodeData) => {\n\n  // Update the complete bin edge definition in the EBM model\n  let newBinEdges = [];\n  let newScores = [];\n\n  if (curNodeData[0] === undefined) {\n    // Categorical variable\n    for (let i = 1; i < Object.keys(curNodeData).length + 1; i++) {\n      newBinEdges.push(curNodeData[i].id);\n      newScores.push(curNodeData[i].y);\n    }\n\n    return { newBinEdges: newBinEdges, newScores: newScores };\n\n  } else {\n    // Continuous variable\n    // The left point will always have index 0\n    let curPoint = curNodeData[0];\n    let curEBMID = 0;\n\n    // Continuous and categorical features require different ways to reconstruct\n    // the bin definitions\n    while (curPoint.rightPointID !== null) {\n      // Collect x and y\n      newBinEdges.push(curPoint.x);\n      newScores.push(curPoint.y);\n\n      // Update the new ID so we can map them to bin indexes later (needed for\n      // selection to check sample number)\n      curPoint.ebmID = curEBMID;\n      curEBMID++;\n\n      curPoint = curNodeData[curPoint.rightPointID];\n    }\n\n    // Add the right node\n    newBinEdges.push(curPoint.x);\n    newScores.push(curPoint.y);\n    curPoint.ebmID = curEBMID;\n\n    return { newBinEdges: newBinEdges, newScores: newScores };\n  }\n\n};","\n<script>\n  import ContGlobalExplain from './global-explanation/ContFeature.svelte';\n  import CatGlobalExplain from './global-explanation/CatFeature.svelte';\n  import InterContCatGlobalExplain from './global-explanation/InterContCatFeature.svelte';\n  import InterContContGlobalExplain from './global-explanation/InterContContFeature.svelte';\n  import InterCatCatGlobalExplain from './global-explanation/InterCatCatFeature.svelte';\n  import Sidebar from './sidebar/Sidebar.svelte';\n  import ToggleSwitch from './components/ToggleSwitch.svelte';\n  import Dropzone from './components/Dropzone.svelte';\n\n  import d3 from './utils/d3-import';\n  import { initEBM } from './ebm';\n  import { initDummyEBM} from './dummyEbm';\n  import { onMount } from 'svelte';\n  import { writable } from 'svelte/store';\n  import { downloadJSON, round } from './utils/utils';\n  import { getBinEdgeScore } from './utils/ebm-edit';\n\n  import redoIconSVG from './img/redo-icon.svg';\n  import undoIconSVG from './img/undo-icon.svg';\n  import exportIconSVG from './img/export-icon.svg';\n\n  export let modelName = null;\n  export let sampleName = null;\n  export let svgWidth = null;\n  export let inNotebook = false;\n\n  let data = null;\n  let sampleData = null;\n  let isClassification = null;\n  let ebm = initDummyEBM(0, 0, 0, 0);\n  let component = null;\n  let toggle = null;\n  let changer = null;\n  let featureSelect = null;\n  let selectedFeature = null;\n  let updateChanger = true;\n  let featureSelectList = null;\n\n  // Some view size constants\n  const svgHeight = 500;\n  if (svgWidth === null) {\n    svgWidth = svgHeight / 2 * 3;\n  }\n\n  const sidebarWidth = 250;\n\n  const confusionMatrixData = {\n    tn: [23.2, null, 23, null],\n    fn: [23.2, null, 23, null],\n    fp: [23.2, null, 23, null],\n    tp: [23.2, null, 23, null]\n  };\n\n  // [original, last, current, last last]\n  const barData = {\n    accuracy: [0.5, null, 0.5, null],\n    rocAuc: [0.5, null, 0.5, null],\n    balancedAccuracy: [0.5, null, 0.5, null]\n  };\n\n  // Create stores to pass to child components\n  let historyList = null;\n  let historyStore = writable([]);\n  historyStore.subscribe(value => {historyList = value;});\n\n  let sidebarInfo = {};\n  let sidebarStore = writable({\n    rmse: 0,\n    mae: 0,\n    mape: 0,\n    accuracy: 0,\n    rocAuc: 0,\n    balancedAccuracy: 0,\n    confusionMatrix: [],\n    isClassification: null,\n    prCurve: [],\n    rocCurve: [],\n    curGroup: '',\n    selectedTab: 'effect',\n    effectScope: 'global',\n    historyHead: 0,\n    previewHistory: false,\n    barData: JSON.parse(JSON.stringify(barData)),\n    confusionMatrixData: JSON.parse(JSON.stringify(confusionMatrixData)),\n    totalSampleNum: 0,\n    hasUpdatedLastMetrics: false,\n  });\n\n  let footerStore = writable({\n    sample: '',\n    slice: '',\n    help: '',\n    state: '',\n    baselineInit: false,\n    baseline: 0,\n  });\n\n  let footerActionStore = writable('');\n\n  sidebarStore.subscribe(async value => {\n    sidebarInfo = value;\n\n    // Listen to sampleDataCreated and featureDataCreated (user uploads file)\n    if (value.curGroup === 'sampleDataCreated') {\n      sampleData = value.loadedData;\n      value.loadedData = null;\n      value.curGroup = '';\n\n      // Initialize the sidebar view\n      await initSidebar();\n\n      sidebarStore.set(sidebarInfo);\n    }\n\n    if (value.curGroup === 'modelDataCreated') {\n      data = value.loadedData;\n      value.loadedData = null;\n      value.curGroup = '';\n\n      // Initialize the GAM View\n      await initGAMView();\n\n      // If the user has already loaded sampleData, we init sidebar here too\n      if (sampleData !== null) await initSidebar();\n\n      sidebarStore.set(sidebarInfo);\n    }\n\n    // User can also directly upload a .gamchanger file\n    if (value.curGroup === 'gamchangerCreated') {\n      data = value.loadedData.modelData;\n      sampleData = value.loadedData.sampleData;\n\n      // Also restore the history stack\n      historyList = value.loadedData.historyList;\n      historyStore.set(historyList);\n\n      value.loadedData = null;\n      value.curGroup = '';\n\n      // Initialize the GAM View & sidebar view\n      await initGAMView();\n      await initSidebar();\n\n      sidebarStore.set(sidebarInfo);\n    }\n\n    // Double check to make sure the head matches the current feature\n    if (value.curGroup === 'headChanged') {\n      const headFeatureName = historyList[value.historyHead].featureName;\n      if (headFeatureName !== selectedFeature.name) {\n        // Search the feature name in all types\n        const types = ['continuous', 'categorical', 'interaction'];\n        types.forEach(t => {\n          let curIndex = featureSelectList[t].findIndex(d => d.name === headFeatureName);\n          if (curIndex !== -1) {\n            selectedFeature = {};\n            selectedFeature.type = t;\n            selectedFeature.data = data.features[featureSelectList.continuous[curIndex].featureID];\n            selectedFeature.id = featureSelectList.continuous[curIndex].featureID;\n            selectedFeature.name = featureSelectList.continuous[curIndex].name;\n            featureSelect.selectedIndex = curIndex;\n\n            sidebarInfo.featureName = headFeatureName;\n            ebm.setEditingFeature(headFeatureName);\n\n            resizeFeatureSelect();\n            updateChanger = !updateChanger;\n\n            sidebarStore.set(sidebarInfo);\n          }\n        });\n      }\n    }\n  });\n\n  // Bind the SVGs\n  const preProcessSVG = (svgString) => {\n    return svgString.replaceAll('black', 'currentcolor')\n      .replaceAll('fill:none', 'fill:currentcolor')\n      .replaceAll('stroke:none', 'fill:currentcolor');\n  };\n\n  /**\n   * Dynamically bind SVG files as inline SVG strings in this component\n   */\n  const bindInlineSVG = () => {\n    d3.select(component)\n      .selectAll('.svg-icon.icon-redo')\n      .html(preProcessSVG(redoIconSVG));\n\n    d3.select(component)\n      .selectAll('.svg-icon.icon-undo')\n      .html(preProcessSVG(undoIconSVG));\n\n    d3.select(component)\n      .selectAll('.svg-icon.icon-export')\n      .html(preProcessSVG(exportIconSVG));\n  };\n\n  /**\n   * Initialize the GAM view\n   * This function assumes the variable `data` is not null\n   */\n  const initGAMView = async () => {\n    if (data === null) return;\n\n    isClassification = data.isClassifier;\n\n    // Create a list of feature select options (grouped by types, sorted by importance)\n    featureSelectList = {\n      continuous: [],\n      categorical: [],\n      interaction: []\n    };\n\n    data.features.forEach((f, i) => {\n      featureSelectList[f.type].push({\n        name: f.name,\n        featureID: i,\n        importance: f.importance\n      });\n    });\n\n    // Sort each feature type by alphabetical order\n    Object.keys(featureSelectList).forEach(k => featureSelectList[k].sort((a, b) => a.name.localeCompare(b.name)));\n\n    // Populate the slice option list\n    let selectElement = d3.select(component).select('#feature-select');\n\n    // Remove existing options\n    selectElement.selectAll('option').remove();\n\n    let featureGroups = ['continuous', 'categorical', 'interaction'];\n\n    featureGroups.forEach(type => {\n      let groupName = type.charAt(0).toUpperCase() + type.slice(1);\n      let optGroup = selectElement.append('optgroup')\n        .attr('label', groupName + ' (name - importance)');\n\n      featureSelectList[type].forEach(opt => {\n        optGroup.append('option')\n          .attr('value', opt.featureID)\n          .attr('data-level', opt.level)\n          .text(`${opt.name} - ${round(opt.importance, 3)}`);\n      });\n    });\n\n    // Use the latest edited feature as the initial feature is history is restored\n    let targetFeatureIndex = null;\n    let tempSelectedFeature = {};\n\n    if (historyList.length > 0) {\n      const lastEditName = historyList[historyList.length - 1].featureName;\n      data.features.forEach(f => {\n        if (f.name === lastEditName) {\n          tempSelectedFeature.type = f.type;\n        }\n      });\n      targetFeatureIndex = featureSelectList[tempSelectedFeature.type].map(d => d.name).indexOf(lastEditName);\n    } else {\n      if(featureSelectList.continuous.length !== 0) {\n        // Initialize GAM Changer using the continuous variable with the highest importance\n        targetFeatureIndex = d3.maxIndex(featureSelectList.continuous, d => d.importance);\n        tempSelectedFeature.type = 'continuous';\n      } else {\n        // If there is no continuous variable, initialize GAM Changer using\n        // the categorical variable with the highest importance\n        targetFeatureIndex = d3.maxIndex(featureSelectList.categorical, d => d.importance);\n        tempSelectedFeature.type = 'categorical';\n      }\n    }\n\n    tempSelectedFeature.data = data.features[featureSelectList[tempSelectedFeature.type][targetFeatureIndex].featureID];\n    tempSelectedFeature.id = featureSelectList[tempSelectedFeature.type][targetFeatureIndex].featureID;\n    tempSelectedFeature.name = featureSelectList[tempSelectedFeature.type][targetFeatureIndex].name;\n\n    // featureSelect has a different index system from the featureSelectList\n    // console.log(Array.from(featureSelect.options));\n    let selectElementTargetIndex = Array.from(featureSelect.options).reduce((a, d, i) => {\n      if (parseInt(d.value) === tempSelectedFeature.id) a.push(i);\n      return a;\n    }, [])[0];\n    featureSelect.selectedIndex = selectElementTargetIndex;\n\n    resizeFeatureSelect();\n\n    // Need to set the name for EBM (even if it is a dummy EBM) so that\n    // ContFeature can start drawing\n    ebm.setEditingFeature(tempSelectedFeature.name);\n\n    // If we are reconstructing from .gamchanger file, we can load the real EBM here\n    // and re-do all the changes in the history\n    if (historyList.length > 0) {\n      ebm = await initEBM(data, sampleData, historyList[0].featureName, isClassification);\n\n      // Get the initial metrics\n      let metrics = ebm.getMetrics();\n\n      if (ebm.isClassification) {\n        sidebarInfo.accuracy = metrics.accuracy;\n        sidebarInfo.rocAuc = metrics.rocAuc;\n        sidebarInfo.balancedAccuracy = metrics.balancedAccuracy;\n        sidebarInfo.confusionMatrix = metrics.confusionMatrix;\n      } else {\n        sidebarInfo.rmse = metrics.rmse;\n        sidebarInfo.mae = metrics.mae;\n      }\n\n      for (let i = 0; i < historyList.length; i++) {\n        let curCommit = historyList[i];\n        if (curCommit.featureName !== ebm.editingFeatureName) {\n          ebm.setEditingFeature(curCommit.featureName);\n        }\n        if (curCommit.type !== 'original') {\n          let result = getBinEdgeScore(curCommit.state.pointData);\n          ebm.setModel(result.newBinEdges, result.newScores);\n        }\n      }\n\n      sidebarInfo.historyHead = historyList.length - 1;\n    }\n\n    selectedFeature = tempSelectedFeature;\n    updateChanger = !updateChanger;\n\n    sidebarInfo.isClassification = data.isClassifier;\n    sidebarInfo.totalSampleNum = 0;\n    sidebarInfo.featureName = selectedFeature.name;\n    sidebarInfo.historyHead = 0;\n    sidebarInfo.previewHistory = false;\n\n    sidebarStore.set(sidebarInfo);\n\n    footerStore.update(value => {\n      value.totalSampleNum = sidebarInfo.totalSampleNum;\n      value.sample = `<b>0/${sidebarInfo.totalSampleNum }</b> validation samples selected`;\n      return value;\n    });\n  };\n\n  /**\n   * Initialize the sidebar view\n   * This function assumes that both `data` and `sampleData` are loaded\n   */\n  const initSidebar = async () => {\n    if (data === null || sampleData === null) return;\n\n    isClassification = data.isClassifier;\n\n    // Create the sidebar feature data\n    let featurePlotData = {cont: [], cat: [], labelEncoder: data.labelEncoder};\n    let featureDataNameMap = new Map();\n    data.features.forEach((d, i) => featureDataNameMap.set(d.name, i));\n\n    let sampleDataNameMap = new Map();\n    sampleData.featureNames.forEach((d, i) => sampleDataNameMap.set(d, i));\n\n    // Initialize an EBM object\n    if (ebm.isDummy !== undefined) {\n      ebm = await initEBM(data, sampleData, selectedFeature.name, isClassification);\n\n      // Get the initial metrics\n      let metrics = ebm.getMetrics();\n\n      if (ebm.isClassification) {\n        sidebarInfo.accuracy = metrics.accuracy;\n        sidebarInfo.rocAuc = metrics.rocAuc;\n        sidebarInfo.balancedAccuracy = metrics.balancedAccuracy;\n        sidebarInfo.confusionMatrix = metrics.confusionMatrix;\n      } else {\n        sidebarInfo.rmse = metrics.rmse;\n        sidebarInfo.mae = metrics.mae;\n        sidebarInfo.mape = metrics.mape;\n      }\n    }\n\n    // Set curgroup outside the if block => metrics might be initialized form\n    // initGamView() when a .gamchanger file is given\n    sidebarInfo.isClassification = data.isClassifier;\n    sidebarInfo.curGroup = 'original';\n\n    // Get the distribution of test data on each variable\n    const testDataHistCount = ebm.getHistBinCounts();\n\n    for (let j = 0; j < testDataHistCount.length; j++) {\n      let curName = sampleData.featureNames[j];\n      let curType = sampleData.featureTypes[j];\n\n      if (curType === 'continuous') {\n        let histEdge = data.features[featureDataNameMap.get(curName)].histEdge.slice(0, -1);\n        featurePlotData.cont.push({\n          id: sampleDataNameMap.get(curName),\n          name: curName,\n          histEdge: histEdge,\n          histCount: testDataHistCount[j],\n          histSelectedCount: new Array(testDataHistCount[j].length).fill(0)\n        });\n      } else {\n        let histEdge = data.features[featureDataNameMap.get(curName)].histEdge;\n        featurePlotData.cat.push({\n          id: sampleDataNameMap.get(curName),\n          name: curName,\n          histEdge: histEdge,\n          histCount: testDataHistCount[j],\n          histSelectedCount: new Array(testDataHistCount[j].length).fill(0)\n        });\n      }\n    }\n\n    sidebarInfo.featurePlotData = featurePlotData;\n\n    // Remember the number of total samples\n    sidebarInfo.totalSampleNum = sampleData.samples.length;\n    footerStore.update(value => {\n      value.totalSampleNum = sidebarInfo.totalSampleNum;\n      value.sample = `<b>0/${sidebarInfo.totalSampleNum }</b> validation samples selected`;\n      return value;\n    });\n\n    // Get the list of all categorical variables and their values to popularize\n    // the slice select dropdown\n    let sliceOptions = [];\n    data.features.forEach(f => {\n      if (f.type === 'categorical') {\n        let curOptionGroup = [];\n        f.binLabel.forEach(b => curOptionGroup.push(\n          {\n            name: f.name,\n            level: b,\n            levelName: data.labelEncoder[f.name][parseInt(b)],\n            featureID: sampleDataNameMap.get(f.name)\n          }\n        ));\n        sliceOptions.push(curOptionGroup);\n      }\n    });\n\n    sliceOptions.sort((a, b) => a[0].name.localeCompare(b[0].name));\n    sidebarInfo.sliceOptions = sliceOptions;\n\n    sidebarStore.set(sidebarInfo);\n\n    // If the GAM View is initialized, then the 0 item in history stack has\n    // metrics from the dummy EBM. Need to update it here\n    if (historyList.length > 0) {\n      while (sidebarInfo.curGroup !== 'originalCompleted') {\n        await new Promise(r => setTimeout(r, 500));\n      }\n      historyList[0].metrics.barData = JSON.parse(JSON.stringify(sidebarInfo.barData));\n      historyList[0].metrics.confusionMatrixData = JSON.parse(JSON.stringify(sidebarInfo.confusionMatrixData));\n      historyStore.set(historyList);\n    }\n\n  };\n\n  const initData = async (modelName='iow-house-ebm-binary', sampleName='iow-house-sample-binary') => {\n    console.log('loading data');\n    isClassification = true;\n    // data = await d3.json('/data/iow-house-ebm-binary.json');\n    // data = await d3.json('/data/mimic2-model.json');\n    // data = await d3.json('/data/iow-house-ebm.json');\n    // data = await d3.json('/data/medical-ebm.json');\n    data = await d3.json(`PUBLIC_URL/data/${modelName}.json`);\n    console.log(data);\n\n    // sampleData = await d3.json('/data/iow-house-sample-binary.json');\n    // sampleData = await d3.json('/data/mimic2-sample-1000.json');\n    // sampleData = await d3.json('/data/medical-ebm-sample.json');\n    sampleData = await d3.json(`PUBLIC_URL/data/${sampleName}.json`);\n    console.log(sampleData);\n    console.log('loaded data');\n\n    initGAMView();\n    initSidebar();\n  };\n\n  /**\n   * Directly load the model data amd sample data (json string)\n  */\n  const initDataLoaded = (loadedModelData, loadedSampleData) => {\n    data = loadedModelData;\n    sampleData = loadedSampleData;\n\n    console.log('Loaded inline data');\n\n    initGAMView();\n    initSidebar();\n  };\n\n  /**\n   * Wrapper to call the child changer's handler\n  */\n  const selectModeSwitched = () => {\n    changer.selectModeSwitched();\n  };\n\n  const footerActionTriggered = (message) => {\n    footerActionStore.set(message);\n\n    if (message === 'save') {\n\n      // Check if the user has confirmed all edits\n      let allReviewed = true;\n      historyList.forEach(d => allReviewed = allReviewed && d.reviewed);\n      if (allReviewed) {\n        let fileName = new Date().toLocaleDateString().replaceAll('/', '-');\n        fileName = `edit-${fileName}.gamchanger`;\n\n        // Create the .gamchanger project file\n        let downloadData = {\n          modelData: data,\n          sampleData: sampleData,\n          historyList: historyList\n        };\n\n        downloadJSON(downloadData, d3.select(component).select('#download-anchor'), fileName);\n      } else {\n        alert('You need to confirm all edits in the History panel (click 👍 icons) before saving the model.');\n      }\n    }\n  };\n\n  /**\n   * Change the width of the select button so it fits the current content\n   */\n  const resizeFeatureSelect = () => {\n    let opt = featureSelect.options[featureSelect.selectedIndex];\n\n    let hiddenSelect = d3.select(component)\n      .select('#hidden-select')\n      .style('display', 'initial');\n\n    hiddenSelect.select('#hidden-option')\n      .text(opt.text);\n\n    let selectWidth = hiddenSelect.node().clientWidth + 5 + 'px';\n    hiddenSelect.style('display', 'none');\n\n    d3.select(component)\n      .select('#feature-select')\n      .style('width', selectWidth);\n  };\n\n  const featureChanged = async () => {\n    console.log('feature select changed');\n    resizeFeatureSelect();\n\n    // Get the selected feature\n    let opt = featureSelect.options[featureSelect.selectedIndex];\n\n    let selectedFeatureID = opt.value;\n\n    // Update the selected feature object\n    const curFeatureData = data.features[selectedFeatureID];\n\n    // If the selected feature is interaction, figure out which two types\n    if (curFeatureData.type === 'interaction') {\n      let twoTypes = curFeatureData.id.map(i => data.features[i].type);\n\n      if (twoTypes.includes('continuous') &&  twoTypes.includes('categorical')) {\n        selectedFeature.type = 'cont-cat';\n      } else if (twoTypes.includes('continuous')) {\n        selectedFeature.type = 'cont-cont';\n      } else {\n        selectedFeature.type = 'cat-cat';\n      }\n    } else {\n      selectedFeature.type = curFeatureData.type;\n    }\n\n    selectedFeature.name = curFeatureData.name;\n    selectedFeature.data = curFeatureData;\n    selectedFeature.id = selectedFeatureID;\n\n    // Update the ebm model\n    // TODO: update the model for interaction term as well\n    if (curFeatureData.type !== 'interaction') {\n      console.log('Change feature in ebm');\n      ebm.setEditingFeature(selectedFeature.name);\n      ebm = ebm;\n    }\n\n    // Restore and recover the metrics (need this step other wise the metrics\n    // is forgotten if user switches feature during selected tab mode)\n    sidebarInfo.curGroup = 'overwrite';\n    sidebarStore.set(sidebarInfo);\n    if (sampleData !== null) {\n      while (sidebarInfo.curGroup !== 'overwriteCompleted') {\n        await new Promise(r => setTimeout(r, 300));\n      }\n    }\n\n    // Update the metrics\n    let metrics = ebm.getMetrics();\n\n    if (ebm.isClassification) {\n      sidebarInfo.accuracy = metrics.accuracy;\n      sidebarInfo.rocAuc = metrics.rocAuc;\n      sidebarInfo.balancedAccuracy = metrics.balancedAccuracy;\n      sidebarInfo.confusionMatrix = metrics.confusionMatrix;\n    } else {\n      sidebarInfo.rmse = metrics.rmse;\n      sidebarInfo.mae = metrics.mae;\n    }\n\n    sidebarInfo.curGroup = 'new-feature-original';\n\n    // Force the effect scope to be 'global'\n    sidebarInfo.effectScope = 'global';\n    sidebarInfo.featureName = selectedFeature.name;\n\n    sidebarStore.set(sidebarInfo);\n\n    // Make sure all the updates are done before calling the following code\n    // (It would trigger a view update)\n    updateChanger = !updateChanger;\n\n    // Reset the toggle button\n    toggle.reset();\n  };\n\n  // Bind command-z and command-shift-z for undo and redo\n  // Bind command-a as select all\n  const bindShortcutKey = (undoCallback, redoCallback, selectAllCallback) => {\n    d3.select('body')\n      .on('keydown', e => {\n        if ((e.metaKey || e.ctrlKey) && !e.shiftKey && e.key === 'z') {\n          e.preventDefault();\n          e.stopPropagation();\n          undoCallback();\n        } else if ((e.metaKey && e.shiftKey && e.key === 'z') ||\n          (e.ctrlKey && e.shiftKey && e.key === 'Z')) {\n          e.preventDefault();\n          e.stopPropagation();\n          redoCallback();\n        } else if ((e.metaKey || e.ctrlKey) && !e.shiftKey && e.key === 'a') {\n          e.preventDefault();\n          e.stopPropagation();\n          selectAllCallback();\n        }\n      });\n  };\n\n  $: modelName && sampleName && initData(modelName, sampleName);\n\n  onMount(() => {\n    bindInlineSVG();\n    bindShortcutKey(\n      () => footerActionTriggered('undo'),\n      () => footerActionTriggered('redo'),\n      () => footerActionTriggered('selectAll')\n    );\n\n    // If GAM-Changer is used in computation notebook, we only make the bottom\n    // corners round\n    if (inNotebook) {\n      d3.select(component)\n        .style('border-radius', 0)\n        .style('border-bottom-left-radius', '5px')\n        .style('border-bottom-right-radius', '5px');\n\n      // Listen to the iframe message events\n      document.addEventListener('gamchangerData', e => {\n        let data = e.data;\n        initDataLoaded(data.model, data.sample);\n      });\n    }\n  });\n\n</script>\n\n<style type='text/scss'>\n\n  @import 'define';\n\n  .main-tool {\n    display: flex;\n    flex-direction: column;\n    border: 1px solid $gray-border;\n    border-radius: $my-border-radius;\n    background: white;\n  }\n\n  .tool {\n    display: flex;\n    flex-direction: row;\n  }\n\n  .header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 10px 10px;\n    border-bottom: 1px solid $gray-border;\n    background: white;\n    border-top-left-radius: $my-border-radius;\n    height: 53px;\n\n    .header__info {\n      display: flex;\n      align-items: center;\n    }\n\n    .header__control-panel {\n      display: flex;\n      align-items: center;\n    }\n\n    .header__history {\n      background: hsl(225, 53%, 93%);\n      border-radius: $my-border-radius;\n      padding: 1px 7px;\n      font-size: 0.9em;\n      color: $gray-900;\n      margin-left: 1em;\n\n      &.past {\n        background: hsl(35.3, 100%, 90%);\n      }\n    }\n  }\n\n  .select {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n\n    select {\n      height: 2em;\n      border-radius: $my-border-radius;\n      padding-top: 0;\n      padding-bottom: 0;\n      padding-left: 10px;\n      border: 1px solid hsl(0, 0%, 85.9%);\n      background: hsl(0, 20%, 99%);\n\n      &:hover {\n        border: 1px solid hsl(0, 0%, 71%);\n      }\n\n      &:focus {\n        box-shadow: none;\n      }\n    }\n  }\n\n  .select:not(.is-multiple):not(.is-loading)::after {\n    border-color: $blue-dark;\n    right: 12px;\n  }\n\n  .select select:not([multiple]) {\n    padding-right: 30px;\n  }\n\n  #hidden-select {\n    display: none;\n  }\n\n  .toggle-switch-wrapper {\n    width: 180px;\n  }\n\n  .tool-footer {\n    display: flex;\n    border-top: 1px solid $gray-border;\n    height: 2em;\n    align-items: center;\n    border-bottom-left-radius: $my-border-radius;\n    border-bottom-right-radius: $my-border-radius;\n    padding: 5px 0px 5px 10px;\n\n  }\n\n  .message-line {\n    display: flex;\n    gap: 5px;\n    flex-grow: 1;\n    font-size: 0.9em;\n    height: 100%;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    overflow: hidden;\n\n    span {\n      overflow: hidden;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n    }\n  }\n\n  .button-group {\n    display: flex;\n  }\n\n  .field {\n    border-bottom-right-radius: $my-border-radius;\n  }\n\n  .button {\n    padding: 3px 0.8em;\n    height: auto;\n    border-radius: 0;\n    border-top-width: 0px;\n    border-bottom-width: 0px;\n    border-color: $gray-border;\n    border: 0px;\n\n    &:hover {\n      background: $gray-200;\n      border-color: $gray-border;\n    }\n\n    &.right-button {\n      border-right: 0px;\n      border-bottom-right-radius: $my-border-radius;\n      padding-right: 1em;\n    }\n\n    &:focus:not(:active) {\n      box-shadow: none;\n    }\n  }\n\n  .svg-icon {\n    height: 100%;\n    color: $indigo-dark;\n    display: inline-flex;\n    align-items: center;\n\n    :global(svg) {\n      width: 0.9em;\n      height: 0.9em;\n    }\n  }\n\n  .separator {\n    margin: 0 3px;\n    width: 1px;\n    background-color: $gray-border;\n    height: 100%;\n    flex-shrink: 0;\n  }\n\n  .feature-window {\n    background-color: $brown-50;\n    border-radius: $my-border-radius;\n  }\n\n</style>\n\n<div class='main-tool' bind:this={component} style={`width: ${sidebarWidth + svgWidth + 2}px;`}>\n  <a id=\"download-anchor\" style=\"display:none\"> </a>\n\n  <div class='tool'>\n    <div class='feature-window'>\n\n      <div class='header'>\n\n        <div class='header__info'>\n\n          <div class='select'>\n            <select name='feature'\n              bind:this={featureSelect}\n              id='feature-select'\n              title='Select a feature'\n              on:blur={() => {}}\n              on:change={featureChanged}\n            >\n              <option>No data loaded</option>\n            </select>\n          </div>\n\n          <div class='select'>\n            <select id='hidden-select'>\n              <option id='hidden-option'></option>\n            </select>\n          </div>\n\n          {#if selectedFeature !== null}\n            <div class='header__history' class:past={sidebarInfo.previewHistory}>\n              <span class='hash'>\n                {#if sidebarInfo.historyHead === 0}\n                  Original\n                {:else}\n                  {#if sidebarInfo.previewHistory}\n                    Previous Edit:\n                  {:else}\n                    Latest Edit:\n                  {/if}\n                  {historyList[sidebarInfo.historyHead].hash.substring(0, 7)}\n                {/if}\n              </span>\n            </div>\n          {/if}\n\n        </div>\n\n        <div class='header__control-panel'>\n          <div class='toggle-switch-wrapper'>\n            <ToggleSwitch name='cont' bind:this={toggle}\n              on:selectModeSwitched={selectModeSwitched}\n            />\n          </div>\n        </div>\n\n      </div>\n\n\n      {#key updateChanger}\n\n        {#if selectedFeature!== null}\n\n          {#if selectedFeature.type === 'continuous'}\n            <ContGlobalExplain\n              featureData = {selectedFeature === null ? null : selectedFeature.data}\n              scoreRange = {data === null ? null : data.scoreRange}\n              bind:ebm = {ebm}\n              bind:this = {changer}\n              sidebarStore = {sidebarStore}\n              footerStore = {footerStore}\n              footerActionStore = {footerActionStore}\n              historyStore = {historyStore}\n              svgHeight = {500}\n              svgWidth = {svgWidth}\n            />\n          {/if}\n\n          {#if selectedFeature.type === 'categorical'}\n            <CatGlobalExplain\n              featureData = {selectedFeature === null ? null : selectedFeature.data}\n              labelEncoder = {data === null ? null : data.labelEncoder[selectedFeature.name]}\n              scoreRange = {data === null ? null : data.scoreRange}\n              sidebarStore = {sidebarStore}\n              footerStore = {footerStore}\n              footerActionStore = {footerActionStore}\n              historyStore = {historyStore}\n              bind:ebm = {ebm}\n              svgHeight = {500}\n              svgWidth = {svgWidth}\n              bind:this = {changer}\n            />\n          {/if}\n\n          {#if selectedFeature.type === 'cont-cont'}\n            <InterContContGlobalExplain\n              featureData = {selectedFeature === null ? null : selectedFeature.data}\n              scoreRange = {data === null ? null : data.scoreRange}\n              svgHeight = {500}\n              svgWidth = {svgWidth}\n              bind:this = {changer}\n            />\n          {/if}\n\n          {#if selectedFeature.type === 'cont-cat'}\n            <InterContCatGlobalExplain\n              featureData = {selectedFeature === null ? null : selectedFeature.data}\n              labelEncoder = {data === null ? null : data.labelEncoder}\n              scoreRange = {data === null ? null : data.scoreRange}\n              svgHeight = {500}\n              svgWidth = {svgWidth}\n              chartType = 'bar'\n              bind:this = {changer}\n            />\n          {/if}\n\n          {#if selectedFeature.type === 'cat-cat'}\n            <InterCatCatGlobalExplain\n              featureData = {selectedFeature === null ? null : selectedFeature.data}\n              labelEncoder = {data === null ? null : data.labelEncoder}\n              scoreRange = {data === null ? null : data.scoreRange}\n              svgHeight = {500}\n              svgWidth = {svgWidth}\n              bind:this = {changer}\n            />\n          {/if}\n\n        {:else}\n          <!-- If the feature is not loaded, we show the dropzone -->\n          <div class='dropzone-wrapper' style={`width: ${svgWidth}px; height: ${svgHeight + 6}px;`}>\n            <Dropzone sidebarStore={sidebarStore} dataType={'modelData'}/>\n          </div>\n        {/if}\n\n      {/key}\n\n    </div>\n\n    <div class='sidebar-wrapper' style={`width: ${sidebarWidth}px;`}>\n      <Sidebar sidebarStore={sidebarStore}\n        historyStore={historyStore}\n        width={sidebarWidth}\n        sampleDataInitialized={sampleData !== null}\n        ebm={ebm}\n      />\n    </div>\n  </div>\n\n  <div class='tool-footer'>\n\n    <div class='message-line'>\n      {#if selectedFeature !== null}\n        <span>{@html $footerStore.help}</span>\n        <div class='separator'></div>\n\n        <span>{@html $footerStore.sample}</span>\n        <span>{@html $footerStore.slice}</span>\n        <div class='separator'></div>\n\n        <span>{@html $footerStore.state}</span>\n      {/if}\n    </div>\n\n\n    <div class='field has-addons'>\n\n      <div class='control'>\n        <button class='button' title='undo last edit' on:click={() => footerActionTriggered('undo')}>\n          <span class='icon is-small'>\n            <div class='svg-icon icon-undo'></div>\n          </span>\n        </button>\n      </div>\n\n      <div class='control'>\n        <button class='button' title='redo last undo' on:click={() => footerActionTriggered('redo')}>\n          <span class='icon is-small'>\n            <div class='svg-icon icon-redo'></div>\n          </span>\n        </button>\n      </div>\n\n      <div class='control'>\n        <button class='button right-button' title='save edits' on:click={() => footerActionTriggered('save')}>\n          <span class='icon is-small'>\n            <div class='svg-icon icon-export'></div>\n          </span>\n        </button>\n      </div>\n\n    </div>\n\n  </div>\n\n</div>","<script>\n  import d3 from '../utils/d3-import';\n  import { onMount } from 'svelte';\n  import { tooltipConfigStore } from '../store';\n\n  let tooltipConfig = {\n    show: false,\n    html: 'null',\n    left: 0,\n    top: 0,\n    width: 80,\n    maxWidth: 80,\n    fontSize: '14px',\n    orientation: 's'\n  };\n  let currentShow = false;\n\n  let tooltip = null;\n\n  $: style = `left: ${tooltipConfig.left}px; top: ${tooltipConfig.top}px;\n    width: ${tooltipConfig.width}px; max-width: ${tooltipConfig.maxWidth}px;\n    font-size: ${tooltipConfig.fontSize}`;\n\n  tooltipConfigStore.subscribe(value => {\n    let selection = d3.select(tooltip);\n\n    if (value === null) {\n      return;\n    }\n\n    if (value.show) {\n      // Modify the position based on the orientation\n      if (tooltipConfig.orientation === 'n') {\n        value.top += 8;\n      } else if (tooltipConfig.orientation === 's') {\n        value.top -= 8;\n      }\n      tooltipConfig = value;\n\n      selection.style('visibility', 'visible');\n      d3.select(tooltip)\n        .transition('show')\n        .duration(100)\n        .ease(d3.easeQuadInOut)\n        .style('opacity', 1);\n      currentShow = true;\n\n    } else {\n      if (currentShow) {\n        d3.select(tooltip)\n          .style('visibility', 'hidden');\n        currentShow = false;\n      }\n      tooltipConfig = value;\n    }\n  });\n\n  onMount(() => {\n    d3.select(tooltip).style('visibility', 'hidden');\n  });\n\n</script>\n\n<style>\n  .tooltip {\n    position: absolute;\n    color: hsl(0, 0%, 95%);\n    background-color: black;\n    padding: 4px 8px;\n    border-radius: 4px;\n    opacity: 1;\n    z-index: 20;\n    visibility: visible;\n    transition: opacity 150ms, visibility 150ms;\n    display: flex;\n    justify-content: center;\n    box-sizing: border-box;\n    pointer-events: none;\n    text-align: center;\n  }\n\n  .arrow-up {\n    position: absolute;\n    top: -7px;\n    width: 0; \n    height: 0; \n    border-left: 10px solid transparent;\n    border-right: 10px solid transparent;\n    border-bottom: 10px solid black;\n  }\n\n  .arrow-down {\n    position: absolute;\n    bottom: -17px;\n    width: 0; \n    height: 0; \n    border-left: 10px solid transparent;\n    border-right: 10px solid transparent;\n    border-bottom: 10px solid transparent;\n    border-top: 10px solid black;\n  }\n</style>\n\n<div class=\"tooltip\" style={style} bind:this={tooltip}>\n  <div class:arrow-up={tooltipConfig.orientation === 'n'}\n    class:arrow-down={tooltipConfig.orientation === 's'}\n  ></div>\n  {@html tooltipConfig.html}\n</div>","<script context='module'>\n  let iframeApiReady = false;\n\n  import { setContext, onMount } from 'svelte';\n  var tag = document.createElement('script');\n  tag.src = 'https://www.youtube.com/iframe_api';\n  var firstScriptTag = document.getElementsByTagName('script')[0];\n  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\n\n  window.onYouTubeIframeAPIReady = () =>\n  window.dispatchEvent(new Event('iframeApiReady'));\n</script>\n\n<script>\n  import { createEventDispatcher } from 'svelte';\n  import { getContext } from 'svelte';\n  export let videoId;\n  export let playerId = 'player';\n\n  let player;\n  export function play(startSecond = 0){\n    player.seekTo(startSecond);\n    player.playVideo();\n  }\n  const dispatch = createEventDispatcher();\n  window.addEventListener('iframeApiReady', function(e) {\n    player = new YT.Player(playerId, {\n      videoId: videoId,\n      width: '780',\n      height: '439',\n      events: {\n        onReady: onPlayerReady\n      }\n    });\n  });\n  function onPlayerReady(event) {\n    player.mute();\n\n  }\n</script>\n\n<div id={playerId} />","<svelte:head>\n  <script id=\"MathJax-script\" src=\"https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js\"></script>\n</svelte:head>\n\n<script>\n  import Youtube from './Youtube.svelte';\n\n  import d3 from './utils/d3-import';\n  import { onMount } from 'svelte';\n  import { fade, fly } from 'svelte/transition';\n\n  import GAM from './GAM.svelte';\n  import Tooltip from './components/Tooltip.svelte';\n\n  import githubIconSVG from './img/github-icon.svg';\n  import youtubeIconSVG from './img/youtube-icon.svg';\n  import pdfIconSVG from './img/pdf-icon.svg';\n  import msSVG from './img/ms-icon.svg';\n  import gtSVG from './img/gt-icon.svg';\n  import uwSVG from './img/uw-icon.svg';\n  import nyuSVG from './img/nyu-icon.svg';\n\n  import { tooltipConfigStore } from './store';\n\n  // Define inline math\n  const math1 = '\\\\( \\\\textcolor{hsl(24, 95%, 59%)}{x \\\\in \\\\mathbb{R}^{M}} \\\\)';\n  const math2 = '\\\\( \\\\textcolor{hsl(148, 71%, 44%)}{y \\\\in \\\\mathbb{R}} \\\\)';\n  const math3 = '$$ \\\\textcolor{hsl(265, 57%, 57%)}{g \\\\left( \\\\textcolor{hsl(148, 71%, 44%)}{y} \\\\right)} = \\\\textcolor{hsl(213, 28%, 41%)}{\\\\beta_0} + \\\\textcolor{hsl(206, 100%, 45%)}{f_1 \\\\left( \\\\textcolor{hsl(24, 95%, 59%)}{x_1} \\\\right)} + \\\\textcolor{hsl(206, 100%, 45%)}{f_2 \\\\left( \\\\textcolor{hsl(24, 95%, 59%)}{x_2} \\\\right)} + \\\\cdots + \\\\textcolor{hsl(206, 100%, 45%)}{f_M \\\\left( \\\\textcolor{hsl(24, 95%, 59%)}{x_M} \\\\right)} $$';\n  const math4 = '\\\\( \\\\textcolor{hsl(206, 100%, 45%)}{f_{ij}\\\\left( \\\\textcolor{hsl(24, 95%, 59%)}{x_i ,x_j} \\\\right) }\\\\)';\n  const math5 = '\\\\( \\\\textcolor{hsl(265, 57%, 57%)}{g} \\\\)';\n  const math6 = '\\\\( \\\\textcolor{hsl(206, 100%, 45%)}{f_j} \\\\)';\n  const math7 = '\\\\( \\\\textcolor{hsl(213, 28%, 41%)}{\\\\beta_0} \\\\)';\n  const math8 = '\\\\( \\\\textcolor{hsl(24, 95%, 59%)}{x_j} \\\\)';\n  const math9 = '\\\\( \\\\textcolor{hsl(206, 100%, 45%)}{f_{ij}\\\\left( \\\\textcolor{hsl(24, 95%, 59%)}{x_i} \\\\right) }\\\\)';\n\n  let component = null;\n  let currentPlayer = null;\n\n  // Set up tooltip\n  let tooltip = null;\n  let tooltipConfig = null;\n  tooltipConfigStore.subscribe(value => {tooltipConfig = value;});\n\n  // Set up tab interactions\n  let tab = 'iowa';\n  let tabNames = {\n    // pneumonia: {\n    //   modelName: 'pneumonia-model',\n    //   sampleName: 'pneumonia-sample-toy'\n    // },\n    iowa: {\n      modelName: 'iow-house-ebm-binary',\n      sampleName: 'iow-house-train-sample'\n      // modelName: 'iowa-house-regression-model',\n      // sampleName: 'iowa-house-regression-sample'\n    },\n    lc: {\n      modelName: 'lc-model',\n      sampleName: 'lc-data'\n    },\n    // mimic: {\n    //   modelName: 'toy-mimic2-model',\n    //   sampleName: 'toy-mimic2-sample-2000'\n    // },\n    adult: {\n      modelName: 'adult-model',\n      sampleName: 'adult-sample'\n    },\n    my: {\n      modelName: null,\n      sampleName: null\n    }\n  };\n\n  // Bind the SVGs\n  const preProcessSVG = (svgString) => {\n    return svgString.replaceAll('black', 'currentcolor')\n      .replaceAll('fill:none', 'fill:currentcolor')\n      .replaceAll('stroke:none', 'fill:currentcolor');\n  };\n\n  /**\n   * Dynamically bind SVG files as inline SVG strings in this component\n   */\n  const bindInlineSVG = () => {\n    d3.select(component)\n      .selectAll('.svg-icon.icon-github')\n      .html(preProcessSVG(githubIconSVG));\n\n    d3.select(component)\n      .selectAll('.svg-icon.icon-youtube')\n      .html(preProcessSVG(youtubeIconSVG));\n\n    d3.select(component)\n      .selectAll('.svg-icon.icon-pdf')\n      .html(preProcessSVG(pdfIconSVG));\n\n    d3.select(component)\n      .selectAll('.svg-logo.icon-ms')\n      .html(preProcessSVG(msSVG));\n\n    d3.select(component)\n      .selectAll('.svg-logo.icon-gt')\n      .html(preProcessSVG(gtSVG));\n\n    d3.select(component)\n      .selectAll('.svg-logo.icon-uw')\n      .html(preProcessSVG(uwSVG));\n\n    d3.select(component)\n      .selectAll('.svg-logo.icon-nyu')\n      .html(preProcessSVG(nyuSVG));\n  };\n\n  const tabClicked = (newTab) => {\n    tab = newTab;\n  };\n\n  onMount(() => {\n    bindInlineSVG();\n    d3.select('html')\n      .style('scroll-behavior', 'smooth');\n  });\n\n</script>\n\n<style type='text/scss'>\n\n  @import 'define';\n  @import 'article';\n\n  .page {\n    display: flex;\n    flex-direction: column;\n  }\n\n  .top {\n    position: relative;\n    display: grid;\n    height: min(800px, calc(100vh - 5px));\n    grid-template-columns: [start] 1fr [mid-start] auto [mid-end] 1fr [end];\n    grid-template-rows: [start] 3fr [content-start] auto [content-end] 2fr [end];\n  }\n\n  .top-fill {\n    background: $blue-dark;\n    grid-column: start / end;\n    grid-row: start / end;\n    height: 61.8%;\n  }\n\n  .top-empty {\n    grid-column: end / start;\n    grid-row: start / end;\n    height: 30%;\n  }\n\n  .logo-container {\n    grid-column: mid-start / mid-end;\n    grid-row: start / content-start;\n    display: flex;\n    align-items: center;\n    margin-left: 20px;\n  }\n\n  .logo-icon {\n    height: auto;\n    width: 100%;\n    max-width: 400px;\n  }\n\n  .gam-changer {\n    grid-column: mid-start / mid-end;\n    grid-row: content-start / content-end;\n\n    background: white;\n    border-radius: 10px;\n    box-shadow: 0px 10px 40px hsla(0, 0%, 0%, 0.2);\n  }\n\n  .icon-container {\n    grid-column: mid-end / end;\n    grid-row: content-start / content-end;\n    width: 95px;\n\n    display: flex;\n    flex-direction: column;\n    margin: 20px 0 0 25px;\n    gap: 10px;\n\n    a {\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n      color: white;\n      gap: 10px;\n\n      span {\n        font-size: 1.2em;\n      }\n    }\n  }\n\n  .svg-icon {\n    height: 100%;\n    color: white;\n    display: inline-flex;\n    align-items: center;\n\n    :global(svg) {\n      width: 2em;\n      height: 2em;\n    }\n  }\n\n  .svg-logo {\n    height: 100%;\n    color: white;\n    display: inline-flex;\n    align-items: center;\n\n    :global(svg) {\n      height: 40px;\n      // height: 2em;\n    }\n  }\n\n  .gam-tab {\n    grid-column: mid-start / mid-end;\n    grid-row: content-end / end;\n\n    display: flex;\n    flex-direction: column;\n    padding-top: 20px;\n    width: 100%;\n\n    .tab-title {\n      text-align: center;\n      font-size: 0.9em;\n      font-variant: initial;\n      color: gray;\n      cursor: default;\n    }\n\n    .tab-options {\n      display: flex;\n      justify-content: center;\n      align-items: flex-end;\n      color: $blue-dark;\n      gap: 15px;\n      font-variant: small-caps;\n      font-size: 1.1em;\n\n      span.option {\n        cursor: pointer;\n        display: inline-flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: space-between;\n\n        &::after {\n          content: attr(data-text);\n          content: attr(data-text) / \"\";\n          height: 0;\n          visibility: hidden;\n          overflow: hidden;\n          user-select: none;\n          pointer-events: none;\n          font-weight: 600;\n        }\n      }\n\n      span.selected {\n        text-decoration: underline;\n        font-weight: 600;\n      }\n    }\n  }\n\n  .article-footer {\n    background: $blue-dark;\n    color: white;\n    padding: 2rem 0 2em 0;\n    margin-top: 1rem;\n    display: flex;\n    width: 100%;\n    justify-content: center;\n  }\n\n  .footer-main {\n    display: flex;\n    max-width: 100ch;\n    flex-direction: row;\n  }\n\n  .footer-cp {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n\n  .footer-logo {\n    display: flex;\n    margin-right: 30px;\n    gap: 30px;\n  }\n\n</style>\n\n<div class='page' bind:this={component}>\n  <Tooltip bind:this={tooltip}/>\n\n  <div class='top' id='top'>\n\n    <div class='top-fill'>\n\n    </div>\n\n    <div class='top-empty'>\n\n    </div>\n\n    <div class='logo-container'>\n      <div class='logo-icon'>\n        <img src='PUBLIC_URL/img/logo.svg' alt='logo img'>\n      </div>\n    </div>\n\n    {#key tab}\n      <div class='gam-changer' in:fly={{ x: 2000, duration: 800 }} out:fly={{ x : -2000, duration: 800 }}>\n        <GAM modelName={tabNames[tab].modelName}\n          sampleName={tabNames[tab].sampleName}\n          svgWidth={null}\n        />\n      </div>\n    {/key}\n\n    <div class='icon-container'>\n      <a target=\"_blank\" href=\"https://github.com/interpretml/gam-changer\">\n        <div class=\"svg-icon icon-github\" title=\"Open-source code\">\n        </div>\n        <span>Code</span>\n      </a>\n\n      <a target=\"_blank\" href=\"https://youtu.be/D6whtfInqTc\">\n        <div class=\"svg-icon icon-youtube\" title=\"Demo video\">\n        </div>\n        <span>Video</span>\n      </a>\n\n      <a target=\"_blank\" href=\"http://arxiv.org/abs/2206.15465\">\n        <div class=\"svg-icon icon-pdf\" title=\"Paper\">\n        </div>\n        <span>Paper</span>\n      </a>\n\n    </div>\n\n    <div class='gam-tab'>\n      <!-- <span class='tab-title'>\n        Choose a model\n      </span> -->\n\n      <div class='tab-options'>\n        <span class='tab-title'>Choose a model:</span>\n\n        <!-- <span class='option' class:selected={tab === 'pneumonia'}\n          data-text='pneumonia risk'\n          on:click={() => tabClicked('pneumonia')}>\n          pneumonia risk\n        </span> -->\n\n        <!-- <span class='option' class:selected={tab === 'mimic'}\n          data-text='mimic2'\n          on:click={() => tabClicked('mimic')}>\n          mimic2\n        </span> -->\n\n        <span class='option' class:selected={tab === 'iowa'}\n          data-text='iowa house price'\n          on:click={() => tabClicked('iowa')}>\n          iowa house price\n        </span>\n\n        <span class='option' class:selected={tab === 'lc'}\n          data-text='lending club'\n          on:click={() => tabClicked('lc')}>\n          lending club\n        </span>\n\n        <span class='option' class:selected={tab === 'adult'}\n          data-text='census income'\n          on:click={() => tabClicked('adult')}>\n          census income\n        </span>\n\n        <span class='option' class:selected={tab === 'my'}\n          data-text='my model'\n          on:click={() => tabClicked('my')}>\n          my model\n        </span>\n      </div>\n    </div>\n\n  </div>\n\n\n\n  <div class='article'>\n\n    <h2 id=\"what-is-gam-changer\">What is <span class='tool-text'>GAM Changer</span>?</h2>\n    <p>Machine Learning (ML) researchers have developed many techniques to make ML models interpretable.\n      However, it is unclear how we can use interpretability to improve ML models.\n      GAM Changer is an interactive tool that turns interpretability into actions—it empowers domain experts and data scientists\n      to easily and responsibly edit the weights of Generalized Additive Models (GAMs), the state-of-the-art interpretable ML model\n      for tabular data. With GAM Changer, you can align model behaviors with your domain knowledge and values.</p>\n\n    <p>Don’t worry if you are not familiar with GAMs.\n      These models have emerged as one of the most popular model classes among today’s data science community.\n      GAMs’ predictive performance is on par with more complex, state-of-the-art models, yet GAMs remain simple enough for humans to understand its decision process.\n      Given an <span style='color: hsl(24, 95%, 59%)'>input</span> {math1} and a <span style='color: hsl(148, 71%, 44%)'>target</span> {math2},\n      a GAM with a <span style='color: hsl(265, 57%, 57%)'>link function</span> {math5} and <span style='color: hsl(206, 100%, 45%)'>shape function</span> {math6} for each feature \\(j\\) can be written as:\n    </p>\n    {math3}\n\n    <p>\n      The <span style='color: hsl(265, 57%, 57%)'>link function</span> {math5} is determined by the task. For example, in binary classification, {math5} is <span style='color: hsl(265, 57%, 57%)'>logit</span>.\n      In the equation above, {math7} represents the <span style='color: hsl(213, 28%, 41%)'>intercept constant</span>.\n      There are many options for the <span style='color: hsl(206, 100%, 45%)'>shape functions</span> {math6},\n      such as <a href='https://www.routledge.com/Generalized-Additive-Models/Hastie-Tibshirani/p/book/9780412343902'><span style=''>splines</span></a>,\n      <a href='https://dl.acm.org/doi/10.1145/2783258.2788613'><span style=''>gradient-boosted trees</span></a>,\n      and <a href='https://arxiv.org/abs/2004.13912'><span style=''>neural networks</span></a>.\n      Some GAMs also support pair-wise interaction terms {math4}.\n      Different GAM variants come with different training methods, but once trained, they all have the same form.\n      The interpretability and editability of GAMs stems from the fact that people can visualize and modify each individual feature {math8}'s\n      contribution score to the model’s prediction by inspecting and adjusting the <span style='color: hsl(206, 100%, 45%)'>shape functions</span> {math6}.\n      The contribution score is measured by the output of {math9}.\n      Since GAMs are additive, we can edit different <span style='color: hsl(206, 100%, 45%)'>shape functions</span> independently.\n    </p>\n\n\n    <h2 id=\"why-do-i-want-to-change-gams\">Why do I Want to Change GAMs?</h2>\n\n    <p>&quot;All models are wrong, and some are harmful&quot; is a modern realization of George Box’s <a href=\"https://en.wikipedia.org/wiki/All_models_are_wrong\">famous quote</a>.\n      This is particularly true for ML-powered systems in high-stake domains (e.g., healthcare, finance, and criminal justice),\n      as a simple mistake can lead to catastrophic impacts on countless individuals.\n      These model mistakes can be caused by human label error, questionable training data, or even training stochasticity.\n      With interpretable ML models, we see many models exploit problematic patterns in the training data to make predictions.\n    </p>\n    <p>\n      Here is an example where domain experts want to fix their GAMs.\n      Doctors have trained an <a href=\"https://github.com/interpretml/interpret\">Explainable Boosting Machine (EBM)</a> model, a tree-based GAM, to predict the risk of dying from pneumonia.\n      The model uses continuous (e.g., <code>age</code>), categorical (e.g., <code>having asthma</code>) features, and their pair-wise interaction terms from a dataset collected in a US hospital.\n      The model’s prediction pattern on the feature <code>age</code> is visualized in Figure 1.\n    </p>\n\n    <div class=\"figure\">\n      <img src=\"https://i.imgur.com/1jtTWUj.png\" alt=\"Shape function of age on pneumonia risk prediction EBM\" width=90% align=\"middle\"/>\n      <div class=\"figure-caption\">\n        Figure 1.  The shape function of age in an EBM model trained to predict the risk of dying from pneumonia.\n        The curve shows that the model predicts older patients to have a higher risk, but the predicted risk mysteriously drops when the patients are older than 100 years old.\n        This prediction pattern can deprive needy patients of care and cause harm in deployment.\n      </div>\n    </div>\n\n    <p>The shape function visualization shows that the model predicts younger patients to have lower risk, and the risk increases when patients grow older.\n      However, the predicted risk suddenly plunges when the age passes 100—leading to a similar risk score as if the patient is 30 years younger!\n      One hypothesis is that this dangerous pattern might be due to outliers in this age range, especially the range with a small sample size.\n      To identify the true impact of age on pneumonia risk, additional causal experiments and analysis are needed.\n      Without robust evidence that people over 100 are truly at lower risk, doctors might fear that they may be injuring patients by depriving needy older people of care,\n      and violating their primary obligation to <strong>do no harm</strong>.\n      Therefore, some doctors would like to manually set the risk of older patients equal to that of their slightly younger neighbors.\n    </p>\n    <p>Interpretability helps us discover model errors like the sudden drop of predicted risk of older patients; however,\n      it is unclear how we can fix these dangerous patterns.\n      GAM Changer aims to address this practical challenge.\n      With this tool, you can easily <em>investigate</em>, <em>validate</em>, and <em>align</em> GAM behaviors with your domain knowledge\n      and values through interactively editing model parameters.\n    </p>\n\n    <h2 id=\"how-to-use-gam-changer\">How to Use GAM Changer?</h2>\n\n    <div class='video'>\n      <video autoplay loop muted playsinline class='loop-video'>\n        <source src=\"PUBLIC_URL/video/drag.mp4\" type=\"video/mp4\">\n      </video>\n      <div class=\"figure-caption\">\n        Figure 2-1.  In the <a href='#top' style='font-variant: small-caps;'>my model</a> tab, users can use simple drag-and-drop to start editing their GAM models.\n      </div>\n    </div>\n\n    <div class='video' style='margin-top: 30px;'>\n      <video autoplay loop muted playsinline class='loop-video no-shadow'>\n        <source src=\"PUBLIC_URL/video/jupyter.mp4\" type=\"video/mp4\">\n      </video>\n      <div class=\"figure-caption\">\n        Figure 2-2.  Users can use GAM Changer directly in computational notebooks (e.g., Jupyter Notebook, Google Colab).\n      </div>\n    </div>\n\n    <p>We provide two options to use GAM Changer to edit your GAM models.\n      The first option is to select <a href='#top' style='font-variant: small-caps;'>my model</a> on the top of this page, and then upload your model and sample data by dragging them to the interface (Figure 2-1).\n      You can follow <a href=\"https://gist.github.com/xiaohk/875b5374840c66689eb42a4b8820c3b5\">this instruction</a> to export GAM model and sample data.\n      Alternatively, you can directly use GAM Changer in any computational notebooks (e.g., <a href='https://jupyter.org/'>Jupyter Notebook/Lab</a>, <a href='https://colab.research.google.com'>Google Colab</a>).\n      You can follow the steps in this <a href=\"https://colab.research.google.com/drive/1OgAVZKqs2VwmY13QuOjCxlOEyexsYjtm?usp=sharing\">example notebook</a> (Figure 2-2).\n    </p>\n\n    <h4 id=\"gam-canvas\">GAM Canvas</h4>\n    <p>The GAM Canvas (Figure 3) is the primary view of GAM Changer.\n      It visualizes one input feature’s contribution to the model’s prediction by plotting its shape function.\n      As a GAM’s inference varies by feature type, we apply different visualization designs for different feature types.\n      You can use the feature selection drop-down to switch features. To start, GAM Changer chooses the feature with the highest importance score for you.\n    </p>\n\n    <div class='video'>\n      <video autoplay loop muted playsinline class='loop-video'>\n        <source src=\"PUBLIC_URL/video/editing.mp4\" type=\"video/mp4\">\n      </video>\n      <div class=\"figure-caption\">\n        Figure 3.  In the <em>GAM Canvas</em>, you can inspect the shape function with zooming and panning.\n        In the Selection Mode, you apply various editing tools to modify the shape function and change the model prediction behaviors.\n      </div>\n    </div>\n\n    <p>In the <em>Move Mode</em>, you can pan and zoom to inspect the graphs. To edit the model, you can switch to <em>Selection Mode</em> and select bins you want to change by drawing a bounding box around them.\n      Then, the <em>Context Toolbar</em> will appear, where you can apply different preset editing tools.\n      For example, with the <em>Move</em> tool, you can drag the selected bins up and down to change their contribution scores.\n      With the interpolation tool, you can (1) geometrically interpolate between two extreme points, (2) fit a mini-regression, or (3) use an arbitrary number of points to connect two extreme points (either geometric interpolation or regression).\n    </p>\n\n    <h4 id=\"metric-panel\">Metric Panel</h4>\n\n    <div class='video'>\n      <video autoplay loop muted playsinline class='loop-video'>\n        <source src=\"PUBLIC_URL/video/performance.mp4\" type=\"video/mp4\">\n      </video>\n      <div class=\"figure-caption\">\n        Figure 4. A \"live\" GAM model is running in your browser.\n        As you modify the shape function, GAM Changer changes this model and immediately evaluates it on the sample data.\n        The model performance is visualized in real-time in the <em>Metric Panel</em>.\n      </div>\n    </div>\n\n    <p>Model editing empowers domain experts and data scientists to exercise human agency, but <strong>demands caution</strong>.\n      Changing an ML model can have serious consequences—you should only edit the model when you are confident that it would improve the model.\n      Fortunately, GAMs are glass-box models so that you can identify the effects of model changes.\n      To help you keep track of the editing effects on the model performance over the sample dataset, we have developed the <em>Metric Panel</em> (Figure 4).\n      In real-time, it visualizes the model performance metrics of the original model, the last version, and the current version.\n      You can also choose different metric scopes to focus on the selected bins or a dataset slice (e.g., houses with paved alley).\n    </p>\n\n    <h4 id=\"feature-panel\">Feature Panel</h4>\n\n    <div class='video'>\n      <video autoplay loop muted playsinline class='loop-video'>\n        <source src=\"PUBLIC_URL/video/feature.mp4\" type=\"video/mp4\">\n      </video>\n      <div class=\"figure-caption\">\n        Figure 5. By identifying correlated features, GAM Changer helps you get an overview of the samples that are affected by your edits.\n        With the <em>Feature Panel</em>, we hope you are aware that the affected samples might share some other important attributes,\n        and model edits might have disproportional impact on some particular sub-populations.\n      </div>\n    </div>\n\n    <p>Besides model performance, we also hope you to <strong>be mindful about fairness issues</strong> during model editing;\n      some edits can disproportionally affect certain sub-groups in the dataset.\n      For example, in a house price prediction model (Figure 5), editing the model's prediction on high-quality houses would implicitly affect houses built in recent years.\n      This is because the house quality is correlated with when the house was built.\n      In healthcare, model edits created for older patients tend to affect women more than men, because in average women live longer than men.\n      To help you be aware of the characteristics of samples that are affected by your edits, we have designed the <em>Feature Panel</em> (Figure 5).\n      Every time you select an editing region on the <em>GAM Canvas</em>, the <em>Feature Panel</em> automatically identifies other correlated features (both continuous and categorical) and sorts them based on the correlation.\n      It also visualizes the distribution of the affected samples vs. all samples in the dataset.\n      You can also hover over the histogram bins in the Categorical tab to view their labels.\n    </p>\n\n    <h4 id=\"history-panel\">History Panel</h4>\n\n    <p>With the <em>Metric Panel</em> and <em>Feature Panel</em>, GAM Changer helps you identify and envision potential consequences of model edits and make good edits.\n      But don’t worry if you have accidentally made a mistake! You can always click the <em>Undo</em> and <em>Redo</em> buttons to revert or re-apply any edits!\n      You can also use keyboard shortcuts <kbd>cmd</kbd> + <kbd>z</kbd> (<kbd>ctrl</kbd> on Windows) and <kbd>cmd</kbd> + <kbd>shift</kbd> + <kbd>z</kbd>.\n    </p>\n\n    <div class='video'>\n      <video autoplay loop muted playsinline class='loop-video'>\n        <source src=\"PUBLIC_URL/video/history.mp4\" type=\"video/mp4\">\n      </video>\n      <div class=\"figure-caption\">\n        Figure 6. With GAM Changer, you are safe to explore different editing options, as all edits are reversible.\n        GAM Changer keeps track of all your edits in the <em>History Panel</em>, and it automatically generates a short description to help you review edits in the future.\n        We strongly recommend you document your edits by typing in the text box; it will help other stakeholders (e.g., colleagues, auditors, users) make sense of your changes.\n      </div>\n    </div>\n\n    <p>GAM Changer keeps track of all the edits you have made, and it organizes them as a timeline in the <em>History Panel</em> (Figure 6).\n      You can also see the <em>timestamp</em>, <em>feature type</em>, <em>feature name</em>, and an automatically generated <em>description</em> of each edit.\n      By clicking the <em>Check out</em> button, you can preview the model from a previous version.\n      We encourage you to document all edits by typing in the text box.\n      You can write the motivations and contexts of your edits; they will become very helpful when you review edits in the future, or share the history with your colleagues.\n      Finally, before saving the model (by clicking the <em>Save</em> button on the bottom right), GAM Changer forces you to review and confirm all edits by clicking the <em>Thumbs-up</em> buttons.\n      GAM Changer also saves the entire editing history and descriptions so that you can review or continue editing in the future. Again, we hope this design can help you make responsible edits!\n    </p>\n\n    <h2 id=\"video-tutorial\">Video Tutorial</h2>\n\n    <ul>\n      <li class=\"video-link\" on:click={currentPlayer.play(0)}>\n        Introduction\n        <small>(0:00-0:16)</small>\n      </li>\n      <li class=\"video-link\" on:click={currentPlayer.play(16)}>\n        <em>Problems revealed by interpretability</em>\n        <small>(0:16-0:50)</small>\n      </li>\n      <li class=\"video-link\" on:click={currentPlayer.play(50)}>\n        Introducing <em>GAM Changer</em>\n        <small>(0:50-1:07)</small>\n      </li>\n      <li class=\"video-link\" on:click={currentPlayer.play(67)}>\n        Democratizing model editing\n        <small>(1:07-1:16)</small>\n      </li>\n      <li class=\"video-link\" on:click={currentPlayer.play(76)}>\n        Navigation\n        <small>(1:16-1:31)</small>\n      </li>\n      <li class=\"video-link\" on:click={currentPlayer.play(91)}>\n        Editing categorical variables\n        <small>(1:31-1:56)</small>\n      </li>\n      <li class=\"video-link\" on:click={currentPlayer.play(116)}>\n        Editing continuous variables\n        <small>(1:56-2:45)</small>\n      </li>\n      <li class=\"video-link\" on:click={currentPlayer.play(165)}>\n        Responsible editing\n        <small>(2:45-3:00)</small>\n      </li>\n      <li class=\"video-link\" on:click={currentPlayer.play(180)}>\n        <em>Metric Panel</em>\n        <small>(3:00-3:09)</small>\n      </li>\n      <li class=\"video-link\" on:click={currentPlayer.play(189)}>\n        <em>Feature Panel</em>\n        <small>(3:09-3:18)</small>\n      </li>\n      <li class=\"video-link\" on:click={currentPlayer.play(198)}>\n        <em>History Panel</em>\n        <small>(3:18-3:41)</small>\n      </li>\n      <li class=\"video-link\" on:click={currentPlayer.play(221)}>\n        Contributions\n        <small>(3:41-3:55)</small>\n      </li>\n    </ul>\n\n    <div class=\"video\" style='margin-bottom: 2em;'>\n      <Youtube videoId=\"D6whtfInqTc\" playerId=\"demo_video\" bind:this={currentPlayer}/>\n    </div>\n\n    <h2 id=\"how-is-gam-changer-developed\">How is <span class='tool-text'>GAM Changer</span> Developed?</h2>\n    <p>GAM Changer uses <a href=\"https://webassembly.org\">WebAssembly</a>, a modern web technology to accelerate in-browser computation.\n      It enables GAM Changer to run a live EBM model along with isotonic regression and correlation computations directly <strong>in your browser</strong>!\n      In other words, the entire app runs locally and privately, and your model and data would not leave your machine.\n      The interactive system is written in Javascript using <a href=\"https://svelte.dev\">Svelte</a> as a framework and <a href=\"https://d3js.org\">D3.js</a> for visualizations.\n    </p>\n\n    <h2 id=\"who-developed-gam-changer\">Who Developed <span class='tool-text'>GAM Changer</span>?</h2>\n    <p>Led by <a href=\"https://zijie.wang\">Jay Wang</a>, GAM Changer started as an intern project at <a href=\"https://www.microsoft.com/en-us/research/\">Microsoft Research</a>.\n      The work is a result of a collaboration between ML and Human-computer Interaction researchers, data scientists, and doctors.\n      GAM Changer is created by <a href=\"https://zijie.wang\">Jay Wang</a>,\n      <a href=\"http://students.washington.edu/kalea/\">Alex Kale</a>,\n      <a href=\"https://www.linkedin.com/in/harshanori/\">Harsha Nori</a>,\n      <a href=\"https://nyulangone.org/doctors/1548522964/peter-a-stella\">Peter Stella</a>,\n      <a href=\"https://nyulangone.org/doctors/1144385360/mark-e-nunnally\">Mark Nunnally</a>,\n      <a href=\"https://www.cc.gatech.edu/~dchau/\">Polo Chau</a>,\n      <a href=\"https://www.microsoft.com/en-us/research/people/mivorvor/\">Mickey Vorvoreanu</a>,\n      <a href=\"http://www.jennwv.com\">Jenn Wortman Vaughan</a>,\n      and <a href=\"https://www.microsoft.com/en-us/research/people/rcaruana/\">Rich Caruana</a>.\n    </p>\n\n    <p>\n      <!-- We thank <a href=\"https://scottlundberg.com\">Scott Lundberg</a> for insightful conversations.\n      We are also grateful to <a href=\"https://www.microsoft.com/en-us/research/people/sdrucker/\">Steven Drucker</a>,\n      <a href=\"https://www.adamfourney.com\">Adam Fourney</a>,\n      <a href=\"https://www.microsoft.com/en-us/research/people/samershi/\">Saleema Amershi</a>,\n      <a href=\"https://www.linkedin.com/in/deancarignan/\">Dean Carignan</a>,\n      <a href=\"https://www.microsoft.com/en-us/research/people/rdeline/\">Rob DeLine</a>,\n      and the <a href=\"https://github.com/interpretml/interpret/\">InterpretML team</a> for their helpful feedback.\n      We appreciate anonymous user study participants for their valuable feedback. -->\n      We are also grateful to Scott Lundberg,\n      Steven Drucker,\n      Adam Fourney,\n      Saleema Amershi,\n      Dean Carignan,\n      Rob DeLine,\n      Haekyu Park,\n      the InterpretML team,\n      user study participants,\n      and anonymous reviewers\n      for their helpful feedback.\n    </p>\n\n    <h2 id=\"how-can-i-contribute\">How Can I Contribute?</h2>\n    <p>\n      If you have any questions or feedback, feel free to <a href='https://github.com/interpretml/gam-changer/issues'>open an issue</a> or contact <a href=\"https://zijie.wang\">Jay Wang</a>.\n    </p>\n\n    <p>\n      We’d love to hear your experience with GAM Changer!\n      If you’d like to share (e.g., why you use GAM Changer, what functions you find most helpful),\n      please reach out to us.\n      GAM Changer is an open-source project, and we welcome <a href='https://github.com/interpretml/gam-changer/pulls'>pull requests</a> for new feature implementations and bug fixes, etc.\n    </p>\n\n  </div>\n\n  <div class='article-footer'>\n    <div class='footer-main'>\n\n      <div class='footer-logo'>\n        <a target=\"_blank\" href=\"https://www.microsoft.com/en-us/research/\">\n          <div class=\"svg-logo icon-ms\" title=\"Microsoft Research\">\n          </div>\n        </a>\n\n        <a target=\"_blank\" href=\"https://www.gatech.edu/\">\n          <div class=\"svg-logo icon-gt\" title=\"Georgia Tech\">\n          </div>\n        </a>\n\n        <a target=\"_blank\" href=\"https://www.washington.edu/\">\n          <div class=\"svg-logo icon-uw\" title=\"University of Washington\">\n          </div>\n        </a>\n\n        <a target=\"_blank\" href=\"https://nyulangone.org/\">\n          <div class=\"svg-logo icon-nyu\" title=\"NYU Langone Health\">\n          </div>\n        </a>\n      </div>\n\n      <div class='footer-cp'>\n        <div>Copyright © {new Date().getFullYear()} Microsoft</div>\n        <div>All rights reserved</div>\n      </div>\n\n    </div>\n\n  </div>\n\n</div>","<svelte:head>\n\t<link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/bulma/0.9.1/css/bulma.min.css\"\n\t\tintegrity=\"sha512-ZRv40llEogRmoWgZwnsqke3HNzJ0kiI0+pcMgiz2bxO6Ew1DVBtWjVn0qjrXdT3+u+pSN36gLgmJiiQ3cQtyzA==\"\n\t\tcrossorigin=\"anonymous\" />\n</svelte:head>\n\n<script>\n\timport Main from './Main.svelte';\n\timport Article from './Article.svelte';\n\t// import Article from './ArticleAnon.svelte';\n</script>\n\n<style type='text/scss'>\n\t.stand-alone-page {\n\t\tcolor: #333;\n\t\tbox-sizing: border-box;\n\t\tfont-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen-Sans, Ubuntu, Cantarell, \"Helvetica Neue\", sans-serif;\n\t\tfont-size: 16px;\n\t\tfont-weight: 400;\n\t\tline-height: 1.5;\n\t}\n</style>\n\n<!-- Import Google font and font awesome -->\n<link rel=\"preconnect\" href=\"https://fonts.gstatic.com\">\n<link\n\t\thref=\"https://fonts.googleapis.com/css2?family=Source+Sans+Pro:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,200;1,300;1,400;1,600;1,700;1,900&display=swap\"\n\t\trel=\"stylesheet\">\n<link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.1/css/all.min.css\">\n\n<div class='stand-alone-page'>\n\t<!-- <Main /> -->\n\t<Article />\n</div>","import App from './App.svelte';\n\nconst app = new App({\n  target: document.body,\n  props: {\n    // name: 'world'\n  }\n});\n\nexport default app;"],"names":["noop","identity","x","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","src_url_equal_anchor","component_subscribe","component","store","callback","$$","on_destroy","push","callbacks","unsub","subscribe","unsubscribe","null_to_empty","value","is_client","window","now","performance","Date","raf","cb","requestAnimationFrame","tasks","Set","run_tasks","task","c","delete","f","size","loop","promise","Promise","fulfill","add","abort","append","target","node","appendChild","get_root_for_style","document","root","getRootNode","ownerDocument","host","append_empty_stylesheet","style_element","element","style","head","append_stylesheet","insert","anchor","insertBefore","detach","parentNode","removeChild","name","createElement","svg_element","createElementNS","text","data","createTextNode","space","empty","listen","event","handler","options","addEventListener","removeEventListener","attr","attribute","removeAttribute","getAttribute","setAttribute","set_data","wholeText","set_input_value","input","set_style","key","important","setProperty","toggle_class","toggle","classList","custom_event","type","detail","bubbles","e","createEvent","initCustomEvent","HtmlTag","constructor","this","n","html","h","m","nodeName","t","i","innerHTML","Array","from","childNodes","length","p","d","active_docs","current_component","active","create_rule","duration","delay","ease","uid","step","keyframes","rule","str","hash","charCodeAt","doc","stylesheet","__svelte_stylesheet","sheet","current_rules","__svelte_rules","insertRule","cssRules","animation","delete_rule","previous","split","next","filter","anim","indexOf","deleted","join","deleteRule","clear","create_animation","params","to","getBoundingClientRect","left","right","top","bottom","easing","start","start_time","end","tick","css","running","started","stop","fix_position","getComputedStyle","position","width","height","transform","add_transform","set_current_component","get_current_component","Error","onMount","on_mount","afterUpdate","after_update","onDestroy","createEventDispatcher","slice","call","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","resolve","update_scheduled","add_render_callback","add_flush_callback","flushing","seen_callbacks","flush","update","pop","has","fragment","before_update","dirty","ctx","wait","then","dispatch","direction","kind","dispatchEvent","outroing","outros","group_outros","r","check_outros","transition_in","block","local","transition_out","o","null_transition","create_bidirectional_transition","intro","config","running_program","pending_program","animation_name","clear_animation","init","program","Math","abs","group","go","fix_and_destroy_block","lookup","destroy_block","update_keyed_each","old_blocks","get_key","dynamic","list","destroy","create_each_block","get_context","old_indexes","new_blocks","new_lookup","Map","deltas","child_ctx","get","set","will_move","did_move","first","new_block","old_block","new_key","old_key","bind","index","props","undefined","bound","create_component","mount_component","customElement","new_on_destroy","map","destroy_component","detaching","make_dirty","fill","instance","create_fragment","not_equal","append_styles","parent_component","on_disconnect","context","skip_bound","ready","ret","rest","hydrate","nodes","children","l","SvelteComponent","$destroy","$on","splice","$set","$$props","obj","$$set","keys","xhtml","svg","xlink","xml","xmlns","prefix","namespaces","hasOwnProperty","creatorInherit","uri","namespaceURI","documentElement","creatorFixed","fullname","namespace","none","selector","querySelector","querySelectorAll","matches","childMatcher","find","prototype","childFirst","firstElementChild","EnterNode","parent","datum","_next","_parent","__data__","bindIndex","enter","exit","groupLength","dataLength","bindKey","keyValue","nodeByKeyValue","keyValues","ascending","NaN","attrRemove","attrRemoveNS","removeAttributeNS","attrConstant","attrConstantNS","setAttributeNS","attrFunction","v","apply","arguments","attrFunctionNS","defaultView","styleRemove","removeProperty","styleConstant","priority","styleFunction","styleValue","getPropertyValue","propertyRemove","propertyConstant","propertyFunction","classArray","string","trim","ClassList","_node","_names","classedAdd","names","classedRemove","remove","classedTrue","classedFalse","classedFunction","textRemove","textContent","textConstant","textFunction","htmlRemove","htmlConstant","htmlFunction","raise","nextSibling","lower","previousSibling","firstChild","constantNull","selection_cloneShallow","clone","cloneNode","selection_cloneDeep","parseTypenames","typenames","onRemove","typename","on","__on","j","listener","onAdd","contextListener","CustomEvent","initEvent","cancelable","dispatchConstant","dispatchFunction","child","contains","Selection","groups","parents","_groups","_parents","selection","sourceEvent","currentTarget","ownerSVGElement","createSVGPoint","point","clientX","y","clientY","matrixTransform","getScreenCTM","inverse","rect","clientLeft","clientTop","pageX","pageY","responseJson","response","ok","status","statusText","json","delta","compare","lo","hi","mid","ascendingComparator","center","select","subgroups","subnode","subgroup","selectAll","array","arrayAll","selectorAll","selectChild","match","childFind","selectChildren","childrenFilter","matcher","constant","enterGroup","updateGroup","exitGroup","i0","i1","_enter","_exit","sparse","onenter","onupdate","onexit","merge","order","groups0","groups1","m0","m1","min","merges","group0","group1","compareDocumentPosition","sort","compareNode","sortgroups","sortgroup","each","getAttributeNS","property","classed","creator","before","deep","Symbol","iterator","bisectRight","bisector","e10","sqrt","e5","e2","tickIncrement","count","max","power","floor","log","LN10","error","pow","ceil","range","initRange","domain","implicit","ordinal","unknown","scale","_","copy","band","bandwidth","ordinalRange","r0","r1","round","paddingInner","paddingOuter","align","rescale","reverse","values","sequence","rangeRound","padding","pointish","factory","extend","definition","Color","darker","brighter","reI","reN","reP","reHex","reRgbInteger","RegExp","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","color_formatHex","rgb","formatHex","color_formatRgb","formatRgb","color","format","toLowerCase","exec","parseInt","rgbn","Rgb","rgba","hsla","g","rgbConvert","opacity","rgb_formatHex","hex","rgb_formatRgb","isNaN","toString","s","Hsl","hslConvert","hsl2rgb","m2","define","channels","assign","displayable","formatHsl","k","gamma","nogamma","exponential","linear","rgbGamma","colorRgb","genericArray","nb","na","setTime","reA","reB","source","am","bm","bs","bi","lastIndex","q","number","one","zero","date","ArrayBuffer","isView","DataView","isNumberArray","numberArray","isArray","valueOf","object","svgNode","degrees","PI","translateX","translateY","rotate","skewX","scaleX","scaleY","atan2","atan","interpolateTransform","parse","pxComma","pxParen","degParen","xa","ya","xb","yb","translate","interpolateTransformCss","DOMMatrix","WebKitCSSMatrix","isIdentity","decompose","interpolateTransformSvg","baseVal","consolidate","matrix","cosh","exp","zoomRho","rho","rho2","rho4","zoom","p0","p1","S","ux0","uy0","w0","ux1","uy1","w1","dx","dy","d2","d1","b0","b1","coshr0","u","tanh","sinh","SQRT2","_1","_2","unit","normalize","bimap","interpolate","d0","polymap","bisect","clamp","transformer","untransform","piecewise","output","interpolateValue","invert","interpolateNumber","interpolateRound","continuous","formatDecimalParts","toExponential","coefficient","prefixExponent","re","formatSpecifier","specifier","FormatSpecifier","sign","symbol","comma","precision","exponent","toFixed","toLocaleString","replace","toPrecision","formatRounded","X","toUpperCase","locale","formatPrefix","prefixes","grouping","thousands","Number","substring","currencyPrefix","currency","currencySuffix","decimal","numerals","formatNumerals","String","percent","minus","nan","newFormat","formatTypes","test","suffix","formatType","maybeSuffix","valuePrefix","valueSuffix","valueNegative","out","formatTrim","Infinity","tickFormat","step0","step1","tickStep","precisionPrefix","precisionRound","precisionFixed","linearish","ticks","isFinite","nice","prestep","maxIter","formatLocale","taskHead","taskTail","colors","frame","timeout","interval","clockLast","clockNow","clockSkew","clock","setFrame","setTimeout","clearNow","Timer","_call","_time","timer","time","restart","wake","timerFlush","t0","t2","t1","sleep","nap","poke","clearTimeout","clearInterval","setInterval","elapsed","TypeError","Dispatch","types","concat","T","that","args","emptyOn","emptyTween","id","timing","schedules","__transition","self","tween","schedule","state","tweenRemove","tween0","tween1","tweenFunction","tweenValue","transition","_id","interpolateRgb","interpolateString","value1","string00","interpolate0","string1","string0","string10","attrInterpolate","attrInterpolateNS","attrTweenNS","_value","attrTween","delayFunction","delayConstant","durationFunction","durationConstant","easeConstant","onFunction","on0","on1","sit","every","styleInterpolate","styleTween","textInterpolate","textTween","Transition","_name","newId","selection_prototype","inherit","id0","id1","styleNull","listener0","styleMaybeRemove","removeFunction","easeVarying","reject","cancel","interrupt","cubicInOut","polyInOut","custom","tau","elasticOut","asin","tpmt","sin","amplitude","period","defaultTiming","easeCubicInOut","epsilon","offset","entering","__axis","axis","orient","tickArguments","tickValues","tickSizeInner","tickSizeOuter","tickPadding","devicePixelRatio","spacing","range0","range1","path","tickExit","tickEnter","line","tickSize","pi","tauEpsilon","Path","_x0","_y0","_x1","_y1","Linear","_context","Step","_t","nopropagation","stopImmediatePropagation","preventDefault","view","noevent","__noselect","MozUserSelect","yesdrag","noclick","moveTo","closePath","lineTo","quadraticCurveTo","x1","y1","bezierCurveTo","x2","y2","arcTo","x0","y0","x21","y21","x01","y01","l01_2","x20","y20","l21_2","l20_2","l21","l01","acos","t01","t21","arc","a0","a1","ccw","cos","cw","da","w","areaStart","_line","areaEnd","lineStart","_point","lineEnd","_x","_y","DragEvent","subject","identifier","defineProperties","enumerable","configurable","defaultFilter","ctrlKey","button","defaultContainer","defaultSubject","defaultTouchable","navigator","maxTouchPoints","BrushEvent","mode","MODE_DRAG","MODE_SPACE","MODE_HANDLE","MODE_CENTER","number1","number2","handles","xy","Y","XY","cursors","overlay","nw","ne","se","sw","flipX","flipY","signsX","signsY","defaultExtent","hasAttribute","viewBox","__brush","extent","ZoomEvent","Transform","applyX","applyY","location","invertX","invertY","rescaleX","rescaleY","SVGElement","clientWidth","clientHeight","defaultTransform","__zoom","defaultWheelDelta","deltaY","deltaMode","defaultConstrain","translateExtent","dx0","dx1","dy0","dy1","fetch","scaleBand","schemeTableau10","valueof","maxIndex","minIndex","sum","easePolyInOut","easeElasticOut","axisLeft","axisBottom","defined","curve","curveLinear","buffer","defined0","pointX","pointY","brush","dim","touchending","touchable","listeners","handleSize","initialize","handle","redraw","touchmoved","touchended","emitter","clean","emit","Emitter","touches","n0","n1","e0","e1","s0","s1","moving","lockX","lockY","metaKey","altKey","signX","signY","W","N","E","shifting","shiftKey","points","pointer","point0","pts","move","beforestart","moved","ended","keydowned","keyupped","dragDisable","changedTouches","cur","dragEnable","keyCode","selection0","selection1","starting","keyModifiers","touchstarting","touchfirst","constrain","wheelDelta","scaleExtent","interpolateZoom","touchDelay","clickDistance2","tapDistance","wheeled","mousedowned","dblclicked","touchstarted","centroid","gesture","__zooming","Gesture","taps","wheel","mouse","wheelidled","mousemoved","mouseupped","k1","touch0","touch1","l0","l1","dp","dl","hypot","collection","scaleBy","scaleTo","k0","translateBy","translateTo","clickDistance","zoomIdentity","drag","mousedownx","mousedowny","mousemoving","container","gestures","nodrag","touch","BIGINT","BigUint64Array","THIS","decoder","TextDecoder","getStringImpl","ptr","len","Uint32Array","arr","Uint16Array","fromCharCode","decode","preInstantiate","imports","extendedExports","getString","memory","env","msg","file","colm","trace","console","seed","F_NOEXPORTRUNTIME","postInstantiate","exports","table","__new","__pin","__unpin","__collect","__rtti_base","getRttiCount","getArrayInfo","info","U32","getInfo","getBase","getValueAlign","clz32","getView","alignLog2","signed","float","Float32Array","Float64Array","Int8Array","Uint8Array","Int16Array","Int32Array","BigInt64Array","__getArrayView","buf","subarray","getTypedArray","Type","getTypedArrayView","bufPtr","attachTypedArrayFunctions","ctor","__newString","U16","__getString","__newArray","result","__getArray","__getArrayBuffer","Uint8ClampedArray","BYTES_PER_ELEMENT","__instanceof","baseId","demangle","isResponse","src","Response","isModule","WebAssembly","Module","async","instantiate","instantiateStreaming","module","compile","extended","arrayBuffer","setArgumentsLength","internalName","elem","parts","curr","part","shift","className","classElem","wrap","thisValue","THIS$1","writable","getOwnPropertyNames","defineProperty","getOwnPropertyDescriptor","getter","setter","original","loader","Instance","initIsotonicRegression","increasing","wasm","iso","yMin","yMax","clipOutOfBound","__IsotonicRegression","fit","sampleWeight","__checkFitParam","xPtr","xArrayID","yPtr","yArrayID","wPtr","wArrayID","predict","newX","newXPtr","newXArrayID","predictedXPtr","predictedXArray","reset","xThresholds","yThresholds","xMin","xMax","num","EPSILON","l1Distance","array1","array2","distance","splitFileName","lastDot","lastIndexOf","lineConfidence","bar","dot","dotConfidence","hist","histAxis","line0","background","drawHorizontalColorLegend","legendGroup","legendConfig","largestAbs","legendGradientDef","startColor","endColor","legendScale","d3","scaleLinear","approximateYAxisWidth","yScale","defaultFont","abbreviation","tempGroup","SelectedInfo","hasSelected","nodeData","boundingBox","nodeDataBuffer","computeBBox","pointData","rightPoint","reduce","rightX","rightPointID","maxX","computeBBoxBuffer","updateNodeData","updateAdditiveDataBufferFromPointDataBuffer","newAdditiveData","curPoint","pointDataBuffer","leftPointID","curLineIndex","nextPoint","pos","sx","sy","tx","ty","rightLineIndex","leftLineIndex","oriXScale","additiveDataBuffer","moveMenubar","menubar","bbox","bboxPosition","panelBboxPosition","menuBarBbox","menuWidth","menuHeight","rExtent","zoomScaleExtent","rScale","alpha","easeLinear","drawGrid","xScale","lineChartWidth","lineChartHeight","SimpleLinearRegression","trained","xSum","ySum","wSum","xAverage","yAverage","numerator","denominator","dragTimeout","redrawOriginal","bounce","animationEndFunc","svgSelect","trans","transNoBounce","selectedInfo","oriYScale","curTransform","additiveData","curPadding","bboxPadding","curYScale","redrawMonotone","isoYs","callBack","nextLeftLineIndex","drawBufferGraph","inplaceInterpolate","leftPoint","xRange","yRange","newY","stepInterpolate","steps","totalCount","nextID","ebmID","curBufferPoint","curEbmID","average","animated","paths","project","projectTriangleSide","pathD","drawLastEdit","additiveDataLastEdit","theta","pRatio","idleTimeout","idled","quitSelection","multiMenu","resetContextMenu","resetFeatureSidebar","integer","shr","shl1","shl","and","or","xor","not","transformBuffer","digestBits","rotateLeft","FF","ac","z","F","GG","G","HH","H","II","I","hexa","hexa_c","hexa_m","hexa_i","charAt","ascii","MD5","entree","ka","kb","kc","kd","padLen","bits","finish","pushCurStateToHistoryStack","description","historyStore","sidebarStore","sidebarInfo","historyLength","metrics","barData","JSON","stringify","confusionMatrixData","featureName","reviewed","historyHead","previewHistory","subscriber_queue","subscribers","new_value","run_queue","subscriber","invalidate","tooltipConfigStore","preProcessSVG","svgString","replaceAll","bindInlineSVG","subItemMode","interpolationMode","moveMode","mergeMode","setValue","controlInfo","tooltipConfig","mouseoverTimeout","prepareSubMenu","newMode","hideConfirmation","hideToolTipDuringSubMenu","switchMoveMode","show","hideAnimated","option","_hideConfirmation","componentSelect","mouseoverHandler","message","yOffset","stopPropagation","explicitOriginalTarget","curWidth","tooltipCenterX","tooltipCenterY","maxWidth","fontSize","orientation","toSwitchMoveMode","parseFloat","changeUnit","featureData","scoreRange","svgHeight","svgWidth","ebm","footerStore","footerActionStore","myContextMenu","redoStack","mounted","initialized","svgPadding","yAxisWidth","curXScale","lastSelectedInfo","selectMode","multiMenuControlInfo","increasingISO","decreasingISO","historyList","historyStoreUnsubscribe","sidebarStoreUnsubscribe","curGroup","sample","includes","setEBM","curPointData","sliceSize","setSliceData","sliceInfo","featureID","level","setEBMEditingFeature","curHistoryStoreValue","targetCommit","targetCommitIndex","lastCommit","additiveDataLastLastEdit","checkoutCommitHead","footerValue","footerValueUnsubscribe","footerActionUnsubscribe","curCommit","lastCommitIndex","lastLastCommit","effectScope","historyInfo","undoHandler","newCommit","redoHandler","bboxStrokeWidth","updateFeatureSidebar","nullifyMetrics","computeSelectedEffects","selectedBinIndexes","rd","sampleNum","getSelectedSampleNum","totalSampleNum","selectAllBins","drawFeature","tempWidth","initIsoModel","items","class","title","rectColor","legendRectWidth","drawLineLegend","content","binEdge","additive","createAdditiveData","confidenceData","curValue","curError","rightValue","rightError","createConfidenceData","createPointData","curID","histChart","lineChart","axisGroup","lineChartContent","gridGroup","confidenceGroup","lineGroup","xAxisGroup","xAxisGroupHeight","yAxisGroup","histData","histCountSum","histCount","histFrequency","histEdge","histYScale","yAxisHistGroup","updateEBM","cancelTooltip","mouseleaveHandler","modeInfo","hasUpdatedLastMetrics","selectedBinIDs","selectedXRange","pair","brushEndSelect","getPrototypeOf","brushDuring","linePathWidth","nodeStrokeWidth","zXScale","zYScale","nodeGroup","zoomed","zoomStart","zoomEnd","help","hasBeenCreated","lastCommitID","tryRestoreLastEdit","getEBMMetrics","scope","getMetrics","getMetricsOnSelectedBins","getMetricsOnSelectedSlice","transferMetricToSidebar","isClassification","accuracy","rocAuc","balancedAccuracy","confusionMatrix","rmse","mae","mape","changedBinIndexes","changedScores","updateModel","curNodeData","transfer","newBinEdges","newScores","curEBMID","setModel","setEditingFeature","isDummy","selectedHistCounts","getSelectedSampleDist","binIndexes","featurePlotData","cont","histSelectedCount","cat","baseline","baselineInit","multiMenuMoveCancelClicked","multiMenuSubItemCancelClicked","cancelFromMove","existingModes","editingFeatureName","useTimeout","dataYChange","dragged","confirm","curEditBaseline","binNum","binLeft","binRight","binRange","xs","ys","ws","showConfirmation","interpolateStyle","interpolateEqual","beforeBinNum","model","newYs","regressionInterpolate","editType","minIDIndex","maxIDIndex","minID","maxID","bars","barWidth","pointDataLastEdit","lines","selectedNodeXs","stopAnimateLine","pointDataLastLastEdit","densityHeight","labelEncoder","lastDataLastEdit","chartHeight","chartWidth","legendData","drawBarLegend","binValues","binLabel","scalePoint","scatterPlot","scatterPlotContent","barGroup","scatterGroup","topMid","btmMid","pathStr","createDotConfidencePath","originalFront","histWidth","editingIDs","grayOutConfidenceLine","drawGridBar","chartType","drawFeatureBar","type1","type2","contBinLabel","binLabel1","catBinLabel","binLabel2","contName","name1","catName","name2","contHistEdge","histEdge1","catHistEdge","histEdge2","contHistCount","histCount1","catHistCount","histCount2","contDim","catDim","catBinName","catHistEdgeName","preProcessData","legendHeight","curValues","sAdditive","sError","tAdditive","tError","endI","maxAbsScore","curArray","colorScale","barChart","barChartContent","zoomedBar","newArray","transpose2dArray","curHeight","longBinLabel","shortBinLabel","longName","shortName","longHistEdge","shortHistEdge","longHistCount","shortHistCount","longDim","shortDim","longBinName","shortBinName","longHistEdgeName","shortHistEdgeName","longLabel","longLabelName","shortLabel","shortLabelName","barHeight","textHeight","regressionScales","sliceSelect","tn","fp","tp","barDataRegression","svgInstance","scrollBarWidth","offsetWidth","loadingBar","copyMetricData","fromIndex","toIndex","tabClicked","tab","opt","selectedIndex","updateData","total","selectElement","sliceOptions","optionGroup","optGroup","levelName","globalBarData","globalConfusionMatrixData","selectedTab","lineWidth","groupData","widthScale","rectOrder","drawClassificationBarChart","matrixGroup","middleGap","rectHeight","explanationHeight","explanationWidth","sRectWidth","lRectWidth","drawRectGroup","topData","botData","matSubGroup","curText","contentGroup","drawConfusionMatrix","metricLegendGroup","rmseText","maeText","mapeText","curMaxError","drawRegressionBarChart","dataset","dataType","inputElem","isDragging","dragElement","errorMessage","validateFile","isGamchangerFile","fr","FileReader","onload","onerror","readAsText","readJSON","isValid","featureNames","featureTypes","samples","labels","intercept","features","modelData","sampleData","click","dataTransfer","getAsFile","files","loadedData","cubicOut","flip","featureInitialized","waitingToDrawDIV","svgCatPadding","svgContPadding","catBarWidth","sortedContFeatures","sortedCatFeatures","legendSVG","leftGroup","rightGroup","labelWidth","initLegend","titleHeight","lowContent","midContent","curDensity","expectedBarWidth","curDensitySelected","yScaleBar","initContFeature","topContent","curData","edge","label","density","selectedCount","selectedDensity","yScaleSelected","initCatFeature","tempSortedContFeatures","tempSortedCatFeatures","selectedSampleCount","totalSampleCount","needToResort","globalDensity","distanceScore","updateContFeature","updateCatFeature","fly","target_opacity","od","slide","padding_top","paddingTop","padding_bottom","paddingBottom","margin_top","marginTop","margin_bottom","marginBottom","border_top_width","borderTopWidth","border_bottom_width","borderBottomWidth","iterations","needToBindSVGs","historyDIV","checkboxClicked","previewClicked","historyLastHead","deleteClicked","isLastCommit","decreasing","getHours","getMinutes","padStart","getMonth","getDate","getFullYear","clipboard","writeText","history","sampleDataInitialized","updateSelectedTab","newTab","utf16","fatal","wtf16","off","instantiateSync","Console","_exports","wasmImports","consoleBindings","_log","wasmExports","getFn","fnIndex","initEBM","_featureData","_sampleData","_editingFeature","_isClassification","__createStringArray","strings","stringPtrs","stringArrayPtr","StringArray_ID","__unpin2DArray","array2d","__unpin3DArray","array3d","sampleDataNameMap","editingFeatureIndex","editingFeature","featureDataNameMap","featureNamesPtr","featureTypesPtr","binEdges","scores","histBinEdges","curBinEdge","curHistBinEdge","curName","curIndex","curScore","curBinEdgePtr","Float64Array_ID","curScorePtr","curHistBinEdgesPtr","binEdgesPtr","Float64Array2D_ID","scoresPtr","histBinEdgesPtr","interactionIndexes","interactionScores","interactionBinEdges","binEdge1Ptr","binEdge2Ptr","index1","index2","curIndexesPtr","Int32Array_ID","curBinEdgesPtr","curScore2D","curScore2DPtr","interactionIndexesPtr","Int32Array2D_ID","interactionBinEdgesPtr","Float64Array3D_ID","interactionScoresPtr","samplesPtr","labelsPtr","__EBM","printData","namePtr","printName","getProb","getPrediction","getScore","predLabels","binIndexesPtr","histBinCounts","getHistBinCounts","featureIndex","changedBinIndexesPtr","changedScoresPtr","newBinEdgesPtr","newScoresPtr","result3D","result3DPtr","result2D","result2DPtr","result1D","result1DPtr","featureLevel","initDummyEBM","rocCurve","getBinEdgeScore","sidebarWidth","modelName","sampleName","inNotebook","changer","featureSelect","selectedFeature","updateChanger","featureSelectList","prCurve","initSidebar","initGAMView","headFeatureName","findIndex","resizeFeatureSelect","isClassifier","categorical","interaction","importance","localeCompare","groupName","targetFeatureIndex","tempSelectedFeature","lastEditName","selectElementTargetIndex","testDataHistCount","curOptionGroup","initDataLoaded","loadedModelData","loadedSampleData","footerActionTriggered","allReviewed","fileName","toLocaleDateString","anchorSelect","dataStr","encodeURIComponent","dlAnchorElem","downloadJSON","alert","hiddenSelect","selectWidth","undoCallback","redoCallback","selectAllCallback","initData","selectModeSwitched","selectedFeatureID","curFeatureData","twoTypes","currentShow","tooltip","easeQuadInOut","tag","firstScriptTag","getElementsByTagName","player","videoId","playerId","onPlayerReady","mute","YT","Player","events","onReady","startSecond","seekTo","playVideo","onYouTubeIframeAPIReady","Event","cleanup","end_time","element_src","url","math1","math2","math5","math6","math3","math7","math4","math8","math9","href","play","currentPlayer","iowa","lc","adult","my","body"],"mappings":"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"}